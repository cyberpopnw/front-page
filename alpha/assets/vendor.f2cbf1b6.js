var lg=Object.defineProperty;var Ru=Object.getOwnPropertySymbols;var ug=Object.prototype.hasOwnProperty,cg=Object.prototype.propertyIsEnumerable;var wu=(e,t,r)=>t in e?lg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ou=(e,t)=>{for(var r in t||(t={}))ug.call(t,r)&&wu(e,r,t[r]);if(Ru)for(var r of Ru(t))cg.call(t,r)&&wu(e,r,t[r]);return e};function $e(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const Ha={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},fg={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"},dg="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",Iu=$e(dg),Du=2;function Pu(e,t=0,r=e.length){let n=e.split(/(\r?\n)/);const i=n.filter((u,l)=>l%2==1);n=n.filter((u,l)=>l%2==0);let s=0;const a=[];for(let u=0;u<n.length;u++)if(s+=n[u].length+(i[u]&&i[u].length||0),s>=t){for(let l=u-Du;l<=u+Du||r>s;l++){if(l<0||l>=n.length)continue;const o=l+1;a.push(`${o}${" ".repeat(Math.max(3-String(o).length,0))}|  ${n[l]}`);const h=n[l].length,p=i[l]&&i[l].length||0;if(l===u){const g=t-(s-(h+p)),_=Math.max(1,r>s?h-g:r-t);a.push("   |  "+" ".repeat(g)+"^".repeat(_))}else if(l>u){if(r>s){const g=Math.max(Math.min(r-s,h),1);a.push("   |  "+"^".repeat(g))}s+=h+p}}break}return a.join(`
`)}const xu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fu=$e(xu),hg=$e(xu+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function Va(e){return!!e||e===""}const pg=/[>/="'\u0009\u000a\u000c\u0020]/,Ga={};function gg(e){if(Ga.hasOwnProperty(e))return Ga[e];const t=pg.test(e);return t&&console.error(`unsafe attribute name: ${e}`),Ga[e]=!t}const mg={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Mu=$e("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),vg=$e("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),yg=$e("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan");function gt(e){if(ce(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=ve(n)?Ka(n):gt(n);if(i)for(const s in i)t[s]=i[s]}return t}else{if(ve(e))return e;if(De(e))return e}}const Eg=/;(?![^(]*\))/g,bg=/:(.+)/;function Ka(e){const t={};return e.split(Eg).forEach(r=>{if(r){const n=r.split(bg);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Tg(e){let t="";if(!e||ve(e))return t;for(const r in e){const n=e[r],i=r.startsWith("--")?r:vt(r);(ve(n)||typeof n=="number"&&Mu(i))&&(t+=`${i}:${n};`)}return t}function mt(e){let t="";if(ve(e))t=e;else if(ce(e))for(let r=0;r<e.length;r++){const n=mt(e[r]);n&&(t+=n+" ")}else if(De(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Nu(e){if(!e)return null;let{class:t,style:r}=e;return t&&!ve(t)&&(e.class=mt(t)),r&&(e.style=gt(r)),e}const Sg="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",_g="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Lg="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",Bu=$e(Sg),Uu=$e(_g),ju=$e(Lg),kg=/["'&<>]/;function Ag(e){const t=""+e,r=kg.exec(t);if(!r)return t;let n="",i,s,a=0;for(s=r.index;s<t.length;s++){switch(t.charCodeAt(s)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}a!==s&&(n+=t.slice(a,s)),a=s+1,n+=i}return a!==s?n+t.slice(a,s):n}const Cg=/^-?>|<!--|-->|--!>|<!-$/g;function Rg(e){return e.replace(Cg,"")}function wg(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=nr(e[n],t[n]);return r}function nr(e,t){if(e===t)return!0;let r=Wa(e),n=Wa(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=ce(e),n=ce(t),r||n)return r&&n?wg(e,t):!1;if(r=De(e),n=De(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const a in e){const u=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(u&&!l||!u&&l||!nr(e[a],t[a]))return!1}}return String(e)===String(t)}function ni(e,t){return e.findIndex(r=>nr(r,t))}const Ne=e=>e==null?"":ce(e)||De(e)&&(e.toString===qa||!ge(e.toString))?JSON.stringify(e,Hu,2):String(e),Hu=(e,t)=>t&&t.__v_isRef?Hu(e,t.value):Vr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:gr(t)?{[`Set(${t.size})`]:[...t.values()]}:De(t)&&!ce(t)&&!Ya(t)?String(t):t,Ce={},Hr=[],tt=()=>{},ii=()=>!1,Og=/^on[^a-z]/,pr=e=>Og.test(e),Zi=e=>e.startsWith("onUpdate:"),Re=Object.assign,$a=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Ig=Object.prototype.hasOwnProperty,ke=(e,t)=>Ig.call(e,t),ce=Array.isArray,Vr=e=>si(e)==="[object Map]",gr=e=>si(e)==="[object Set]",Wa=e=>e instanceof Date,ge=e=>typeof e=="function",ve=e=>typeof e=="string",Gr=e=>typeof e=="symbol",De=e=>e!==null&&typeof e=="object",es=e=>De(e)&&ge(e.then)&&ge(e.catch),qa=Object.prototype.toString,si=e=>qa.call(e),Vu=e=>si(e).slice(8,-1),Ya=e=>si(e)==="[object Object]",ts=e=>ve(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,mr=$e(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rs=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Dg=/-(\w)/g,Ye=rs(e=>e.replace(Dg,(t,r)=>r?r.toUpperCase():"")),Pg=/\B([A-Z])/g,vt=rs(e=>e.replace(Pg,"-$1").toLowerCase()),vr=rs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kr=rs(e=>e?`on${vr(e)}`:""),mn=(e,t)=>!Object.is(e,t),$r=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},ai=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},ir=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Gu;const Ku=()=>Gu||(Gu=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});var xg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",EMPTY_ARR:Hr,EMPTY_OBJ:Ce,NO:ii,NOOP:tt,PatchFlagNames:Ha,camelize:Ye,capitalize:vr,def:ai,escapeHtml:Ag,escapeHtmlComment:Rg,extend:Re,generateCodeFrame:Pu,getGlobalThis:Ku,hasChanged:mn,hasOwn:ke,hyphenate:vt,includeBooleanAttr:Va,invokeArrayFns:$r,isArray:ce,isBooleanAttr:hg,isDate:Wa,isFunction:ge,isGloballyWhitelisted:Iu,isHTMLTag:Bu,isIntegerKey:ts,isKnownHtmlAttr:vg,isKnownSvgAttr:yg,isMap:Vr,isModelListener:Zi,isNoUnitNumericStyleProp:Mu,isObject:De,isOn:pr,isPlainObject:Ya,isPromise:es,isReservedProp:mr,isSSRSafeAttrName:gg,isSVGTag:Uu,isSet:gr,isSpecialBooleanAttr:Fu,isString:ve,isSymbol:Gr,isVoidTag:ju,looseEqual:nr,looseIndexOf:ni,makeMap:$e,normalizeClass:mt,normalizeProps:Nu,normalizeStyle:gt,objectToString:qa,parseStringStyle:Ka,propsToAttrMap:mg,remove:$a,slotFlagsText:fg,stringifyStyle:Tg,toDisplayString:Ne,toHandlerKey:Kr,toNumber:ir,toRawType:Vu,toTypeString:si});let Wt;const ns=[];class za{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Wt&&(this.parent=Wt,this.index=(Wt.scopes||(Wt.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(ns.push(this),Wt=this)}off(){this.active&&(ns.pop(),Wt=ns[ns.length-1])}stop(t){if(this.active){if(this.effects.forEach(r=>r.stop()),this.cleanups.forEach(r=>r()),this.scopes&&this.scopes.forEach(r=>r.stop(!0)),this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function Fg(e){return new za(e)}function $u(e,t){t=t||Wt,t&&t.active&&t.effects.push(e)}function Mg(){return Wt}function Ng(e){Wt&&Wt.cleanups.push(e)}const Xa=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Wu=e=>(e.w&yr)>0,qu=e=>(e.n&yr)>0,Bg=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=yr},Ug=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];Wu(i)&&!qu(i)?i.delete(e):t[r++]=i,i.w&=~yr,i.n&=~yr}t.length=r}},Ja=new WeakMap;let oi=0,yr=1;const Qa=30,li=[];let Wr;const qr=Symbol(""),Za=Symbol("");class ui{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],$u(this,n)}run(){if(!this.active)return this.fn();if(!li.includes(this))try{return li.push(Wr=this),Vg(),yr=1<<++oi,oi<=Qa?Bg(this):Yu(this),this.fn()}finally{oi<=Qa&&Ug(this),yr=1<<--oi,Er(),li.pop();const t=li.length;Wr=t>0?li[t-1]:void 0}}stop(){this.active&&(Yu(this),this.onStop&&this.onStop(),this.active=!1)}}function Yu(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}function jg(e,t){e.effect&&(e=e.effect.fn);const r=new ui(e);t&&(Re(r,t),t.scope&&$u(r,t.scope)),(!t||!t.lazy)&&r.run();const n=r.run.bind(r);return n.effect=r,n}function Hg(e){e.effect.stop()}let vn=!0;const eo=[];function Yr(){eo.push(vn),vn=!1}function Vg(){eo.push(vn),vn=!0}function Er(){const e=eo.pop();vn=e===void 0?!0:e}function yt(e,t,r){if(!zu())return;let n=Ja.get(e);n||Ja.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=Xa()),Xu(i)}function zu(){return vn&&Wr!==void 0}function Xu(e,t){let r=!1;oi<=Qa?qu(e)||(e.n|=yr,r=!Wu(e)):r=!e.has(Wr),r&&(e.add(Wr),Wr.deps.push(e))}function sr(e,t,r,n,i,s){const a=Ja.get(e);if(!a)return;let u=[];if(t==="clear")u=[...a.values()];else if(r==="length"&&ce(e))a.forEach((l,o)=>{(o==="length"||o>=n)&&u.push(l)});else switch(r!==void 0&&u.push(a.get(r)),t){case"add":ce(e)?ts(r)&&u.push(a.get("length")):(u.push(a.get(qr)),Vr(e)&&u.push(a.get(Za)));break;case"delete":ce(e)||(u.push(a.get(qr)),Vr(e)&&u.push(a.get(Za)));break;case"set":Vr(e)&&u.push(a.get(qr));break}if(u.length===1)u[0]&&to(u[0]);else{const l=[];for(const o of u)o&&l.push(...o);to(Xa(l))}}function to(e,t){for(const r of ce(e)?e:[...e])(r!==Wr||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const Gg=$e("__proto__,__v_isRef,__isVue"),Ju=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Gr)),Kg=is(),$g=is(!1,!0),Wg=is(!0),qg=is(!0,!0),Qu=Yg();function Yg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=Le(this);for(let s=0,a=this.length;s<a;s++)yt(n,"get",s+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(Le)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Yr();const n=Le(this)[t].apply(this,r);return Er(),n}}),e}function is(e=!1,t=!1){return function(n,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_raw"&&s===(e?t?uc:lc:t?oc:ac).get(n))return n;const a=ce(n);if(!e&&a&&ke(Qu,i))return Reflect.get(Qu,i,s);const u=Reflect.get(n,i,s);return(Gr(i)?Ju.has(i):Gg(i))||(e||yt(n,"get",i),t)?u:ze(u)?!a||!ts(i)?u.value:u:De(u)?e?no(u):Mt(u):u}}const zg=Zu(),Xg=Zu(!0);function Zu(e=!1){return function(r,n,i,s){let a=r[n];if(!e&&!hs(i)&&(i=Le(i),a=Le(a),!ce(r)&&ze(a)&&!ze(i)))return a.value=i,!0;const u=ce(r)&&ts(n)?Number(n)<r.length:ke(r,n),l=Reflect.set(r,n,i,s);return r===Le(s)&&(u?mn(i,a)&&sr(r,"set",n,i):sr(r,"add",n,i)),l}}function Jg(e,t){const r=ke(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&sr(e,"delete",t,void 0),n}function Qg(e,t){const r=Reflect.has(e,t);return(!Gr(t)||!Ju.has(t))&&yt(e,"has",t),r}function Zg(e){return yt(e,"iterate",ce(e)?"length":qr),Reflect.ownKeys(e)}const ec={get:Kg,set:zg,deleteProperty:Jg,has:Qg,ownKeys:Zg},tc={get:Wg,set(e,t){return!0},deleteProperty(e,t){return!0}},em=Re({},ec,{get:$g,set:Xg}),tm=Re({},tc,{get:qg}),ro=e=>e,ss=e=>Reflect.getPrototypeOf(e);function as(e,t,r=!1,n=!1){e=e.__v_raw;const i=Le(e),s=Le(t);t!==s&&!r&&yt(i,"get",t),!r&&yt(i,"get",s);const{has:a}=ss(i),u=n?ro:r?ao:ci;if(a.call(i,t))return u(e.get(t));if(a.call(i,s))return u(e.get(s));e!==i&&e.get(t)}function os(e,t=!1){const r=this.__v_raw,n=Le(r),i=Le(e);return e!==i&&!t&&yt(n,"has",e),!t&&yt(n,"has",i),e===i?r.has(e):r.has(e)||r.has(i)}function ls(e,t=!1){return e=e.__v_raw,!t&&yt(Le(e),"iterate",qr),Reflect.get(e,"size",e)}function rc(e){e=Le(e);const t=Le(this);return ss(t).has.call(t,e)||(t.add(e),sr(t,"add",e,e)),this}function nc(e,t){t=Le(t);const r=Le(this),{has:n,get:i}=ss(r);let s=n.call(r,e);s||(e=Le(e),s=n.call(r,e));const a=i.call(r,e);return r.set(e,t),s?mn(t,a)&&sr(r,"set",e,t):sr(r,"add",e,t),this}function ic(e){const t=Le(this),{has:r,get:n}=ss(t);let i=r.call(t,e);i||(e=Le(e),i=r.call(t,e)),n&&n.call(t,e);const s=t.delete(e);return i&&sr(t,"delete",e,void 0),s}function sc(){const e=Le(this),t=e.size!==0,r=e.clear();return t&&sr(e,"clear",void 0,void 0),r}function us(e,t){return function(n,i){const s=this,a=s.__v_raw,u=Le(a),l=t?ro:e?ao:ci;return!e&&yt(u,"iterate",qr),a.forEach((o,h)=>n.call(i,l(o),l(h),s))}}function cs(e,t,r){return function(...n){const i=this.__v_raw,s=Le(i),a=Vr(s),u=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,o=i[e](...n),h=r?ro:t?ao:ci;return!t&&yt(s,"iterate",l?Za:qr),{next(){const{value:p,done:g}=o.next();return g?{value:p,done:g}:{value:u?[h(p[0]),h(p[1])]:h(p),done:g}},[Symbol.iterator](){return this}}}}function br(e){return function(...t){return e==="delete"?!1:this}}function rm(){const e={get(s){return as(this,s)},get size(){return ls(this)},has:os,add:rc,set:nc,delete:ic,clear:sc,forEach:us(!1,!1)},t={get(s){return as(this,s,!1,!0)},get size(){return ls(this)},has:os,add:rc,set:nc,delete:ic,clear:sc,forEach:us(!1,!0)},r={get(s){return as(this,s,!0)},get size(){return ls(this,!0)},has(s){return os.call(this,s,!0)},add:br("add"),set:br("set"),delete:br("delete"),clear:br("clear"),forEach:us(!0,!1)},n={get(s){return as(this,s,!0,!0)},get size(){return ls(this,!0)},has(s){return os.call(this,s,!0)},add:br("add"),set:br("set"),delete:br("delete"),clear:br("clear"),forEach:us(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=cs(s,!1,!1),r[s]=cs(s,!0,!1),t[s]=cs(s,!1,!0),n[s]=cs(s,!0,!0)}),[e,r,t,n]}const[nm,im,sm,am]=rm();function fs(e,t){const r=t?e?am:sm:e?im:nm;return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(ke(r,i)&&i in n?r:n,i,s)}const om={get:fs(!1,!1)},lm={get:fs(!1,!0)},um={get:fs(!0,!1)},cm={get:fs(!0,!0)},ac=new WeakMap,oc=new WeakMap,lc=new WeakMap,uc=new WeakMap;function fm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dm(e){return e.__v_skip||!Object.isExtensible(e)?0:fm(Vu(e))}function Mt(e){return e&&e.__v_isReadonly?e:ds(e,!1,ec,om,ac)}function cc(e){return ds(e,!1,em,lm,oc)}function no(e){return ds(e,!0,tc,um,lc)}function hm(e){return ds(e,!0,tm,cm,uc)}function ds(e,t,r,n,i){if(!De(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=dm(e);if(a===0)return e;const u=new Proxy(e,a===2?n:r);return i.set(e,u),u}function zr(e){return hs(e)?zr(e.__v_raw):!!(e&&e.__v_isReactive)}function hs(e){return!!(e&&e.__v_isReadonly)}function io(e){return zr(e)||hs(e)}function Le(e){const t=e&&e.__v_raw;return t?Le(t):e}function so(e){return ai(e,"__v_skip",!0),e}const ci=e=>De(e)?Mt(e):e,ao=e=>De(e)?no(e):e;function oo(e){zu()&&(e=Le(e),e.dep||(e.dep=Xa()),Xu(e.dep))}function ps(e,t){e=Le(e),e.dep&&to(e.dep)}function ze(e){return Boolean(e&&e.__v_isRef===!0)}function Et(e){return dc(e,!1)}function fc(e){return dc(e,!0)}function dc(e,t){return ze(e)?e:new pm(e,t)}class pm{constructor(t,r){this._shallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Le(t),this._value=r?t:ci(t)}get value(){return oo(this),this._value}set value(t){t=this._shallow?t:Le(t),mn(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:ci(t),ps(this))}}function gm(e){ps(e)}function se(e){return ze(e)?e.value:e}const mm={get:(e,t,r)=>se(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return ze(i)&&!ze(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function lo(e){return zr(e)?e:new Proxy(e,mm)}class vm{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:n}=t(()=>oo(this),()=>ps(this));this._get=r,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function ym(e){return new vm(e)}function Em(e){const t=ce(e)?new Array(e.length):{};for(const r in e)t[r]=hc(e,r);return t}class bm{constructor(t,r){this._object=t,this._key=r,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function hc(e,t){const r=e[t];return ze(r)?r:new bm(e,t)}class Tm{constructor(t,r,n){this._setter=r,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new ui(t,()=>{this._dirty||(this._dirty=!0,ps(this))}),this.__v_isReadonly=n}get value(){const t=Le(this);return oo(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function We(e,t){let r,n;const i=ge(e);return i?(r=e,n=tt):(r=e.get,n=e.set),new Tm(r,n,i||!n)}Promise.resolve();let yn,gs=[];function pc(e,t){var r,n;yn=e,yn?(yn.enabled=!0,gs.forEach(({event:i,args:s})=>yn.emit(i,...s)),gs=[]):typeof window!="undefined"&&window.HTMLElement&&!((n=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||n===void 0?void 0:n.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{pc(s,t)}),setTimeout(()=>{yn||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,gs=[])},3e3)):gs=[]}function Sm(e,t,...r){const n=e.vnode.props||Ce;let i=r;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in n){const h=`${a==="modelValue"?"model":a}Modifiers`,{number:p,trim:g}=n[h]||Ce;g?i=r.map(_=>_.trim()):p&&(i=r.map(ir))}let u,l=n[u=Kr(t)]||n[u=Kr(Ye(t))];!l&&s&&(l=n[u=Kr(vt(t))]),l&&Lt(l,e,6,i);const o=n[u+"Once"];if(o){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,Lt(o,e,6,i)}}function gc(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let a={},u=!1;if(!ge(e)){const l=o=>{const h=gc(o,t,!0);h&&(u=!0,Re(a,h))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!u?(n.set(e,null),null):(ce(s)?s.forEach(l=>a[l]=null):Re(a,s),n.set(e,a),a)}function uo(e,t){return!e||!pr(t)?!1:(t=t.slice(2).replace(/Once$/,""),ke(e,t[0].toLowerCase()+t.slice(1))||ke(e,vt(t))||ke(e,t))}let bt=null,ms=null;function fi(e){const t=bt;return bt=e,ms=e&&e.type.__scopeId||null,t}function Tr(e){ms=e}function Sr(){ms=null}const _m=e=>En;function En(e,t=bt,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&Ro(-1);const s=fi(t),a=e(...i);return fi(s),n._d&&Ro(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function vs(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:s,propsOptions:[a],slots:u,attrs:l,emit:o,render:h,renderCache:p,data:g,setupState:_,ctx:A,inheritAttrs:b}=e;let c,d;const f=fi(e);try{if(r.shapeFlag&4){const m=i||n;c=_t(h.call(m,m,p,s,_,g,A)),d=l}else{const m=t;c=_t(m.length>1?m(s,{attrs:l,slots:u,emit:o}):m(s,null)),d=t.props?l:km(l)}}catch(m){yi.length=0,en(m,e,1),c=he(nt)}let v=c;if(d&&b!==!1){const m=Object.keys(d),{shapeFlag:y}=v;m.length&&y&(1|6)&&(a&&m.some(Zi)&&(d=Am(d,a)),v=kr(v,d))}return r.dirs&&(v.dirs=v.dirs?v.dirs.concat(r.dirs):r.dirs),r.transition&&(v.transition=r.transition),c=v,fi(f),c}function Lm(e){let t;for(let r=0;r<e.length;r++){const n=e[r];if(Lr(n)){if(n.type!==nt||n.children==="v-if"){if(t)return;t=n}}else return}return t}const km=e=>{let t;for(const r in e)(r==="class"||r==="style"||pr(r))&&((t||(t={}))[r]=e[r]);return t},Am=(e,t)=>{const r={};for(const n in e)(!Zi(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function Cm(e,t,r){const{props:n,children:i,component:s}=e,{props:a,children:u,patchFlag:l}=t,o=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?mc(n,a,o):!!a;if(l&8){const h=t.dynamicProps;for(let p=0;p<h.length;p++){const g=h[p];if(a[g]!==n[g]&&!uo(o,g))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:n===a?!1:n?a?mc(n,a,o):!0:!!a;return!1}function mc(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!uo(r,s))return!0}return!1}function co({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const Rm=e=>e.__isSuspense,wm={name:"Suspense",__isSuspense:!0,process(e,t,r,n,i,s,a,u,l,o){e==null?Im(t,r,n,i,s,a,u,l,o):Dm(e,t,r,n,i,a,u,l,o)},hydrate:Pm,create:fo,normalize:xm},Om=wm;function di(e,t){const r=e.props&&e.props[t];ge(r)&&r()}function Im(e,t,r,n,i,s,a,u,l){const{p:o,o:{createElement:h}}=l,p=h("div"),g=e.suspense=fo(e,i,n,t,p,r,s,a,u,l);o(null,g.pendingBranch=e.ssContent,p,null,n,g,s,a),g.deps>0?(di(e,"onPending"),di(e,"onFallback"),o(null,e.ssFallback,t,r,n,null,s,a),bn(g,e.ssFallback)):g.resolve()}function Dm(e,t,r,n,i,s,a,u,{p:l,um:o,o:{createElement:h}}){const p=t.suspense=e.suspense;p.vnode=t,t.el=e.el;const g=t.ssContent,_=t.ssFallback,{activeBranch:A,pendingBranch:b,isInFallback:c,isHydrating:d}=p;if(b)p.pendingBranch=g,zt(g,b)?(l(b,g,p.hiddenContainer,null,i,p,s,a,u),p.deps<=0?p.resolve():c&&(l(A,_,r,n,i,null,s,a,u),bn(p,_))):(p.pendingId++,d?(p.isHydrating=!1,p.activeBranch=b):o(b,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=h("div"),c?(l(null,g,p.hiddenContainer,null,i,p,s,a,u),p.deps<=0?p.resolve():(l(A,_,r,n,i,null,s,a,u),bn(p,_))):A&&zt(g,A)?(l(A,g,r,n,i,p,s,a,u),p.resolve(!0)):(l(null,g,p.hiddenContainer,null,i,p,s,a,u),p.deps<=0&&p.resolve()));else if(A&&zt(g,A))l(A,g,r,n,i,p,s,a,u),bn(p,g);else if(di(t,"onPending"),p.pendingBranch=g,p.pendingId++,l(null,g,p.hiddenContainer,null,i,p,s,a,u),p.deps<=0)p.resolve();else{const{timeout:f,pendingId:v}=p;f>0?setTimeout(()=>{p.pendingId===v&&p.fallback(_)},f):f===0&&p.fallback(_)}}function fo(e,t,r,n,i,s,a,u,l,o,h=!1){const{p,m:g,um:_,n:A,o:{parentNode:b,remove:c}}=o,d=ir(e.props&&e.props.timeout),f={vnode:e,parent:t,parentComponent:r,isSVG:a,container:n,hiddenContainer:i,anchor:s,deps:0,pendingId:0,timeout:typeof d=="number"?d:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:h,isUnmounted:!1,effects:[],resolve(v=!1){const{vnode:m,activeBranch:y,pendingBranch:T,pendingId:L,effects:C,parentComponent:R,container:E}=f;if(f.isHydrating)f.isHydrating=!1;else if(!v){const w=y&&T.transition&&T.transition.mode==="out-in";w&&(y.transition.afterLeave=()=>{L===f.pendingId&&g(T,E,O,0)});let{anchor:O}=f;y&&(O=A(y),_(y,R,f,!0)),w||g(T,E,O,0)}bn(f,T),f.pendingBranch=null,f.isInFallback=!1;let S=f.parent,k=!1;for(;S;){if(S.pendingBranch){S.effects.push(...C),k=!0;break}S=S.parent}k||jo(C),f.effects=[],di(m,"onResolve")},fallback(v){if(!f.pendingBranch)return;const{vnode:m,activeBranch:y,parentComponent:T,container:L,isSVG:C}=f;di(m,"onFallback");const R=A(y),E=()=>{!f.isInFallback||(p(null,v,L,R,T,null,C,u,l),bn(f,v))},S=v.transition&&v.transition.mode==="out-in";S&&(y.transition.afterLeave=E),f.isInFallback=!0,_(y,T,null,!0),S||E()},move(v,m,y){f.activeBranch&&g(f.activeBranch,v,m,y),f.container=v},next(){return f.activeBranch&&A(f.activeBranch)},registerDep(v,m){const y=!!f.pendingBranch;y&&f.deps++;const T=v.vnode.el;v.asyncDep.catch(L=>{en(L,v,0)}).then(L=>{if(v.isUnmounted||f.isUnmounted||f.pendingId!==v.suspenseId)return;v.asyncResolved=!0;const{vnode:C}=v;Po(v,L,!1),T&&(C.el=T);const R=!T&&v.subTree.el;m(v,C,b(T||v.subTree.el),T?null:A(v.subTree),f,a,l),R&&c(R),co(v,C.el),y&&--f.deps==0&&f.resolve()})},unmount(v,m){f.isUnmounted=!0,f.activeBranch&&_(f.activeBranch,r,v,m),f.pendingBranch&&_(f.pendingBranch,r,v,m)}};return f}function Pm(e,t,r,n,i,s,a,u,l){const o=t.suspense=fo(t,n,r,e.parentNode,document.createElement("div"),null,i,s,a,u,!0),h=l(e,o.pendingBranch=t.ssContent,r,o,s,a);return o.deps===0&&o.resolve(),h}function xm(e){const{shapeFlag:t,children:r}=e,n=t&32;e.ssContent=vc(n?r.default:r),e.ssFallback=n?vc(r.fallback):he(nt)}function vc(e){let t;if(ge(e)){const r=Ln&&e._c;r&&(e._d=!1,_e()),e=e(),r&&(e._d=!0,t=Yt,Xc())}return ce(e)&&(e=Lm(e)),e=_t(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function yc(e,t){t&&t.pendingBranch?ce(e)?t.effects.push(...e):t.effects.push(e):jo(e)}function bn(e,t){e.activeBranch=t;const{vnode:r,parentComponent:n}=e,i=r.el=t.el;n&&n.subTree===r&&(n.vnode.el=i,co(n,i))}function hi(e,t){if(Ve){let r=Ve.provides;const n=Ve.parent&&Ve.parent.provides;n===r&&(r=Ve.provides=Object.create(n)),r[e]=t}}function Tt(e,t,r=!1){const n=Ve||bt;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&ge(t)?t.call(n.proxy):t}}function ho(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jr(()=>{e.isMounted=!0}),Ts(()=>{e.isUnmounting=!0}),e}const Dt=[Function,Array],Fm={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dt,onEnter:Dt,onAfterEnter:Dt,onEnterCancelled:Dt,onBeforeLeave:Dt,onLeave:Dt,onAfterLeave:Dt,onLeaveCancelled:Dt,onBeforeAppear:Dt,onAppear:Dt,onAfterAppear:Dt,onAppearCancelled:Dt},setup(e,{slots:t}){const r=or(),n=ho();let i;return()=>{const s=t.default&&ys(t.default(),!0);if(!s||!s.length)return;const a=Le(e),{mode:u}=a,l=s[0];if(n.isLeaving)return go(l);const o=bc(l);if(!o)return go(l);const h=Tn(o,a,n,r);Xr(o,h);const p=r.subTree,g=p&&bc(p);let _=!1;const{getTransitionKey:A}=o.type;if(A){const b=A();i===void 0?i=b:b!==i&&(i=b,_=!0)}if(g&&g.type!==nt&&(!zt(o,g)||_)){const b=Tn(g,a,n,r);if(Xr(g,b),u==="out-in")return n.isLeaving=!0,b.afterLeave=()=>{n.isLeaving=!1,r.update()},go(l);u==="in-out"&&o.type!==nt&&(b.delayLeave=(c,d,f)=>{const v=Ec(n,g);v[String(g.key)]=g,c._leaveCb=()=>{d(),c._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=f})}return l}}},po=Fm;function Ec(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function Tn(e,t,r,n){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:o,onEnterCancelled:h,onBeforeLeave:p,onLeave:g,onAfterLeave:_,onLeaveCancelled:A,onBeforeAppear:b,onAppear:c,onAfterAppear:d,onAppearCancelled:f}=t,v=String(e.key),m=Ec(r,e),y=(L,C)=>{L&&Lt(L,n,9,C)},T={mode:s,persisted:a,beforeEnter(L){let C=u;if(!r.isMounted)if(i)C=b||u;else return;L._leaveCb&&L._leaveCb(!0);const R=m[v];R&&zt(e,R)&&R.el._leaveCb&&R.el._leaveCb(),y(C,[L])},enter(L){let C=l,R=o,E=h;if(!r.isMounted)if(i)C=c||l,R=d||o,E=f||h;else return;let S=!1;const k=L._enterCb=w=>{S||(S=!0,w?y(E,[L]):y(R,[L]),T.delayedLeave&&T.delayedLeave(),L._enterCb=void 0)};C?(C(L,k),C.length<=1&&k()):k()},leave(L,C){const R=String(e.key);if(L._enterCb&&L._enterCb(!0),r.isUnmounting)return C();y(p,[L]);let E=!1;const S=L._leaveCb=k=>{E||(E=!0,C(),k?y(A,[L]):y(_,[L]),L._leaveCb=void 0,m[R]===e&&delete m[R])};m[R]=e,g?(g(L,S),g.length<=1&&S()):S()},clone(L){return Tn(L,t,r,n)}};return T}function go(e){if(gi(e))return e=kr(e),e.children=null,e}function bc(e){return gi(e)?e.children?e.children[0]:void 0:e}function Xr(e,t){e.shapeFlag&6&&e.component?Xr(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ys(e,t=!1){let r=[],n=0;for(let i=0;i<e.length;i++){const s=e[i];s.type===Fe?(s.patchFlag&128&&n++,r=r.concat(ys(s.children,t))):(t||s.type!==nt)&&r.push(s)}if(n>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Nt(e){return ge(e)?{setup:e,name:e.name}:e}const pi=e=>!!e.type.__asyncLoader;function Mm(e){ge(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:n,delay:i=200,timeout:s,suspensible:a=!0,onError:u}=e;let l=null,o,h=0;const p=()=>(h++,l=null,g()),g=()=>{let _;return l||(_=l=t().catch(A=>{if(A=A instanceof Error?A:new Error(String(A)),u)return new Promise((b,c)=>{u(A,()=>b(p()),()=>c(A),h+1)});throw A}).then(A=>_!==l&&l?l:(A&&(A.__esModule||A[Symbol.toStringTag]==="Module")&&(A=A.default),o=A,A)))};return Nt({name:"AsyncComponentWrapper",__asyncLoader:g,get __asyncResolved(){return o},setup(){const _=Ve;if(o)return()=>mo(o,_);const A=f=>{l=null,en(f,_,13,!n)};if(a&&_.suspense||Ei)return g().then(f=>()=>mo(f,_)).catch(f=>(A(f),()=>n?he(n,{error:f}):null));const b=Et(!1),c=Et(),d=Et(!!i);return i&&setTimeout(()=>{d.value=!1},i),s!=null&&setTimeout(()=>{if(!b.value&&!c.value){const f=new Error(`Async component timed out after ${s}ms.`);A(f),c.value=f}},s),g().then(()=>{b.value=!0,_.parent&&gi(_.parent.vnode)&&Uo(_.parent.update)}).catch(f=>{A(f),c.value=f}),()=>{if(b.value&&o)return mo(o,_);if(c.value&&n)return he(n,{error:c.value});if(r&&!d.value)return he(r)}}})}function mo(e,{vnode:{ref:t,props:r,children:n}}){const i=he(e,r,n);return i.ref=t,i}const gi=e=>e.type.__isKeepAlive,Nm={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=or(),n=r.ctx;if(!n.renderer)return t.default;const i=new Map,s=new Set;let a=null;const u=r.suspense,{renderer:{p:l,m:o,um:h,o:{createElement:p}}}=n,g=p("div");n.activate=(f,v,m,y,T)=>{const L=f.component;o(f,v,m,0,u),l(L.vnode,f,v,m,L,u,y,f.slotScopeIds,T),qe(()=>{L.isDeactivated=!1,L.a&&$r(L.a);const C=f.props&&f.props.onVnodeMounted;C&&lt(C,L.parent,f)},u)},n.deactivate=f=>{const v=f.component;o(f,g,null,1,u),qe(()=>{v.da&&$r(v.da);const m=f.props&&f.props.onVnodeUnmounted;m&&lt(m,v.parent,f),v.isDeactivated=!0},u)};function _(f){vo(f),h(f,r,u)}function A(f){i.forEach((v,m)=>{const y=Is(v.type);y&&(!f||!f(y))&&b(m)})}function b(f){const v=i.get(f);!a||v.type!==a.type?_(v):a&&vo(a),i.delete(f),s.delete(f)}Jt(()=>[e.include,e.exclude],([f,v])=>{f&&A(m=>mi(f,m)),v&&A(m=>!mi(v,m))},{flush:"post",deep:!0});let c=null;const d=()=>{c!=null&&i.set(c,yo(r.subTree))};return Jr(d),bs(d),Ts(()=>{i.forEach(f=>{const{subTree:v,suspense:m}=r,y=yo(v);if(f.type===y.type){vo(y);const T=y.component.da;T&&qe(T,m);return}_(f)})}),()=>{if(c=null,!t.default)return null;const f=t.default(),v=f[0];if(f.length>1)return a=null,f;if(!Lr(v)||!(v.shapeFlag&4)&&!(v.shapeFlag&128))return a=null,v;let m=yo(v);const y=m.type,T=Is(pi(m)?m.type.__asyncResolved||{}:y),{include:L,exclude:C,max:R}=e;if(L&&(!T||!mi(L,T))||C&&T&&mi(C,T))return a=m,v;const E=m.key==null?y:m.key,S=i.get(E);return m.el&&(m=kr(m),v.shapeFlag&128&&(v.ssContent=m)),c=E,S?(m.el=S.el,m.component=S.component,m.transition&&Xr(m,m.transition),m.shapeFlag|=512,s.delete(E),s.add(E)):(s.add(E),R&&s.size>parseInt(R,10)&&b(s.values().next().value)),m.shapeFlag|=256,a=m,v}}},Bm=Nm;function mi(e,t){return ce(e)?e.some(r=>mi(r,t)):ve(e)?e.split(",").indexOf(t)>-1:e.test?e.test(t):!1}function Tc(e,t){_c(e,"a",t)}function Sc(e,t){_c(e,"da",t)}function _c(e,t,r=Ve){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Es(t,n,r),r){let i=r.parent;for(;i&&i.parent;)gi(i.parent.vnode)&&Um(n,t,r,i),i=i.parent}}function Um(e,t,r,n){const i=Es(t,e,n,!0);Sn(()=>{$a(n[t],i)},r)}function vo(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function yo(e){return e.shapeFlag&128?e.ssContent:e}function Es(e,t,r=Ve,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;Yr(),Cr(r);const u=Lt(t,r,e,a);return Rr(),Er(),u});return n?i.unshift(s):i.push(s),s}}const ar=e=>(t,r=Ve)=>(!Ei||e==="sp")&&Es(e,t,r),Lc=ar("bm"),Jr=ar("m"),kc=ar("bu"),bs=ar("u"),Ts=ar("bum"),Sn=ar("um"),Ac=ar("sp"),Cc=ar("rtg"),Rc=ar("rtc");function wc(e,t=Ve){Es("ec",e,t)}let Eo=!0;function jm(e){const t=Dc(e),r=e.proxy,n=e.ctx;Eo=!1,t.beforeCreate&&Oc(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:u,provide:l,inject:o,created:h,beforeMount:p,mounted:g,beforeUpdate:_,updated:A,activated:b,deactivated:c,beforeDestroy:d,beforeUnmount:f,destroyed:v,unmounted:m,render:y,renderTracked:T,renderTriggered:L,errorCaptured:C,serverPrefetch:R,expose:E,inheritAttrs:S,components:k,directives:w,filters:O}=t;if(o&&Hm(o,n,null,e.appContext.config.unwrapInjectedRef),a)for(const D in a){const x=a[D];ge(x)&&(n[D]=x.bind(r))}if(i){const D=i.call(r,r);De(D)&&(e.data=Mt(D))}if(Eo=!0,s)for(const D in s){const x=s[D],M=ge(x)?x.bind(r,r):ge(x.get)?x.get.bind(r,r):tt,B=!ge(x)&&ge(x.set)?x.set.bind(r):tt,H=We({get:M,set:B});Object.defineProperty(n,D,{enumerable:!0,configurable:!0,get:()=>H.value,set:$=>H.value=$})}if(u)for(const D in u)Ic(u[D],n,r,D);if(l){const D=ge(l)?l.call(r):l;Reflect.ownKeys(D).forEach(x=>{hi(x,D[x])})}h&&Oc(h,e,"c");function P(D,x){ce(x)?x.forEach(M=>D(M.bind(r))):x&&D(x.bind(r))}if(P(Lc,p),P(Jr,g),P(kc,_),P(bs,A),P(Tc,b),P(Sc,c),P(wc,C),P(Rc,T),P(Cc,L),P(Ts,f),P(Sn,m),P(Ac,R),ce(E))if(E.length){const D=e.exposed||(e.exposed={});E.forEach(x=>{Object.defineProperty(D,x,{get:()=>r[x],set:M=>r[x]=M})})}else e.exposed||(e.exposed={});y&&e.render===tt&&(e.render=y),S!=null&&(e.inheritAttrs=S),k&&(e.components=k),w&&(e.directives=w)}function Hm(e,t,r=tt,n=!1){ce(e)&&(e=bo(e));for(const i in e){const s=e[i];let a;De(s)?"default"in s?a=Tt(s.from||i,s.default,!0):a=Tt(s.from||i):a=Tt(s),ze(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[i]=a}}function Oc(e,t,r){Lt(ce(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Ic(e,t,r,n){const i=n.includes(".")?vf(r,n):()=>r[n];if(ve(e)){const s=t[e];ge(s)&&Jt(i,s)}else if(ge(e))Jt(i,e.bind(r));else if(De(e))if(ce(e))e.forEach(s=>Ic(s,t,r,n));else{const s=ge(e.handler)?e.handler.bind(r):t[e.handler];ge(s)&&Jt(i,s,e)}}function Dc(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,u=s.get(t);let l;return u?l=u:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(o=>Ss(l,o,a,!0)),Ss(l,t,a)),s.set(t,l),l}function Ss(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&Ss(e,s,r,!0),i&&i.forEach(a=>Ss(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const u=Vm[a]||r&&r[a];e[a]=u?u(e[a],t[a]):t[a]}return e}const Vm={data:Pc,props:Qr,emits:Qr,methods:Qr,computed:Qr,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:Qr,directives:Qr,watch:Km,provide:Pc,inject:Gm};function Pc(e,t){return t?e?function(){return Re(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function Gm(e,t){return Qr(bo(e),bo(t))}function bo(e){if(ce(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function Qr(e,t){return e?Re(Re(Object.create(null),e),t):t}function Km(e,t){if(!e)return t;if(!t)return e;const r=Re(Object.create(null),e);for(const n in t)r[n]=rt(e[n],t[n]);return r}function $m(e,t,r,n=!1){const i={},s={};ai(s,Cs,1),e.propsDefaults=Object.create(null),xc(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:cc(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function Wm(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,u=Le(i),[l]=e.propsOptions;let o=!1;if((n||a>0)&&!(a&16)){if(a&8){const h=e.vnode.dynamicProps;for(let p=0;p<h.length;p++){let g=h[p];const _=t[g];if(l)if(ke(s,g))_!==s[g]&&(s[g]=_,o=!0);else{const A=Ye(g);i[A]=To(l,u,A,_,e,!1)}else _!==s[g]&&(s[g]=_,o=!0)}}}else{xc(e,t,i,s)&&(o=!0);let h;for(const p in u)(!t||!ke(t,p)&&((h=vt(p))===p||!ke(t,h)))&&(l?r&&(r[p]!==void 0||r[h]!==void 0)&&(i[p]=To(l,u,p,void 0,e,!0)):delete i[p]);if(s!==u)for(const p in s)(!t||!ke(t,p))&&(delete s[p],o=!0)}o&&sr(e,"set","$attrs")}function xc(e,t,r,n){const[i,s]=e.propsOptions;let a=!1,u;if(t)for(let l in t){if(mr(l))continue;const o=t[l];let h;i&&ke(i,h=Ye(l))?!s||!s.includes(h)?r[h]=o:(u||(u={}))[h]=o:uo(e.emitsOptions,l)||o!==n[l]&&(n[l]=o,a=!0)}if(s){const l=Le(r),o=u||Ce;for(let h=0;h<s.length;h++){const p=s[h];r[p]=To(i,l,p,o[p],e,!ke(o,p))}}return a}function To(e,t,r,n,i,s){const a=e[r];if(a!=null){const u=ke(a,"default");if(u&&n===void 0){const l=a.default;if(a.type!==Function&&ge(l)){const{propsDefaults:o}=i;r in o?n=o[r]:(Cr(i),n=o[r]=l.call(null,t),Rr())}else n=l}a[0]&&(s&&!u?n=!1:a[1]&&(n===""||n===vt(r))&&(n=!0))}return n}function Fc(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const s=e.props,a={},u=[];let l=!1;if(!ge(e)){const h=p=>{l=!0;const[g,_]=Fc(p,t,!0);Re(a,g),_&&u.push(..._)};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!l)return n.set(e,Hr),Hr;if(ce(s))for(let h=0;h<s.length;h++){const p=Ye(s[h]);Mc(p)&&(a[p]=Ce)}else if(s)for(const h in s){const p=Ye(h);if(Mc(p)){const g=s[h],_=a[p]=ce(g)||ge(g)?{type:g}:g;if(_){const A=Uc(Boolean,_.type),b=Uc(String,_.type);_[0]=A>-1,_[1]=b<0||A<b,(A>-1||ke(_,"default"))&&u.push(p)}}}const o=[a,u];return n.set(e,o),o}function Mc(e){return e[0]!=="$"}function Nc(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Bc(e,t){return Nc(e)===Nc(t)}function Uc(e,t){return ce(t)?t.findIndex(r=>Bc(r,e)):ge(t)&&Bc(t,e)?0:-1}const jc=e=>e[0]==="_"||e==="$stable",So=e=>ce(e)?e.map(_t):[_t(e)],qm=(e,t,r)=>{const n=En((...i)=>So(t(...i)),r);return n._c=!1,n},Hc=(e,t,r)=>{const n=e._ctx;for(const i in e){if(jc(i))continue;const s=e[i];if(ge(s))t[i]=qm(i,s,n);else if(s!=null){const a=So(s);t[i]=()=>a}}},Vc=(e,t)=>{const r=So(t);e.slots.default=()=>r},Ym=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Le(t),ai(t,"_",r)):Hc(t,e.slots={})}else e.slots={},t&&Vc(e,t);ai(e.slots,Cs,1)},zm=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,a=Ce;if(n.shapeFlag&32){const u=t._;u?r&&u===1?s=!1:(Re(i,t),!r&&u===1&&delete i._):(s=!t.$stable,Hc(t,i)),a=t}else t&&(Vc(e,t),a={default:1});if(s)for(const u in i)!jc(u)&&!(u in a)&&delete i[u]};function ot(e,t){const r=bt;if(r===null)return e;const n=r.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,u,l,o=Ce]=t[s];ge(a)&&(a={mounted:a,updated:a}),a.deep&&tn(u),i.push({dir:a,instance:n,value:u,oldValue:void 0,arg:l,modifiers:o})}return e}function qt(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const u=i[a];s&&(u.oldValue=s[a].value);let l=u.dir[n];l&&(Yr(),Lt(l,r,8,[e.el,u,e,t]),Er())}}function Gc(){return{app:null,config:{isNativeTag:ii,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xm=0;function Jm(e,t){return function(n,i=null){i!=null&&!De(i)&&(i=null);const s=Gc(),a=new Set;let u=!1;const l=s.app={_uid:Xm++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Sf,get config(){return s.config},set config(o){},use(o,...h){return a.has(o)||(o&&ge(o.install)?(a.add(o),o.install(l,...h)):ge(o)&&(a.add(o),o(l,...h))),l},mixin(o){return s.mixins.includes(o)||s.mixins.push(o),l},component(o,h){return h?(s.components[o]=h,l):s.components[o]},directive(o,h){return h?(s.directives[o]=h,l):s.directives[o]},mount(o,h,p){if(!u){const g=he(n,i);return g.appContext=s,h&&t?t(g,o):e(g,o,p),u=!0,l._container=o,o.__vue_app__=l,Fo(g.component)||g.component.proxy}},unmount(){u&&(e(null,l._container),delete l._container.__vue_app__)},provide(o,h){return s.provides[o]=h,l}};return l}}let _r=!1;const _s=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",_o=e=>e.nodeType===8;function Qm(e){const{mt:t,p:r,o:{patchProp:n,nextSibling:i,parentNode:s,remove:a,insert:u,createComment:l}}=e,o=(c,d)=>{if(!d.hasChildNodes()){r(null,c,d),Ps();return}_r=!1,h(d.firstChild,c,null,null,null),Ps(),_r&&console.error("Hydration completed but contains mismatches.")},h=(c,d,f,v,m,y=!1)=>{const T=_o(c)&&c.data==="[",L=()=>A(c,d,f,v,m,T),{type:C,ref:R,shapeFlag:E}=d,S=c.nodeType;d.el=c;let k=null;switch(C){case _n:S!==3?k=L():(c.data!==d.children&&(_r=!0,c.data=d.children),k=i(c));break;case nt:S!==8||T?k=L():k=i(c);break;case Zr:if(S!==1)k=L();else{k=c;const w=!d.children.length;for(let O=0;O<d.staticCount;O++)w&&(d.children+=k.outerHTML),O===d.staticCount-1&&(d.anchor=k),k=i(k);return k}break;case Fe:T?k=_(c,d,f,v,m,y):k=L();break;default:if(E&1)S!==1||d.type.toLowerCase()!==c.tagName.toLowerCase()?k=L():k=p(c,d,f,v,m,y);else if(E&6){d.slotScopeIds=m;const w=s(c);if(t(d,w,null,f,v,_s(w),y),k=T?b(c):i(c),pi(d)){let O;T?(O=he(Fe),O.anchor=k?k.previousSibling:w.lastChild):O=c.nodeType===3?St(""):he("div"),O.el=c,d.component.subTree=O}}else E&64?S!==8?k=L():k=d.type.hydrate(c,d,f,v,m,y,e,g):E&128&&(k=d.type.hydrate(c,d,f,v,_s(s(c)),m,y,e,h))}return R!=null&&Ls(R,null,v,d),k},p=(c,d,f,v,m,y)=>{y=y||!!d.dynamicChildren;const{type:T,props:L,patchFlag:C,shapeFlag:R,dirs:E}=d,S=T==="input"&&E||T==="option";if(S||C!==-1){if(E&&qt(d,null,f,"created"),L)if(S||!y||C&(16|32))for(const w in L)(S&&w.endsWith("value")||pr(w)&&!mr(w))&&n(c,w,null,L[w],!1,void 0,f);else L.onClick&&n(c,"onClick",null,L.onClick,!1,void 0,f);let k;if((k=L&&L.onVnodeBeforeMount)&&lt(k,f,d),E&&qt(d,null,f,"beforeMount"),((k=L&&L.onVnodeMounted)||E)&&yc(()=>{k&&lt(k,f,d),E&&qt(d,null,f,"mounted")},v),R&16&&!(L&&(L.innerHTML||L.textContent))){let w=g(c.firstChild,d,c,f,v,m,y);for(;w;){_r=!0;const O=w;w=w.nextSibling,a(O)}}else R&8&&c.textContent!==d.children&&(_r=!0,c.textContent=d.children)}return c.nextSibling},g=(c,d,f,v,m,y,T)=>{T=T||!!d.dynamicChildren;const L=d.children,C=L.length;for(let R=0;R<C;R++){const E=T?L[R]:L[R]=_t(L[R]);if(c)c=h(c,E,v,m,y,T);else{if(E.type===_n&&!E.children)continue;_r=!0,r(null,E,f,null,v,m,_s(f),y)}}return c},_=(c,d,f,v,m,y)=>{const{slotScopeIds:T}=d;T&&(m=m?m.concat(T):T);const L=s(c),C=g(i(c),d,L,f,v,m,y);return C&&_o(C)&&C.data==="]"?i(d.anchor=C):(_r=!0,u(d.anchor=l("]"),L,C),C)},A=(c,d,f,v,m,y)=>{if(_r=!0,d.el=null,y){const C=b(c);for(;;){const R=i(c);if(R&&R!==C)a(R);else break}}const T=i(c),L=s(c);return a(c),r(null,d,L,T,f,v,_s(L),m),T},b=c=>{let d=0;for(;c;)if(c=i(c),c&&_o(c)&&(c.data==="["&&d++,c.data==="]")){if(d===0)return i(c);d--}return c};return[o,h]}const qe=yc;function Kc(e){return Wc(e)}function $c(e){return Wc(e,Qm)}function Wc(e,t){const r=Ku();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:a,createText:u,createComment:l,setText:o,setElementText:h,parentNode:p,nextSibling:g,setScopeId:_=tt,cloneNode:A,insertStaticContent:b}=e,c=(F,N,G,W=null,J=null,ee=null,ae=!1,ne=null,re=!!N.dynamicChildren)=>{if(F===N)return;F&&!zt(F,N)&&(W=Z(F),q(F,J,ee,!0),F=null),N.patchFlag===-2&&(re=!1,N.dynamicChildren=null);const{type:V,ref:Y,shapeFlag:ie}=N;switch(V){case _n:d(F,N,G,W);break;case nt:f(F,N,G,W);break;case Zr:F==null&&v(N,G,W,ae);break;case Fe:w(F,N,G,W,J,ee,ae,ne,re);break;default:ie&1?T(F,N,G,W,J,ee,ae,ne,re):ie&6?O(F,N,G,W,J,ee,ae,ne,re):(ie&64||ie&128)&&V.process(F,N,G,W,J,ee,ae,ne,re,fe)}Y!=null&&J&&Ls(Y,F&&F.ref,ee,N||F,!N)},d=(F,N,G,W)=>{if(F==null)n(N.el=u(N.children),G,W);else{const J=N.el=F.el;N.children!==F.children&&o(J,N.children)}},f=(F,N,G,W)=>{F==null?n(N.el=l(N.children||""),G,W):N.el=F.el},v=(F,N,G,W)=>{[F.el,F.anchor]=b(F.children,N,G,W)},m=({el:F,anchor:N},G,W)=>{let J;for(;F&&F!==N;)J=g(F),n(F,G,W),F=J;n(N,G,W)},y=({el:F,anchor:N})=>{let G;for(;F&&F!==N;)G=g(F),i(F),F=G;i(N)},T=(F,N,G,W,J,ee,ae,ne,re)=>{ae=ae||N.type==="svg",F==null?L(N,G,W,J,ee,ae,ne,re):E(F,N,J,ee,ae,ne,re)},L=(F,N,G,W,J,ee,ae,ne)=>{let re,V;const{type:Y,props:ie,shapeFlag:ue,transition:de,patchFlag:pe,dirs:be}=F;if(F.el&&A!==void 0&&pe===-1)re=F.el=A(F.el);else{if(re=F.el=a(F.type,ee,ie&&ie.is,ie),ue&8?h(re,F.children):ue&16&&R(F.children,re,null,W,J,ee&&Y!=="foreignObject",ae,ne),be&&qt(F,null,W,"created"),ie){for(const Te in ie)Te!=="value"&&!mr(Te)&&s(re,Te,null,ie[Te],ee,F.children,W,J,z);"value"in ie&&s(re,"value",null,ie.value),(V=ie.onVnodeBeforeMount)&&lt(V,W,F)}C(re,F,F.scopeId,ae,W)}be&&qt(F,null,W,"beforeMount");const me=(!J||J&&!J.pendingBranch)&&de&&!de.persisted;me&&de.beforeEnter(re),n(re,N,G),((V=ie&&ie.onVnodeMounted)||me||be)&&qe(()=>{V&&lt(V,W,F),me&&de.enter(re),be&&qt(F,null,W,"mounted")},J)},C=(F,N,G,W,J)=>{if(G&&_(F,G),W)for(let ee=0;ee<W.length;ee++)_(F,W[ee]);if(J){let ee=J.subTree;if(N===ee){const ae=J.vnode;C(F,ae,ae.scopeId,ae.slotScopeIds,J.parent)}}},R=(F,N,G,W,J,ee,ae,ne,re=0)=>{for(let V=re;V<F.length;V++){const Y=F[V]=ne?Ar(F[V]):_t(F[V]);c(null,Y,N,G,W,J,ee,ae,ne)}},E=(F,N,G,W,J,ee,ae)=>{const ne=N.el=F.el;let{patchFlag:re,dynamicChildren:V,dirs:Y}=N;re|=F.patchFlag&16;const ie=F.props||Ce,ue=N.props||Ce;let de;(de=ue.onVnodeBeforeUpdate)&&lt(de,G,N,F),Y&&qt(N,F,G,"beforeUpdate");const pe=J&&N.type!=="foreignObject";if(V?S(F.dynamicChildren,V,ne,G,W,pe,ee):ae||M(F,N,ne,null,G,W,pe,ee,!1),re>0){if(re&16)k(ne,N,ie,ue,G,W,J);else if(re&2&&ie.class!==ue.class&&s(ne,"class",null,ue.class,J),re&4&&s(ne,"style",ie.style,ue.style,J),re&8){const be=N.dynamicProps;for(let me=0;me<be.length;me++){const Te=be[me],je=ie[Te],pt=ue[Te];(pt!==je||Te==="value")&&s(ne,Te,je,pt,J,F.children,G,W,z)}}re&1&&F.children!==N.children&&h(ne,N.children)}else!ae&&V==null&&k(ne,N,ie,ue,G,W,J);((de=ue.onVnodeUpdated)||Y)&&qe(()=>{de&&lt(de,G,N,F),Y&&qt(N,F,G,"updated")},W)},S=(F,N,G,W,J,ee,ae)=>{for(let ne=0;ne<N.length;ne++){const re=F[ne],V=N[ne],Y=re.el&&(re.type===Fe||!zt(re,V)||re.shapeFlag&(6|64))?p(re.el):G;c(re,V,Y,null,W,J,ee,ae,!0)}},k=(F,N,G,W,J,ee,ae)=>{if(G!==W){for(const ne in W){if(mr(ne))continue;const re=W[ne],V=G[ne];re!==V&&ne!=="value"&&s(F,ne,V,re,ae,N.children,J,ee,z)}if(G!==Ce)for(const ne in G)!mr(ne)&&!(ne in W)&&s(F,ne,G[ne],null,ae,N.children,J,ee,z);"value"in W&&s(F,"value",G.value,W.value)}},w=(F,N,G,W,J,ee,ae,ne,re)=>{const V=N.el=F?F.el:u(""),Y=N.anchor=F?F.anchor:u("");let{patchFlag:ie,dynamicChildren:ue,slotScopeIds:de}=N;de&&(ne=ne?ne.concat(de):de),F==null?(n(V,G,W),n(Y,G,W),R(N.children,G,Y,J,ee,ae,ne,re)):ie>0&&ie&64&&ue&&F.dynamicChildren?(S(F.dynamicChildren,ue,G,J,ee,ae,ne),(N.key!=null||J&&N===J.subTree)&&Lo(F,N,!0)):M(F,N,G,Y,J,ee,ae,ne,re)},O=(F,N,G,W,J,ee,ae,ne,re)=>{N.slotScopeIds=ne,F==null?N.shapeFlag&512?J.ctx.activate(N,G,W,ae,re):I(N,G,W,J,ee,ae,re):P(F,N,re)},I=(F,N,G,W,J,ee,ae)=>{const ne=F.component=rf(F,W,J);if(gi(F)&&(ne.ctx.renderer=fe),sf(ne),ne.asyncDep){if(J&&J.registerDep(ne,D),!F.el){const re=ne.subTree=he(nt);f(null,re,N,G)}return}D(ne,F,N,G,J,ee,ae)},P=(F,N,G)=>{const W=N.component=F.component;if(Cm(F,N,G))if(W.asyncDep&&!W.asyncResolved){x(W,N,G);return}else W.next=N,wv(W.update),W.update();else N.component=F.component,N.el=F.el,W.vnode=N},D=(F,N,G,W,J,ee,ae)=>{const ne=()=>{if(F.isMounted){let{next:Y,bu:ie,u:ue,parent:de,vnode:pe}=F,be=Y,me;re.allowRecurse=!1,Y?(Y.el=pe.el,x(F,Y,ae)):Y=pe,ie&&$r(ie),(me=Y.props&&Y.props.onVnodeBeforeUpdate)&&lt(me,de,Y,pe),re.allowRecurse=!0;const Te=vs(F),je=F.subTree;F.subTree=Te,c(je,Te,p(je.el),Z(je),F,J,ee),Y.el=Te.el,be===null&&co(F,Te.el),ue&&qe(ue,J),(me=Y.props&&Y.props.onVnodeUpdated)&&qe(()=>lt(me,de,Y,pe),J)}else{let Y;const{el:ie,props:ue}=N,{bm:de,m:pe,parent:be}=F,me=pi(N);if(re.allowRecurse=!1,de&&$r(de),!me&&(Y=ue&&ue.onVnodeBeforeMount)&&lt(Y,be,N),re.allowRecurse=!0,ie&&j){const Te=()=>{F.subTree=vs(F),j(ie,F.subTree,F,J,null)};me?N.type.__asyncLoader().then(()=>!F.isUnmounted&&Te()):Te()}else{const Te=F.subTree=vs(F);c(null,Te,G,W,F,J,ee),N.el=Te.el}if(pe&&qe(pe,J),!me&&(Y=ue&&ue.onVnodeMounted)){const Te=N;qe(()=>lt(Y,be,Te),J)}N.shapeFlag&256&&F.a&&qe(F.a,J),F.isMounted=!0,N=G=W=null}},re=new ui(ne,()=>Uo(F.update),F.scope),V=F.update=re.run.bind(re);V.id=F.uid,re.allowRecurse=V.allowRecurse=!0,V()},x=(F,N,G)=>{N.component=F;const W=F.vnode.props;F.vnode=N,F.next=null,Wm(F,N.props,W,G),zm(F,N.children,G),Yr(),Ho(void 0,F.update),Er()},M=(F,N,G,W,J,ee,ae,ne,re=!1)=>{const V=F&&F.children,Y=F?F.shapeFlag:0,ie=N.children,{patchFlag:ue,shapeFlag:de}=N;if(ue>0){if(ue&128){H(V,ie,G,W,J,ee,ae,ne,re);return}else if(ue&256){B(V,ie,G,W,J,ee,ae,ne,re);return}}de&8?(Y&16&&z(V,J,ee),ie!==V&&h(G,ie)):Y&16?de&16?H(V,ie,G,W,J,ee,ae,ne,re):z(V,J,ee,!0):(Y&8&&h(G,""),de&16&&R(ie,G,W,J,ee,ae,ne,re))},B=(F,N,G,W,J,ee,ae,ne,re)=>{F=F||Hr,N=N||Hr;const V=F.length,Y=N.length,ie=Math.min(V,Y);let ue;for(ue=0;ue<ie;ue++){const de=N[ue]=re?Ar(N[ue]):_t(N[ue]);c(F[ue],de,G,null,J,ee,ae,ne,re)}V>Y?z(F,J,ee,!0,!1,ie):R(N,G,W,J,ee,ae,ne,re,ie)},H=(F,N,G,W,J,ee,ae,ne,re)=>{let V=0;const Y=N.length;let ie=F.length-1,ue=Y-1;for(;V<=ie&&V<=ue;){const de=F[V],pe=N[V]=re?Ar(N[V]):_t(N[V]);if(zt(de,pe))c(de,pe,G,null,J,ee,ae,ne,re);else break;V++}for(;V<=ie&&V<=ue;){const de=F[ie],pe=N[ue]=re?Ar(N[ue]):_t(N[ue]);if(zt(de,pe))c(de,pe,G,null,J,ee,ae,ne,re);else break;ie--,ue--}if(V>ie){if(V<=ue){const de=ue+1,pe=de<Y?N[de].el:W;for(;V<=ue;)c(null,N[V]=re?Ar(N[V]):_t(N[V]),G,pe,J,ee,ae,ne,re),V++}}else if(V>ue)for(;V<=ie;)q(F[V],J,ee,!0),V++;else{const de=V,pe=V,be=new Map;for(V=pe;V<=ue;V++){const Me=N[V]=re?Ar(N[V]):_t(N[V]);Me.key!=null&&be.set(Me.key,V)}let me,Te=0;const je=ue-pe+1;let pt=!1,It=0;const Ft=new Array(je);for(V=0;V<je;V++)Ft[V]=0;for(V=de;V<=ie;V++){const Me=F[V];if(Te>=je){q(Me,J,ee,!0);continue}let He;if(Me.key!=null)He=be.get(Me.key);else for(me=pe;me<=ue;me++)if(Ft[me-pe]===0&&zt(Me,N[me])){He=me;break}He===void 0?q(Me,J,ee,!0):(Ft[He-pe]=V+1,He>=It?It=He:pt=!0,c(Me,N[He],G,null,J,ee,ae,ne,re),Te++)}const rr=pt?Zm(Ft):Hr;for(me=rr.length-1,V=je-1;V>=0;V--){const Me=pe+V,He=N[Me],Kt=Me+1<Y?N[Me+1].el:W;Ft[V]===0?c(null,He,G,Kt,J,ee,ae,ne,re):pt&&(me<0||V!==rr[me]?$(He,G,Kt,2):me--)}}},$=(F,N,G,W,J=null)=>{const{el:ee,type:ae,transition:ne,children:re,shapeFlag:V}=F;if(V&6){$(F.component.subTree,N,G,W);return}if(V&128){F.suspense.move(N,G,W);return}if(V&64){ae.move(F,N,G,fe);return}if(ae===Fe){n(ee,N,G);for(let ie=0;ie<re.length;ie++)$(re[ie],N,G,W);n(F.anchor,N,G);return}if(ae===Zr){m(F,N,G);return}if(W!==2&&V&1&&ne)if(W===0)ne.beforeEnter(ee),n(ee,N,G),qe(()=>ne.enter(ee),J);else{const{leave:ie,delayLeave:ue,afterLeave:de}=ne,pe=()=>n(ee,N,G),be=()=>{ie(ee,()=>{pe(),de&&de()})};ue?ue(ee,pe,be):be()}else n(ee,N,G)},q=(F,N,G,W=!1,J=!1)=>{const{type:ee,props:ae,ref:ne,children:re,dynamicChildren:V,shapeFlag:Y,patchFlag:ie,dirs:ue}=F;if(ne!=null&&Ls(ne,null,G,F,!0),Y&256){N.ctx.deactivate(F);return}const de=Y&1&&ue,pe=!pi(F);let be;if(pe&&(be=ae&&ae.onVnodeBeforeUnmount)&&lt(be,N,F),Y&6)X(F.component,G,W);else{if(Y&128){F.suspense.unmount(G,W);return}de&&qt(F,null,N,"beforeUnmount"),Y&64?F.type.remove(F,N,G,J,fe,W):V&&(ee!==Fe||ie>0&&ie&64)?z(V,N,G,!1,!0):(ee===Fe&&ie&(128|256)||!J&&Y&16)&&z(re,N,G),W&&te(F)}(pe&&(be=ae&&ae.onVnodeUnmounted)||de)&&qe(()=>{be&&lt(be,N,F),de&&qt(F,null,N,"unmounted")},G)},te=F=>{const{type:N,el:G,anchor:W,transition:J}=F;if(N===Fe){K(G,W);return}if(N===Zr){y(F);return}const ee=()=>{i(G),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(F.shapeFlag&1&&J&&!J.persisted){const{leave:ae,delayLeave:ne}=J,re=()=>ae(G,ee);ne?ne(F.el,ee,re):re()}else ee()},K=(F,N)=>{let G;for(;F!==N;)G=g(F),i(F),F=G;i(N)},X=(F,N,G)=>{const{bum:W,scope:J,update:ee,subTree:ae,um:ne}=F;W&&$r(W),J.stop(),ee&&(ee.active=!1,q(ae,F,N,G)),ne&&qe(ne,N),qe(()=>{F.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},z=(F,N,G,W=!1,J=!1,ee=0)=>{for(let ae=ee;ae<F.length;ae++)q(F[ae],N,G,W,J)},Z=F=>F.shapeFlag&6?Z(F.component.subTree):F.shapeFlag&128?F.suspense.next():g(F.anchor||F.el),oe=(F,N,G)=>{F==null?N._vnode&&q(N._vnode,null,null,!0):c(N._vnode||null,F,N,null,null,null,G),Ps(),N._vnode=F},fe={p:c,um:q,m:$,r:te,mt:I,mc:R,pc:M,pbc:S,n:Z,o:e};let U,j;return t&&([U,j]=t(fe)),{render:oe,hydrate:U,createApp:Jm(oe,U)}}function Ls(e,t,r,n,i=!1){if(ce(e)){e.forEach((g,_)=>Ls(g,t&&(ce(t)?t[_]:t),r,n,i));return}if(pi(n)&&!i)return;const s=n.shapeFlag&4?Fo(n.component)||n.component.proxy:n.el,a=i?null:s,{i:u,r:l}=e,o=t&&t.r,h=u.refs===Ce?u.refs={}:u.refs,p=u.setupState;if(o!=null&&o!==l&&(ve(o)?(h[o]=null,ke(p,o)&&(p[o]=null)):ze(o)&&(o.value=null)),ve(l)){const g=()=>{h[l]=a,ke(p,l)&&(p[l]=a)};a?(g.id=-1,qe(g,r)):g()}else if(ze(l)){const g=()=>{l.value=a};a?(g.id=-1,qe(g,r)):g()}else ge(l)&&Xt(l,u,12,[a,h])}function lt(e,t,r,n=null){Lt(e,t,7,[r,n])}function Lo(e,t,r=!1){const n=e.children,i=t.children;if(ce(n)&&ce(i))for(let s=0;s<n.length;s++){const a=n[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=Ar(i[s]),u.el=a.el),r||Lo(a,u))}}function Zm(e){const t=e.slice(),r=[0];let n,i,s,a,u;const l=e.length;for(n=0;n<l;n++){const o=e[n];if(o!==0){if(i=r[r.length-1],e[i]<o){t[n]=i,r.push(n);continue}for(s=0,a=r.length-1;s<a;)u=s+a>>1,e[r[u]]<o?s=u+1:a=u;o<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}const ev=e=>e.__isTeleport,vi=e=>e&&(e.disabled||e.disabled===""),qc=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,ko=(e,t)=>{const r=e&&e.to;return ve(r)?t?t(r):null:r},tv={__isTeleport:!0,process(e,t,r,n,i,s,a,u,l,o){const{mc:h,pc:p,pbc:g,o:{insert:_,querySelector:A,createText:b,createComment:c}}=o,d=vi(t.props);let{shapeFlag:f,children:v,dynamicChildren:m}=t;if(e==null){const y=t.el=b(""),T=t.anchor=b("");_(y,r,n),_(T,r,n);const L=t.target=ko(t.props,A),C=t.targetAnchor=b("");L&&(_(C,L),a=a||qc(L));const R=(E,S)=>{f&16&&h(v,E,S,i,s,a,u,l)};d?R(r,T):L&&R(L,C)}else{t.el=e.el;const y=t.anchor=e.anchor,T=t.target=e.target,L=t.targetAnchor=e.targetAnchor,C=vi(e.props),R=C?r:T,E=C?y:L;if(a=a||qc(T),m?(g(e.dynamicChildren,m,R,i,s,a,u),Lo(e,t,!0)):l||p(e,t,R,E,i,s,a,u,!1),d)C||ks(t,r,y,o,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const S=t.target=ko(t.props,A);S&&ks(t,S,null,o,0)}else C&&ks(t,T,L,o,1)}},remove(e,t,r,n,{um:i,o:{remove:s}},a){const{shapeFlag:u,children:l,anchor:o,targetAnchor:h,target:p,props:g}=e;if(p&&s(h),(a||!vi(g))&&(s(o),u&16))for(let _=0;_<l.length;_++){const A=l[_];i(A,t,r,!0,!!A.dynamicChildren)}},move:ks,hydrate:rv};function ks(e,t,r,{o:{insert:n},m:i},s=2){s===0&&n(e.targetAnchor,t,r);const{el:a,anchor:u,shapeFlag:l,children:o,props:h}=e,p=s===2;if(p&&n(a,t,r),(!p||vi(h))&&l&16)for(let g=0;g<o.length;g++)i(o[g],t,r,2);p&&n(u,t,r)}function rv(e,t,r,n,i,s,{o:{nextSibling:a,parentNode:u,querySelector:l}},o){const h=t.target=ko(t.props,l);if(h){const p=h._lpa||h.firstChild;t.shapeFlag&16&&(vi(t.props)?(t.anchor=o(a(e),t,u(e),r,n,i,s),t.targetAnchor=p):(t.anchor=a(e),t.targetAnchor=o(p,t,h,r,n,i,s)),h._lpa=t.targetAnchor&&a(t.targetAnchor))}return t.anchor&&a(t.anchor)}const nv=tv,Ao="components",iv="directives";function sv(e,t){return Co(Ao,e,!0,t)||e}const Yc=Symbol();function av(e){return ve(e)?Co(Ao,e,!1)||e:e||Yc}function ov(e){return Co(iv,e)}function Co(e,t,r=!0,n=!1){const i=bt||Ve;if(i){const s=i.type;if(e===Ao){const u=Is(s);if(u&&(u===t||u===Ye(t)||u===vr(Ye(t))))return s}const a=zc(i[e]||s[e],t)||zc(i.appContext[e],t);return!a&&n?s:a}}function zc(e,t){return e&&(e[t]||e[Ye(t)]||e[vr(Ye(t))])}const Fe=Symbol(void 0),_n=Symbol(void 0),nt=Symbol(void 0),Zr=Symbol(void 0),yi=[];let Yt=null;function _e(e=!1){yi.push(Yt=e?null:[])}function Xc(){yi.pop(),Yt=yi[yi.length-1]||null}let Ln=1;function Ro(e){Ln+=e}function Jc(e){return e.dynamicChildren=Ln>0?Yt||Hr:null,Xc(),Ln>0&&Yt&&Yt.push(e),e}function we(e,t,r,n,i,s){return Jc(le(e,t,r,n,i,s,!0))}function As(e,t,r,n,i){return Jc(he(e,t,r,n,i,!0))}function Lr(e){return e?e.__v_isVNode===!0:!1}function zt(e,t){return e.type===t.type&&e.key===t.key}function lv(e){}const Cs="__vInternal",Qc=({key:e})=>e!=null?e:null,Rs=({ref:e})=>e!=null?ve(e)||ze(e)||ge(e)?{i:bt,r:e}:e:null;function le(e,t=null,r=null,n=0,i=null,s=e===Fe?0:1,a=!1,u=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qc(t),ref:t&&Rs(t),scopeId:ms,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return u?(wo(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=ve(r)?8:16),Ln>0&&!a&&Yt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Yt.push(l),l}const he=uv;function uv(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===Yc)&&(e=nt),Lr(e)){const u=kr(e,t,!0);return r&&wo(u,r),u}if(Sv(e)&&(e=e.__vccOpts),t){t=Zc(t);let{class:u,style:l}=t;u&&!ve(u)&&(t.class=mt(u)),De(l)&&(io(l)&&!ce(l)&&(l=Re({},l)),t.style=gt(l))}const a=ve(e)?1:Rm(e)?128:ev(e)?64:De(e)?4:ge(e)?2:0;return le(e,t,r,n,i,a,s,!0)}function Zc(e){return e?io(e)||Cs in e?Re({},e):e:null}function kr(e,t,r=!1){const{props:n,ref:i,patchFlag:s,children:a}=e,u=t?Oo(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Qc(u),ref:t&&t.ref?r&&i?ce(i)?i.concat(Rs(t)):[i,Rs(t)]:Rs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&kr(e.ssContent),ssFallback:e.ssFallback&&kr(e.ssFallback),el:e.el,anchor:e.anchor}}function St(e=" ",t=0){return he(_n,null,e,t)}function cv(e,t){const r=he(Zr,null,e);return r.staticCount=t,r}function Je(e="",t=!1){return t?(_e(),As(nt,null,e)):he(nt,null,e)}function _t(e){return e==null||typeof e=="boolean"?he(nt):ce(e)?he(Fe,null,e.slice()):typeof e=="object"?Ar(e):he(_n,null,String(e))}function Ar(e){return e.el===null||e.memo?e:kr(e)}function wo(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ce(t))r=16;else if(typeof t=="object")if(n&(1|64)){const i=t.default;i&&(i._c&&(i._d=!1),wo(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(Cs in t)?t._ctx=bt:i===3&&bt&&(bt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:bt},r=32):(t=String(t),n&64?(r=16,t=[St(t)]):r=8);e.children=t,e.shapeFlag|=r}function Oo(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=mt([t.class,n.class]));else if(i==="style")t.style=gt([t.style,n.style]);else if(pr(i)){const s=t[i],a=n[i];s!==a&&!(ce(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=n[i])}return t}function kn(e,t,r,n){let i;const s=r&&r[n];if(ce(e)||ve(e)){i=new Array(e.length);for(let a=0,u=e.length;a<u;a++)i[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(De(e))if(e[Symbol.iterator])i=Array.from(e,(a,u)=>t(a,u,void 0,s&&s[u]));else{const a=Object.keys(e);i=new Array(a.length);for(let u=0,l=a.length;u<l;u++){const o=a[u];i[u]=t(e[o],o,u,s&&s[u])}}else i=[];return r&&(r[n]=i),i}function fv(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(ce(n))for(let i=0;i<n.length;i++)e[n[i].name]=n[i].fn;else n&&(e[n.name]=n.fn)}return e}function ef(e,t,r={},n,i){if(bt.isCE)return he("slot",t==="default"?null:{name:t},n&&n());let s=e[t];s&&s._c&&(s._d=!1),_e();const a=s&&tf(s(r)),u=As(Fe,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function tf(e){return e.some(t=>Lr(t)?!(t.type===nt||t.type===Fe&&!tf(t.children)):!0)?e:null}function dv(e){const t={};for(const r in e)t[Kr(r)]=e[r];return t}const Io=e=>e?nf(e)?Fo(e)||e.proxy:Io(e.parent):null,ws=Re(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Io(e.parent),$root:e=>Io(e.root),$emit:e=>e.emit,$options:e=>Dc(e),$forceUpdate:e=>()=>Uo(e.update),$nextTick:e=>Rn.bind(e.proxy),$watch:e=>Pv.bind(e)}),Do={get({_:e},t){const{ctx:r,setupState:n,data:i,props:s,accessCache:a,type:u,appContext:l}=e;let o;if(t[0]!=="$"){const _=a[t];if(_!==void 0)switch(_){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(n!==Ce&&ke(n,t))return a[t]=1,n[t];if(i!==Ce&&ke(i,t))return a[t]=2,i[t];if((o=e.propsOptions[0])&&ke(o,t))return a[t]=3,s[t];if(r!==Ce&&ke(r,t))return a[t]=4,r[t];Eo&&(a[t]=0)}}const h=ws[t];let p,g;if(h)return t==="$attrs"&&yt(e,"get",t),h(e);if((p=u.__cssModules)&&(p=p[t]))return p;if(r!==Ce&&ke(r,t))return a[t]=4,r[t];if(g=l.config.globalProperties,ke(g,t))return g[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;if(i!==Ce&&ke(i,t))i[t]=r;else if(n!==Ce&&ke(n,t))n[t]=r;else if(ke(e.props,t))return!1;return t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:s}},a){let u;return!!r[a]||e!==Ce&&ke(e,a)||t!==Ce&&ke(t,a)||(u=s[0])&&ke(u,a)||ke(n,a)||ke(ws,a)||ke(i.config.globalProperties,a)}},hv=Re({},Do,{get(e,t){if(t!==Symbol.unscopables)return Do.get(e,t,e)},has(e,t){return t[0]!=="_"&&!Iu(t)}}),pv=Gc();let gv=0;function rf(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||pv,s={uid:gv++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,update:null,scope:new za(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fc(n,i),emitsOptions:gc(n,i),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:n.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Sm.bind(null,s),e.ce&&e.ce(s),s}let Ve=null;const or=()=>Ve||bt,Cr=e=>{Ve=e,e.scope.on()},Rr=()=>{Ve&&Ve.scope.off(),Ve=null};function nf(e){return e.vnode.shapeFlag&4}let Ei=!1;function sf(e,t=!1){Ei=t;const{props:r,children:n}=e.vnode,i=nf(e);$m(e,r,i,t),Ym(e,n);const s=i?mv(e,t):void 0;return Ei=!1,s}function mv(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=so(new Proxy(e.ctx,Do));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?of(e):null;Cr(e),Yr();const s=Xt(n,e,0,[e.props,i]);if(Er(),Rr(),es(s)){if(s.then(Rr,Rr),t)return s.then(a=>{Po(e,a,t)}).catch(a=>{en(a,e,0)});e.asyncDep=s}else Po(e,s,t)}else af(e,t)}function Po(e,t,r){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:De(t)&&(e.setupState=lo(t)),af(e,r)}let Os,xo;function vv(e){Os=e,xo=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,hv))}}const yv=()=>!Os;function af(e,t,r){const n=e.type;if(!e.render){if(!t&&Os&&!n.render){const i=n.template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:u,compilerOptions:l}=n,o=Re(Re({isCustomElement:s,delimiters:u},a),l);n.render=Os(i,o)}}e.render=n.render||tt,xo&&xo(e)}Cr(e),Yr(),jm(e),Er(),Rr()}function Ev(e){return new Proxy(e.attrs,{get(t,r){return yt(e,"get","$attrs"),t[r]}})}function of(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=Ev(e))},slots:e.slots,emit:e.emit,expose:t}}function Fo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(lo(so(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in ws)return ws[r](e)}}))}const bv=/(?:^|[-_])(\w)/g,Tv=e=>e.replace(bv,t=>t.toUpperCase()).replace(/[-_]/g,"");function Is(e){return ge(e)&&e.displayName||e.name}function lf(e,t,r=!1){let n=Is(t);if(!n&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&e&&e.parent){const i=s=>{for(const a in s)if(s[a]===t)return a};n=i(e.components||e.parent.type.components)||i(e.appContext.components)}return n?Tv(n):r?"App":"Anonymous"}function Sv(e){return ge(e)&&"__vccOpts"in e}const bi=[];function uf(e,...t){Yr();const r=bi.length?bi[bi.length-1].component:null,n=r&&r.appContext.config.warnHandler,i=_v();if(n)Xt(n,r,11,[e+t.join(""),r&&r.proxy,i.map(({vnode:s})=>`at <${lf(r,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${e}`,...t];i.length&&s.push(`
`,...Lv(i)),console.warn(...s)}Er()}function _v(){let e=bi[bi.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function Lv(e){const t=[];return e.forEach((r,n)=>{t.push(...n===0?[]:[`
`],...kv(r))}),t}function kv({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,i=` at <${lf(e.component,e.type,n)}`,s=">"+r;return e.props?[i,...Av(e.props),s]:[i+s]}function Av(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(n=>{t.push(...cf(n,e[n]))}),r.length>3&&t.push(" ..."),t}function cf(e,t,r){return ve(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:ze(t)?(t=cf(e,Le(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):ge(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Le(t),r?t:[`${e}=`,t])}function Xt(e,t,r,n){let i;try{i=n?e(...n):e()}catch(s){en(s,t,r)}return i}function Lt(e,t,r,n){if(ge(e)){const s=Xt(e,t,r,n);return s&&es(s)&&s.catch(a=>{en(a,t,r)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Lt(e[s],t,r,n));return i}function en(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,u=r;for(;s;){const o=s.ec;if(o){for(let h=0;h<o.length;h++)if(o[h](e,a,u)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Xt(l,null,10,[e,a,u]);return}}Cv(e,r,i,n)}function Cv(e,t,r,n=!0){console.error(e)}let Ds=!1,Mo=!1;const kt=[];let lr=0;const Ti=[];let Si=null,An=0;const _i=[];let wr=null,Cn=0;const ff=Promise.resolve();let No=null,Bo=null;function Rn(e){const t=No||ff;return e?t.then(this?e.bind(this):e):t}function Rv(e){let t=lr+1,r=kt.length;for(;t<r;){const n=t+r>>>1;Li(kt[n])<e?t=n+1:r=n}return t}function Uo(e){(!kt.length||!kt.includes(e,Ds&&e.allowRecurse?lr+1:lr))&&e!==Bo&&(e.id==null?kt.push(e):kt.splice(Rv(e.id),0,e),df())}function df(){!Ds&&!Mo&&(Mo=!0,No=ff.then(pf))}function wv(e){const t=kt.indexOf(e);t>lr&&kt.splice(t,1)}function hf(e,t,r,n){ce(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),df()}function Ov(e){hf(e,Si,Ti,An)}function jo(e){hf(e,wr,_i,Cn)}function Ho(e,t=null){if(Ti.length){for(Bo=t,Si=[...new Set(Ti)],Ti.length=0,An=0;An<Si.length;An++)Si[An]();Si=null,An=0,Bo=null,Ho(e,t)}}function Ps(e){if(_i.length){const t=[...new Set(_i)];if(_i.length=0,wr){wr.push(...t);return}for(wr=t,wr.sort((r,n)=>Li(r)-Li(n)),Cn=0;Cn<wr.length;Cn++)wr[Cn]();wr=null,Cn=0}}const Li=e=>e.id==null?1/0:e.id;function pf(e){Mo=!1,Ds=!0,Ho(e),kt.sort((r,n)=>Li(r)-Li(n));const t=tt;try{for(lr=0;lr<kt.length;lr++){const r=kt[lr];r&&r.active!==!1&&Xt(r,null,14)}}finally{lr=0,kt.length=0,Ps(),Ds=!1,No=null,(kt.length||Ti.length||_i.length)&&pf(e)}}function Iv(e,t){return ki(e,null,t)}function gf(e,t){return ki(e,null,{flush:"post"})}function Dv(e,t){return ki(e,null,{flush:"sync"})}const mf={};function Jt(e,t,r){return ki(e,t,r)}function ki(e,t,{immediate:r,deep:n,flush:i,onTrack:s,onTrigger:a}=Ce){const u=Ve;let l,o=!1,h=!1;if(ze(e)?(l=()=>e.value,o=!!e._shallow):zr(e)?(l=()=>e,n=!0):ce(e)?(h=!0,o=e.some(zr),l=()=>e.map(d=>{if(ze(d))return d.value;if(zr(d))return tn(d);if(ge(d))return Xt(d,u,2)})):ge(e)?t?l=()=>Xt(e,u,2):l=()=>{if(!(u&&u.isUnmounted))return p&&p(),Lt(e,u,3,[g])}:l=tt,t&&n){const d=l;l=()=>tn(d())}let p,g=d=>{p=c.onStop=()=>{Xt(d,u,4)}};if(Ei)return g=tt,t?r&&Lt(t,u,3,[l(),h?[]:void 0,g]):l(),tt;let _=h?[]:mf;const A=()=>{if(!!c.active)if(t){const d=c.run();(n||o||(h?d.some((f,v)=>mn(f,_[v])):mn(d,_)))&&(p&&p(),Lt(t,u,3,[d,_===mf?void 0:_,g]),_=d)}else c.run()};A.allowRecurse=!!t;let b;i==="sync"?b=A:i==="post"?b=()=>qe(A,u&&u.suspense):b=()=>{!u||u.isMounted?Ov(A):A()};const c=new ui(l,b);return t?r?A():_=c.run():i==="post"?qe(c.run.bind(c),u&&u.suspense):c.run(),()=>{c.stop(),u&&u.scope&&$a(u.scope.effects,c)}}function Pv(e,t,r){const n=this.proxy,i=ve(e)?e.includes(".")?vf(n,e):()=>n[e]:e.bind(n,n);let s;ge(t)?s=t:(s=t.handler,r=t);const a=Ve;Cr(this);const u=ki(i,s.bind(n),r);return a?Cr(a):Rr(),u}function vf(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function tn(e,t){if(!De(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ze(e))tn(e.value,t);else if(ce(e))for(let r=0;r<e.length;r++)tn(e[r],t);else if(gr(e)||Vr(e))e.forEach(r=>{tn(r,t)});else if(Ya(e))for(const r in e)tn(e[r],t);return e}function xv(){return null}function Fv(){return null}function Mv(e){}function Nv(e,t){return null}function Bv(){return Ef().slots}function yf(){return Ef().attrs}function Ef(){const e=or();return e.setupContext||(e.setupContext=of(e))}function Uv(e,t){const r=ce(e)?e.reduce((n,i)=>(n[i]={},n),{}):e;for(const n in t){const i=r[n];i?ce(i)||ge(i)?r[n]={type:i,default:t[n]}:i.default=t[n]:i===null&&(r[n]={default:t[n]})}return r}function jv(e,t){const r={};for(const n in e)t.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>e[n]});return r}function Hv(e){const t=or();let r=e();return Rr(),es(r)&&(r=r.catch(n=>{throw Cr(t),n})),[r,()=>Cr(t)]}function xs(e,t,r){const n=arguments.length;return n===2?De(t)&&!ce(t)?Lr(t)?he(e,null,[t]):he(e,t):he(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Lr(r)&&(r=[r]),he(e,t,r))}const bf=Symbol(""),Vv=()=>{{const e=Tt(bf);return e||uf("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function Gv(){}function Kv(e,t,r,n){const i=r[n];if(i&&Tf(i,e))return i;const s=t();return s.memo=e.slice(),r[n]=s}function Tf(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==t[n])return!1;return Ln>0&&Yt&&Yt.push(e),!0}const Sf="3.2.23",$v={createComponentInstance:rf,setupComponent:sf,renderComponentRoot:vs,setCurrentRenderingInstance:fi,isVNode:Lr,normalizeVNode:_t},Wv=$v,qv=null,Yv=null,zv="http://www.w3.org/2000/svg",wn=typeof document!="undefined"?document:null,_f=new Map,Xv={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?wn.createElementNS(zv,e):wn.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>wn.createTextNode(e),createComment:e=>wn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>wn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n){const i=r?r.previousSibling:t.lastChild;let s=_f.get(e);if(!s){const a=wn.createElement("template");if(a.innerHTML=n?`<svg>${e}</svg>`:e,s=a.content,n){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}_f.set(e,s)}return t.insertBefore(s.cloneNode(!0),r),[i?i.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function Jv(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function Qv(e,t,r){const n=e.style,i=ve(r);if(r&&!i){for(const s in r)Vo(n,s,r[s]);if(t&&!ve(t))for(const s in t)r[s]==null&&Vo(n,s,"")}else{const s=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=s)}}const Lf=/\s*!important$/;function Vo(e,t,r){if(ce(r))r.forEach(n=>Vo(e,t,n));else if(t.startsWith("--"))e.setProperty(t,r);else{const n=Zv(e,t);Lf.test(r)?e.setProperty(vt(n),r.replace(Lf,""),"important"):e[n]=r}}const kf=["Webkit","Moz","ms"],Go={};function Zv(e,t){const r=Go[t];if(r)return r;let n=Ye(t);if(n!=="filter"&&n in e)return Go[t]=n;n=vr(n);for(let i=0;i<kf.length;i++){const s=kf[i]+n;if(s in e)return Go[t]=s}return t}const Af="http://www.w3.org/1999/xlink";function ey(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(Af,t.slice(6,t.length)):e.setAttributeNS(Af,t,r);else{const s=Fu(t);r==null||s&&!Va(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function ty(e,t,r,n,i,s,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,s),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const u=r==null?"":r;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),r==null&&e.removeAttribute(t);return}if(r===""||r==null){const u=typeof e[t];if(u==="boolean"){e[t]=Va(r);return}else if(r==null&&u==="string"){e[t]="",e.removeAttribute(t);return}else if(u==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=r}catch{}}let Fs=Date.now,Cf=!1;if(typeof window!="undefined"){Fs()>document.createEvent("Event").timeStamp&&(Fs=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Cf=!!(e&&Number(e[1])<=53)}let Ko=0;const ry=Promise.resolve(),ny=()=>{Ko=0},iy=()=>Ko||(ry.then(ny),Ko=Fs());function ur(e,t,r,n){e.addEventListener(t,r,n)}function sy(e,t,r,n){e.removeEventListener(t,r,n)}function ay(e,t,r,n,i=null){const s=e._vei||(e._vei={}),a=s[t];if(n&&a)a.value=n;else{const[u,l]=oy(t);if(n){const o=s[t]=ly(n,i);ur(e,u,o,l)}else a&&(sy(e,u,a,l),s[t]=void 0)}}const Rf=/(?:Once|Passive|Capture)$/;function oy(e){let t;if(Rf.test(e)){t={};let r;for(;r=e.match(Rf);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[vt(e.slice(2)),t]}function ly(e,t){const r=n=>{const i=n.timeStamp||Fs();(Cf||i>=r.attached-1)&&Lt(uy(n,r.value),t,5,[n])};return r.value=e,r.attached=iy(),r}function uy(e,t){if(ce(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n(i))}else return t}const wf=/^on[a-z]/,cy=(e,t,r,n,i=!1,s,a,u,l)=>{t==="class"?Jv(e,n,i):t==="style"?Qv(e,r,n):pr(t)?Zi(t)||ay(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):fy(e,t,n,i))?ty(e,t,n,s,a,u,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ey(e,t,n,i))};function fy(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&wf.test(t)&&ge(r)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||wf.test(t)&&ve(r)?!1:t in e}function Of(e,t){const r=Nt(e);class n extends Ms{constructor(s){super(r,s,t)}}return n.def=r,n}const dy=e=>Of(e,Zf),hy=typeof HTMLElement!="undefined"?HTMLElement:class{};class Ms extends hy{constructor(t,r={},n){super();this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Rn(()=>{this._connected||(zo(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver(n=>{for(const i of n)this._setAttr(i.attributeName)}).observe(this,{attributes:!0});const t=n=>{const{props:i,styles:s}=n,a=!ce(i),u=i?a?Object.keys(i):i:[];let l;if(a)for(const o in this._props){const h=i[o];(h===Number||h&&h.type===Number)&&(this._props[o]=ir(this._props[o]),(l||(l=Object.create(null)))[o]=!0)}this._numberProps=l;for(const o of Object.keys(this))o[0]!=="_"&&this._setProp(o,this[o],!0,!1);for(const o of u.map(Ye))Object.defineProperty(this,o,{get(){return this._getProp(o)},set(h){this._setProp(o,h)}});this._applyStyles(s),this._update()},r=this._def.__asyncLoader;r?r().then(t):t(this._def)}_setAttr(t){let r=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(r=ir(r)),this._setProp(Ye(t),r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,n=!0,i=!0){r!==this._props[t]&&(this._props[t]=r,i&&this._instance&&this._update(),n&&(r===!0?this.setAttribute(vt(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(vt(t),r+""):r||this.removeAttribute(vt(t))))}_update(){zo(this._createVNode(),this.shadowRoot)}_createVNode(){const t=he(this._def,Re({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0,r.emit=(i,...s)=>{this.dispatchEvent(new CustomEvent(i,{detail:s}))};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof Ms){r.parent=n._instance;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const n=document.createElement("style");n.textContent=r,this.shadowRoot.appendChild(n)})}}function py(e="$style"){{const t=or();if(!t)return Ce;const r=t.type.__cssModules;if(!r)return Ce;const n=r[e];return n||Ce}}function Ns(e){const t=or();if(!t)return;const r=()=>$o(t.subTree,e(t.proxy));gf(r),Jr(()=>{const n=new MutationObserver(r);n.observe(t.subTree.el.parentNode,{childList:!0}),Sn(()=>n.disconnect())})}function $o(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{$o(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)If(e.el,t);else if(e.type===Fe)e.children.forEach(r=>$o(r,t));else if(e.type===Zr){let{el:r,anchor:n}=e;for(;r&&(If(r,t),r!==n);)r=r.nextSibling}}function If(e,t){if(e.nodeType===1){const r=e.style;for(const n in t)r.setProperty(`--${n}`,t[n])}}const Or="transition",Ai="animation",On=(e,{slots:t})=>xs(po,xf(e),t);On.displayName="Transition";const Df={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gy=On.props=Re({},po.props,Df),rn=(e,t=[])=>{ce(e)?e.forEach(r=>r(...t)):e&&e(...t)},Pf=e=>e?ce(e)?e.some(t=>t.length>1):e.length>1:!1;function xf(e){const t={};for(const k in e)k in Df||(t[k]=e[k]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:s=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:u=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:o=a,appearToClass:h=u,leaveFromClass:p=`${r}-leave-from`,leaveActiveClass:g=`${r}-leave-active`,leaveToClass:_=`${r}-leave-to`}=e,A=my(i),b=A&&A[0],c=A&&A[1],{onBeforeEnter:d,onEnter:f,onEnterCancelled:v,onLeave:m,onLeaveCancelled:y,onBeforeAppear:T=d,onAppear:L=f,onAppearCancelled:C=v}=t,R=(k,w,O)=>{nn(k,w?h:u),nn(k,w?o:a),O&&O()},E=(k,w)=>{nn(k,_),nn(k,g),w&&w()},S=k=>(w,O)=>{const I=k?L:f,P=()=>R(w,k,O);rn(I,[w,P]),Ff(()=>{nn(w,k?l:s),cr(w,k?h:u),Pf(I)||Mf(w,n,b,P)})};return Re(t,{onBeforeEnter(k){rn(d,[k]),cr(k,s),cr(k,a)},onBeforeAppear(k){rn(T,[k]),cr(k,l),cr(k,o)},onEnter:S(!1),onAppear:S(!0),onLeave(k,w){const O=()=>E(k,w);cr(k,p),jf(),cr(k,g),Ff(()=>{nn(k,p),cr(k,_),Pf(m)||Mf(k,n,c,O)}),rn(m,[k,O])},onEnterCancelled(k){R(k,!1),rn(v,[k])},onAppearCancelled(k){R(k,!0),rn(C,[k])},onLeaveCancelled(k){E(k),rn(y,[k])}})}function my(e){if(e==null)return null;if(De(e))return[Wo(e.enter),Wo(e.leave)];{const t=Wo(e);return[t,t]}}function Wo(e){return ir(e)}function cr(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function nn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function Ff(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let vy=0;function Mf(e,t,r,n){const i=e._endId=++vy,s=()=>{i===e._endId&&n()};if(r)return setTimeout(s,r);const{type:a,timeout:u,propCount:l}=Nf(e,t);if(!a)return n();const o=a+"end";let h=0;const p=()=>{e.removeEventListener(o,g),s()},g=_=>{_.target===e&&++h>=l&&p()};setTimeout(()=>{h<l&&p()},u+1),e.addEventListener(o,g)}function Nf(e,t){const r=window.getComputedStyle(e),n=A=>(r[A]||"").split(", "),i=n(Or+"Delay"),s=n(Or+"Duration"),a=Bf(i,s),u=n(Ai+"Delay"),l=n(Ai+"Duration"),o=Bf(u,l);let h=null,p=0,g=0;t===Or?a>0&&(h=Or,p=a,g=s.length):t===Ai?o>0&&(h=Ai,p=o,g=l.length):(p=Math.max(a,o),h=p>0?a>o?Or:Ai:null,g=h?h===Or?s.length:l.length:0);const _=h===Or&&/\b(transform|all)(,|$)/.test(r[Or+"Property"]);return{type:h,timeout:p,propCount:g,hasTransform:_}}function Bf(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Uf(r)+Uf(e[n])))}function Uf(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function jf(){return document.body.offsetHeight}const Hf=new WeakMap,Vf=new WeakMap,yy={name:"TransitionGroup",props:Re({},gy,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=or(),n=ho();let i,s;return bs(()=>{if(!i.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!_y(i[0].el,r.vnode.el,a))return;i.forEach(by),i.forEach(Ty);const u=i.filter(Sy);jf(),u.forEach(l=>{const o=l.el,h=o.style;cr(o,a),h.transform=h.webkitTransform=h.transitionDuration="";const p=o._moveCb=g=>{g&&g.target!==o||(!g||/transform$/.test(g.propertyName))&&(o.removeEventListener("transitionend",p),o._moveCb=null,nn(o,a))};o.addEventListener("transitionend",p)})}),()=>{const a=Le(e),u=xf(a);let l=a.tag||Fe;i=s,s=t.default?ys(t.default()):[];for(let o=0;o<s.length;o++){const h=s[o];h.key!=null&&Xr(h,Tn(h,u,n,r))}if(i)for(let o=0;o<i.length;o++){const h=i[o];Xr(h,Tn(h,u,n,r)),Hf.set(h,h.el.getBoundingClientRect())}return he(l,null,s)}}},Ey=yy;function by(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Ty(e){Vf.set(e,e.el.getBoundingClientRect())}function Sy(e){const t=Hf.get(e),r=Vf.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${i}px)`,s.transitionDuration="0s",e}}function _y(e,t,r){const n=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(u=>u&&n.classList.remove(u))}),r.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(n);const{hasTransform:s}=Nf(n);return i.removeChild(n),s}const Ir=e=>{const t=e.props["onUpdate:modelValue"];return ce(t)?r=>$r(t,r):t};function Ly(e){e.target.composing=!0}function Gf(e){const t=e.target;t.composing&&(t.composing=!1,ky(t,"input"))}function ky(e,t){const r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}const Bs={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Ir(i);const s=n||i.props&&i.props.type==="number";ur(e,t?"change":"input",a=>{if(a.target.composing)return;let u=e.value;r?u=u.trim():s&&(u=ir(u)),e._assign(u)}),r&&ur(e,"change",()=>{e.value=e.value.trim()}),t||(ur(e,"compositionstart",Ly),ur(e,"compositionend",Gf),ur(e,"change",Gf))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},s){if(e._assign=Ir(s),e.composing||document.activeElement===e&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&ir(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},qo={deep:!0,created(e,t,r){e._assign=Ir(r),ur(e,"change",()=>{const n=e._modelValue,i=In(e),s=e.checked,a=e._assign;if(ce(n)){const u=ni(n,i),l=u!==-1;if(s&&!l)a(n.concat(i));else if(!s&&l){const o=[...n];o.splice(u,1),a(o)}}else if(gr(n)){const u=new Set(n);s?u.add(i):u.delete(i),a(u)}else a(qf(e,s))})},mounted:Kf,beforeUpdate(e,t,r){e._assign=Ir(r),Kf(e,t,r)}};function Kf(e,{value:t,oldValue:r},n){e._modelValue=t,ce(t)?e.checked=ni(t,n.props.value)>-1:gr(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=nr(t,qf(e,!0)))}const Yo={created(e,{value:t},r){e.checked=nr(t,r.props.value),e._assign=Ir(r),ur(e,"change",()=>{e._assign(In(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Ir(n),t!==r&&(e.checked=nr(t,n.props.value))}},$f={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=gr(t);ur(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?ir(In(a)):In(a));e._assign(e.multiple?i?new Set(s):s:s[0])}),e._assign=Ir(n)},mounted(e,{value:t}){Wf(e,t)},beforeUpdate(e,t,r){e._assign=Ir(r)},updated(e,{value:t}){Wf(e,t)}};function Wf(e,t){const r=e.multiple;if(!(r&&!ce(t)&&!gr(t))){for(let n=0,i=e.options.length;n<i;n++){const s=e.options[n],a=In(s);if(r)ce(t)?s.selected=ni(t,a)>-1:s.selected=t.has(a);else if(nr(In(s),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function In(e){return"_value"in e?e._value:e.value}function qf(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const Ay={created(e,t,r){Us(e,t,r,null,"created")},mounted(e,t,r){Us(e,t,r,null,"mounted")},beforeUpdate(e,t,r,n){Us(e,t,r,n,"beforeUpdate")},updated(e,t,r,n){Us(e,t,r,n,"updated")}};function Us(e,t,r,n,i){let s;switch(e.tagName){case"SELECT":s=$f;break;case"TEXTAREA":s=Bs;break;default:switch(r.props&&r.props.type){case"checkbox":s=qo;break;case"radio":s=Yo;break;default:s=Bs}}const a=s[i];a&&a(e,t,r,n)}function Cy(){Bs.getSSRProps=({value:e})=>({value:e}),Yo.getSSRProps=({value:e},t)=>{if(t.props&&nr(t.props.value,e))return{checked:!0}},qo.getSSRProps=({value:e},t)=>{if(ce(e)){if(t.props&&ni(e,t.props.value)>-1)return{checked:!0}}else if(gr(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}}}const Ry=["ctrl","shift","alt","meta"],wy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Ry.some(r=>e[`${r}Key`]&&!t.includes(r))},Yf=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const s=wy[t[i]];if(s&&s(r,t))return}return e(r,...n)},Oy={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Dn=(e,t)=>r=>{if(!("key"in r))return;const n=vt(r.key);if(t.some(i=>i===n||Oy[i]===n))return e(r)},it={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Ci(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Ci(e,!0),n.enter(e)):n.leave(e,()=>{Ci(e,!1)}):Ci(e,t))},beforeUnmount(e,{value:t}){Ci(e,t)}};function Ci(e,t){e.style.display=t?e._vod:"none"}function Iy(){it.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const zf=Re({patchProp:cy},Xv);let Ri,Xf=!1;function Jf(){return Ri||(Ri=Kc(zf))}function Qf(){return Ri=Xf?Ri:$c(zf),Xf=!0,Ri}const zo=(...e)=>{Jf().render(...e)},Zf=(...e)=>{Qf().hydrate(...e)},Dy=(...e)=>{const t=Jf().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=ed(n);if(!i)return;const s=t._component;!ge(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t},Py=(...e)=>{const t=Qf().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=ed(n);if(i)return r(i,!0,i instanceof SVGElement)},t};function ed(e){return ve(e)?document.querySelector(e):e}let td=!1;const xy=()=>{td||(td=!0,Cy(),Iy())};var Fy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Transition:On,TransitionGroup:Ey,VueElement:Ms,createApp:Dy,createSSRApp:Py,defineCustomElement:Of,defineSSRCustomElement:dy,hydrate:Zf,initDirectivesForSSR:xy,render:zo,useCssModule:py,useCssVars:Ns,vModelCheckbox:qo,vModelDynamic:Ay,vModelRadio:Yo,vModelSelect:$f,vModelText:Bs,vShow:it,withKeys:Dn,withModifiers:Yf,EffectScope:za,ReactiveEffect:ui,computed:We,customRef:ym,effect:jg,effectScope:Fg,getCurrentScope:Mg,isProxy:io,isReactive:zr,isReadonly:hs,isRef:ze,markRaw:so,onScopeDispose:Ng,proxyRefs:lo,reactive:Mt,readonly:no,ref:Et,shallowReactive:cc,shallowReadonly:hm,shallowRef:fc,stop:Hg,toRaw:Le,toRef:hc,toRefs:Em,triggerRef:gm,unref:se,camelize:Ye,capitalize:vr,normalizeClass:mt,normalizeProps:Nu,normalizeStyle:gt,toDisplayString:Ne,toHandlerKey:Kr,BaseTransition:po,Comment:nt,Fragment:Fe,KeepAlive:Bm,Static:Zr,Suspense:Om,Teleport:nv,Text:_n,callWithAsyncErrorHandling:Lt,callWithErrorHandling:Xt,cloneVNode:kr,compatUtils:Yv,createBlock:As,createCommentVNode:Je,createElementBlock:we,createElementVNode:le,createHydrationRenderer:$c,createPropsRestProxy:jv,createRenderer:Kc,createSlots:fv,createStaticVNode:cv,createTextVNode:St,createVNode:he,defineAsyncComponent:Mm,defineComponent:Nt,defineEmits:Fv,defineExpose:Mv,defineProps:xv,get devtools(){return yn},getCurrentInstance:or,getTransitionRawChildren:ys,guardReactiveProps:Zc,h:xs,handleError:en,initCustomFormatter:Gv,inject:Tt,isMemoSame:Tf,isRuntimeOnly:yv,isVNode:Lr,mergeDefaults:Uv,mergeProps:Oo,nextTick:Rn,onActivated:Tc,onBeforeMount:Lc,onBeforeUnmount:Ts,onBeforeUpdate:kc,onDeactivated:Sc,onErrorCaptured:wc,onMounted:Jr,onRenderTracked:Rc,onRenderTriggered:Cc,onServerPrefetch:Ac,onUnmounted:Sn,onUpdated:bs,openBlock:_e,popScopeId:Sr,provide:hi,pushScopeId:Tr,queuePostFlushCb:jo,registerRuntimeCompiler:vv,renderList:kn,renderSlot:ef,resolveComponent:sv,resolveDirective:ov,resolveDynamicComponent:av,resolveFilter:qv,resolveTransitionHooks:Tn,setBlockTracking:Ro,setDevtoolsHook:pc,setTransitionHooks:Xr,ssrContextKey:bf,ssrUtils:Wv,toHandlers:dv,transformVNodeArgs:lv,useAttrs:yf,useSSRContext:Vv,useSlots:Bv,useTransitionState:ho,version:Sf,warn:uf,watch:Jt,watchEffect:Iv,watchPostEffect:gf,watchSyncEffect:Dv,withAsyncContext:Hv,withCtx:En,withDefaults:Nv,withDirectives:ot,withMemo:Kv,withScopeId:_m});function My(){return rd().__VUE_DEVTOOLS_GLOBAL_HOOK__}function rd(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const Ny=typeof Proxy=="function",By="devtools-plugin:setup",Uy="plugin:settings:set";class jy{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const u=t.settings[a];n[a]=u.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let s=Ou({},n);try{const a=localStorage.getItem(i),u=JSON.parse(a);Object.assign(s,u)}catch{}this.fallbacks={getSettings(){return s},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}s=a}},r.on(Uy,(a,u)=>{a===this.plugin.id&&this.fallbacks.setSettings(u)}),this.proxiedOn=new Proxy({},{get:(a,u)=>this.target?this.target.on[u]:(...l)=>{this.onQueue.push({method:u,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,u)=>this.target?this.target[u]:u==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(u)?(...l)=>(this.targetQueue.push({method:u,args:l,resolve:()=>{}}),this.fallbacks[u](...l)):(...l)=>new Promise(o=>{this.targetQueue.push({method:u,args:l,resolve:o})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function Hy(e,t){const r=rd(),n=My(),i=Ny&&e.enableEarlyProxy;if(n&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))n.emit(By,e,t);else{const s=i?new jy(e,n):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:s}),s&&t(s.proxiedTarget)}}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var nd="store";function mL(e){return e===void 0&&(e=null),Tt(e!==null?e:nd)}function Pn(e,t){Object.keys(e).forEach(function(r){return t(e[r],r)})}function Vy(e){return e!==null&&typeof e=="object"}function Gy(e){return e&&typeof e.then=="function"}function Ky(e,t){return function(){return e(t)}}function id(e,t,r){return t.indexOf(e)<0&&(r&&r.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function sd(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;js(e,r,[],e._modules.root,!0),Xo(e,r,t)}function Xo(e,t,r){var n=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,s={};Pn(i,function(a,u){s[u]=Ky(a,e),Object.defineProperty(e.getters,u,{get:function(){return s[u]()},enumerable:!0})}),e._state=Mt({data:t}),e.strict&&zy(e),n&&r&&e._withCommit(function(){n.data=null})}function js(e,t,r,n,i){var s=!r.length,a=e._modules.getNamespace(r);if(n.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=n),!s&&!i){var u=Jo(t,r.slice(0,-1)),l=r[r.length-1];e._withCommit(function(){u[l]=n.state})}var o=n.context=$y(e,a,r);n.forEachMutation(function(h,p){var g=a+p;Wy(e,g,h,o)}),n.forEachAction(function(h,p){var g=h.root?p:a+p,_=h.handler||h;qy(e,g,_,o)}),n.forEachGetter(function(h,p){var g=a+p;Yy(e,g,h,o)}),n.forEachChild(function(h,p){js(e,t,r.concat(p),h,i)})}function $y(e,t,r){var n=t==="",i={dispatch:n?e.dispatch:function(s,a,u){var l=Hs(s,a,u),o=l.payload,h=l.options,p=l.type;return(!h||!h.root)&&(p=t+p),e.dispatch(p,o)},commit:n?e.commit:function(s,a,u){var l=Hs(s,a,u),o=l.payload,h=l.options,p=l.type;(!h||!h.root)&&(p=t+p),e.commit(p,o,h)}};return Object.defineProperties(i,{getters:{get:n?function(){return e.getters}:function(){return ad(e,t)}},state:{get:function(){return Jo(e.state,r)}}}),i}function ad(e,t){if(!e._makeLocalGettersCache[t]){var r={},n=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,n)===t){var s=i.slice(n);Object.defineProperty(r,s,{get:function(){return e.getters[i]},enumerable:!0})}}),e._makeLocalGettersCache[t]=r}return e._makeLocalGettersCache[t]}function Wy(e,t,r,n){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(a){r.call(e,n.state,a)})}function qy(e,t,r,n){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(a){var u=r.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},a);return Gy(u)||(u=Promise.resolve(u)),e._devtoolHook?u.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):u})}function Yy(e,t,r,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return r(n.state,n.getters,s.state,s.getters)})}function zy(e){Jt(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Jo(e,t){return t.reduce(function(r,n){return r[n]},e)}function Hs(e,t,r){return Vy(e)&&e.type&&(r=t,t=e,e=e.type),{type:e,payload:t,options:r}}var Xy="vuex bindings",od="vuex:mutations",Qo="vuex:actions",xn="vuex",Jy=0;function Qy(e,t){Hy({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Xy]},function(r){r.addTimelineLayer({id:od,label:"Vuex Mutations",color:ld}),r.addTimelineLayer({id:Qo,label:"Vuex Actions",color:ld}),r.addInspector({id:xn,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),r.on.getInspectorTree(function(n){if(n.app===e&&n.inspectorId===xn)if(n.filter){var i=[];dd(i,t._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[fd(t._modules.root,"")]}),r.on.getInspectorState(function(n){if(n.app===e&&n.inspectorId===xn){var i=n.nodeId;ad(t,i),n.state=t0(n0(t._modules,i),i==="root"?t.getters:t._makeLocalGettersCache,i)}}),r.on.editInspectorState(function(n){if(n.app===e&&n.inspectorId===xn){var i=n.nodeId,s=n.path;i!=="root"&&(s=i.split("/").filter(Boolean).concat(s)),t._withCommit(function(){n.set(t._state.data,s,n.state.value)})}}),t.subscribe(function(n,i){var s={};n.payload&&(s.payload=n.payload),s.state=i,r.notifyComponentUpdate(),r.sendInspectorTree(xn),r.sendInspectorState(xn),r.addTimelineEvent({layerId:od,event:{time:Date.now(),title:n.type,data:s}})}),t.subscribeAction({before:function(n,i){var s={};n.payload&&(s.payload=n.payload),n._id=Jy++,n._time=Date.now(),s.state=i,r.addTimelineEvent({layerId:Qo,event:{time:n._time,title:n.type,groupId:n._id,subtitle:"start",data:s}})},after:function(n,i){var s={},a=Date.now()-n._time;s.duration={_custom:{type:"duration",display:a+"ms",tooltip:"Action duration",value:a}},n.payload&&(s.payload=n.payload),s.state=i,r.addTimelineEvent({layerId:Qo,event:{time:Date.now(),title:n.type,groupId:n._id,subtitle:"end",data:s}})}})})}var ld=8702998,Zy=6710886,e0=16777215,ud={label:"namespaced",textColor:e0,backgroundColor:Zy};function cd(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function fd(e,t){return{id:t||"root",label:cd(t),tags:e.namespaced?[ud]:[],children:Object.keys(e._children).map(function(r){return fd(e._children[r],t+r+"/")})}}function dd(e,t,r,n){n.includes(r)&&e.push({id:n||"root",label:n.endsWith("/")?n.slice(0,n.length-1):n||"Root",tags:t.namespaced?[ud]:[]}),Object.keys(t._children).forEach(function(i){dd(e,t._children[i],r,n+i+"/")})}function t0(e,t,r){t=r==="root"?t:t[r];var n=Object.keys(t),i={state:Object.keys(e.state).map(function(a){return{key:a,editable:!0,value:e.state[a]}})};if(n.length){var s=r0(t);i.getters=Object.keys(s).map(function(a){return{key:a.endsWith("/")?cd(a):a,editable:!1,value:Zo(function(){return s[a]})}})}return i}function r0(e){var t={};return Object.keys(e).forEach(function(r){var n=r.split("/");if(n.length>1){var i=t,s=n.pop();n.forEach(function(a){i[a]||(i[a]={_custom:{value:{},display:a,tooltip:"Module",abstract:!0}}),i=i[a]._custom.value}),i[s]=Zo(function(){return e[r]})}else t[r]=Zo(function(){return e[r]})}),t}function n0(e,t){var r=t.split("/").filter(function(n){return n});return r.reduce(function(n,i,s){var a=n[i];if(!a)throw new Error('Missing module "'+i+'" for path "'+t+'".');return s===r.length-1?a:a._children},t==="root"?e:e.root._children)}function Zo(e){try{return e()}catch(t){return t}}var Bt=function(t,r){this.runtime=r,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=(typeof n=="function"?n():n)||{}},hd={namespaced:{configurable:!0}};hd.namespaced.get=function(){return!!this._rawModule.namespaced};Bt.prototype.addChild=function(t,r){this._children[t]=r};Bt.prototype.removeChild=function(t){delete this._children[t]};Bt.prototype.getChild=function(t){return this._children[t]};Bt.prototype.hasChild=function(t){return t in this._children};Bt.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Bt.prototype.forEachChild=function(t){Pn(this._children,t)};Bt.prototype.forEachGetter=function(t){this._rawModule.getters&&Pn(this._rawModule.getters,t)};Bt.prototype.forEachAction=function(t){this._rawModule.actions&&Pn(this._rawModule.actions,t)};Bt.prototype.forEachMutation=function(t){this._rawModule.mutations&&Pn(this._rawModule.mutations,t)};Object.defineProperties(Bt.prototype,hd);var sn=function(t){this.register([],t,!1)};sn.prototype.get=function(t){return t.reduce(function(r,n){return r.getChild(n)},this.root)};sn.prototype.getNamespace=function(t){var r=this.root;return t.reduce(function(n,i){return r=r.getChild(i),n+(r.namespaced?i+"/":"")},"")};sn.prototype.update=function(t){pd([],this.root,t)};sn.prototype.register=function(t,r,n){var i=this;n===void 0&&(n=!0);var s=new Bt(r,n);if(t.length===0)this.root=s;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],s)}r.modules&&Pn(r.modules,function(u,l){i.register(t.concat(l),u,n)})};sn.prototype.unregister=function(t){var r=this.get(t.slice(0,-1)),n=t[t.length-1],i=r.getChild(n);!i||!i.runtime||r.removeChild(n)};sn.prototype.isRegistered=function(t){var r=this.get(t.slice(0,-1)),n=t[t.length-1];return r?r.hasChild(n):!1};function pd(e,t,r){if(t.update(r),r.modules)for(var n in r.modules){if(!t.getChild(n))return;pd(e.concat(n),t.getChild(n),r.modules[n])}}function vL(e){return new ut(e)}var ut=function(t){var r=this;t===void 0&&(t={});var n=t.plugins;n===void 0&&(n=[]);var i=t.strict;i===void 0&&(i=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new sn(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var a=this,u=this,l=u.dispatch,o=u.commit;this.dispatch=function(g,_){return l.call(a,g,_)},this.commit=function(g,_,A){return o.call(a,g,_,A)},this.strict=i;var h=this._modules.root.state;js(this,h,[],this._modules.root),Xo(this,h),n.forEach(function(p){return p(r)})},el={state:{configurable:!0}};ut.prototype.install=function(t,r){t.provide(r||nd,this),t.config.globalProperties.$store=this;var n=this._devtools!==void 0?this._devtools:!1;n&&Qy(t,this)};el.state.get=function(){return this._state.data};el.state.set=function(e){};ut.prototype.commit=function(t,r,n){var i=this,s=Hs(t,r,n),a=s.type,u=s.payload,l={type:a,payload:u},o=this._mutations[a];!o||(this._withCommit(function(){o.forEach(function(p){p(u)})}),this._subscribers.slice().forEach(function(h){return h(l,i.state)}))};ut.prototype.dispatch=function(t,r){var n=this,i=Hs(t,r),s=i.type,a=i.payload,u={type:s,payload:a},l=this._actions[s];if(!!l){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(u,n.state)})}catch{}var o=l.length>1?Promise.all(l.map(function(h){return h(a)})):l[0](a);return new Promise(function(h,p){o.then(function(g){try{n._actionSubscribers.filter(function(_){return _.after}).forEach(function(_){return _.after(u,n.state)})}catch{}h(g)},function(g){try{n._actionSubscribers.filter(function(_){return _.error}).forEach(function(_){return _.error(u,n.state,g)})}catch{}p(g)})})}};ut.prototype.subscribe=function(t,r){return id(t,this._subscribers,r)};ut.prototype.subscribeAction=function(t,r){var n=typeof t=="function"?{before:t}:t;return id(n,this._actionSubscribers,r)};ut.prototype.watch=function(t,r,n){var i=this;return Jt(function(){return t(i.state,i.getters)},r,Object.assign({},n))};ut.prototype.replaceState=function(t){var r=this;this._withCommit(function(){r._state.data=t})};ut.prototype.registerModule=function(t,r,n){n===void 0&&(n={}),typeof t=="string"&&(t=[t]),this._modules.register(t,r),js(this,this.state,t,this._modules.get(t),n.preserveState),Xo(this,this.state)};ut.prototype.unregisterModule=function(t){var r=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var n=Jo(r.state,t.slice(0,-1));delete n[t[t.length-1]]}),sd(this)};ut.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};ut.prototype.hotUpdate=function(t){this._modules.update(t),sd(this,!0)};ut.prototype._withCommit=function(t){var r=this._committing;this._committing=!0,t(),this._committing=r};Object.defineProperties(ut.prototype,el);function wi(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var Dr={};/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const i0=typeof window!="undefined";let s0,a0;const o0=/\{([0-9a-zA-Z]+)\}/g;function gd(e,...t){return t.length===1&&Qt(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(o0,(r,n)=>t.hasOwnProperty(n)?t[n]:"")}const l0=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",u0=e=>l0?Symbol(e):e,md=(e,t,r)=>vd({l:e,k:t,s:r}),vd=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),ct=e=>typeof e=="number"&&isFinite(e),yd=e=>Gs(e)==="[object Date]",tl=e=>Gs(e)==="[object RegExp]",Vs=e=>Pe(e)&&Object.keys(e).length===0;function Ed(e,t){typeof console!="undefined"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Pr=Object.assign;let bd;const Td=()=>bd||(bd=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function rl(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const c0=Object.prototype.hasOwnProperty;function f0(e,t){return c0.call(e,t)}const fr=Array.isArray,ft=e=>typeof e=="function",ye=e=>typeof e=="string",dt=e=>typeof e=="boolean",d0=e=>typeof e=="symbol",Qt=e=>e!==null&&typeof e=="object",h0=e=>Qt(e)&&ft(e.then)&&ft(e.catch),nl=Object.prototype.toString,Gs=e=>nl.call(e),Pe=e=>Gs(e)==="[object Object]",Sd=e=>e==null?"":fr(e)||Pe(e)&&e.toString===nl?JSON.stringify(e,null,2):String(e),_d=2;function p0(e,t=0,r=e.length){const n=e.split(/\r?\n/);let i=0;const s=[];for(let a=0;a<n.length;a++)if(i+=n[a].length+1,i>=t){for(let u=a-_d;u<=a+_d||r>i;u++){if(u<0||u>=n.length)continue;const l=u+1;s.push(`${l}${" ".repeat(3-String(l).length)}|  ${n[u]}`);const o=n[u].length;if(u===a){const h=t-(i-o)+1,p=Math.max(1,r>i?o-h:r-t);s.push("   |  "+" ".repeat(h)+"^".repeat(p))}else if(u>a){if(r>i){const h=Math.max(Math.min(r-i,o),1);s.push("   |  "+"^".repeat(h))}i+=o+1}}break}return s.join(`
`)}function g0(){const e=new Map;return{events:e,on(r,n){const i=e.get(r);i&&i.push(n)||e.set(r,[n])},off(r,n){const i=e.get(r);i&&i.splice(i.indexOf(n)>>>0,1)},emit(r,n){(e.get(r)||[]).slice().map(i=>i(n)),(e.get("*")||[]).slice().map(i=>i(r,n))}}}var m0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",assign:Pr,createEmitter:g0,escapeHtml:rl,format:gd,friendlyJSONstringify:vd,generateCodeFrame:p0,generateFormatCacheKey:md,getGlobalThis:Td,hasOwn:f0,inBrowser:i0,isArray:fr,isBoolean:dt,isDate:yd,isEmptyObject:Vs,isFunction:ft,isNumber:ct,isObject:Qt,isPlainObject:Pe,isPromise:h0,isRegExp:tl,isString:ye,isSymbol:d0,makeSymbol:u0,mark:s0,measure:a0,objectToString:nl,toDisplayString:Sd,toTypeString:Gs,warn:Ed}),v0=wi(m0);/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const y0=Object.prototype.hasOwnProperty;function E0(e,t){return y0.call(e,t)}const Ks=e=>e!==null&&typeof e=="object",xr=[];xr[0]={w:[0],i:[3,0],["["]:[4],o:[7]};xr[1]={w:[1],["."]:[2],["["]:[4],o:[7]};xr[2]={w:[2],i:[3,0],["0"]:[3,0]};xr[3]={i:[3,0],["0"]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};xr[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};xr[5]={["'"]:[4,0],o:8,l:[5,0]};xr[6]={['"']:[4,0],o:8,l:[6,0]};const b0=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function T0(e){return b0.test(e)}function S0(e){const t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t===r&&(t===34||t===39)?e.slice(1,-1):e}function _0(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function L0(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:T0(t)?S0(t):"*"+t}function Ld(e){const t=[];let r=-1,n=0,i=0,s,a,u,l,o,h,p;const g=[];g[0]=()=>{a===void 0?a=u:a+=u},g[1]=()=>{a!==void 0&&(t.push(a),a=void 0)},g[2]=()=>{g[0](),i++},g[3]=()=>{if(i>0)i--,n=4,g[0]();else{if(i=0,a===void 0||(a=L0(a),a===!1))return!1;g[1]()}};function _(){const A=e[r+1];if(n===5&&A==="'"||n===6&&A==='"')return r++,u="\\"+A,g[0](),!0}for(;n!==null;)if(r++,s=e[r],!(s==="\\"&&_())){if(l=_0(s),p=xr[n],o=p[l]||p.l||8,o===8||(n=o[0],o[1]!==void 0&&(h=g[o[1]],h&&(u=s,h()===!1))))return;if(n===7)return t}}const kd=new Map;function il(e,t){if(!Ks(e))return null;let r=kd.get(t);if(r||(r=Ld(t),r&&kd.set(t,r)),!r)return null;const n=r.length;let i=e,s=0;for(;s<n;){const a=i[r[s]];if(a===void 0)return null;i=a,s++}return i}function sl(e){if(!Ks(e))return e;for(const t in e)if(!!E0(e,t))if(!t.includes("."))Ks(e[t])&&sl(e[t]);else{const r=t.split("."),n=r.length-1;let i=e;for(let s=0;s<n;s++)r[s]in i||(i[r[s]]={}),i=i[r[s]];i[r[n]]=e[t],delete e[t],Ks(i[r[n]])&&sl(i[r[n]])}return e}/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const k0=e=>e,A0=e=>"",Ad="text",C0=e=>e.length===0?"":e.join(""),R0=Sd;function Cd(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function w0(e){const t=ct(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(ct(e.named.count)||ct(e.named.n))?ct(e.named.count)?e.named.count:ct(e.named.n)?e.named.n:t:t}function O0(e,t){t.count||(t.count=e),t.n||(t.n=e)}function Rd(e={}){const t=e.locale,r=w0(e),n=Qt(e.pluralRules)&&ye(t)&&ft(e.pluralRules[t])?e.pluralRules[t]:Cd,i=Qt(e.pluralRules)&&ye(t)&&ft(e.pluralRules[t])?Cd:void 0,s=c=>c[n(r,c.length,i)],a=e.list||[],u=c=>a[c],l=e.named||{};ct(e.pluralIndex)&&O0(r,l);const o=c=>l[c];function h(c){const d=ft(e.messages)?e.messages(c):Qt(e.messages)?e.messages[c]:!1;return d||(e.parent?e.parent.message(c):A0)}const p=c=>e.modifiers?e.modifiers[c]:k0,g=Pe(e.processor)&&ft(e.processor.normalize)?e.processor.normalize:C0,_=Pe(e.processor)&&ft(e.processor.interpolate)?e.processor.interpolate:R0,A=Pe(e.processor)&&ye(e.processor.type)?e.processor.type:Ad,b={list:u,named:o,plural:s,linked:(c,d)=>{const f=h(c)(b);return ye(d)?p(d)(f):f},message:h,type:A,interpolate:_,normalize:g};return b}/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */function $s(e,t,r={}){const{domain:n,messages:i,args:s}=r,a=e,u=new SyntaxError(String(a));return u.code=e,t&&(u.location=t),u.domain=n,u}function I0(e){throw e}function D0(e,t,r){return{line:e,column:t,offset:r}}function al(e,t,r){const n={start:e,end:t};return r!=null&&(n.source=r),n}const dr=" ",P0="\r",st=`
`,x0=String.fromCharCode(8232),F0=String.fromCharCode(8233);function M0(e){const t=e;let r=0,n=1,i=1,s=0;const a=L=>t[L]===P0&&t[L+1]===st,u=L=>t[L]===st,l=L=>t[L]===F0,o=L=>t[L]===x0,h=L=>a(L)||u(L)||l(L)||o(L),p=()=>r,g=()=>n,_=()=>i,A=()=>s,b=L=>a(L)||l(L)||o(L)?st:t[L],c=()=>b(r),d=()=>b(r+s);function f(){return s=0,h(r)&&(n++,i=0),a(r)&&r++,r++,i++,t[r]}function v(){return a(r+s)&&s++,s++,t[r+s]}function m(){r=0,n=1,i=1,s=0}function y(L=0){s=L}function T(){const L=r+s;for(;L!==r;)f();s=0}return{index:p,line:g,column:_,peekOffset:A,charAt:b,currentChar:c,currentPeek:d,next:f,peek:v,reset:m,resetPeek:y,skipToPeek:T}}const Fr=void 0,wd="'",N0="tokenizer";function B0(e,t={}){const r=t.location!==!1,n=M0(e),i=()=>n.index(),s=()=>D0(n.line(),n.column(),n.index()),a=s(),u=i(),l={currentType:14,offset:u,startLoc:a,endLoc:a,lastType:14,lastOffset:u,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},o=()=>l,{onError:h}=t;function p(U,j,F,...N){const G=o();if(j.column+=F,j.offset+=F,h){const W=al(G.startLoc,j),J=$s(U,W,{domain:N0,args:N});h(J)}}function g(U,j,F){U.endLoc=s(),U.currentType=j;const N={type:j};return r&&(N.loc=al(U.startLoc,U.endLoc)),F!=null&&(N.value=F),N}const _=U=>g(U,14);function A(U,j){return U.currentChar()===j?(U.next(),j):(p(0,s(),0,j),"")}function b(U){let j="";for(;U.currentPeek()===dr||U.currentPeek()===st;)j+=U.currentPeek(),U.peek();return j}function c(U){const j=b(U);return U.skipToPeek(),j}function d(U){if(U===Fr)return!1;const j=U.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j===95}function f(U){if(U===Fr)return!1;const j=U.charCodeAt(0);return j>=48&&j<=57}function v(U,j){const{currentType:F}=j;if(F!==2)return!1;b(U);const N=d(U.currentPeek());return U.resetPeek(),N}function m(U,j){const{currentType:F}=j;if(F!==2)return!1;b(U);const N=U.currentPeek()==="-"?U.peek():U.currentPeek(),G=f(N);return U.resetPeek(),G}function y(U,j){const{currentType:F}=j;if(F!==2)return!1;b(U);const N=U.currentPeek()===wd;return U.resetPeek(),N}function T(U,j){const{currentType:F}=j;if(F!==8)return!1;b(U);const N=U.currentPeek()===".";return U.resetPeek(),N}function L(U,j){const{currentType:F}=j;if(F!==9)return!1;b(U);const N=d(U.currentPeek());return U.resetPeek(),N}function C(U,j){const{currentType:F}=j;if(!(F===8||F===12))return!1;b(U);const N=U.currentPeek()===":";return U.resetPeek(),N}function R(U,j){const{currentType:F}=j;if(F!==10)return!1;const N=()=>{const W=U.currentPeek();return W==="{"?d(U.peek()):W==="@"||W==="%"||W==="|"||W===":"||W==="."||W===dr||!W?!1:W===st?(U.peek(),N()):d(W)},G=N();return U.resetPeek(),G}function E(U){b(U);const j=U.currentPeek()==="|";return U.resetPeek(),j}function S(U,j=!0){const F=(G=!1,W="",J=!1)=>{const ee=U.currentPeek();return ee==="{"?W==="%"?!1:G:ee==="@"||!ee?W==="%"?!0:G:ee==="%"?(U.peek(),F(G,"%",!0)):ee==="|"?W==="%"||J?!0:!(W===dr||W===st):ee===dr?(U.peek(),F(!0,dr,J)):ee===st?(U.peek(),F(!0,st,J)):!0},N=F();return j&&U.resetPeek(),N}function k(U,j){const F=U.currentChar();return F===Fr?Fr:j(F)?(U.next(),F):null}function w(U){return k(U,F=>{const N=F.charCodeAt(0);return N>=97&&N<=122||N>=65&&N<=90||N>=48&&N<=57||N===95||N===36})}function O(U){return k(U,F=>{const N=F.charCodeAt(0);return N>=48&&N<=57})}function I(U){return k(U,F=>{const N=F.charCodeAt(0);return N>=48&&N<=57||N>=65&&N<=70||N>=97&&N<=102})}function P(U){let j="",F="";for(;j=O(U);)F+=j;return F}function D(U){let j="";for(;;){const F=U.currentChar();if(F==="{"||F==="}"||F==="@"||F==="|"||!F)break;if(F==="%")if(S(U))j+=F,U.next();else break;else if(F===dr||F===st)if(S(U))j+=F,U.next();else{if(E(U))break;j+=F,U.next()}else j+=F,U.next()}return j}function x(U){c(U);let j="",F="";for(;j=w(U);)F+=j;return U.currentChar()===Fr&&p(6,s(),0),F}function M(U){c(U);let j="";return U.currentChar()==="-"?(U.next(),j+=`-${P(U)}`):j+=P(U),U.currentChar()===Fr&&p(6,s(),0),j}function B(U){c(U),A(U,"'");let j="",F="";const N=W=>W!==wd&&W!==st;for(;j=k(U,N);)j==="\\"?F+=H(U):F+=j;const G=U.currentChar();return G===st||G===Fr?(p(2,s(),0),G===st&&(U.next(),A(U,"'")),F):(A(U,"'"),F)}function H(U){const j=U.currentChar();switch(j){case"\\":case"'":return U.next(),`\\${j}`;case"u":return $(U,j,4);case"U":return $(U,j,6);default:return p(3,s(),0,j),""}}function $(U,j,F){A(U,j);let N="";for(let G=0;G<F;G++){const W=I(U);if(!W){p(4,s(),0,`\\${j}${N}${U.currentChar()}`);break}N+=W}return`\\${j}${N}`}function q(U){c(U);let j="",F="";const N=G=>G!=="{"&&G!=="}"&&G!==dr&&G!==st;for(;j=k(U,N);)F+=j;return F}function te(U){let j="",F="";for(;j=w(U);)F+=j;return F}function K(U){const j=(F=!1,N)=>{const G=U.currentChar();return G==="{"||G==="%"||G==="@"||G==="|"||!G||G===dr?N:G===st?(N+=G,U.next(),j(F,N)):(N+=G,U.next(),j(!0,N))};return j(!1,"")}function X(U){c(U);const j=A(U,"|");return c(U),j}function z(U,j){let F=null;switch(U.currentChar()){case"{":return j.braceNest>=1&&p(8,s(),0),U.next(),F=g(j,2,"{"),c(U),j.braceNest++,F;case"}":return j.braceNest>0&&j.currentType===2&&p(7,s(),0),U.next(),F=g(j,3,"}"),j.braceNest--,j.braceNest>0&&c(U),j.inLinked&&j.braceNest===0&&(j.inLinked=!1),F;case"@":return j.braceNest>0&&p(6,s(),0),F=Z(U,j)||_(j),j.braceNest=0,F;default:let G=!0,W=!0,J=!0;if(E(U))return j.braceNest>0&&p(6,s(),0),F=g(j,1,X(U)),j.braceNest=0,j.inLinked=!1,F;if(j.braceNest>0&&(j.currentType===5||j.currentType===6||j.currentType===7))return p(6,s(),0),j.braceNest=0,oe(U,j);if(G=v(U,j))return F=g(j,5,x(U)),c(U),F;if(W=m(U,j))return F=g(j,6,M(U)),c(U),F;if(J=y(U,j))return F=g(j,7,B(U)),c(U),F;if(!G&&!W&&!J)return F=g(j,13,q(U)),p(1,s(),0,F.value),c(U),F;break}return F}function Z(U,j){const{currentType:F}=j;let N=null;const G=U.currentChar();switch((F===8||F===9||F===12||F===10)&&(G===st||G===dr)&&p(9,s(),0),G){case"@":return U.next(),N=g(j,8,"@"),j.inLinked=!0,N;case".":return c(U),U.next(),g(j,9,".");case":":return c(U),U.next(),g(j,10,":");default:return E(U)?(N=g(j,1,X(U)),j.braceNest=0,j.inLinked=!1,N):T(U,j)||C(U,j)?(c(U),Z(U,j)):L(U,j)?(c(U),g(j,12,te(U))):R(U,j)?(c(U),G==="{"?z(U,j)||N:g(j,11,K(U))):(F===8&&p(9,s(),0),j.braceNest=0,j.inLinked=!1,oe(U,j))}}function oe(U,j){let F={type:14};if(j.braceNest>0)return z(U,j)||_(j);if(j.inLinked)return Z(U,j)||_(j);const N=U.currentChar();switch(N){case"{":return z(U,j)||_(j);case"}":return p(5,s(),0),U.next(),g(j,3,"}");case"@":return Z(U,j)||_(j);default:if(E(U))return F=g(j,1,X(U)),j.braceNest=0,j.inLinked=!1,F;if(S(U))return g(j,0,D(U));if(N==="%")return U.next(),g(j,4,"%");break}return F}function fe(){const{currentType:U,offset:j,startLoc:F,endLoc:N}=l;return l.lastType=U,l.lastOffset=j,l.lastStartLoc=F,l.lastEndLoc=N,l.offset=i(),l.startLoc=s(),n.currentChar()===Fr?g(l,14):oe(n,l)}return{nextToken:fe,currentOffset:i,currentPosition:s,context:o}}const U0="parser",j0=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function H0(e,t,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(t||r,16);return n<=55295||n>=57344?String.fromCodePoint(n):"\uFFFD"}}}function V0(e={}){const t=e.location!==!1,{onError:r}=e;function n(d,f,v,m,...y){const T=d.currentPosition();if(T.offset+=m,T.column+=m,r){const L=al(v,T),C=$s(f,L,{domain:U0,args:y});r(C)}}function i(d,f,v){const m={type:d,start:f,end:f};return t&&(m.loc={start:v,end:v}),m}function s(d,f,v,m){d.end=f,m&&(d.type=m),t&&d.loc&&(d.loc.end=v)}function a(d,f){const v=d.context(),m=i(3,v.offset,v.startLoc);return m.value=f,s(m,d.currentOffset(),d.currentPosition()),m}function u(d,f){const v=d.context(),{lastOffset:m,lastStartLoc:y}=v,T=i(5,m,y);return T.index=parseInt(f,10),d.nextToken(),s(T,d.currentOffset(),d.currentPosition()),T}function l(d,f){const v=d.context(),{lastOffset:m,lastStartLoc:y}=v,T=i(4,m,y);return T.key=f,d.nextToken(),s(T,d.currentOffset(),d.currentPosition()),T}function o(d,f){const v=d.context(),{lastOffset:m,lastStartLoc:y}=v,T=i(9,m,y);return T.value=f.replace(j0,H0),d.nextToken(),s(T,d.currentOffset(),d.currentPosition()),T}function h(d){const f=d.nextToken(),v=d.context(),{lastOffset:m,lastStartLoc:y}=v,T=i(8,m,y);return f.type!==12?(n(d,11,v.lastStartLoc,0),T.value="",s(T,m,y),{nextConsumeToken:f,node:T}):(f.value==null&&n(d,13,v.lastStartLoc,0,Zt(f)),T.value=f.value||"",s(T,d.currentOffset(),d.currentPosition()),{node:T})}function p(d,f){const v=d.context(),m=i(7,v.offset,v.startLoc);return m.value=f,s(m,d.currentOffset(),d.currentPosition()),m}function g(d){const f=d.context(),v=i(6,f.offset,f.startLoc);let m=d.nextToken();if(m.type===9){const y=h(d);v.modifier=y.node,m=y.nextConsumeToken||d.nextToken()}switch(m.type!==10&&n(d,13,f.lastStartLoc,0,Zt(m)),m=d.nextToken(),m.type===2&&(m=d.nextToken()),m.type){case 11:m.value==null&&n(d,13,f.lastStartLoc,0,Zt(m)),v.key=p(d,m.value||"");break;case 5:m.value==null&&n(d,13,f.lastStartLoc,0,Zt(m)),v.key=l(d,m.value||"");break;case 6:m.value==null&&n(d,13,f.lastStartLoc,0,Zt(m)),v.key=u(d,m.value||"");break;case 7:m.value==null&&n(d,13,f.lastStartLoc,0,Zt(m)),v.key=o(d,m.value||"");break;default:n(d,12,f.lastStartLoc,0);const y=d.context(),T=i(7,y.offset,y.startLoc);return T.value="",s(T,y.offset,y.startLoc),v.key=T,s(v,y.offset,y.startLoc),{nextConsumeToken:m,node:v}}return s(v,d.currentOffset(),d.currentPosition()),{node:v}}function _(d){const f=d.context(),v=f.currentType===1?d.currentOffset():f.offset,m=f.currentType===1?f.endLoc:f.startLoc,y=i(2,v,m);y.items=[];let T=null;do{const R=T||d.nextToken();switch(T=null,R.type){case 0:R.value==null&&n(d,13,f.lastStartLoc,0,Zt(R)),y.items.push(a(d,R.value||""));break;case 6:R.value==null&&n(d,13,f.lastStartLoc,0,Zt(R)),y.items.push(u(d,R.value||""));break;case 5:R.value==null&&n(d,13,f.lastStartLoc,0,Zt(R)),y.items.push(l(d,R.value||""));break;case 7:R.value==null&&n(d,13,f.lastStartLoc,0,Zt(R)),y.items.push(o(d,R.value||""));break;case 8:const E=g(d);y.items.push(E.node),T=E.nextConsumeToken||null;break}}while(f.currentType!==14&&f.currentType!==1);const L=f.currentType===1?f.lastOffset:d.currentOffset(),C=f.currentType===1?f.lastEndLoc:d.currentPosition();return s(y,L,C),y}function A(d,f,v,m){const y=d.context();let T=m.items.length===0;const L=i(1,f,v);L.cases=[],L.cases.push(m);do{const C=_(d);T||(T=C.items.length===0),L.cases.push(C)}while(y.currentType!==14);return T&&n(d,10,v,0),s(L,d.currentOffset(),d.currentPosition()),L}function b(d){const f=d.context(),{offset:v,startLoc:m}=f,y=_(d);return f.currentType===14?y:A(d,v,m,y)}function c(d){const f=B0(d,Pr({},e)),v=f.context(),m=i(0,v.offset,v.startLoc);return t&&m.loc&&(m.loc.source=d),m.body=b(f),v.currentType!==14&&n(f,13,v.lastStartLoc,0,d[v.offset]||""),s(m,f.currentOffset(),f.currentPosition()),m}return{parse:c}}function Zt(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"\u2026":t}function G0(e,t={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:s=>(r.helpers.add(s),s)}}function Od(e,t){for(let r=0;r<e.length;r++)ol(e[r],t)}function ol(e,t){switch(e.type){case 1:Od(e.cases,t),t.helper("plural");break;case 2:Od(e.items,t);break;case 6:ol(e.key,t),t.helper("linked");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function K0(e,t={}){const r=G0(e);r.helper("normalize"),e.body&&ol(e.body,r);const n=r.context();e.helpers=Array.from(n.helpers)}function $0(e,t){const{sourceMap:r,filename:n,breakLineCode:i,needIndent:s}=t,a={source:e.loc.source,filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:s,indentLevel:0},u=()=>a;function l(b,c){a.code+=b}function o(b,c=!0){const d=c?i:"";l(s?d+"  ".repeat(b):d)}function h(b=!0){const c=++a.indentLevel;b&&o(c)}function p(b=!0){const c=--a.indentLevel;b&&o(c)}function g(){o(a.indentLevel)}return{context:u,push:l,indent:h,deindent:p,newline:g,helper:b=>`_${b}`,needIndent:()=>a.needIndent}}function W0(e,t){const{helper:r}=e;e.push(`${r("linked")}(`),Fn(e,t.key),t.modifier&&(e.push(", "),Fn(e,t.modifier)),e.push(")")}function q0(e,t){const{helper:r,needIndent:n}=e;e.push(`${r("normalize")}([`),e.indent(n());const i=t.items.length;for(let s=0;s<i&&(Fn(e,t.items[s]),s!==i-1);s++)e.push(", ");e.deindent(n()),e.push("])")}function Y0(e,t){const{helper:r,needIndent:n}=e;if(t.cases.length>1){e.push(`${r("plural")}([`),e.indent(n());const i=t.cases.length;for(let s=0;s<i&&(Fn(e,t.cases[s]),s!==i-1);s++)e.push(", ");e.deindent(n()),e.push("])")}}function z0(e,t){t.body?Fn(e,t.body):e.push("null")}function Fn(e,t){const{helper:r}=e;switch(t.type){case 0:z0(e,t);break;case 1:Y0(e,t);break;case 2:q0(e,t);break;case 6:W0(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${t.index}))`,t);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const X0=(e,t={})=>{const r=ye(t.mode)?t.mode:"normal",n=ye(t.filename)?t.filename:"message.intl",i=!!t.sourceMap,s=t.breakLineCode!=null?t.breakLineCode:r==="arrow"?";":`
`,a=t.needIndent?t.needIndent:r!=="arrow",u=e.helpers||[],l=$0(e,{mode:r,filename:n,sourceMap:i,breakLineCode:s,needIndent:a});l.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(a),u.length>0&&(l.push(`const { ${u.map(p=>`${p}: _${p}`).join(", ")} } = ctx`),l.newline()),l.push("return "),Fn(l,e),l.deindent(a),l.push("}");const{code:o,map:h}=l.context();return{ast:e,code:o,map:h?h.toJSON():void 0}};function J0(e,t={}){const r=Pr({},t),i=V0(r).parse(e);return K0(i,r),X0(i,r)}/*!
  * @intlify/devtools-if v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Id={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */let Mn=null;function Q0(e){Mn=e}function Z0(){return Mn}function Dd(e,t,r){Mn&&Mn.emit(Id.I18nInit,{timestamp:Date.now(),i18n:e,version:t,meta:r})}const Pd=eE(Id.FunctionTranslate);function eE(e){return t=>Mn&&Mn.emit(e,t)}const tE={[0]:"Not found '{key}' key in '{locale}' locale messages.",[1]:"Fall back to translate '{key}' key with '{target}' locale.",[2]:"Cannot format a number value due to not supported Intl.NumberFormat.",[3]:"Fall back to number format '{key}' key with '{target}' locale.",[4]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[5]:"Fall back to datetime format '{key}' key with '{target}' locale."};function rE(e,...t){return gd(tE[e],...t)}const xd="9.1.9",Ws=-1,nE="";function iE(){return{upper:e=>ye(e)?e.toUpperCase():e,lower:e=>ye(e)?e.toLowerCase():e,capitalize:e=>ye(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}let Fd;function sE(e){Fd=e}let Md=null;const aE=e=>{Md=e},Nd=()=>Md;let Bd=0;function oE(e={}){const t=ye(e.version)?e.version:xd,r=ye(e.locale)?e.locale:"en-US",n=fr(e.fallbackLocale)||Pe(e.fallbackLocale)||ye(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r,i=Pe(e.messages)?e.messages:{[r]:{}},s=Pe(e.datetimeFormats)?e.datetimeFormats:{[r]:{}},a=Pe(e.numberFormats)?e.numberFormats:{[r]:{}},u=Pr({},e.modifiers||{},iE()),l=e.pluralRules||{},o=ft(e.missing)?e.missing:null,h=dt(e.missingWarn)||tl(e.missingWarn)?e.missingWarn:!0,p=dt(e.fallbackWarn)||tl(e.fallbackWarn)?e.fallbackWarn:!0,g=!!e.fallbackFormat,_=!!e.unresolving,A=ft(e.postTranslation)?e.postTranslation:null,b=Pe(e.processor)?e.processor:null,c=dt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,d=!!e.escapeParameter,f=ft(e.messageCompiler)?e.messageCompiler:Fd,v=ft(e.onWarn)?e.onWarn:Ed,m=e,y=Qt(m.__datetimeFormatters)?m.__datetimeFormatters:new Map,T=Qt(m.__numberFormatters)?m.__numberFormatters:new Map,L=Qt(m.__meta)?m.__meta:{};Bd++;const C={version:t,cid:Bd,locale:r,fallbackLocale:n,messages:i,datetimeFormats:s,numberFormats:a,modifiers:u,pluralRules:l,missing:o,missingWarn:h,fallbackWarn:p,fallbackFormat:g,unresolving:_,postTranslation:A,processor:b,warnHtmlMessage:c,escapeParameter:d,messageCompiler:f,onWarn:v,__datetimeFormatters:y,__numberFormatters:T,__meta:L};return __INTLIFY_PROD_DEVTOOLS__&&Dd(C,t,L),C}function lE(e,t){return e instanceof RegExp?e.test(t):e}function uE(e,t){return e instanceof RegExp?e.test(t):e}function qs(e,t,r,n,i){const{missing:s,onWarn:a}=e;if(s!==null){const u=s(e,r,t,i);return ye(u)?u:t}else return t}function Oi(e,t,r){const n=e;n.__localeChainCache||(n.__localeChainCache=new Map);let i=n.__localeChainCache.get(r);if(!i){i=[];let s=[r];for(;fr(s);)s=Ud(i,s,t);const a=fr(t)?t:Pe(t)?t.default?t.default:null:t;s=ye(a)?[a]:a,fr(s)&&Ud(i,s,!1),n.__localeChainCache.set(r,i)}return i}function Ud(e,t,r){let n=!0;for(let i=0;i<t.length&&dt(n);i++){const s=t[i];ye(s)&&(n=cE(e,t[i],r))}return n}function cE(e,t,r){let n;const i=t.split("-");do{const s=i.join("-");n=fE(e,s,r),i.splice(-1,1)}while(i.length&&n===!0);return n}function fE(e,t,r){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";const i=t.replace(/!/g,"");e.push(i),(fr(r)||Pe(r))&&r[i]&&(n=r[i])}return n}function dE(e,t,r){const n=e;n.__localeChainCache=new Map,Oi(e,r,t)}const hE=e=>e;let ll=Object.create(null);function pE(){ll=Object.create(null)}function gE(e,t={}){{const n=(t.onCacheKey||hE)(e),i=ll[n];if(i)return i;let s=!1;const a=t.onError||I0;t.onError=o=>{s=!0,a(o)};const{code:u}=J0(e,t),l=new Function(`return ${u}`)();return s?l:ll[n]=l}}function an(e){return $s(e,null,void 0)}const jd=()=>"",Ut=e=>ft(e);function mE(e,...t){const{fallbackFormat:r,postTranslation:n,unresolving:i,fallbackLocale:s,messages:a}=e,[u,l]=Vd(...t),o=dt(l.missingWarn)?l.missingWarn:e.missingWarn,h=dt(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,p=dt(l.escapeParameter)?l.escapeParameter:e.escapeParameter,g=!!l.resolvedMessage,_=ye(l.default)||dt(l.default)?dt(l.default)?u:l.default:r?u:"",A=r||_!=="",b=ye(l.locale)?l.locale:e.locale;p&&vE(l);let[c,d,f]=g?[u,b,a[b]||{}]:yE(e,u,b,s,h,o),v=u;if(!g&&!(ye(c)||Ut(c))&&A&&(c=_,v=c),!g&&(!(ye(c)||Ut(c))||!ye(d)))return i?Ws:u;let m=!1;const y=()=>{m=!0},T=Ut(c)?c:Hd(e,u,d,c,v,y);if(m)return c;const L=TE(e,d,f,l),C=Rd(L),R=EE(e,T,C),E=n?n(R):R;if(__INTLIFY_PROD_DEVTOOLS__){const S={timestamp:Date.now(),key:ye(u)?u:Ut(c)?c.key:"",locale:d||(Ut(c)?c.locale:""),format:ye(c)?c:Ut(c)?c.source:"",message:E};S.meta=Pr({},e.__meta,Nd()||{}),Pd(S)}return E}function vE(e){fr(e.list)?e.list=e.list.map(t=>ye(t)?rl(t):t):Qt(e.named)&&Object.keys(e.named).forEach(t=>{ye(e.named[t])&&(e.named[t]=rl(e.named[t]))})}function yE(e,t,r,n,i,s){const{messages:a,onWarn:u}=e,l=Oi(e,n,r);let o={},h,p=null;const g="translate";for(let _=0;_<l.length&&(h=l[_],o=a[h]||{},(p=il(o,t))===null&&(p=o[t]),!(ye(p)||ft(p)));_++){const A=qs(e,t,h,s,g);A!==t&&(p=A)}return[p,h,o]}function Hd(e,t,r,n,i,s){const{messageCompiler:a,warnHtmlMessage:u}=e;if(Ut(n)){const o=n;return o.locale=o.locale||r,o.key=o.key||t,o}const l=a(n,bE(e,r,i,n,u,s));return l.locale=r,l.key=t,l.source=n,l}function EE(e,t,r){return t(r)}function Vd(...e){const[t,r,n]=e,i={};if(!ye(t)&&!ct(t)&&!Ut(t))throw an(14);const s=ct(t)?String(t):(Ut(t),t);return ct(r)?i.plural=r:ye(r)?i.default=r:Pe(r)&&!Vs(r)?i.named=r:fr(r)&&(i.list=r),ct(n)?i.plural=n:ye(n)?i.default=n:Pe(n)&&Pr(i,n),[s,i]}function bE(e,t,r,n,i,s){return{warnHtmlMessage:i,onError:a=>{throw s&&s(a),a},onCacheKey:a=>md(t,r,a)}}function TE(e,t,r,n){const{modifiers:i,pluralRules:s}=e,u={locale:t,modifiers:i,pluralRules:s,messages:l=>{const o=il(r,l);if(ye(o)){let h=!1;const g=Hd(e,l,t,o,l,()=>{h=!0});return h?jd:g}else return Ut(o)?o:jd}};return e.processor&&(u.processor=e.processor),n.list&&(u.list=n.list),n.named&&(u.named=n.named),ct(n.plural)&&(u.pluralIndex=n.plural),u}function SE(e,...t){const{datetimeFormats:r,unresolving:n,fallbackLocale:i,onWarn:s}=e,{__datetimeFormatters:a}=e,[u,l,o,h]=Gd(...t),p=dt(o.missingWarn)?o.missingWarn:e.missingWarn;dt(o.fallbackWarn)?o.fallbackWarn:e.fallbackWarn;const g=!!o.part,_=ye(o.locale)?o.locale:e.locale,A=Oi(e,i,_);if(!ye(u)||u==="")return new Intl.DateTimeFormat(_).format(l);let b={},c,d=null;const f="datetime format";for(let y=0;y<A.length&&(c=A[y],b=r[c]||{},d=b[u],!Pe(d));y++)qs(e,u,c,p,f);if(!Pe(d)||!ye(c))return n?Ws:u;let v=`${c}__${u}`;Vs(h)||(v=`${v}__${JSON.stringify(h)}`);let m=a.get(v);return m||(m=new Intl.DateTimeFormat(c,Pr({},d,h)),a.set(v,m)),g?m.formatToParts(l):m.format(l)}function Gd(...e){const[t,r,n,i]=e;let s={},a={},u;if(ye(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw an(16);u=new Date(t);try{u.toISOString()}catch{throw an(16)}}else if(yd(t)){if(isNaN(t.getTime()))throw an(15);u=t}else if(ct(t))u=t;else throw an(14);return ye(r)?s.key=r:Pe(r)&&(s=r),ye(n)?s.locale=n:Pe(n)&&(a=n),Pe(i)&&(a=i),[s.key||"",u,s,a]}function _E(e,t,r){const n=e;for(const i in r){const s=`${t}__${i}`;!n.__datetimeFormatters.has(s)||n.__datetimeFormatters.delete(s)}}function LE(e,...t){const{numberFormats:r,unresolving:n,fallbackLocale:i,onWarn:s}=e,{__numberFormatters:a}=e,[u,l,o,h]=Kd(...t),p=dt(o.missingWarn)?o.missingWarn:e.missingWarn;dt(o.fallbackWarn)?o.fallbackWarn:e.fallbackWarn;const g=!!o.part,_=ye(o.locale)?o.locale:e.locale,A=Oi(e,i,_);if(!ye(u)||u==="")return new Intl.NumberFormat(_).format(l);let b={},c,d=null;const f="number format";for(let y=0;y<A.length&&(c=A[y],b=r[c]||{},d=b[u],!Pe(d));y++)qs(e,u,c,p,f);if(!Pe(d)||!ye(c))return n?Ws:u;let v=`${c}__${u}`;Vs(h)||(v=`${v}__${JSON.stringify(h)}`);let m=a.get(v);return m||(m=new Intl.NumberFormat(c,Pr({},d,h)),a.set(v,m)),g?m.formatToParts(l):m.format(l)}function Kd(...e){const[t,r,n,i]=e;let s={},a={};if(!ct(t))throw an(14);const u=t;return ye(r)?s.key=r:Pe(r)&&(s=r),ye(n)?s.locale=n:Pe(n)&&(a=n),Pe(i)&&(a=i),[s.key||"",u,s,a]}function kE(e,t,r){const n=e;for(const i in r){const s=`${t}__${i}`;!n.__numberFormatters.has(s)||n.__numberFormatters.delete(s)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Td().__INTLIFY_PROD_DEVTOOLS__=!1);var AE=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",MISSING_RESOLVE_VALUE:nE,NOT_REOSLVED:Ws,VERSION:xd,clearCompileCache:pE,clearDateTimeFormat:_E,clearNumberFormat:kE,compileToFunction:gE,createCoreContext:oE,createCoreError:an,datetime:SE,getAdditionalMeta:Nd,getDevToolsHook:Z0,getLocaleChain:Oi,getWarnMessage:rE,handleMissing:qs,initI18nDevTools:Dd,isMessageFunction:Ut,isTranslateFallbackWarn:lE,isTranslateMissingWarn:uE,number:LE,parseDateTimeArgs:Gd,parseNumberArgs:Kd,parseTranslateArgs:Vd,registerMessageCompiler:sE,setAdditionalMeta:aE,setDevToolsHook:Q0,translate:mE,translateDevTools:Pd,updateFallbackLocale:dE,createCompileError:$s,handleFlatJson:sl,parse:Ld,resolveValue:il,DEFAULT_MESSAGE_DATA_TYPE:Ad,createMessageContext:Rd}),CE=wi(AE),$d={exports:{}},Wd={};function ul(e){throw e}function qd(e){}function xe(e,t,r,n){const i=e,s=new SyntaxError(String(i));return s.code=e,s.loc=t,s}const Nn=Symbol(""),Bn=Symbol(""),Ys=Symbol(""),Ii=Symbol(""),cl=Symbol(""),Mr=Symbol(""),fl=Symbol(""),dl=Symbol(""),zs=Symbol(""),Xs=Symbol(""),Un=Symbol(""),Js=Symbol(""),hl=Symbol(""),Qs=Symbol(""),Di=Symbol(""),Zs=Symbol(""),ea=Symbol(""),ta=Symbol(""),ra=Symbol(""),pl=Symbol(""),gl=Symbol(""),Pi=Symbol(""),xi=Symbol(""),na=Symbol(""),ia=Symbol(""),jn=Symbol(""),Hn=Symbol(""),sa=Symbol(""),aa=Symbol(""),Yd=Symbol(""),oa=Symbol(""),Fi=Symbol(""),zd=Symbol(""),Xd=Symbol(""),la=Symbol(""),Jd=Symbol(""),Qd=Symbol(""),ua=Symbol(""),ml=Symbol(""),hr={[Nn]:"Fragment",[Bn]:"Teleport",[Ys]:"Suspense",[Ii]:"KeepAlive",[cl]:"BaseTransition",[Mr]:"openBlock",[fl]:"createBlock",[dl]:"createElementBlock",[zs]:"createVNode",[Xs]:"createElementVNode",[Un]:"createCommentVNode",[Js]:"createTextVNode",[hl]:"createStaticVNode",[Qs]:"resolveComponent",[Di]:"resolveDynamicComponent",[Zs]:"resolveDirective",[ea]:"resolveFilter",[ta]:"withDirectives",[ra]:"renderList",[pl]:"renderSlot",[gl]:"createSlots",[Pi]:"toDisplayString",[xi]:"mergeProps",[na]:"normalizeClass",[ia]:"normalizeStyle",[jn]:"normalizeProps",[Hn]:"guardReactiveProps",[sa]:"toHandlers",[aa]:"camelize",[Yd]:"capitalize",[oa]:"toHandlerKey",[Fi]:"setBlockTracking",[zd]:"pushScopeId",[Xd]:"popScopeId",[la]:"withCtx",[Jd]:"unref",[Qd]:"isRef",[ua]:"withMemo",[ml]:"isMemoSame"};function Zd(e){Object.getOwnPropertySymbols(e).forEach(t=>{hr[t]=e[t]})}const Ge={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function eh(e,t=Ge){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function Vn(e,t,r,n,i,s,a,u=!1,l=!1,o=!1,h=Ge){return e&&(u?(e.helper(Mr),e.helper(cn(e.inSSR,o))):e.helper(un(e.inSSR,o)),a&&e.helper(ta)),{type:13,tag:t,props:r,children:n,patchFlag:i,dynamicProps:s,directives:a,isBlock:u,disableTracking:l,isComponent:o,loc:h}}function Gn(e,t=Ge){return{type:17,loc:t,elements:e}}function At(e,t=Ge){return{type:15,loc:t,properties:e}}function Be(e,t){return{type:16,loc:Ge,key:ve(e)?Ee(e,!0):e,value:t}}function Ee(e,t=!1,r=Ge,n=0){return{type:4,loc:r,content:e,isStatic:t,constType:t?3:n}}function RE(e,t){return{type:5,loc:t,content:ve(e)?Ee(e,!1,t):e}}function jt(e,t=Ge){return{type:8,loc:t,children:e}}function Ue(e,t=[],r=Ge){return{type:14,loc:r,callee:e,arguments:t}}function on(e,t=void 0,r=!1,n=!1,i=Ge){return{type:18,params:e,returns:t,newline:r,isSlot:n,loc:i}}function ca(e,t,r,n=!0){return{type:19,test:e,consequent:t,alternate:r,newline:n,loc:Ge}}function th(e,t,r=!1){return{type:20,index:e,value:t,isVNode:r,loc:Ge}}function rh(e){return{type:21,body:e,loc:Ge}}function wE(e){return{type:22,elements:e,loc:Ge}}function OE(e,t,r){return{type:23,test:e,consequent:t,alternate:r,loc:Ge}}function IE(e,t){return{type:24,left:e,right:t,loc:Ge}}function DE(e){return{type:25,expressions:e,loc:Ge}}function PE(e){return{type:26,returns:e,loc:Ge}}const at=e=>e.type===4&&e.isStatic,ln=(e,t)=>e===t||e===vt(t);function vl(e){if(ln(e,"Teleport"))return Bn;if(ln(e,"Suspense"))return Ys;if(ln(e,"KeepAlive"))return Ii;if(ln(e,"BaseTransition"))return cl}const xE=/^\d|[^\$\w]/,Mi=e=>!xE.test(e),FE=/[A-Za-z_$\xA0-\uFFFF]/,ME=/[\.\?\w$\xA0-\uFFFF]/,NE=/\s+[.[]\s*|\s*[.[]\s+/g,nh=e=>{e=e.trim().replace(NE,a=>a.trim());let t=0,r=[],n=0,i=0,s=null;for(let a=0;a<e.length;a++){const u=e.charAt(a);switch(t){case 0:if(u==="[")r.push(t),t=1,n++;else if(u==="(")r.push(t),t=2,i++;else if(!(a===0?FE:ME).test(u))return!1;break;case 1:u==="'"||u==='"'||u==="`"?(r.push(t),t=3,s=u):u==="["?n++:u==="]"&&(--n||(t=r.pop()));break;case 2:if(u==="'"||u==='"'||u==="`")r.push(t),t=3,s=u;else if(u==="(")i++;else if(u===")"){if(a===e.length-1)return!1;--i||(t=r.pop())}break;case 3:u===s&&(t=r.pop(),s=null);break}}return!n&&!i},BE=tt,yl=nh;function El(e,t,r){const i={source:e.source.slice(t,t+r),start:Ni(e.start,e.source,t),end:e.end};return r!=null&&(i.end=Ni(e.start,e.source,t+r)),i}function Ni(e,t,r=t.length){return Bi(Re({},e),t,r)}function Bi(e,t,r=t.length){let n=0,i=-1;for(let s=0;s<r;s++)t.charCodeAt(s)===10&&(n++,i=s);return e.offset+=r,e.line+=n,e.column=i===-1?e.column+r:r-i,e}function UE(e,t){if(!e)throw new Error(t||"unexpected compiler condition")}function ht(e,t,r=!1){for(let n=0;n<e.props.length;n++){const i=e.props[n];if(i.type===7&&(r||i.exp)&&(ve(t)?i.name===t:t.test(i.name)))return i}}function Kn(e,t,r=!1,n=!1){for(let i=0;i<e.props.length;i++){const s=e.props[i];if(s.type===6){if(r)continue;if(s.name===t&&(s.value||n))return s}else if(s.name==="bind"&&(s.exp||n)&&Ui(s.arg,t))return s}}function Ui(e,t){return!!(e&&at(e)&&e.content===t)}function ih(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function fa(e){return e.type===5||e.type===2}function bl(e){return e.type===7&&e.name==="slot"}function $n(e){return e.type===1&&e.tagType===3}function ji(e){return e.type===1&&e.tagType===2}function un(e,t){return e||t?zs:Xs}function cn(e,t){return e||t?fl:dl}const jE=new Set([jn,Hn]);function sh(e,t=[]){if(e&&!ve(e)&&e.type===14){const r=e.callee;if(!ve(r)&&jE.has(r))return sh(e.arguments[0],t.concat(e))}return[e,t]}function Hi(e,t,r){let n,s=e.type===13?e.props:e.arguments[2],a=[],u;if(s&&!ve(s)&&s.type===14){const l=sh(s);s=l[0],a=l[1],u=a[a.length-1]}if(s==null||ve(s))n=At([t]);else if(s.type===14){const l=s.arguments[0];!ve(l)&&l.type===15?l.properties.unshift(t):s.callee===sa?n=Ue(r.helper(xi),[At([t]),s]):s.arguments.unshift(At([t])),!n&&(n=s)}else if(s.type===15){let l=!1;if(t.key.type===4){const o=t.key.content;l=s.properties.some(h=>h.key.type===4&&h.key.content===o)}l||s.properties.unshift(t),n=s}else n=Ue(r.helper(xi),[At([t]),s]),u&&u.callee===Hn&&(u=a[a.length-2]);e.type===13?u?u.arguments[0]=n:e.props=n:u?u.arguments[0]=n:e.arguments[2]=n}function Wn(e,t){return`_${t}_${e.replace(/[^\w]/g,(r,n)=>r==="-"?"_":e.charCodeAt(n).toString())}`}function Ht(e,t){if(!e||Object.keys(t).length===0)return!1;switch(e.type){case 1:for(let r=0;r<e.props.length;r++){const n=e.props[r];if(n.type===7&&(Ht(n.arg,t)||Ht(n.exp,t)))return!0}return e.children.some(r=>Ht(r,t));case 11:return Ht(e.source,t)?!0:e.children.some(r=>Ht(r,t));case 9:return e.branches.some(r=>Ht(r,t));case 10:return Ht(e.condition,t)?!0:e.children.some(r=>Ht(r,t));case 4:return!e.isStatic&&Mi(e.content)&&!!t[e.content];case 8:return e.children.some(r=>De(r)&&Ht(r,t));case 5:case 12:return Ht(e.content,t);case 2:case 3:return!1;default:return!1}}function ah(e){return e.type===14&&e.callee===ua?e.arguments[1].returns:e}function da(e,{helper:t,removeHelper:r,inSSR:n}){e.isBlock||(e.isBlock=!0,r(un(n,e.isComponent)),t(Mr),t(cn(n,e.isComponent)))}const HE={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3.vuejs.org/guide/migration/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:e=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${e}.sync\` should be changed to \`v-model:${e}\`.`,link:"https://v3.vuejs.org/guide/migration/v-model.html"},COMPILER_V_BIND_PROP:{message:".prop modifier for v-bind has been removed and no longer necessary. Vue 3 will automatically set a binding as DOM property when appropriate."},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3.vuejs.org/guide/migration/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3.vuejs.org/guide/migration/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3.vuejs.org/guide/migration/v-if-v-for.html"},COMPILER_V_FOR_REF:{message:"Ref usage on v-for no longer creates array ref values in Vue 3. Consider using function refs or refactor to avoid ref usage altogether.",link:"https://v3.vuejs.org/guide/migration/array-refs.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3.vuejs.org/guide/migration/inline-template-attribute.html"},COMPILER_FILTER:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3.vuejs.org/guide/migration/filters.html"}};function Tl(e,t){const r=t.options?t.options.compatConfig:t.compatConfig,n=r&&r[e];return e==="MODE"?n||3:n}function fn(e,t){const r=Tl("MODE",t),n=Tl(e,t);return r===3?n===!0:n!==!1}function dn(e,t,r,...n){return fn(e,t)}function VE(e,t,r,...n){if(Tl(e,t)==="suppress-warning")return;const{message:s,link:a}=HE[e],u=`(deprecation ${e}) ${typeof s=="function"?s(...n):s}${a?`
  Details: ${a}`:""}`,l=new SyntaxError(u);l.code=e,r&&(l.loc=r),t.onWarn(l)}const GE=/&(gt|lt|amp|apos|quot);/g,KE={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},oh={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:ii,isPreTag:ii,isCustomElement:ii,decodeEntities:e=>e.replace(GE,(t,r)=>KE[r]),onError:ul,onWarn:qd,comments:!1};function Sl(e,t={}){const r=$E(e,t),n=Ct(r);return eh(_l(r,0,[]),Pt(r,n))}function $E(e,t){const r=Re({},oh);let n;for(n in t)r[n]=t[n]===void 0?oh[n]:t[n];return{options:r,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:r.onWarn}}function _l(e,t,r){const n=ha(r),i=n?n.ns:0,s=[];for(;!eb(e,t,r);){const u=e.source;let l;if(t===0||t===1){if(!e.inVPre&&Qe(u,e.options.delimiters[0]))l=QE(e,t);else if(t===0&&u[0]==="<")if(u.length===1)Oe(e,5,1);else if(u[1]==="!")Qe(u,"<!--")?l=qE(e):Qe(u,"<!DOCTYPE")?l=Vi(e):Qe(u,"<![CDATA[")?i!==0?l=WE(e,r):(Oe(e,1),l=Vi(e)):(Oe(e,11),l=Vi(e));else if(u[1]==="/")if(u.length===2)Oe(e,5,2);else if(u[2]===">"){Oe(e,14,2),Ke(e,3);continue}else if(/[a-z]/i.test(u[2])){Oe(e,23),Ll(e,1,n);continue}else Oe(e,12,2),l=Vi(e);else/[a-z]/i.test(u[1])?(l=YE(e,r),fn("COMPILER_NATIVE_TEMPLATE",e)&&l&&l.tag==="template"&&!l.props.some(o=>o.type===7&&uh(o.name))&&(l=l.children)):u[1]==="?"?(Oe(e,21,1),l=Vi(e)):Oe(e,12,1)}if(l||(l=ZE(e,t)),ce(l))for(let o=0;o<l.length;o++)lh(s,l[o]);else lh(s,l)}let a=!1;if(t!==2&&t!==1){const u=e.options.whitespace!=="preserve";for(let l=0;l<s.length;l++){const o=s[l];if(!e.inPre&&o.type===2)if(/[^\t\r\n\f ]/.test(o.content))u&&(o.content=o.content.replace(/[\t\r\n\f ]+/g," "));else{const h=s[l-1],p=s[l+1];!h||!p||u&&(h.type===3||p.type===3||h.type===1&&p.type===1&&/[\r\n]/.test(o.content))?(a=!0,s[l]=null):o.content=" "}else o.type===3&&!e.options.comments&&(a=!0,s[l]=null)}if(e.inPre&&n&&e.options.isPreTag(n.tag)){const l=s[0];l&&l.type===2&&(l.content=l.content.replace(/^\r?\n/,""))}}return a?s.filter(Boolean):s}function lh(e,t){if(t.type===2){const r=ha(e);if(r&&r.type===2&&r.loc.end.offset===t.loc.start.offset){r.content+=t.content,r.loc.end=t.loc.end,r.loc.source+=t.loc.source;return}}e.push(t)}function WE(e,t){Ke(e,9);const r=_l(e,3,t);return e.source.length===0?Oe(e,6):Ke(e,3),r}function qE(e){const t=Ct(e);let r;const n=/--(\!)?>/.exec(e.source);if(!n)r=e.source.slice(4),Ke(e,e.source.length),Oe(e,7);else{n.index<=3&&Oe(e,0),n[1]&&Oe(e,10),r=e.source.slice(4,n.index);const i=e.source.slice(0,n.index);let s=1,a=0;for(;(a=i.indexOf("<!--",s))!==-1;)Ke(e,a-s+1),a+4<i.length&&Oe(e,16),s=a+1;Ke(e,n.index+n[0].length-s+1)}return{type:3,content:r,loc:Pt(e,t)}}function Vi(e){const t=Ct(e),r=e.source[1]==="?"?1:2;let n;const i=e.source.indexOf(">");return i===-1?(n=e.source.slice(r),Ke(e,e.source.length)):(n=e.source.slice(r,i),Ke(e,i+1)),{type:3,content:n,loc:Pt(e,t)}}function YE(e,t){const r=e.inPre,n=e.inVPre,i=ha(t),s=Ll(e,0,i),a=e.inPre&&!r,u=e.inVPre&&!n;if(s.isSelfClosing||e.options.isVoidTag(s.tag))return a&&(e.inPre=!1),u&&(e.inVPre=!1),s;t.push(s);const l=e.options.getTextMode(s,i),o=_l(e,l,t);t.pop();{const h=s.props.find(p=>p.type===6&&p.name==="inline-template");if(h&&dn("COMPILER_INLINE_TEMPLATE",e,h.loc)){const p=Pt(e,s.loc.end);h.value={type:2,content:p.source,loc:p}}}if(s.children=o,kl(e.source,s.tag))Ll(e,1,i);else if(Oe(e,24,0,s.loc.start),e.source.length===0&&s.tag.toLowerCase()==="script"){const h=o[0];h&&Qe(h.loc.source,"<!--")&&Oe(e,8)}return s.loc=Pt(e,s.loc.start),a&&(e.inPre=!1),u&&(e.inVPre=!1),s}const uh=$e("if,else,else-if,for,slot");function Ll(e,t,r){const n=Ct(e),i=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),s=i[1],a=e.options.getNamespace(s,r);Ke(e,i[0].length),Ki(e);const u=Ct(e),l=e.source;e.options.isPreTag(s)&&(e.inPre=!0);let o=ch(e,t);t===0&&!e.inVPre&&o.some(g=>g.type===7&&g.name==="pre")&&(e.inVPre=!0,Re(e,u),e.source=l,o=ch(e,t).filter(g=>g.name!=="v-pre"));let h=!1;if(e.source.length===0?Oe(e,9):(h=Qe(e.source,"/>"),t===1&&h&&Oe(e,4),Ke(e,h?2:1)),t===1)return;let p=0;return e.inVPre||(s==="slot"?p=2:s==="template"?o.some(g=>g.type===7&&uh(g.name))&&(p=3):zE(s,o,e)&&(p=1)),{type:1,ns:a,tag:s,tagType:p,props:o,isSelfClosing:h,children:[],loc:Pt(e,n),codegenNode:void 0}}function zE(e,t,r){const n=r.options;if(n.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||vl(e)||n.isBuiltInComponent&&n.isBuiltInComponent(e)||n.isNativeTag&&!n.isNativeTag(e))return!0;for(let i=0;i<t.length;i++){const s=t[i];if(s.type===6){if(s.name==="is"&&s.value){if(s.value.content.startsWith("vue:"))return!0;if(dn("COMPILER_IS_ON_ELEMENT",r,s.loc))return!0}}else{if(s.name==="is")return!0;if(s.name==="bind"&&Ui(s.arg,"is")&&!0&&dn("COMPILER_IS_ON_ELEMENT",r,s.loc))return!0}}}function ch(e,t){const r=[],n=new Set;for(;e.source.length>0&&!Qe(e.source,">")&&!Qe(e.source,"/>");){if(Qe(e.source,"/")){Oe(e,22),Ke(e,1),Ki(e);continue}t===1&&Oe(e,3);const i=XE(e,n);i.type===6&&i.value&&i.name==="class"&&(i.value.content=i.value.content.replace(/\s+/g," ").trim()),t===0&&r.push(i),/^[^\t\r\n\f />]/.test(e.source)&&Oe(e,15),Ki(e)}return r}function XE(e,t){const r=Ct(e),i=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(i)&&Oe(e,2),t.add(i),i[0]==="="&&Oe(e,19);{const u=/["'<]/g;let l;for(;l=u.exec(i);)Oe(e,17,l.index)}Ke(e,i.length);let s;/^[\t\r\n\f ]*=/.test(e.source)&&(Ki(e),Ke(e,1),Ki(e),s=JE(e),s||Oe(e,13));const a=Pt(e,r);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(i)){const u=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(i);let l=Qe(i,"."),o=u[1]||(l||Qe(i,":")?"bind":Qe(i,"@")?"on":"slot"),h;if(u[2]){const g=o==="slot",_=i.lastIndexOf(u[2]),A=Pt(e,fh(e,r,_),fh(e,r,_+u[2].length+(g&&u[3]||"").length));let b=u[2],c=!0;b.startsWith("[")?(c=!1,b.endsWith("]")?b=b.slice(1,b.length-1):(Oe(e,27),b=b.slice(1))):g&&(b+=u[3]||""),h={type:4,content:b,isStatic:c,constType:c?3:0,loc:A}}if(s&&s.isQuoted){const g=s.loc;g.start.offset++,g.start.column++,g.end=Ni(g.start,s.content),g.source=g.source.slice(1,-1)}const p=u[3]?u[3].slice(1).split("."):[];return l&&p.push("prop"),o==="bind"&&h&&p.includes("sync")&&dn("COMPILER_V_BIND_SYNC",e,a,h.loc.source)&&(o="model",p.splice(p.indexOf("sync"),1)),{type:7,name:o,exp:s&&{type:4,content:s.content,isStatic:!1,constType:0,loc:s.loc},arg:h,modifiers:p,loc:a}}return!e.inVPre&&Qe(i,"v-")&&Oe(e,26),{type:6,name:i,value:s&&{type:2,content:s.content,loc:s.loc},loc:a}}function JE(e){const t=Ct(e);let r;const n=e.source[0],i=n==='"'||n==="'";if(i){Ke(e,1);const s=e.source.indexOf(n);s===-1?r=Gi(e,e.source.length,4):(r=Gi(e,s,4),Ke(e,1))}else{const s=/^[^\t\r\n\f >]+/.exec(e.source);if(!s)return;const a=/["'<=`]/g;let u;for(;u=a.exec(s[0]);)Oe(e,18,u.index);r=Gi(e,s[0].length,4)}return{content:r,isQuoted:i,loc:Pt(e,t)}}function QE(e,t){const[r,n]=e.options.delimiters,i=e.source.indexOf(n,r.length);if(i===-1){Oe(e,25);return}const s=Ct(e);Ke(e,r.length);const a=Ct(e),u=Ct(e),l=i-r.length,o=e.source.slice(0,l),h=Gi(e,l,t),p=h.trim(),g=h.indexOf(p);g>0&&Bi(a,o,g);const _=l-(h.length-p.length-g);return Bi(u,o,_),Ke(e,n.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:p,loc:Pt(e,a,u)},loc:Pt(e,s)}}function ZE(e,t){const r=t===3?["]]>"]:["<",e.options.delimiters[0]];let n=e.source.length;for(let a=0;a<r.length;a++){const u=e.source.indexOf(r[a],1);u!==-1&&n>u&&(n=u)}const i=Ct(e),s=Gi(e,n,t);return{type:2,content:s,loc:Pt(e,i)}}function Gi(e,t,r){const n=e.source.slice(0,t);return Ke(e,t),r===2||r===3||n.indexOf("&")===-1?n:e.options.decodeEntities(n,r===4)}function Ct(e){const{column:t,line:r,offset:n}=e;return{column:t,line:r,offset:n}}function Pt(e,t,r){return r=r||Ct(e),{start:t,end:r,source:e.originalSource.slice(t.offset,r.offset)}}function ha(e){return e[e.length-1]}function Qe(e,t){return e.startsWith(t)}function Ke(e,t){const{source:r}=e;Bi(e,r,t),e.source=r.slice(t)}function Ki(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&Ke(e,t[0].length)}function fh(e,t,r){return Ni(t,e.originalSource.slice(t.offset,r),r)}function Oe(e,t,r,n=Ct(e)){r&&(n.offset+=r,n.column+=r),e.options.onError(xe(t,{start:n,end:n,source:""}))}function eb(e,t,r){const n=e.source;switch(t){case 0:if(Qe(n,"</")){for(let i=r.length-1;i>=0;--i)if(kl(n,r[i].tag))return!0}break;case 1:case 2:{const i=ha(r);if(i&&kl(n,i.tag))return!0;break}case 3:if(Qe(n,"]]>"))return!0;break}return!n}function kl(e,t){return Qe(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function tb(e,t){pa(e,t,dh(e,e.children[0]))}function dh(e,t){const{children:r}=e;return r.length===1&&t.type===1&&!ji(t)}function pa(e,t,r=!1){let n=!0;const{children:i}=e,s=i.length;let a=0;for(let u=0;u<i.length;u++){const l=i[u];if(l.type===1&&l.tagType===0){const o=r?0:xt(l,t);if(o>0){if(o<3&&(n=!1),o>=2){l.codegenNode.patchFlag=-1+"",l.codegenNode=t.hoist(l.codegenNode),a++;continue}}else{const h=l.codegenNode;if(h.type===13){const p=mh(h);if((!p||p===512||p===1)&&ph(l,t)>=2){const g=gh(l);g&&(h.props=t.hoist(g))}h.dynamicProps&&(h.dynamicProps=t.hoist(h.dynamicProps))}}}else if(l.type===12){const o=xt(l.content,t);o>0&&(o<3&&(n=!1),o>=2&&(l.codegenNode=t.hoist(l.codegenNode),a++))}if(l.type===1){const o=l.tagType===1;o&&t.scopes.vSlot++,pa(l,t),o&&t.scopes.vSlot--}else if(l.type===11)pa(l,t,l.children.length===1);else if(l.type===9)for(let o=0;o<l.branches.length;o++)pa(l.branches[o],t,l.branches[o].children.length===1)}n&&a&&t.transformHoist&&t.transformHoist(i,t,e),a&&a===s&&e.type===1&&e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&ce(e.codegenNode.children)&&(e.codegenNode.children=t.hoist(Gn(e.codegenNode.children)))}function xt(e,t){const{constantCache:r}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const n=r.get(e);if(n!==void 0)return n;const i=e.codegenNode;if(i.type!==13)return 0;if(mh(i))return r.set(e,0),0;{let u=3;const l=ph(e,t);if(l===0)return r.set(e,0),0;l<u&&(u=l);for(let o=0;o<e.children.length;o++){const h=xt(e.children[o],t);if(h===0)return r.set(e,0),0;h<u&&(u=h)}if(u>1)for(let o=0;o<e.props.length;o++){const h=e.props[o];if(h.type===7&&h.name==="bind"&&h.exp){const p=xt(h.exp,t);if(p===0)return r.set(e,0),0;p<u&&(u=p)}}return i.isBlock&&(t.removeHelper(Mr),t.removeHelper(cn(t.inSSR,i.isComponent)),i.isBlock=!1,t.helper(un(t.inSSR,i.isComponent))),r.set(e,u),u}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return xt(e.content,t);case 4:return e.constType;case 8:let a=3;for(let u=0;u<e.children.length;u++){const l=e.children[u];if(ve(l)||Gr(l))continue;const o=xt(l,t);if(o===0)return 0;o<a&&(a=o)}return a;default:return 0}}const rb=new Set([na,ia,jn,Hn]);function hh(e,t){if(e.type===14&&!ve(e.callee)&&rb.has(e.callee)){const r=e.arguments[0];if(r.type===4)return xt(r,t);if(r.type===14)return hh(r,t)}return 0}function ph(e,t){let r=3;const n=gh(e);if(n&&n.type===15){const{properties:i}=n;for(let s=0;s<i.length;s++){const{key:a,value:u}=i[s],l=xt(a,t);if(l===0)return l;l<r&&(r=l);let o;if(u.type===4?o=xt(u,t):u.type===14?o=hh(u,t):o=0,o===0)return o;o<r&&(r=o)}}return r}function gh(e){const t=e.codegenNode;if(t.type===13)return t.props}function mh(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function vh(e,{filename:t="",prefixIdentifiers:r=!1,hoistStatic:n=!1,cacheHandlers:i=!1,nodeTransforms:s=[],directiveTransforms:a={},transformHoist:u=null,isBuiltInComponent:l=tt,isCustomElement:o=tt,expressionPlugins:h=[],scopeId:p=null,slotted:g=!0,ssr:_=!1,inSSR:A=!1,ssrCssVars:b="",bindingMetadata:c=Ce,inline:d=!1,isTS:f=!1,onError:v=ul,onWarn:m=qd,compatConfig:y}){const T=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),L={selfName:T&&vr(Ye(T[1])),prefixIdentifiers:r,hoistStatic:n,cacheHandlers:i,nodeTransforms:s,directiveTransforms:a,transformHoist:u,isBuiltInComponent:l,isCustomElement:o,expressionPlugins:h,scopeId:p,slotted:g,ssr:_,inSSR:A,ssrCssVars:b,bindingMetadata:c,inline:d,isTS:f,onError:v,onWarn:m,compatConfig:y,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(C){const R=L.helpers.get(C)||0;return L.helpers.set(C,R+1),C},removeHelper(C){const R=L.helpers.get(C);if(R){const E=R-1;E?L.helpers.set(C,E):L.helpers.delete(C)}},helperString(C){return`_${hr[L.helper(C)]}`},replaceNode(C){L.parent.children[L.childIndex]=L.currentNode=C},removeNode(C){const R=L.parent.children,E=C?R.indexOf(C):L.currentNode?L.childIndex:-1;!C||C===L.currentNode?(L.currentNode=null,L.onNodeRemoved()):L.childIndex>E&&(L.childIndex--,L.onNodeRemoved()),L.parent.children.splice(E,1)},onNodeRemoved:()=>{},addIdentifiers(C){},removeIdentifiers(C){},hoist(C){ve(C)&&(C=Ee(C)),L.hoists.push(C);const R=Ee(`_hoisted_${L.hoists.length}`,!1,C.loc,2);return R.hoisted=C,R},cache(C,R=!1){return th(L.cached++,C,R)}};return L.filters=new Set,L}function yh(e,t){const r=vh(e,t);$i(e,r),t.hoistStatic&&tb(e,r),t.ssr||nb(e,r),e.helpers=[...r.helpers.keys()],e.components=[...r.components],e.directives=[...r.directives],e.imports=r.imports,e.hoists=r.hoists,e.temps=r.temps,e.cached=r.cached,e.filters=[...r.filters]}function nb(e,t){const{helper:r}=t,{children:n}=e;if(n.length===1){const i=n[0];if(dh(e,i)&&i.codegenNode){const s=i.codegenNode;s.type===13&&da(s,t),e.codegenNode=s}else e.codegenNode=i}else if(n.length>1){let i=64;Ha[64],e.codegenNode=Vn(t,r(Nn),void 0,e.children,i+"",void 0,void 0,!0,void 0,!1)}}function ib(e,t){let r=0;const n=()=>{r--};for(;r<e.children.length;r++){const i=e.children[r];ve(i)||(t.parent=e,t.childIndex=r,t.onNodeRemoved=n,$i(i,t))}}function $i(e,t){t.currentNode=e;const{nodeTransforms:r}=t,n=[];for(let s=0;s<r.length;s++){const a=r[s](e,t);if(a&&(ce(a)?n.push(...a):n.push(a)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(Un);break;case 5:t.ssr||t.helper(Pi);break;case 9:for(let s=0;s<e.branches.length;s++)$i(e.branches[s],t);break;case 10:case 11:case 1:case 0:ib(e,t);break}t.currentNode=e;let i=n.length;for(;i--;)n[i]()}function Al(e,t){const r=ve(e)?n=>n===e:n=>e.test(n);return(n,i)=>{if(n.type===1){const{props:s}=n;if(n.tagType===3&&s.some(bl))return;const a=[];for(let u=0;u<s.length;u++){const l=s[u];if(l.type===7&&r(l.name)){s.splice(u,1),u--;const o=t(n,l,i);o&&a.push(o)}}return a}}}const ga="/*#__PURE__*/";function sb(e,{mode:t="function",prefixIdentifiers:r=t==="module",sourceMap:n=!1,filename:i="template.vue.html",scopeId:s=null,optimizeImports:a=!1,runtimeGlobalName:u="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:o="vue/server-renderer",ssr:h=!1,isTS:p=!1,inSSR:g=!1}){const _={mode:t,prefixIdentifiers:r,sourceMap:n,filename:i,scopeId:s,optimizeImports:a,runtimeGlobalName:u,runtimeModuleName:l,ssrRuntimeModuleName:o,ssr:h,isTS:p,inSSR:g,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(b){return`_${hr[b]}`},push(b,c){_.code+=b},indent(){A(++_.indentLevel)},deindent(b=!1){b?--_.indentLevel:A(--_.indentLevel)},newline(){A(_.indentLevel)}};function A(b){_.push(`
`+"  ".repeat(b))}return _}function Eh(e,t={}){const r=sb(e,t);t.onContextCreated&&t.onContextCreated(r);const{mode:n,push:i,prefixIdentifiers:s,indent:a,deindent:u,newline:l,scopeId:o,ssr:h}=r,p=e.helpers.length>0,g=!s&&n!=="module";ab(e,r);const A=h?"ssrRender":"render",c=(h?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(i(`function ${A}(${c}) {`),a(),g&&(i("with (_ctx) {"),a(),p&&(i(`const { ${e.helpers.map(d=>`${hr[d]}: _${hr[d]}`).join(", ")} } = _Vue`),i(`
`),l())),e.components.length&&(Cl(e.components,"component",r),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(Cl(e.directives,"directive",r),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),Cl(e.filters,"filter",r),l()),e.temps>0){i("let ");for(let d=0;d<e.temps;d++)i(`${d>0?", ":""}_temp${d}`)}return(e.components.length||e.directives.length||e.temps)&&(i(`
`),l()),h||i("return "),e.codegenNode?Ze(e.codegenNode,r):i("null"),g&&(u(),i("}")),u(),i("}"),{ast:e,code:r.code,preamble:"",map:r.map?r.map.toJSON():void 0}}function ab(e,t){const{ssr:r,prefixIdentifiers:n,push:i,newline:s,runtimeModuleName:a,runtimeGlobalName:u,ssrRuntimeModuleName:l}=t,o=u,h=p=>`${hr[p]}: _${hr[p]}`;if(e.helpers.length>0&&(i(`const _Vue = ${o}
`),e.hoists.length)){const p=[zs,Xs,Un,Js,hl].filter(g=>e.helpers.includes(g)).map(h).join(", ");i(`const { ${p} } = _Vue
`)}ob(e.hoists,t),s(),i("return ")}function Cl(e,t,{helper:r,push:n,newline:i,isTS:s}){const a=r(t==="filter"?ea:t==="component"?Qs:Zs);for(let u=0;u<e.length;u++){let l=e[u];const o=l.endsWith("__self");o&&(l=l.slice(0,-6)),n(`const ${Wn(l,t)} = ${a}(${JSON.stringify(l)}${o?", true":""})${s?"!":""}`),u<e.length-1&&i()}}function ob(e,t){if(!e.length)return;t.pure=!0;const{push:r,newline:n,helper:i,scopeId:s,mode:a}=t;n();for(let u=0;u<e.length;u++){const l=e[u];l&&(r(`const _hoisted_${u+1} = `),Ze(l,t),n())}t.pure=!1}function Rl(e,t){const r=e.length>3||!1;t.push("["),r&&t.indent(),Wi(e,t,r),r&&t.deindent(),t.push("]")}function Wi(e,t,r=!1,n=!0){const{push:i,newline:s}=t;for(let a=0;a<e.length;a++){const u=e[a];ve(u)?i(u):ce(u)?Rl(u,t):Ze(u,t),a<e.length-1&&(r?(n&&i(","),s()):n&&i(", "))}}function Ze(e,t){if(ve(e)){t.push(e);return}if(Gr(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:Ze(e.codegenNode,t);break;case 2:lb(e,t);break;case 4:bh(e,t);break;case 5:ub(e,t);break;case 12:Ze(e.codegenNode,t);break;case 8:Th(e,t);break;case 3:fb(e,t);break;case 13:db(e,t);break;case 14:pb(e,t);break;case 15:gb(e,t);break;case 17:mb(e,t);break;case 18:vb(e,t);break;case 19:yb(e,t);break;case 20:Eb(e,t);break;case 21:Wi(e.body,t,!0,!1);break}}function lb(e,t){t.push(JSON.stringify(e.content),e)}function bh(e,t){const{content:r,isStatic:n}=e;t.push(n?JSON.stringify(r):r,e)}function ub(e,t){const{push:r,helper:n,pure:i}=t;i&&r(ga),r(`${n(Pi)}(`),Ze(e.content,t),r(")")}function Th(e,t){for(let r=0;r<e.children.length;r++){const n=e.children[r];ve(n)?t.push(n):Ze(n,t)}}function cb(e,t){const{push:r}=t;if(e.type===8)r("["),Th(e,t),r("]");else if(e.isStatic){const n=Mi(e.content)?e.content:JSON.stringify(e.content);r(n,e)}else r(`[${e.content}]`,e)}function fb(e,t){const{push:r,helper:n,pure:i}=t;i&&r(ga),r(`${n(Un)}(${JSON.stringify(e.content)})`,e)}function db(e,t){const{push:r,helper:n,pure:i}=t,{tag:s,props:a,children:u,patchFlag:l,dynamicProps:o,directives:h,isBlock:p,disableTracking:g,isComponent:_}=e;h&&r(n(ta)+"("),p&&r(`(${n(Mr)}(${g?"true":""}), `),i&&r(ga);const A=p?cn(t.inSSR,_):un(t.inSSR,_);r(n(A)+"(",e),Wi(hb([s,a,u,l,o]),t),r(")"),p&&r(")"),h&&(r(", "),Ze(h,t),r(")"))}function hb(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(r=>r||"null")}function pb(e,t){const{push:r,helper:n,pure:i}=t,s=ve(e.callee)?e.callee:n(e.callee);i&&r(ga),r(s+"(",e),Wi(e.arguments,t),r(")")}function gb(e,t){const{push:r,indent:n,deindent:i,newline:s}=t,{properties:a}=e;if(!a.length){r("{}",e);return}const u=a.length>1||!1;r(u?"{":"{ "),u&&n();for(let l=0;l<a.length;l++){const{key:o,value:h}=a[l];cb(o,t),r(": "),Ze(h,t),l<a.length-1&&(r(","),s())}u&&i(),r(u?"}":" }")}function mb(e,t){Rl(e.elements,t)}function vb(e,t){const{push:r,indent:n,deindent:i}=t,{params:s,returns:a,body:u,newline:l,isSlot:o}=e;o&&r(`_${hr[la]}(`),r("(",e),ce(s)?Wi(s,t):s&&Ze(s,t),r(") => "),(l||u)&&(r("{"),n()),a?(l&&r("return "),ce(a)?Rl(a,t):Ze(a,t)):u&&Ze(u,t),(l||u)&&(i(),r("}")),o&&(e.isNonScopedSlot&&r(", undefined, true"),r(")"))}function yb(e,t){const{test:r,consequent:n,alternate:i,newline:s}=e,{push:a,indent:u,deindent:l,newline:o}=t;if(r.type===4){const p=!Mi(r.content);p&&a("("),bh(r,t),p&&a(")")}else a("("),Ze(r,t),a(")");s&&u(),t.indentLevel++,s||a(" "),a("? "),Ze(n,t),t.indentLevel--,s&&o(),s||a(" "),a(": ");const h=i.type===19;h||t.indentLevel++,Ze(i,t),h||t.indentLevel--,s&&l(!0)}function Eb(e,t){const{push:r,helper:n,indent:i,deindent:s,newline:a}=t;r(`_cache[${e.index}] || (`),e.isVNode&&(i(),r(`${n(Fi)}(-1),`),a()),r(`_cache[${e.index}] = `),Ze(e.value,t),e.isVNode&&(r(","),a(),r(`${n(Fi)}(1),`),a(),r(`_cache[${e.index}]`),s()),r(")")}function bb(e,t,r=!1,n=[],i=Object.create(null)){}function Tb(e,t,r){return!1}function Sb(e,t){if(e&&(e.type==="ObjectProperty"||e.type==="ArrayPattern")){let r=t.length;for(;r--;){const n=t[r];if(n.type==="AssignmentExpression")return!0;if(n.type!=="ObjectProperty"&&!n.type.endsWith("Pattern"))break}}return!1}function _b(e,t){for(const r of e.params)for(const n of Nr(r))t(n)}function Lb(e,t){for(const r of e.body)if(r.type==="VariableDeclaration"){if(r.declare)continue;for(const n of r.declarations)for(const i of Nr(n.id))t(i)}else if(r.type==="FunctionDeclaration"||r.type==="ClassDeclaration"){if(r.declare||!r.id)continue;t(r.id)}}function Nr(e,t=[]){switch(e.type){case"Identifier":t.push(e);break;case"MemberExpression":let r=e;for(;r.type==="MemberExpression";)r=r.object;t.push(r);break;case"ObjectPattern":for(const n of e.properties)n.type==="RestElement"?Nr(n.argument,t):Nr(n.value,t);break;case"ArrayPattern":e.elements.forEach(n=>{n&&Nr(n,t)});break;case"RestElement":Nr(e.argument,t);break;case"AssignmentPattern":Nr(e.left,t);break}return t}const kb=e=>/Function(?:Expression|Declaration)$|Method$/.test(e.type),Sh=e=>e&&(e.type==="ObjectProperty"||e.type==="ObjectMethod")&&!e.computed,Ab=(e,t)=>Sh(t)&&t.key===e;new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");const Cb=(e,t)=>{if(e.type===5)e.content=ma(e.content,t);else if(e.type===1)for(let r=0;r<e.props.length;r++){const n=e.props[r];if(n.type===7&&n.name!=="for"){const i=n.exp,s=n.arg;i&&i.type===4&&!(n.name==="on"&&s)&&(n.exp=ma(i,t,n.name==="slot")),s&&s.type===4&&!s.isStatic&&(n.arg=ma(s,t))}}};function ma(e,t,r=!1,n=!1,i=Object.create(t.identifiers)){return e}const Rb=Al(/^(if|else|else-if)$/,(e,t,r)=>_h(e,t,r,(n,i,s)=>{const a=r.parent.children;let u=a.indexOf(n),l=0;for(;u-->=0;){const o=a[u];o&&o.type===9&&(l+=o.branches.length)}return()=>{if(s)n.codegenNode=kh(i,l,r);else{const o=wb(n.codegenNode);o.alternate=kh(i,l+n.branches.length-1,r)}}}));function _h(e,t,r,n){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;r.onError(xe(28,t.loc)),t.exp=Ee("true",!1,i)}if(t.name==="if"){const i=Lh(e,t),s={type:9,loc:e.loc,branches:[i]};if(r.replaceNode(s),n)return n(s,i,!0)}else{const i=r.parent.children;let s=i.indexOf(e);for(;s-->=-1;){const a=i[s];if(a&&a.type===2&&!a.content.trim().length){r.removeNode(a);continue}if(a&&a.type===9){t.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&r.onError(xe(30,e.loc)),r.removeNode();const u=Lh(e,t);a.branches.push(u);const l=n&&n(a,u,!1);$i(u,r),l&&l(),r.currentNode=null}else r.onError(xe(30,e.loc));break}}}function Lh(e,t){return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:e.tagType===3&&!ht(e,"for")?e.children:[e],userKey:Kn(e,"key")}}function kh(e,t,r){return e.condition?ca(e.condition,Ah(e,t,r),Ue(r.helper(Un),['""',"true"])):Ah(e,t,r)}function Ah(e,t,r){const{helper:n}=r,i=Be("key",Ee(`${t}`,!1,Ge,2)),{children:s}=e,a=s[0];if(s.length!==1||a.type!==1)if(s.length===1&&a.type===11){const l=a.codegenNode;return Hi(l,i,r),l}else{let l=64;return Ha[64],Vn(r,n(Nn),At([i]),s,l+"",void 0,void 0,!0,!1,!1,e.loc)}else{const l=a.codegenNode,o=ah(l);return o.type===13&&da(o,r),Hi(o,i,r),l}}function wb(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const Ob=Al("for",(e,t,r)=>{const{helper:n,removeHelper:i}=r;return Ch(e,t,r,s=>{const a=Ue(n(ra),[s.source]),u=ht(e,"memo"),l=Kn(e,"key"),o=l&&(l.type===6?Ee(l.value.content,!0):l.exp),h=l?Be("key",o):null,p=s.source.type===4&&s.source.constType>0,g=p?64:l?128:256;return s.codegenNode=Vn(r,n(Nn),void 0,a,g+"",void 0,void 0,!0,!p,!1,e.loc),()=>{let _;const A=$n(e),{children:b}=s,c=b.length!==1||b[0].type!==1,d=ji(e)?e:A&&e.children.length===1&&ji(e.children[0])?e.children[0]:null;if(d?(_=d.codegenNode,A&&h&&Hi(_,h,r)):c?_=Vn(r,n(Nn),h?At([h]):void 0,e.children,64+"",void 0,void 0,!0,void 0,!1):(_=b[0].codegenNode,A&&h&&Hi(_,h,r),_.isBlock!==!p&&(_.isBlock?(i(Mr),i(cn(r.inSSR,_.isComponent))):i(un(r.inSSR,_.isComponent))),_.isBlock=!p,_.isBlock?(n(Mr),n(cn(r.inSSR,_.isComponent))):n(un(r.inSSR,_.isComponent))),u){const f=on(ya(s.parseResult,[Ee("_cached")]));f.body=rh([jt(["const _memo = (",u.exp,")"]),jt(["if (_cached",...o?[" && _cached.key === ",o]:[],` && ${r.helperString(ml)}(_cached, _memo)) return _cached`]),jt(["const _item = ",_]),Ee("_item.memo = _memo"),Ee("return _item")]),a.arguments.push(f,Ee("_cache"),Ee(String(r.cached++)))}else a.arguments.push(on(ya(s.parseResult),_,!0))}})});function Ch(e,t,r,n){if(!t.exp){r.onError(xe(31,t.loc));return}const i=wl(t.exp);if(!i){r.onError(xe(32,t.loc));return}const{addIdentifiers:s,removeIdentifiers:a,scopes:u}=r,{source:l,value:o,key:h,index:p}=i,g={type:11,loc:t.loc,source:l,valueAlias:o,keyAlias:h,objectIndexAlias:p,parseResult:i,children:$n(e)?e.children:[e]};r.replaceNode(g),u.vFor++;const _=n&&n(g);return()=>{u.vFor--,_&&_()}}const Ib=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Rh=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Db=/^\(|\)$/g;function wl(e,t){const r=e.loc,n=e.content,i=n.match(Ib);if(!i)return;const[,s,a]=i,u={source:va(r,a.trim(),n.indexOf(a,s.length)),value:void 0,key:void 0,index:void 0};let l=s.trim().replace(Db,"").trim();const o=s.indexOf(l),h=l.match(Rh);if(h){l=l.replace(Rh,"").trim();const p=h[1].trim();let g;if(p&&(g=n.indexOf(p,o+l.length),u.key=va(r,p,g)),h[2]){const _=h[2].trim();_&&(u.index=va(r,_,n.indexOf(_,u.key?g+p.length:o+l.length)))}}return l&&(u.value=va(r,l,o)),u}function va(e,t,r){return Ee(t,!1,El(e,r,t.length))}function ya({value:e,key:t,index:r},n=[]){return Pb([e,t,r,...n])}function Pb(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((r,n)=>r||Ee("_".repeat(n+1),!1))}const wh=Ee("undefined",!1),Oh=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const r=ht(e,"slot");if(r)return r.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},xb=(e,t)=>{let r;if($n(e)&&e.props.some(bl)&&(r=ht(e,"for"))){const n=r.parseResult=wl(r.exp);if(n){const{value:i,key:s,index:a}=n,{addIdentifiers:u,removeIdentifiers:l}=t;return i&&u(i),s&&u(s),a&&u(a),()=>{i&&l(i),s&&l(s),a&&l(a)}}}},Fb=(e,t,r)=>on(e,t,!1,!0,t.length?t[0].loc:r);function Ih(e,t,r=Fb){t.helper(la);const{children:n,loc:i}=e,s=[],a=[];let u=t.scopes.vSlot>0||t.scopes.vFor>0;const l=ht(e,"slot",!0);if(l){const{arg:b,exp:c}=l;b&&!at(b)&&(u=!0),s.push(Be(b||Ee("default",!0),r(c,n,i)))}let o=!1,h=!1;const p=[],g=new Set;for(let b=0;b<n.length;b++){const c=n[b];let d;if(!$n(c)||!(d=ht(c,"slot",!0))){c.type!==3&&p.push(c);continue}if(l){t.onError(xe(37,d.loc));break}o=!0;const{children:f,loc:v}=c,{arg:m=Ee("default",!0),exp:y,loc:T}=d;let L;at(m)?L=m?m.content:"default":u=!0;const C=r(y,f,v);let R,E,S;if(R=ht(c,"if"))u=!0,a.push(ca(R.exp,Ea(m,C),wh));else if(E=ht(c,/^else(-if)?$/,!0)){let k=b,w;for(;k--&&(w=n[k],w.type===3););if(w&&$n(w)&&ht(w,"if")){n.splice(b,1),b--;let O=a[a.length-1];for(;O.alternate.type===19;)O=O.alternate;O.alternate=E.exp?ca(E.exp,Ea(m,C),wh):Ea(m,C)}else t.onError(xe(30,E.loc))}else if(S=ht(c,"for")){u=!0;const k=S.parseResult||wl(S.exp);k?a.push(Ue(t.helper(ra),[k.source,on(ya(k),Ea(m,C),!0)])):t.onError(xe(32,S.loc))}else{if(L){if(g.has(L)){t.onError(xe(38,T));continue}g.add(L),L==="default"&&(h=!0)}s.push(Be(m,C))}}if(!l){const b=(c,d)=>{const f=r(c,d,i);return t.compatConfig&&(f.isNonScopedSlot=!0),Be("default",f)};o?p.length&&p.some(c=>Dh(c))&&(h?t.onError(xe(39,p[0].loc)):s.push(b(void 0,p))):s.push(b(void 0,n))}const _=u?2:ba(e.children)?3:1;let A=At(s.concat(Be("_",Ee(_+"",!1))),i);return a.length&&(A=Ue(t.helper(gl),[A,Gn(a)])),{slots:A,hasDynamicSlots:u}}function Ea(e,t){return At([Be("name",e),Be("fn",t)])}function ba(e){for(let t=0;t<e.length;t++){const r=e[t];switch(r.type){case 1:if(r.tagType===2||ba(r.children))return!0;break;case 9:if(ba(r.branches))return!0;break;case 10:case 11:if(ba(r.children))return!0;break}}return!1}function Dh(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():Dh(e.content)}const Ph=new WeakMap,xh=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:n,props:i}=e,s=e.tagType===1;let a=s?Fh(e,t):`"${n}"`;const u=De(a)&&a.callee===Di;let l,o,h,p=0,g,_,A,b=u||a===Bn||a===Ys||!s&&(n==="svg"||n==="foreignObject"||Kn(e,"key",!0));if(i.length>0){const c=Ol(e,t);l=c.props,p=c.patchFlag,_=c.dynamicPropNames;const d=c.directives;A=d&&d.length?Gn(d.map(f=>Nb(f,t))):void 0}if(e.children.length>0)if(a===Ii&&(b=!0,p|=1024),s&&a!==Bn&&a!==Ii){const{slots:d,hasDynamicSlots:f}=Ih(e,t);o=d,f&&(p|=1024)}else if(e.children.length===1&&a!==Bn){const d=e.children[0],f=d.type,v=f===5||f===8;v&&xt(d,t)===0&&(p|=1),v||f===2?o=d:o=e.children}else o=e.children;p!==0&&(h=String(p),_&&_.length&&(g=Bb(_))),e.codegenNode=Vn(t,a,l,o,h,g,A,!!b,!1,s,e.loc)};function Fh(e,t,r=!1){let{tag:n}=e;const i=Dl(n),s=Kn(e,"is");if(s)if(i||fn("COMPILER_IS_ON_ELEMENT",t)){const l=s.type===6?s.value&&Ee(s.value.content,!0):s.exp;if(l)return Ue(t.helper(Di),[l])}else s.type===6&&s.value.content.startsWith("vue:")&&(n=s.value.content.slice(4));const a=!i&&ht(e,"is");if(a&&a.exp)return Ue(t.helper(Di),[a.exp]);const u=vl(n)||t.isBuiltInComponent(n);return u?(r||t.helper(u),u):(t.helper(Qs),t.components.add(n),Wn(n,"component"))}function Ol(e,t,r=e.props,n=!1){const{tag:i,loc:s}=e,a=e.tagType===1;let u=[];const l=[],o=[];let h=0,p=!1,g=!1,_=!1,A=!1,b=!1,c=!1;const d=[],f=({key:m,value:y})=>{if(at(m)){const T=m.content,L=pr(T);if(!a&&L&&T.toLowerCase()!=="onclick"&&T!=="onUpdate:modelValue"&&!mr(T)&&(A=!0),L&&mr(T)&&(c=!0),y.type===20||(y.type===4||y.type===8)&&xt(y,t)>0)return;T==="ref"?p=!0:T==="class"?g=!0:T==="style"?_=!0:T!=="key"&&!d.includes(T)&&d.push(T),a&&(T==="class"||T==="style")&&!d.includes(T)&&d.push(T)}else b=!0};for(let m=0;m<r.length;m++){const y=r[m];if(y.type===6){const{loc:T,name:L,value:C}=y;let R=Ee(C?C.content:"",!0,C?C.loc:T);if(L==="ref"&&(p=!0),L==="is"&&(Dl(i)||C&&C.content.startsWith("vue:")||fn("COMPILER_IS_ON_ELEMENT",t)))continue;u.push(Be(Ee(L,!0,El(T,0,L.length)),R))}else{const{name:T,arg:L,exp:C,loc:R}=y,E=T==="bind",S=T==="on";if(T==="slot"){a||t.onError(xe(40,R));continue}if(T==="once"||T==="memo"||T==="is"||E&&Ui(L,"is")&&(Dl(i)||fn("COMPILER_IS_ON_ELEMENT",t))||S&&n)continue;if(!L&&(E||S)){if(b=!0,C)if(u.length&&(l.push(At(Il(u),s)),u=[]),E){if(fn("COMPILER_V_BIND_OBJECT_ORDER",t)){l.unshift(C);continue}l.push(C)}else l.push({type:14,loc:R,callee:t.helper(sa),arguments:[C]});else t.onError(xe(E?34:35,R));continue}const k=t.directiveTransforms[T];if(k){const{props:w,needRuntime:O}=k(y,e,t);!n&&w.forEach(f),u.push(...w),O&&(o.push(y),Gr(O)&&Ph.set(y,O))}else o.push(y)}y.type===6&&y.name==="ref"&&t.scopes.vFor>0&&dn("COMPILER_V_FOR_REF",t,y.loc)&&u.push(Be(Ee("refInFor",!0),Ee("true",!1)))}let v;if(l.length?(u.length&&l.push(At(Il(u),s)),l.length>1?v=Ue(t.helper(xi),l,s):v=l[0]):u.length&&(v=At(Il(u),s)),b?h|=16:(g&&!a&&(h|=2),_&&!a&&(h|=4),d.length&&(h|=8),A&&(h|=32)),(h===0||h===32)&&(p||c||o.length>0)&&(h|=512),!t.inSSR&&v)switch(v.type){case 15:let m=-1,y=-1,T=!1;for(let R=0;R<v.properties.length;R++){const E=v.properties[R].key;at(E)?E.content==="class"?m=R:E.content==="style"&&(y=R):E.isHandlerKey||(T=!0)}const L=v.properties[m],C=v.properties[y];T?v=Ue(t.helper(jn),[v]):(L&&!at(L.value)&&(L.value=Ue(t.helper(na),[L.value])),C&&!at(C.value)&&(_||C.value.type===17)&&(C.value=Ue(t.helper(ia),[C.value])));break;case 14:break;default:v=Ue(t.helper(jn),[Ue(t.helper(Hn),[v])]);break}return{props:v,directives:o,patchFlag:h,dynamicPropNames:d}}function Il(e){const t=new Map,r=[];for(let n=0;n<e.length;n++){const i=e[n];if(i.key.type===8||!i.key.isStatic){r.push(i);continue}const s=i.key.content,a=t.get(s);a?(s==="style"||s==="class"||pr(s))&&Mb(a,i):(t.set(s,i),r.push(i))}return r}function Mb(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=Gn([e.value,t.value],e.loc)}function Nb(e,t){const r=[],n=Ph.get(e);n?r.push(t.helperString(n)):(t.helper(Zs),t.directives.add(e.name),r.push(Wn(e.name,"directive")));const{loc:i}=e;if(e.exp&&r.push(e.exp),e.arg&&(e.exp||r.push("void 0"),r.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||r.push("void 0"),r.push("void 0"));const s=Ee("true",!1,i);r.push(At(e.modifiers.map(a=>Be(a,s)),i))}return Gn(r,e.loc)}function Bb(e){let t="[";for(let r=0,n=e.length;r<n;r++)t+=JSON.stringify(e[r]),r<n-1&&(t+=", ");return t+"]"}function Dl(e){return e==="component"||e==="Component"}const Ub=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},jb=/-(\w)/g,Mh=Ub(e=>e.replace(jb,(t,r)=>r?r.toUpperCase():"")),Hb=(e,t)=>{if(ji(e)){const{children:r,loc:n}=e,{slotName:i,slotProps:s}=Nh(e,t),a=[t.prefixIdentifiers?"_ctx.$slots":"$slots",i,"{}","undefined","true"];let u=2;s&&(a[2]=s,u=3),r.length&&(a[3]=on([],r,!1,!1,n),u=4),t.scopeId&&!t.slotted&&(u=5),a.splice(u),e.codegenNode=Ue(t.helper(pl),a,n)}};function Nh(e,t){let r='"default"',n;const i=[];for(let s=0;s<e.props.length;s++){const a=e.props[s];a.type===6?a.value&&(a.name==="name"?r=JSON.stringify(a.value.content):(a.name=Mh(a.name),i.push(a))):a.name==="bind"&&Ui(a.arg,"name")?a.exp&&(r=a.exp):(a.name==="bind"&&a.arg&&at(a.arg)&&(a.arg.content=Mh(a.arg.content)),i.push(a))}if(i.length>0){const{props:s,directives:a}=Ol(e,t,i);n=s,a.length&&t.onError(xe(36,a[0].loc))}return{slotName:r,slotProps:n}}const Vb=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,Pl=(e,t,r,n)=>{const{loc:i,modifiers:s,arg:a}=e;!e.exp&&!s.length&&r.onError(xe(35,i));let u;if(a.type===4)if(a.isStatic){const p=a.content;u=Ee(Kr(Ye(p)),!0,a.loc)}else u=jt([`${r.helperString(oa)}(`,a,")"]);else u=a,u.children.unshift(`${r.helperString(oa)}(`),u.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let o=r.cacheHandlers&&!l&&!r.inVOnce;if(l){const p=yl(l.content),g=!(p||Vb.test(l.content)),_=l.content.includes(";");(g||o&&p)&&(l=jt([`${g?"$event":"(...args)"} => ${_?"{":"("}`,l,_?"}":")"]))}let h={props:[Be(u,l||Ee("() => {}",!1,i))]};return n&&(h=n(h)),o&&(h.props[0].value=r.cache(h.props[0].value)),h.props.forEach(p=>p.key.isHandlerKey=!0),h},Bh=(e,t,r)=>{const{exp:n,modifiers:i,loc:s}=e,a=e.arg;return a.type!==4?(a.children.unshift("("),a.children.push(') || ""')):a.isStatic||(a.content=`${a.content} || ""`),i.includes("camel")&&(a.type===4?a.isStatic?a.content=Ye(a.content):a.content=`${r.helperString(aa)}(${a.content})`:(a.children.unshift(`${r.helperString(aa)}(`),a.children.push(")"))),r.inSSR||(i.includes("prop")&&Uh(a,"."),i.includes("attr")&&Uh(a,"^")),!n||n.type===4&&!n.content.trim()?(r.onError(xe(34,s)),{props:[Be(a,Ee("",!0,s))]}):{props:[Be(a,n)]}},Uh=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},Gb=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const r=e.children;let n,i=!1;for(let s=0;s<r.length;s++){const a=r[s];if(fa(a)){i=!0;for(let u=s+1;u<r.length;u++){const l=r[u];if(fa(l))n||(n=r[s]={type:8,loc:a.loc,children:[a]}),n.children.push(" + ",l),r.splice(u,1),u--;else{n=void 0;break}}}}if(!(!i||r.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(s=>s.type===7&&!t.directiveTransforms[s.name])&&e.tag!=="template")))for(let s=0;s<r.length;s++){const a=r[s];if(fa(a)||a.type===8){const u=[];(a.type!==2||a.content!==" ")&&u.push(a),!t.ssr&&xt(a,t)===0&&u.push(1+""),r[s]={type:12,content:a,loc:a.loc,codegenNode:Ue(t.helper(Js),u)}}}}},jh=new WeakSet,Kb=(e,t)=>{if(e.type===1&&ht(e,"once",!0))return jh.has(e)||t.inVOnce?void 0:(jh.add(e),t.inVOnce=!0,t.helper(Fi),()=>{t.inVOnce=!1;const r=t.currentNode;r.codegenNode&&(r.codegenNode=t.cache(r.codegenNode,!0))})},xl=(e,t,r)=>{const{exp:n,arg:i}=e;if(!n)return r.onError(xe(41,e.loc)),Fl();const s=n.loc.source,a=n.type===4?n.content:s;r.bindingMetadata[s];const u=!1;if(!a.trim()||!yl(a)&&!u)return r.onError(xe(42,n.loc)),Fl();const l=i||Ee("modelValue",!0),o=i?at(i)?`onUpdate:${i.content}`:jt(['"onUpdate:" + ',i]):"onUpdate:modelValue";let h;const p=r.isTS?"($event: any)":"$event";h=jt([`${p} => ((`,n,") = $event)"]);const g=[Be(l,e.exp),Be(o,h)];if(e.modifiers.length&&t.tagType===1){const _=e.modifiers.map(b=>(Mi(b)?b:JSON.stringify(b))+": true").join(", "),A=i?at(i)?`${i.content}Modifiers`:jt([i,' + "Modifiers"']):"modelModifiers";g.push(Be(A,Ee(`{ ${_} }`,!1,e.loc,2)))}return Fl(g)};function Fl(e=[]){return{props:e}}const $b=/[\w).+\-_$\]]/,Wb=(e,t)=>{!fn("COMPILER_FILTER",t)||(e.type===5&&Ta(e.content,t),e.type===1&&e.props.forEach(r=>{r.type===7&&r.name!=="for"&&r.exp&&Ta(r.exp,t)}))};function Ta(e,t){if(e.type===4)Hh(e,t);else for(let r=0;r<e.children.length;r++){const n=e.children[r];typeof n=="object"&&(n.type===4?Hh(n,t):n.type===8?Ta(e,t):n.type===5&&Ta(n.content,t))}}function Hh(e,t){const r=e.content;let n=!1,i=!1,s=!1,a=!1,u=0,l=0,o=0,h=0,p,g,_,A,b=[];for(_=0;_<r.length;_++)if(g=p,p=r.charCodeAt(_),n)p===39&&g!==92&&(n=!1);else if(i)p===34&&g!==92&&(i=!1);else if(s)p===96&&g!==92&&(s=!1);else if(a)p===47&&g!==92&&(a=!1);else if(p===124&&r.charCodeAt(_+1)!==124&&r.charCodeAt(_-1)!==124&&!u&&!l&&!o)A===void 0?(h=_+1,A=r.slice(0,_).trim()):c();else{switch(p){case 34:i=!0;break;case 39:n=!0;break;case 96:s=!0;break;case 40:o++;break;case 41:o--;break;case 91:l++;break;case 93:l--;break;case 123:u++;break;case 125:u--;break}if(p===47){let d=_-1,f;for(;d>=0&&(f=r.charAt(d),f===" ");d--);(!f||!$b.test(f))&&(a=!0)}}A===void 0?A=r.slice(0,_).trim():h!==0&&c();function c(){b.push(r.slice(h,_).trim()),h=_+1}if(b.length){for(_=0;_<b.length;_++)A=qb(A,b[_],t);e.content=A}}function qb(e,t,r){r.helper(ea);const n=t.indexOf("(");if(n<0)return r.filters.add(t),`${Wn(t,"filter")}(${e})`;{const i=t.slice(0,n),s=t.slice(n+1);return r.filters.add(i),`${Wn(i,"filter")}(${e}${s!==")"?","+s:s}`}}const Vh=new WeakSet,Yb=(e,t)=>{if(e.type===1){const r=ht(e,"memo");return!r||Vh.has(e)?void 0:(Vh.add(e),()=>{const n=e.codegenNode||t.currentNode.codegenNode;n&&n.type===13&&(e.tagType!==1&&da(n,t),e.codegenNode=Ue(t.helper(ua),[r.exp,on(void 0,n),"_cache",String(t.cached++)]))})}};function Gh(e){return[[Kb,Rb,Yb,Ob,Wb,Hb,xh,Oh,Gb],{on:Pl,bind:Bh,model:xl}]}function Kh(e,t={}){const r=t.onError||ul,n=t.mode==="module";t.prefixIdentifiers===!0?r(xe(46)):n&&r(xe(47));const i=!1;t.cacheHandlers&&r(xe(48)),t.scopeId&&!n&&r(xe(49));const s=ve(e)?Sl(e,t):e,[a,u]=Gh();return yh(s,Re({},t,{prefixIdentifiers:i,nodeTransforms:[...a,...t.nodeTransforms||[]],directiveTransforms:Re({},u,t.directiveTransforms||{})})),Eh(s,Re({},t,{prefixIdentifiers:i}))}const $h=()=>({props:[]}),Ml=Symbol(""),Nl=Symbol(""),Bl=Symbol(""),Ul=Symbol(""),Sa=Symbol(""),jl=Symbol(""),Hl=Symbol(""),Vl=Symbol(""),Gl=Symbol(""),Kl=Symbol("");Zd({[Ml]:"vModelRadio",[Nl]:"vModelCheckbox",[Bl]:"vModelText",[Ul]:"vModelSelect",[Sa]:"vModelDynamic",[jl]:"withModifiers",[Hl]:"withKeys",[Vl]:"vShow",[Gl]:"Transition",[Kl]:"TransitionGroup"});let qn;function zb(e,t=!1){return qn||(qn=document.createElement("div")),t?(qn.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,qn.children[0].getAttribute("foo")):(qn.innerHTML=e,qn.textContent)}const Xb=$e("style,iframe,script,noscript",!0),$l={isVoidTag:ju,isNativeTag:e=>Bu(e)||Uu(e),isPreTag:e=>e==="pre",decodeEntities:zb,isBuiltInComponent:e=>{if(ln(e,"Transition"))return Gl;if(ln(e,"TransitionGroup"))return Kl},getNamespace(e,t){let r=t?t.ns:0;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(n=>n.type===6&&n.name==="encoding"&&n.value!=null&&(n.value.content==="text/html"||n.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r},getTextMode({tag:e,ns:t}){if(t===0){if(e==="textarea"||e==="title")return 1;if(Xb(e))return 2}return 0}},Wh=e=>{e.type===1&&e.props.forEach((t,r)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[r]={type:7,name:"bind",arg:Ee("style",!0,t.loc),exp:Jb(t.value.content,t.loc),modifiers:[],loc:t.loc})})},Jb=(e,t)=>{const r=Ka(e);return Ee(JSON.stringify(r),!1,t,3)};function er(e,t){return xe(e,t)}const Qb=(e,t,r)=>{const{exp:n,loc:i}=e;return n||r.onError(er(50,i)),t.children.length&&(r.onError(er(51,i)),t.children.length=0),{props:[Be(Ee("innerHTML",!0,i),n||Ee("",!0))]}},Zb=(e,t,r)=>{const{exp:n,loc:i}=e;return n||r.onError(er(52,i)),t.children.length&&(r.onError(er(53,i)),t.children.length=0),{props:[Be(Ee("textContent",!0),n?Ue(r.helperString(Pi),[n],i):Ee("",!0))]}},eT=(e,t,r)=>{const n=xl(e,t,r);if(!n.props.length||t.tagType===1)return n;e.arg&&r.onError(er(55,e.arg.loc));const{tag:i}=t,s=r.isCustomElement(i);if(i==="input"||i==="textarea"||i==="select"||s){let a=Bl,u=!1;if(i==="input"||s){const l=Kn(t,"type");if(l){if(l.type===7)a=Sa;else if(l.value)switch(l.value.content){case"radio":a=Ml;break;case"checkbox":a=Nl;break;case"file":u=!0,r.onError(er(56,e.loc));break}}else ih(t)&&(a=Sa)}else i==="select"&&(a=Ul);u||(n.needRuntime=r.helper(a))}else r.onError(er(54,e.loc));return n.props=n.props.filter(a=>!(a.key.type===4&&a.key.content==="modelValue")),n},tT=$e("passive,once,capture"),rT=$e("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),nT=$e("left,right"),qh=$e("onkeyup,onkeydown,onkeypress",!0),iT=(e,t,r,n)=>{const i=[],s=[],a=[];for(let u=0;u<t.length;u++){const l=t[u];l==="native"&&dn("COMPILER_V_ON_NATIVE",r)||tT(l)?a.push(l):nT(l)?at(e)?qh(e.content)?i.push(l):s.push(l):(i.push(l),s.push(l)):rT(l)?s.push(l):i.push(l)}return{keyModifiers:i,nonKeyModifiers:s,eventOptionModifiers:a}},Yh=(e,t)=>at(e)&&e.content.toLowerCase()==="onclick"?Ee(t,!0):e.type!==4?jt(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,sT=(e,t,r)=>Pl(e,t,r,n=>{const{modifiers:i}=e;if(!i.length)return n;let{key:s,value:a}=n.props[0];const{keyModifiers:u,nonKeyModifiers:l,eventOptionModifiers:o}=iT(s,i,r,e.loc);if(l.includes("right")&&(s=Yh(s,"onContextmenu")),l.includes("middle")&&(s=Yh(s,"onMouseup")),l.length&&(a=Ue(r.helper(jl),[a,JSON.stringify(l)])),u.length&&(!at(s)||qh(s.content))&&(a=Ue(r.helper(Hl),[a,JSON.stringify(u)])),o.length){const h=o.map(vr).join("");s=at(s)?Ee(`${s.content}${h}`,!0):jt(["(",s,`) + "${h}"`])}return{props:[Be(s,a)]}}),aT=(e,t,r)=>{const{exp:n,loc:i}=e;return n||r.onError(er(58,i)),{props:[],needRuntime:r.helper(Vl)}},oT=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&(t.onError(er(60,e.loc)),t.removeNode())},zh=[Wh],Xh={cloak:$h,html:Qb,text:Zb,model:eT,on:sT,show:aT};function lT(e,t={}){return Kh(e,Re({},$l,t,{nodeTransforms:[oT,...zh,...t.nodeTransforms||[]],directiveTransforms:Re({},Xh,t.directiveTransforms||{}),transformHoist:null}))}function uT(e,t={}){return Sl(e,Re({},$l,t))}var cT=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",DOMDirectiveTransforms:Xh,DOMNodeTransforms:zh,TRANSITION:Gl,TRANSITION_GROUP:Kl,V_MODEL_CHECKBOX:Nl,V_MODEL_DYNAMIC:Sa,V_MODEL_RADIO:Ml,V_MODEL_SELECT:Ul,V_MODEL_TEXT:Bl,V_ON_WITH_KEYS:Hl,V_ON_WITH_MODIFIERS:jl,V_SHOW:Vl,compile:lT,createDOMCompilerError:er,parse:uT,parserOptions:$l,transformStyle:Wh,generateCodeFrame:Pu,BASE_TRANSITION:cl,CAMELIZE:aa,CAPITALIZE:Yd,CREATE_BLOCK:fl,CREATE_COMMENT:Un,CREATE_ELEMENT_BLOCK:dl,CREATE_ELEMENT_VNODE:Xs,CREATE_SLOTS:gl,CREATE_STATIC:hl,CREATE_TEXT:Js,CREATE_VNODE:zs,FRAGMENT:Nn,GUARD_REACTIVE_PROPS:Hn,IS_MEMO_SAME:ml,IS_REF:Qd,KEEP_ALIVE:Ii,MERGE_PROPS:xi,NORMALIZE_CLASS:na,NORMALIZE_PROPS:jn,NORMALIZE_STYLE:ia,OPEN_BLOCK:Mr,POP_SCOPE_ID:Xd,PUSH_SCOPE_ID:zd,RENDER_LIST:ra,RENDER_SLOT:pl,RESOLVE_COMPONENT:Qs,RESOLVE_DIRECTIVE:Zs,RESOLVE_DYNAMIC_COMPONENT:Di,RESOLVE_FILTER:ea,SET_BLOCK_TRACKING:Fi,SUSPENSE:Ys,TELEPORT:Bn,TO_DISPLAY_STRING:Pi,TO_HANDLERS:sa,TO_HANDLER_KEY:oa,UNREF:Jd,WITH_CTX:la,WITH_DIRECTIVES:ta,WITH_MEMO:ua,advancePositionWithClone:Ni,advancePositionWithMutation:Bi,assert:UE,baseCompile:Kh,baseParse:Sl,buildProps:Ol,buildSlots:Ih,checkCompatEnabled:dn,createArrayExpression:Gn,createAssignmentExpression:IE,createBlockStatement:rh,createCacheExpression:th,createCallExpression:Ue,createCompilerError:xe,createCompoundExpression:jt,createConditionalExpression:ca,createForLoopParams:ya,createFunctionExpression:on,createIfStatement:OE,createInterpolation:RE,createObjectExpression:At,createObjectProperty:Be,createReturnStatement:PE,createRoot:eh,createSequenceExpression:DE,createSimpleExpression:Ee,createStructuralDirectiveTransform:Al,createTemplateLiteral:wE,createTransformContext:vh,createVNodeCall:Vn,extractIdentifiers:Nr,findDir:ht,findProp:Kn,generate:Eh,getBaseTransformPreset:Gh,getInnerRange:El,getMemoedVNodeCall:ah,getVNodeBlockHelper:cn,getVNodeHelper:un,hasDynamicKeyVBind:ih,hasScopeRef:Ht,helperNameMap:hr,injectProp:Hi,isBindKey:Ui,isBuiltInType:ln,isCoreComponent:vl,isFunctionType:kb,isInDestructureAssignment:Sb,isMemberExpression:yl,isMemberExpressionBrowser:nh,isMemberExpressionNode:BE,isReferencedIdentifier:Tb,isSimpleIdentifier:Mi,isSlotOutlet:ji,isStaticExp:at,isStaticProperty:Sh,isStaticPropertyKey:Ab,isTemplateNode:$n,isText:fa,isVSlot:bl,locStub:Ge,makeBlock:da,noopDirectiveTransform:$h,processExpression:ma,processFor:Ch,processIf:_h,processSlotOutlet:Nh,registerRuntimeHelpers:Zd,resolveComponentType:Fh,toValidAssetId:Wn,trackSlotScopes:Oh,trackVForSlotScopes:xb,transform:yh,transformBind:Bh,transformElement:xh,transformExpression:Cb,transformModel:xl,transformOn:Pl,traverseNode:$i,walkBlockDeclarations:Lb,walkFunctionParams:_b,walkIdentifiers:bb,warnDeprecation:VE}),fT=wi(cT),dT=wi(Fy),hT=wi(xg);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=fT,r=dT,n=hT;function i(l){if(l&&l.__esModule)return l;var o=Object.create(null);return l&&Object.keys(l).forEach(function(h){o[h]=l[h]}),o.default=l,Object.freeze(o)}var s=i(r);const a=Object.create(null);function u(l,o){if(!n.isString(l))if(l.nodeType)l=l.innerHTML;else return n.NOOP;const h=l,p=a[h];if(p)return p;if(l[0]==="#"){const A=document.querySelector(l);l=A?A.innerHTML:""}const{code:g}=t.compile(l,n.extend({hoistStatic:!0,onError:void 0,onWarn:n.NOOP},o)),_=new Function("Vue",g)(s);return _._rc=!0,a[h]=_}r.registerRuntimeCompiler(u),Object.keys(r).forEach(function(l){l!=="default"&&(e[l]=r[l])}),e.compile=u})(Wd);$d.exports=Wd;/*!
  * vue-i18n v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */Object.defineProperty(Dr,"__esModule",{value:!0});var Q=v0,Se=CE,Ae=$d.exports;const Jh="9.1.9",pT={[6]:"Fall back to {type} '{key}' with root locale.",[7]:"Not supported 'preserve'.",[8]:"Not supported 'formatter'.",[9]:"Not supported 'preserveDirectiveContent'.",[10]:"Not supported 'getChoiceIndex'.",[11]:"Component name legacy compatible: '{name}' -> 'i18n'",[12]:"Not found parent scope. use the global scope."};function Vt(e,...t){return Q.format(pT[e],...t)}function et(e,...t){return Se.createCompileError(e,null,{messages:gT,args:t})}const gT={[14]:"Unexpected return type in composer",[15]:"Invalid argument",[16]:"Must be called at the top of a `setup` function",[17]:"Need to install with `app.use` function",[22]:"Unexpected error",[18]:"Not available in legacy mode",[19]:"Required in value: {0}",[20]:"Invalid value",[21]:"Cannot setup vue-devtools plugin"},Wl="__INTLIFY_META__",ql=Q.makeSymbol("__transrateVNode"),Yl=Q.makeSymbol("__datetimeParts"),zl=Q.makeSymbol("__numberParts"),Xl=Q.makeSymbol("__enableEmitter"),Jl=Q.makeSymbol("__disableEmitter"),Qh=Q.makeSymbol("__setPluralRules");Q.makeSymbol("__intlifyMeta");const Zh=Q.makeSymbol("__injectWithOption");let ep=0;function tp(e){return(t,r,n,i)=>e(r,n,Ae.getCurrentInstance()||void 0,i)}function Ql(e,t){const{messages:r,__i18n:n}=t,i=Q.isPlainObject(r)?r:Q.isArray(n)?{}:{[e]:{}};if(Q.isArray(n)&&n.forEach(({locale:s,resource:a})=>{s?(i[s]=i[s]||{},La(a,i[s])):La(a,i)}),t.flatJson)for(const s in i)Q.hasOwn(i,s)&&Se.handleFlatJson(i[s]);return i}const _a=e=>!Q.isObject(e)||Q.isArray(e);function La(e,t){if(_a(e)||_a(t))throw et(20);for(const r in e)Q.hasOwn(e,r)&&(_a(e[r])||_a(t[r])?t[r]=e[r]:La(e[r],t[r]))}const mT=()=>{const e=Ae.getCurrentInstance();return e&&e.type[Wl]?{[Wl]:e.type[Wl]}:null};function Zl(e={}){const{__root:t}=e,r=t===void 0;let n=Q.isBoolean(e.inheritLocale)?e.inheritLocale:!0;const i=Ae.ref(t&&n?t.locale.value:Q.isString(e.locale)?e.locale:"en-US"),s=Ae.ref(t&&n?t.fallbackLocale.value:Q.isString(e.fallbackLocale)||Q.isArray(e.fallbackLocale)||Q.isPlainObject(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i.value),a=Ae.ref(Ql(i.value,e)),u=Ae.ref(Q.isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[i.value]:{}}),l=Ae.ref(Q.isPlainObject(e.numberFormats)?e.numberFormats:{[i.value]:{}});let o=t?t.missingWarn:Q.isBoolean(e.missingWarn)||Q.isRegExp(e.missingWarn)?e.missingWarn:!0,h=t?t.fallbackWarn:Q.isBoolean(e.fallbackWarn)||Q.isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,p=t?t.fallbackRoot:Q.isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,g=!!e.fallbackFormat,_=Q.isFunction(e.missing)?e.missing:null,A=Q.isFunction(e.missing)?tp(e.missing):null,b=Q.isFunction(e.postTranslation)?e.postTranslation:null,c=Q.isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,d=!!e.escapeParameter;const f=t?t.modifiers:Q.isPlainObject(e.modifiers)?e.modifiers:{};let v=e.pluralRules||t&&t.pluralRules,m;function y(){return Se.createCoreContext({version:Jh,locale:i.value,fallbackLocale:s.value,messages:a.value,datetimeFormats:u.value,numberFormats:l.value,modifiers:f,pluralRules:v,missing:A===null?void 0:A,missingWarn:o,fallbackWarn:h,fallbackFormat:g,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:c,escapeParameter:d,__datetimeFormatters:Q.isPlainObject(m)?m.__datetimeFormatters:void 0,__numberFormatters:Q.isPlainObject(m)?m.__numberFormatters:void 0,__v_emitter:Q.isPlainObject(m)?m.__v_emitter:void 0,__meta:{framework:"vue"}})}m=y(),Se.updateFallbackLocale(m,i.value,s.value);function T(){return[i.value,s.value,a.value,u.value,l.value]}const L=Ae.computed({get:()=>i.value,set:V=>{i.value=V,m.locale=i.value}}),C=Ae.computed({get:()=>s.value,set:V=>{s.value=V,m.fallbackLocale=s.value,Se.updateFallbackLocale(m,i.value,V)}}),R=Ae.computed(()=>a.value),E=Ae.computed(()=>u.value),S=Ae.computed(()=>l.value);function k(){return Q.isFunction(b)?b:null}function w(V){b=V,m.postTranslation=V}function O(){return _}function I(V){V!==null&&(A=tp(V)),_=V,m.missing=A}function P(V,Y){return V!=="translate"||!Y.resolvedMessage}function D(V,Y,ie,ue,de,pe){T();let be;try{Se.setAdditionalMeta(mT()),be=V(m)}finally{Se.setAdditionalMeta(null)}if(Q.isNumber(be)&&be===Se.NOT_REOSLVED){const[me,Te]=Y();if(t&&Q.isString(me)&&P(ie,Te)){p&&(Se.isTranslateFallbackWarn(h,me)||Se.isTranslateMissingWarn(o,me))&&Q.warn(Vt(6,{key:me,type:ie}));{const{__v_emitter:je}=m;je&&p&&je.emit("fallback",{type:ie,key:me,to:"global",groupId:`${ie}:${me}`})}}return t&&p?ue(t):de(me)}else{if(pe(be))return be;throw et(14)}}function x(...V){return D(Y=>Se.translate(Y,...V),()=>Se.parseTranslateArgs(...V),"translate",Y=>Y.t(...V),Y=>Y,Y=>Q.isString(Y))}function M(...V){const[Y,ie,ue]=V;if(ue&&!Q.isObject(ue))throw et(15);return x(Y,ie,Q.assign({resolvedMessage:!0},ue||{}))}function B(...V){return D(Y=>Se.datetime(Y,...V),()=>Se.parseDateTimeArgs(...V),"datetime format",Y=>Y.d(...V),()=>Se.MISSING_RESOLVE_VALUE,Y=>Q.isString(Y))}function H(...V){return D(Y=>Se.number(Y,...V),()=>Se.parseNumberArgs(...V),"number format",Y=>Y.n(...V),()=>Se.MISSING_RESOLVE_VALUE,Y=>Q.isString(Y))}function $(V){return V.map(Y=>Q.isString(Y)?Ae.createVNode(Ae.Text,null,Y,0):Y)}const te={normalize:$,interpolate:V=>V,type:"vnode"};function K(...V){return D(Y=>{let ie;const ue=Y;try{ue.processor=te,ie=Se.translate(ue,...V)}finally{ue.processor=null}return ie},()=>Se.parseTranslateArgs(...V),"translate",Y=>Y[ql](...V),Y=>[Ae.createVNode(Ae.Text,null,Y,0)],Y=>Q.isArray(Y))}function X(...V){return D(Y=>Se.number(Y,...V),()=>Se.parseNumberArgs(...V),"number format",Y=>Y[zl](...V),()=>[],Y=>Q.isString(Y)||Q.isArray(Y))}function z(...V){return D(Y=>Se.datetime(Y,...V),()=>Se.parseDateTimeArgs(...V),"datetime format",Y=>Y[Yl](...V),()=>[],Y=>Q.isString(Y)||Q.isArray(Y))}function Z(V){v=V,m.pluralRules=v}function oe(V,Y){const ie=Q.isString(Y)?Y:i.value,ue=j(ie);return Se.resolveValue(ue,V)!==null}function fe(V){let Y=null;const ie=Se.getLocaleChain(m,s.value,i.value);for(let ue=0;ue<ie.length;ue++){const de=a.value[ie[ue]]||{},pe=Se.resolveValue(de,V);if(pe!=null){Y=pe;break}}return Y}function U(V){const Y=fe(V);return Y!=null?Y:t?t.tm(V)||{}:{}}function j(V){return a.value[V]||{}}function F(V,Y){a.value[V]=Y,m.messages=a.value}function N(V,Y){a.value[V]=a.value[V]||{},La(Y,a.value[V]),m.messages=a.value}function G(V){return u.value[V]||{}}function W(V,Y){u.value[V]=Y,m.datetimeFormats=u.value,Se.clearDateTimeFormat(m,V,Y)}function J(V,Y){u.value[V]=Q.assign(u.value[V]||{},Y),m.datetimeFormats=u.value,Se.clearDateTimeFormat(m,V,Y)}function ee(V){return l.value[V]||{}}function ae(V,Y){l.value[V]=Y,m.numberFormats=l.value,Se.clearNumberFormat(m,V,Y)}function ne(V,Y){l.value[V]=Q.assign(l.value[V]||{},Y),m.numberFormats=l.value,Se.clearNumberFormat(m,V,Y)}ep++,t&&(Ae.watch(t.locale,V=>{n&&(i.value=V,m.locale=V,Se.updateFallbackLocale(m,i.value,s.value))}),Ae.watch(t.fallbackLocale,V=>{n&&(s.value=V,m.fallbackLocale=V,Se.updateFallbackLocale(m,i.value,s.value))}));const re={id:ep,locale:L,fallbackLocale:C,get inheritLocale(){return n},set inheritLocale(V){n=V,V&&t&&(i.value=t.locale.value,s.value=t.fallbackLocale.value,Se.updateFallbackLocale(m,i.value,s.value))},get availableLocales(){return Object.keys(a.value).sort()},messages:R,datetimeFormats:E,numberFormats:S,get modifiers(){return f},get pluralRules(){return v||{}},get isGlobal(){return r},get missingWarn(){return o},set missingWarn(V){o=V,m.missingWarn=o},get fallbackWarn(){return h},set fallbackWarn(V){h=V,m.fallbackWarn=h},get fallbackRoot(){return p},set fallbackRoot(V){p=V},get fallbackFormat(){return g},set fallbackFormat(V){g=V,m.fallbackFormat=g},get warnHtmlMessage(){return c},set warnHtmlMessage(V){c=V,m.warnHtmlMessage=V},get escapeParameter(){return d},set escapeParameter(V){d=V,m.escapeParameter=V},t:x,rt:M,d:B,n:H,te:oe,tm:U,getLocaleMessage:j,setLocaleMessage:F,mergeLocaleMessage:N,getDateTimeFormat:G,setDateTimeFormat:W,mergeDateTimeFormat:J,getNumberFormat:ee,setNumberFormat:ae,mergeNumberFormat:ne,getPostTranslationHandler:k,setPostTranslationHandler:w,getMissingHandler:O,setMissingHandler:I,[ql]:K,[zl]:X,[Yl]:z,[Qh]:Z,[Zh]:e.__injectWithOption};return re[Xl]=V=>{m.__v_emitter=V},re[Jl]=()=>{m.__v_emitter=void 0},re}function vT(e){const t=Q.isString(e.locale)?e.locale:"en-US",r=Q.isString(e.fallbackLocale)||Q.isArray(e.fallbackLocale)||Q.isPlainObject(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,n=Q.isFunction(e.missing)?e.missing:void 0,i=Q.isBoolean(e.silentTranslationWarn)||Q.isRegExp(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=Q.isBoolean(e.silentFallbackWarn)||Q.isRegExp(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,a=Q.isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,u=!!e.formatFallbackMessages,l=Q.isPlainObject(e.modifiers)?e.modifiers:{},o=e.pluralizationRules,h=Q.isFunction(e.postTranslation)?e.postTranslation:void 0,p=Q.isString(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,g=!!e.escapeParameterHtml,_=Q.isBoolean(e.sync)?e.sync:!0;e.formatter&&Q.warn(Vt(8)),e.preserveDirectiveContent&&Q.warn(Vt(9));let A=e.messages;if(Q.isPlainObject(e.sharedMessages)){const y=e.sharedMessages;A=Object.keys(y).reduce((L,C)=>{const R=L[C]||(L[C]={});return Q.assign(R,y[C]),L},A||{})}const{__i18n:b,__root:c,__injectWithOption:d}=e,f=e.datetimeFormats,v=e.numberFormats,m=e.flatJson;return{locale:t,fallbackLocale:r,messages:A,flatJson:m,datetimeFormats:f,numberFormats:v,missing:n,missingWarn:i,fallbackWarn:s,fallbackRoot:a,fallbackFormat:u,modifiers:l,pluralRules:o,postTranslation:h,warnHtmlMessage:p,escapeParameter:g,inheritLocale:_,__i18n:b,__root:c,__injectWithOption:d}}function eu(e={}){const t=Zl(vT(e)),r={id:t.id,get locale(){return t.locale.value},set locale(n){t.locale.value=n},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(n){t.fallbackLocale.value=n},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return Q.warn(Vt(8)),{interpolate(){return[]}}},set formatter(n){Q.warn(Vt(8))},get missing(){return t.getMissingHandler()},set missing(n){t.setMissingHandler(n)},get silentTranslationWarn(){return Q.isBoolean(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(n){t.missingWarn=Q.isBoolean(n)?!n:n},get silentFallbackWarn(){return Q.isBoolean(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(n){t.fallbackWarn=Q.isBoolean(n)?!n:n},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(n){t.fallbackFormat=n},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(n){t.setPostTranslationHandler(n)},get sync(){return t.inheritLocale},set sync(n){t.inheritLocale=n},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(n){t.warnHtmlMessage=n!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(n){t.escapeParameter=n},get preserveDirectiveContent(){return Q.warn(Vt(9)),!0},set preserveDirectiveContent(n){Q.warn(Vt(9))},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...n){const[i,s,a]=n,u={};let l=null,o=null;if(!Q.isString(i))throw et(15);const h=i;return Q.isString(s)?u.locale=s:Q.isArray(s)?l=s:Q.isPlainObject(s)&&(o=s),Q.isArray(a)?l=a:Q.isPlainObject(a)&&(o=a),t.t(h,l||o||{},u)},rt(...n){return t.rt(...n)},tc(...n){const[i,s,a]=n,u={plural:1};let l=null,o=null;if(!Q.isString(i))throw et(15);const h=i;return Q.isString(s)?u.locale=s:Q.isNumber(s)?u.plural=s:Q.isArray(s)?l=s:Q.isPlainObject(s)&&(o=s),Q.isString(a)?u.locale=a:Q.isArray(a)?l=a:Q.isPlainObject(a)&&(o=a),t.t(h,l||o||{},u)},te(n,i){return t.te(n,i)},tm(n){return t.tm(n)},getLocaleMessage(n){return t.getLocaleMessage(n)},setLocaleMessage(n,i){t.setLocaleMessage(n,i)},mergeLocaleMessage(n,i){t.mergeLocaleMessage(n,i)},d(...n){return t.d(...n)},getDateTimeFormat(n){return t.getDateTimeFormat(n)},setDateTimeFormat(n,i){t.setDateTimeFormat(n,i)},mergeDateTimeFormat(n,i){t.mergeDateTimeFormat(n,i)},n(...n){return t.n(...n)},getNumberFormat(n){return t.getNumberFormat(n)},setNumberFormat(n,i){t.setNumberFormat(n,i)},mergeNumberFormat(n,i){t.mergeNumberFormat(n,i)},getChoiceIndex(n,i){return Q.warn(Vt(10)),-1},__onComponentInstanceCreated(n){const{componentInstanceCreatedListener:i}=e;i&&i(n,r)}};return r.__enableEmitter=n=>{const i=t;i[Xl]&&i[Xl](n)},r.__disableEmitter=()=>{const n=t;n[Jl]&&n[Jl]()},r}const tu={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}},ka={name:"i18n-t",props:Q.assign({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Q.isNumber(e)||!isNaN(e)}},tu),setup(e,t){const{slots:r,attrs:n}=t,i=e.i18n||Aa({useScope:e.scope,__useComponent:!0}),s=Object.keys(r).filter(a=>a!=="_");return()=>{const a={};e.locale&&(a.locale=e.locale),e.plural!==void 0&&(a.plural=Q.isString(e.plural)?+e.plural:e.plural);const u=yT(t,s),l=i[ql](e.keypath,u,a),o=Q.assign({},n);return Q.isString(e.tag)||Q.isObject(e.tag)?Ae.h(e.tag,o,l):Ae.h(Ae.Fragment,o,l)}}};function yT({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((r,n)=>{const i=e[n];return i&&(r[n]=i()),r},{})}function rp(e,t,r,n){const{slots:i,attrs:s}=t;return()=>{const a={part:!0};let u={};e.locale&&(a.locale=e.locale),Q.isString(e.format)?a.key=e.format:Q.isObject(e.format)&&(Q.isString(e.format.key)&&(a.key=e.format.key),u=Object.keys(e.format).reduce((p,g)=>r.includes(g)?Q.assign({},p,{[g]:e.format[g]}):p,{}));const l=n(e.value,a,u);let o=[a.key];Q.isArray(l)?o=l.map((p,g)=>{const _=i[p.type];return _?_({[p.type]:p.value,index:g,parts:l}):[p.value]}):Q.isString(l)&&(o=[l]);const h=Q.assign({},s);return Q.isString(e.tag)||Q.isObject(e.tag)?Ae.h(e.tag,h,o):Ae.h(Ae.Fragment,h,o)}}const ET=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],ru={name:"i18n-n",props:Q.assign({value:{type:Number,required:!0},format:{type:[String,Object]}},tu),setup(e,t){const r=e.i18n||Aa({useScope:"parent",__useComponent:!0});return rp(e,t,ET,(...n)=>r[zl](...n))}},bT=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],nu={name:"i18n-d",props:Q.assign({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},tu),setup(e,t){const r=e.i18n||Aa({useScope:"parent",__useComponent:!0});return rp(e,t,bT,(...n)=>r[Yl](...n))}};function TT(e,t){const r=e;if(e.mode==="composition")return r.__getInstance(t)||e.global;{const n=r.__getInstance(t);return n!=null?n.__composer:e.global.__composer}}function np(e){const t=(r,{instance:n,value:i,modifiers:s})=>{if(!n||!n.$)throw et(22);const a=TT(e,n.$);s.preserve&&Q.warn(Vt(7));const u=ST(i);r.textContent=a.t(..._T(u))};return{beforeMount:t,beforeUpdate:t}}function ST(e){if(Q.isString(e))return{path:e};if(Q.isPlainObject(e)){if(!("path"in e))throw et(19,"path");return e}else throw et(20)}function _T(e){const{path:t,locale:r,args:n,choice:i,plural:s}=e,a={},u=n||{};return Q.isString(r)&&(a.locale=r),Q.isNumber(i)&&(a.plural=i),Q.isNumber(s)&&(a.plural=s),[t,u,a]}function LT(e,t,...r){const n=Q.isPlainObject(r[0])?r[0]:{},i=!!n.useI18nComponentName,s=Q.isBoolean(n.globalInstall)?n.globalInstall:!0;s&&i&&Q.warn(Vt(11,{name:ka.name})),s&&(e.component(i?"i18n":ka.name,ka),e.component(ru.name,ru),e.component(nu.name,nu)),e.directive("t",np(t))}function kT(e,t,r){return{beforeCreate(){const n=Ae.getCurrentInstance();if(!n)throw et(22);const i=this.$options;if(i.i18n){const s=i.i18n;i.__i18n&&(s.__i18n=i.__i18n),s.__root=t,this===this.$root?this.$i18n=ip(e,s):(s.__injectWithOption=!0,this.$i18n=eu(s))}else i.__i18n?this===this.$root?this.$i18n=ip(e,i):this.$i18n=eu({__i18n:i.__i18n,__injectWithOption:!0,__root:t}):this.$i18n=e;e.__onComponentInstanceCreated(this.$i18n),r.__setInstance(n,this.$i18n),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,a)=>this.$i18n.te(s,a),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s)},mounted(){},beforeUnmount(){const n=Ae.getCurrentInstance();if(!n)throw et(22);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,r.__deleteInstance(n),delete this.$i18n}}}function ip(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Qh](t.pluralizationRules||e.pluralizationRules);const r=Ql(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(r).forEach(n=>e.mergeLocaleMessage(n,r[n])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n])),t.numberFormats&&Object.keys(t.numberFormats).forEach(n=>e.mergeNumberFormat(n,t.numberFormats[n])),e}function AT(e={}){const t=Q.isBoolean(e.legacy)?e.legacy:!0,r=!!e.globalInjection,n=new Map,i=t?eu(e):Zl(e),s=Q.makeSymbol("vue-i18n"),a={get mode(){return t?"legacy":"composition"},async install(u,...l){u.__VUE_I18N_SYMBOL__=s,u.provide(u.__VUE_I18N_SYMBOL__,a),!t&&r&&IT(u,a.global),LT(u,a,...l),t&&u.mixin(kT(i,i.__composer,a))},get global(){return i},__instances:n,__getInstance(u){return n.get(u)||null},__setInstance(u,l){n.set(u,l)},__deleteInstance(u){n.delete(u)}};return a}function Aa(e={}){const t=Ae.getCurrentInstance();if(t==null)throw et(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw et(17);const r=Ae.inject(t.appContext.app.__VUE_I18N_SYMBOL__);if(!r)throw et(22);const n=r.mode==="composition"?r.global:r.global.__composer,i=Q.isEmptyObject(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(i==="global"){let u=Q.isObject(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(u=Ql(n.locale.value,{messages:u,__i18n:t.type.__i18nGlobal}));const l=Object.keys(u);if(l.length&&l.forEach(o=>{n.mergeLocaleMessage(o,u[o])}),Q.isObject(e.datetimeFormats)){const o=Object.keys(e.datetimeFormats);o.length&&o.forEach(h=>{n.mergeDateTimeFormat(h,e.datetimeFormats[h])})}if(Q.isObject(e.numberFormats)){const o=Object.keys(e.numberFormats);o.length&&o.forEach(h=>{n.mergeNumberFormat(h,e.numberFormats[h])})}return n}if(i==="parent"){let u=CT(r,t,e.__useComponent);return u==null&&(Q.warn(Vt(12)),u=n),u}if(r.mode==="legacy")throw et(18);const s=r;let a=s.__getInstance(t);if(a==null){const u=t.type,l=Q.assign({},e);u.__i18n&&(l.__i18n=u.__i18n),n&&(l.__root=n),a=Zl(l),RT(s,t),s.__setInstance(t,a)}return a}function CT(e,t,r=!1){let n=null;const i=t.root;let s=t.parent;for(;s!=null;){const a=e;if(e.mode==="composition")n=a.__getInstance(s);else{const u=a.__getInstance(s);u!=null&&(n=u.__composer),r&&n&&!n[Zh]&&(n=null)}if(n!=null||i===s)break;s=s.parent}return n}function RT(e,t,r){Ae.onMounted(()=>{},t),Ae.onUnmounted(()=>{e.__deleteInstance(t)},t)}const wT=["locale","fallbackLocale","availableLocales"],OT=["t","rt","d","n","tm"];function IT(e,t){const r=Object.create(null);wT.forEach(n=>{const i=Object.getOwnPropertyDescriptor(t,n);if(!i)throw et(22);const s=Ae.isRef(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(r,n,s)}),e.config.globalProperties.$i18n=r,OT.forEach(n=>{const i=Object.getOwnPropertyDescriptor(t,n);if(!i||!i.value)throw et(22);Object.defineProperty(e.config.globalProperties,`$${n}`,i)})}Se.registerMessageCompiler(Se.compileToFunction);{const e=Q.getGlobalThis();e.__INTLIFY__=!0,Se.setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}Dr.DatetimeFormat=nu;Dr.NumberFormat=ru;Dr.Translation=ka;Dr.VERSION=Jh;var yL=Dr.createI18n=AT,EL=Dr.useI18n=Aa;Dr.vTDirective=np;/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const sp=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Yn=e=>sp?Symbol(e):"_vr_"+e,DT=Yn("rvlm"),ap=Yn("rvd"),Ca=Yn("r"),iu=Yn("rl"),su=Yn("rvl"),zn=typeof window!="undefined";function PT(e){return e.__esModule||sp&&e[Symbol.toStringTag]==="Module"}const Ie=Object.assign;function au(e,t){const r={};for(const n in t){const i=t[n];r[n]=Array.isArray(i)?i.map(e):e(i)}return r}const qi=()=>{},xT=/\/$/,FT=e=>e.replace(xT,"");function ou(e,t,r="/"){let n,i={},s="",a="";const u=t.indexOf("?"),l=t.indexOf("#",u>-1?u:0);return u>-1&&(n=t.slice(0,u),s=t.slice(u+1,l>-1?l:t.length),i=e(s)),l>-1&&(n=n||t.slice(0,l),a=t.slice(l,t.length)),n=UT(n!=null?n:t,r),{fullPath:n+(s&&"?")+s+a,path:n,query:i,hash:a}}function MT(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function op(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function NT(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Xn(t.matched[n],r.matched[i])&&lp(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Xn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function lp(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!BT(e[r],t[r]))return!1;return!0}function BT(e,t){return Array.isArray(e)?up(e,t):Array.isArray(t)?up(t,e):e===t}function up(e,t){return Array.isArray(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function UT(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,s,a;for(s=0;s<n.length;s++)if(a=n[s],!(i===1||a==="."))if(a==="..")i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(s-(s===n.length?1:0)).join("/")}var Yi;(function(e){e.pop="pop",e.push="push"})(Yi||(Yi={}));var zi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(zi||(zi={}));function jT(e){if(!e)if(zn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),FT(e)}const HT=/^[^#]+#/;function VT(e,t){return e.replace(HT,"#")+t}function GT(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const Ra=()=>({left:window.pageXOffset,top:window.pageYOffset});function KT(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=GT(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function cp(e,t){return(history.state?history.state.position-t:-1)+e}const lu=new Map;function $T(e,t){lu.set(e,t)}function WT(e){const t=lu.get(e);return lu.delete(e),t}let qT=()=>location.protocol+"//"+location.host;function fp(e,t){const{pathname:r,search:n,hash:i}=t,s=e.indexOf("#");if(s>-1){let u=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(u);return l[0]!=="/"&&(l="/"+l),op(l,"")}return op(r,e)+n+i}function YT(e,t,r,n){let i=[],s=[],a=null;const u=({state:g})=>{const _=fp(e,location),A=r.value,b=t.value;let c=0;if(g){if(r.value=_,t.value=g,a&&a===A){a=null;return}c=b?g.position-b.position:0}else n(_);i.forEach(d=>{d(r.value,A,{delta:c,type:Yi.pop,direction:c?c>0?zi.forward:zi.back:zi.unknown})})};function l(){a=r.value}function o(g){i.push(g);const _=()=>{const A=i.indexOf(g);A>-1&&i.splice(A,1)};return s.push(_),_}function h(){const{history:g}=window;!g.state||g.replaceState(Ie({},g.state,{scroll:Ra()}),"")}function p(){for(const g of s)g();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:o,destroy:p}}function dp(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?Ra():null}}function zT(e){const{history:t,location:r}=window,n={value:fp(e,r)},i={value:t.state};i.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,o,h){const p=e.indexOf("#"),g=p>-1?(r.host&&document.querySelector("base")?e:e.slice(p))+l:qT()+e+l;try{t[h?"replaceState":"pushState"](o,"",g),i.value=o}catch(_){console.error(_),r[h?"replace":"assign"](g)}}function a(l,o){const h=Ie({},t.state,dp(i.value.back,l,i.value.forward,!0),o,{position:i.value.position});s(l,h,!0),n.value=l}function u(l,o){const h=Ie({},i.value,t.state,{forward:l,scroll:Ra()});s(h.current,h,!0);const p=Ie({},dp(n.value,l,null),{position:h.position+1},o);s(l,p,!1),n.value=l}return{location:n,state:i,push:u,replace:a}}function bL(e){e=jT(e);const t=zT(e),r=YT(e,t.state,t.location,t.replace);function n(s,a=!0){a||r.pauseListeners(),history.go(s)}const i=Ie({location:"",base:e,go:n,createHref:VT.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function XT(e){return typeof e=="string"||e&&typeof e=="object"}function hp(e){return typeof e=="string"||typeof e=="symbol"}const Br={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},pp=Yn("nf");var gp;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(gp||(gp={}));function Jn(e,t){return Ie(new Error,{type:e,[pp]:!0},t)}function hn(e,t){return e instanceof Error&&pp in e&&(t==null||!!(e.type&t))}const mp="[^/]+?",JT={sensitive:!1,strict:!1,start:!0,end:!0},QT=/[.+*?^${}()[\]/\\]/g;function ZT(e,t){const r=Ie({},JT,t),n=[];let i=r.start?"^":"";const s=[];for(const o of e){const h=o.length?[]:[90];r.strict&&!o.length&&(i+="/");for(let p=0;p<o.length;p++){const g=o[p];let _=40+(r.sensitive?.25:0);if(g.type===0)p||(i+="/"),i+=g.value.replace(QT,"\\$&"),_+=40;else if(g.type===1){const{value:A,repeatable:b,optional:c,regexp:d}=g;s.push({name:A,repeatable:b,optional:c});const f=d||mp;if(f!==mp){_+=10;try{new RegExp(`(${f})`)}catch(m){throw new Error(`Invalid custom RegExp for param "${A}" (${f}): `+m.message)}}let v=b?`((?:${f})(?:/(?:${f}))*)`:`(${f})`;p||(v=c&&o.length<2?`(?:/${v})`:"/"+v),c&&(v+="?"),i+=v,_+=20,c&&(_+=-8),b&&(_+=-20),f===".*"&&(_+=-50)}h.push(_)}n.push(h)}if(r.strict&&r.end){const o=n.length-1;n[o][n[o].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function u(o){const h=o.match(a),p={};if(!h)return null;for(let g=1;g<h.length;g++){const _=h[g]||"",A=s[g-1];p[A.name]=_&&A.repeatable?_.split("/"):_}return p}function l(o){let h="",p=!1;for(const g of e){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const _ of g)if(_.type===0)h+=_.value;else if(_.type===1){const{value:A,repeatable:b,optional:c}=_,d=A in o?o[A]:"";if(Array.isArray(d)&&!b)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const f=Array.isArray(d)?d.join("/"):d;if(!f)if(c)g.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${A}"`);h+=f}}return h}return{re:a,score:n,keys:s,parse:u,stringify:l}}function eS(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function tS(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const s=eS(n[r],i[r]);if(s)return s;r++}return i.length-n.length}const rS={type:0,value:""},nS=/[a-zA-Z0-9_]/;function iS(e){if(!e)return[[]];if(e==="/")return[[rS]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${r})/"${o}": ${_}`)}let r=0,n=r;const i=[];let s;function a(){s&&i.push(s),s=[]}let u=0,l,o="",h="";function p(){!o||(r===0?s.push({type:0,value:o}):r===1||r===2||r===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${o}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:o,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),o="")}function g(){o+=l}for(;u<e.length;){if(l=e[u++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(o&&p(),a()):l===":"?(p(),r=1):g();break;case 4:g(),r=n;break;case 1:l==="("?r=2:nS.test(l)?g():(p(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&u--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:r=3:h+=l;break;case 3:p(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&u--,h="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${o}"`),p(),a(),i}function sS(e,t,r){const n=ZT(iS(e.path),r),i=Ie(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function aS(e,t){const r=[],n=new Map;t=yp({strict:!1,end:!0,sensitive:!1},t);function i(h){return n.get(h)}function s(h,p,g){const _=!g,A=lS(h);A.aliasOf=g&&g.record;const b=yp(t,h),c=[A];if("alias"in h){const v=typeof h.alias=="string"?[h.alias]:h.alias;for(const m of v)c.push(Ie({},A,{components:g?g.record.components:A.components,path:m,aliasOf:g?g.record:A}))}let d,f;for(const v of c){const{path:m}=v;if(p&&m[0]!=="/"){const y=p.record.path,T=y[y.length-1]==="/"?"":"/";v.path=p.record.path+(m&&T+m)}if(d=sS(v,p,b),g?g.alias.push(d):(f=f||d,f!==d&&f.alias.push(d),_&&h.name&&!vp(d)&&a(h.name)),"children"in A){const y=A.children;for(let T=0;T<y.length;T++)s(y[T],d,g&&g.children[T])}g=g||d,l(d)}return f?()=>{a(f)}:qi}function a(h){if(hp(h)){const p=n.get(h);p&&(n.delete(h),r.splice(r.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=r.indexOf(h);p>-1&&(r.splice(p,1),h.record.name&&n.delete(h.record.name),h.children.forEach(a),h.alias.forEach(a))}}function u(){return r}function l(h){let p=0;for(;p<r.length&&tS(h,r[p])>=0;)p++;r.splice(p,0,h),h.record.name&&!vp(h)&&n.set(h.record.name,h)}function o(h,p){let g,_={},A,b;if("name"in h&&h.name){if(g=n.get(h.name),!g)throw Jn(1,{location:h});b=g.record.name,_=Ie(oS(p.params,g.keys.filter(f=>!f.optional).map(f=>f.name)),h.params),A=g.stringify(_)}else if("path"in h)A=h.path,g=r.find(f=>f.re.test(A)),g&&(_=g.parse(A),b=g.record.name);else{if(g=p.name?n.get(p.name):r.find(f=>f.re.test(p.path)),!g)throw Jn(1,{location:h,currentLocation:p});b=g.record.name,_=Ie({},p.params,h.params),A=g.stringify(_)}const c=[];let d=g;for(;d;)c.unshift(d.record),d=d.parent;return{name:b,path:A,params:_,matched:c,meta:cS(c)}}return e.forEach(h=>s(h)),{addRoute:s,resolve:o,removeRoute:a,getRoutes:u,getRecordMatcher:i}}function oS(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function lS(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:uS(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function uS(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function vp(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function cS(e){return e.reduce((t,r)=>Ie(t,r.meta),{})}function yp(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}const Ep=/#/g,fS=/&/g,dS=/\//g,hS=/=/g,pS=/\?/g,bp=/\+/g,gS=/%5B/g,mS=/%5D/g,Tp=/%5E/g,vS=/%60/g,Sp=/%7B/g,yS=/%7C/g,_p=/%7D/g,ES=/%20/g;function uu(e){return encodeURI(""+e).replace(yS,"|").replace(gS,"[").replace(mS,"]")}function bS(e){return uu(e).replace(Sp,"{").replace(_p,"}").replace(Tp,"^")}function cu(e){return uu(e).replace(bp,"%2B").replace(ES,"+").replace(Ep,"%23").replace(fS,"%26").replace(vS,"`").replace(Sp,"{").replace(_p,"}").replace(Tp,"^")}function TS(e){return cu(e).replace(hS,"%3D")}function SS(e){return uu(e).replace(Ep,"%23").replace(pS,"%3F")}function _S(e){return e==null?"":SS(e).replace(dS,"%2F")}function wa(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function LS(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const s=n[i].replace(bp," "),a=s.indexOf("="),u=wa(a<0?s:s.slice(0,a)),l=a<0?null:wa(s.slice(a+1));if(u in t){let o=t[u];Array.isArray(o)||(o=t[u]=[o]),o.push(l)}else t[u]=l}return t}function Lp(e){let t="";for(let r in e){const n=e[r];if(r=TS(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Array.isArray(n)?n.map(s=>s&&cu(s)):[n&&cu(n)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+r,s!=null&&(t+="="+s))})}return t}function kS(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Array.isArray(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}function Xi(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function Ur(e,t,r,n,i){const s=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,u)=>{const l=p=>{p===!1?u(Jn(4,{from:r,to:t})):p instanceof Error?u(p):XT(p)?u(Jn(2,{from:t,to:p})):(s&&n.enterCallbacks[i]===s&&typeof p=="function"&&s.push(p),a())},o=e.call(n&&n.instances[i],t,r,l);let h=Promise.resolve(o);e.length<3&&(h=h.then(l)),h.catch(p=>u(p))})}function fu(e,t,r,n){const i=[];for(const s of e)for(const a in s.components){let u=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(AS(u)){const o=(u.__vccOpts||u)[t];o&&i.push(Ur(o,r,n,s,a))}else{let l=u();i.push(()=>l.then(o=>{if(!o)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const h=PT(o)?o.default:o;s.components[a]=h;const g=(h.__vccOpts||h)[t];return g&&Ur(g,r,n,s,a)()}))}}return i}function AS(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function kp(e){const t=Tt(Ca),r=Tt(iu),n=We(()=>t.resolve(se(e.to))),i=We(()=>{const{matched:l}=n.value,{length:o}=l,h=l[o-1],p=r.matched;if(!h||!p.length)return-1;const g=p.findIndex(Xn.bind(null,h));if(g>-1)return g;const _=Ap(l[o-2]);return o>1&&Ap(h)===_&&p[p.length-1].path!==_?p.findIndex(Xn.bind(null,l[o-2])):g}),s=We(()=>i.value>-1&&OS(r.params,n.value.params)),a=We(()=>i.value>-1&&i.value===r.matched.length-1&&lp(r.params,n.value.params));function u(l={}){return wS(l)?t[se(e.replace)?"replace":"push"](se(e.to)).catch(qi):Promise.resolve()}return{route:n,href:We(()=>n.value.href),isActive:s,isExactActive:a,navigate:u}}const CS=Nt({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:kp,setup(e,{slots:t}){const r=Mt(kp(e)),{options:n}=Tt(Ca),i=We(()=>({[Cp(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[Cp(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=t.default&&t.default(r);return e.custom?s:xs("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},s)}}}),RS=CS;function wS(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function OS(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Array.isArray(i)||i.length!==n.length||n.some((s,a)=>s!==i[a]))return!1}return!0}function Ap(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Cp=(e,t,r)=>e!=null?e:t!=null?t:r,IS=Nt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:r}){const n=Tt(su),i=We(()=>e.route||n.value),s=Tt(ap,0),a=We(()=>i.value.matched[s]);hi(ap,s+1),hi(DT,a),hi(su,i);const u=Et();return Jt(()=>[u.value,a.value,e.name],([l,o,h],[p,g,_])=>{o&&(o.instances[h]=l,g&&g!==o&&l&&l===p&&(o.leaveGuards.size||(o.leaveGuards=g.leaveGuards),o.updateGuards.size||(o.updateGuards=g.updateGuards))),l&&o&&(!g||!Xn(o,g)||!p)&&(o.enterCallbacks[h]||[]).forEach(A=>A(l))},{flush:"post"}),()=>{const l=i.value,o=a.value,h=o&&o.components[e.name],p=e.name;if(!h)return Rp(r.default,{Component:h,route:l});const g=o.props[e.name],_=g?g===!0?l.params:typeof g=="function"?g(l):g:null,b=xs(h,Ie({},_,t,{onVnodeUnmounted:c=>{c.component.isUnmounted&&(o.instances[p]=null)},ref:u}));return Rp(r.default,{Component:b,route:l})||b}}});function Rp(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const DS=IS;function TL(e){const t=aS(e.routes,e),r=e.parseQuery||LS,n=e.stringifyQuery||Lp,i=e.history,s=Xi(),a=Xi(),u=Xi(),l=fc(Br);let o=Br;zn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=au.bind(null,K=>""+K),p=au.bind(null,_S),g=au.bind(null,wa);function _(K,X){let z,Z;return hp(K)?(z=t.getRecordMatcher(K),Z=X):Z=K,t.addRoute(Z,z)}function A(K){const X=t.getRecordMatcher(K);X&&t.removeRoute(X)}function b(){return t.getRoutes().map(K=>K.record)}function c(K){return!!t.getRecordMatcher(K)}function d(K,X){if(X=Ie({},X||l.value),typeof K=="string"){const j=ou(r,K,X.path),F=t.resolve({path:j.path},X),N=i.createHref(j.fullPath);return Ie(j,F,{params:g(F.params),hash:wa(j.hash),redirectedFrom:void 0,href:N})}let z;if("path"in K)z=Ie({},K,{path:ou(r,K.path,X.path).path});else{const j=Ie({},K.params);for(const F in j)j[F]==null&&delete j[F];z=Ie({},K,{params:p(K.params)}),X.params=p(X.params)}const Z=t.resolve(z,X),oe=K.hash||"";Z.params=h(g(Z.params));const fe=MT(n,Ie({},K,{hash:bS(oe),path:Z.path})),U=i.createHref(fe);return Ie({fullPath:fe,hash:oe,query:n===Lp?kS(K.query):K.query||{}},Z,{redirectedFrom:void 0,href:U})}function f(K){return typeof K=="string"?ou(r,K,l.value.path):Ie({},K)}function v(K,X){if(o!==K)return Jn(8,{from:X,to:K})}function m(K){return L(K)}function y(K){return m(Ie(f(K),{replace:!0}))}function T(K){const X=K.matched[K.matched.length-1];if(X&&X.redirect){const{redirect:z}=X;let Z=typeof z=="function"?z(K):z;return typeof Z=="string"&&(Z=Z.includes("?")||Z.includes("#")?Z=f(Z):{path:Z},Z.params={}),Ie({query:K.query,hash:K.hash,params:K.params},Z)}}function L(K,X){const z=o=d(K),Z=l.value,oe=K.state,fe=K.force,U=K.replace===!0,j=T(z);if(j)return L(Ie(f(j),{state:oe,force:fe,replace:U}),X||z);const F=z;F.redirectedFrom=X;let N;return!fe&&NT(n,Z,z)&&(N=Jn(16,{to:F,from:Z}),B(Z,Z,!0,!1)),(N?Promise.resolve(N):R(F,Z)).catch(G=>hn(G)?G:D(G,F,Z)).then(G=>{if(G){if(hn(G,2))return L(Ie(f(G.to),{state:oe,force:fe,replace:U}),X||F)}else G=S(F,Z,!0,U,oe);return E(F,Z,G),G})}function C(K,X){const z=v(K,X);return z?Promise.reject(z):Promise.resolve()}function R(K,X){let z;const[Z,oe,fe]=PS(K,X);z=fu(Z.reverse(),"beforeRouteLeave",K,X);for(const j of Z)j.leaveGuards.forEach(F=>{z.push(Ur(F,K,X))});const U=C.bind(null,K,X);return z.push(U),Qn(z).then(()=>{z=[];for(const j of s.list())z.push(Ur(j,K,X));return z.push(U),Qn(z)}).then(()=>{z=fu(oe,"beforeRouteUpdate",K,X);for(const j of oe)j.updateGuards.forEach(F=>{z.push(Ur(F,K,X))});return z.push(U),Qn(z)}).then(()=>{z=[];for(const j of K.matched)if(j.beforeEnter&&!X.matched.includes(j))if(Array.isArray(j.beforeEnter))for(const F of j.beforeEnter)z.push(Ur(F,K,X));else z.push(Ur(j.beforeEnter,K,X));return z.push(U),Qn(z)}).then(()=>(K.matched.forEach(j=>j.enterCallbacks={}),z=fu(fe,"beforeRouteEnter",K,X),z.push(U),Qn(z))).then(()=>{z=[];for(const j of a.list())z.push(Ur(j,K,X));return z.push(U),Qn(z)}).catch(j=>hn(j,8)?j:Promise.reject(j))}function E(K,X,z){for(const Z of u.list())Z(K,X,z)}function S(K,X,z,Z,oe){const fe=v(K,X);if(fe)return fe;const U=X===Br,j=zn?history.state:{};z&&(Z||U?i.replace(K.fullPath,Ie({scroll:U&&j&&j.scroll},oe)):i.push(K.fullPath,oe)),l.value=K,B(K,X,z,U),M()}let k;function w(){k=i.listen((K,X,z)=>{const Z=d(K),oe=T(Z);if(oe){L(Ie(oe,{replace:!0}),Z).catch(qi);return}o=Z;const fe=l.value;zn&&$T(cp(fe.fullPath,z.delta),Ra()),R(Z,fe).catch(U=>hn(U,4|8)?U:hn(U,2)?(L(U.to,Z).then(j=>{hn(j,4|16)&&!z.delta&&z.type===Yi.pop&&i.go(-1,!1)}).catch(qi),Promise.reject()):(z.delta&&i.go(-z.delta,!1),D(U,Z,fe))).then(U=>{U=U||S(Z,fe,!1),U&&(z.delta?i.go(-z.delta,!1):z.type===Yi.pop&&hn(U,4|16)&&i.go(-1,!1)),E(Z,fe,U)}).catch(qi)})}let O=Xi(),I=Xi(),P;function D(K,X,z){M(K);const Z=I.list();return Z.length?Z.forEach(oe=>oe(K,X,z)):console.error(K),Promise.reject(K)}function x(){return P&&l.value!==Br?Promise.resolve():new Promise((K,X)=>{O.add([K,X])})}function M(K){P||(P=!0,w(),O.list().forEach(([X,z])=>K?z(K):X()),O.reset())}function B(K,X,z,Z){const{scrollBehavior:oe}=e;if(!zn||!oe)return Promise.resolve();const fe=!z&&WT(cp(K.fullPath,0))||(Z||!z)&&history.state&&history.state.scroll||null;return Rn().then(()=>oe(K,X,fe)).then(U=>U&&KT(U)).catch(U=>D(U,K,X))}const H=K=>i.go(K);let $;const q=new Set;return{currentRoute:l,addRoute:_,removeRoute:A,hasRoute:c,getRoutes:b,resolve:d,options:e,push:m,replace:y,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:s.add,beforeResolve:a.add,afterEach:u.add,onError:I.add,isReady:x,install(K){const X=this;K.component("RouterLink",RS),K.component("RouterView",DS),K.config.globalProperties.$router=X,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>se(l)}),zn&&!$&&l.value===Br&&($=!0,m(i.location).catch(oe=>{}));const z={};for(const oe in Br)z[oe]=We(()=>l.value[oe]);K.provide(Ca,X),K.provide(iu,Mt(z)),K.provide(su,l);const Z=K.unmount;q.add(K),K.unmount=function(){q.delete(K),q.size<1&&(o=Br,k&&k(),l.value=Br,$=!1,P=!1),Z()}}}}function Qn(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function PS(e,t){const r=[],n=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const u=t.matched[a];u&&(e.matched.find(o=>Xn(o,u))?n.push(u):r.push(u));const l=e.matched[a];l&&(t.matched.find(o=>Xn(o,l))||i.push(l))}return[r,n,i]}function SL(){return Tt(Ca)}function _L(){return Tt(iu)}var xS=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},du={exports:{}},wp=function(t,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return t.apply(r,i)}},FS=wp,pn=Object.prototype.toString;function hu(e){return pn.call(e)==="[object Array]"}function pu(e){return typeof e=="undefined"}function MS(e){return e!==null&&!pu(e)&&e.constructor!==null&&!pu(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function NS(e){return pn.call(e)==="[object ArrayBuffer]"}function BS(e){return typeof FormData!="undefined"&&e instanceof FormData}function US(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function jS(e){return typeof e=="string"}function HS(e){return typeof e=="number"}function Op(e){return e!==null&&typeof e=="object"}function Oa(e){if(pn.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function VS(e){return pn.call(e)==="[object Date]"}function GS(e){return pn.call(e)==="[object File]"}function KS(e){return pn.call(e)==="[object Blob]"}function Ip(e){return pn.call(e)==="[object Function]"}function $S(e){return Op(e)&&Ip(e.pipe)}function WS(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function qS(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function YS(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function gu(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),hu(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function mu(){var e={};function t(i,s){Oa(e[s])&&Oa(i)?e[s]=mu(e[s],i):Oa(i)?e[s]=mu({},i):hu(i)?e[s]=i.slice():e[s]=i}for(var r=0,n=arguments.length;r<n;r++)gu(arguments[r],t);return e}function zS(e,t,r){return gu(t,function(i,s){r&&typeof i=="function"?e[s]=FS(i,r):e[s]=i}),e}function XS(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Rt={isArray:hu,isArrayBuffer:NS,isBuffer:MS,isFormData:BS,isArrayBufferView:US,isString:jS,isNumber:HS,isObject:Op,isPlainObject:Oa,isUndefined:pu,isDate:VS,isFile:GS,isBlob:KS,isFunction:Ip,isStream:$S,isURLSearchParams:WS,isStandardBrowserEnv:YS,forEach:gu,merge:mu,extend:zS,trim:qS,stripBOM:XS},Zn=Rt;function Dp(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Pp=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(Zn.isURLSearchParams(r))i=r.toString();else{var s=[];Zn.forEach(r,function(l,o){l===null||typeof l=="undefined"||(Zn.isArray(l)?o=o+"[]":l=[l],Zn.forEach(l,function(p){Zn.isDate(p)?p=p.toISOString():Zn.isObject(p)&&(p=JSON.stringify(p)),s.push(Dp(o)+"="+Dp(p))}))}),i=s.join("&")}if(i){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},JS=Rt;function Ia(){this.handlers=[]}Ia.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Ia.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Ia.prototype.forEach=function(t){JS.forEach(this.handlers,function(n){n!==null&&t(n)})};var QS=Ia,ZS=Rt,e_=function(t,r){ZS.forEach(t,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[s])})},xp=function(t,r,n,i,s){return t.config=r,n&&(t.code=n),t.request=i,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},t_=xp,Fp=function(t,r,n,i,s){var a=new Error(t);return t_(a,r,n,i,s)},r_=Fp,n_=function(t,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):r(r_("Request failed with status code "+n.status,n.config,null,n.request,n))},Da=Rt,i_=Da.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,a,u){var l=[];l.push(r+"="+encodeURIComponent(n)),Da.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),Da.isString(s)&&l.push("path="+s),Da.isString(a)&&l.push("domain="+a),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),s_=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},a_=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},o_=s_,l_=a_,u_=function(t,r){return t&&!o_(r)?l_(t,r):r},vu=Rt,c_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],f_=function(t){var r={},n,i,s;return t&&vu.forEach(t.split(`
`),function(u){if(s=u.indexOf(":"),n=vu.trim(u.substr(0,s)).toLowerCase(),i=vu.trim(u.substr(s+1)),n){if(r[n]&&c_.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},Mp=Rt,d_=Mp.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var a=s;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){var u=Mp.isString(a)?i(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function yu(e){this.message=e}yu.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};yu.prototype.__CANCEL__=!0;var Pa=yu,xa=Rt,h_=n_,p_=i_,g_=Pp,m_=u_,v_=f_,y_=d_,Eu=Fp,E_=Ma,b_=Pa,Np=function(t){return new Promise(function(n,i){var s=t.data,a=t.headers,u=t.responseType,l;function o(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}xa.isFormData(s)&&delete a["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.Authorization="Basic "+btoa(p+":"+g)}var _=m_(t.baseURL,t.url);h.open(t.method.toUpperCase(),g_(_,t.params,t.paramsSerializer),!0),h.timeout=t.timeout;function A(){if(!!h){var c="getAllResponseHeaders"in h?v_(h.getAllResponseHeaders()):null,d=!u||u==="text"||u==="json"?h.responseText:h.response,f={data:d,status:h.status,statusText:h.statusText,headers:c,config:t,request:h};h_(function(m){n(m),o()},function(m){i(m),o()},f),h=null}}if("onloadend"in h?h.onloadend=A:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(A)},h.onabort=function(){!h||(i(Eu("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){i(Eu("Network Error",t,null,h)),h=null},h.ontimeout=function(){var d=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",f=t.transitional||E_.transitional;t.timeoutErrorMessage&&(d=t.timeoutErrorMessage),i(Eu(d,t,f.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},xa.isStandardBrowserEnv()){var b=(t.withCredentials||y_(_))&&t.xsrfCookieName?p_.read(t.xsrfCookieName):void 0;b&&(a[t.xsrfHeaderName]=b)}"setRequestHeader"in h&&xa.forEach(a,function(d,f){typeof s=="undefined"&&f.toLowerCase()==="content-type"?delete a[f]:h.setRequestHeader(f,d)}),xa.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),u&&u!=="json"&&(h.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&h.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(l=function(c){!h||(i(!c||c&&c.type?new b_("canceled"):c),h.abort(),h=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l))),s||(s=null),h.send(s)})},Xe=Rt,Bp=e_,T_=xp,S_={"Content-Type":"application/x-www-form-urlencoded"};function Up(e,t){!Xe.isUndefined(e)&&Xe.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function __(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Np),e}function L_(e,t,r){if(Xe.isString(e))try{return(t||JSON.parse)(e),Xe.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var Fa={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:__(),transformRequest:[function(t,r){return Bp(r,"Accept"),Bp(r,"Content-Type"),Xe.isFormData(t)||Xe.isArrayBuffer(t)||Xe.isBuffer(t)||Xe.isStream(t)||Xe.isFile(t)||Xe.isBlob(t)?t:Xe.isArrayBufferView(t)?t.buffer:Xe.isURLSearchParams(t)?(Up(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Xe.isObject(t)||r&&r["Content-Type"]==="application/json"?(Up(r,"application/json"),L_(t)):t}],transformResponse:[function(t){var r=this.transitional||Fa.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Xe.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?T_(a,this,"E_JSON_PARSE"):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Xe.forEach(["delete","get","head"],function(t){Fa.headers[t]={}});Xe.forEach(["post","put","patch"],function(t){Fa.headers[t]=Xe.merge(S_)});var Ma=Fa,k_=Rt,A_=Ma,C_=function(t,r,n){var i=this||A_;return k_.forEach(n,function(a){t=a.call(i,t,r)}),t},jp=function(t){return!!(t&&t.__CANCEL__)},Hp=Rt,bu=C_,R_=jp,w_=Ma,O_=Pa;function Tu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new O_("canceled")}var I_=function(t){Tu(t),t.headers=t.headers||{},t.data=bu.call(t,t.data,t.headers,t.transformRequest),t.headers=Hp.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Hp.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||w_.adapter;return r(t).then(function(i){return Tu(t),i.data=bu.call(t,i.data,i.headers,t.transformResponse),i},function(i){return R_(i)||(Tu(t),i&&i.response&&(i.response.data=bu.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},wt=Rt,Vp=function(t,r){r=r||{};var n={};function i(h,p){return wt.isPlainObject(h)&&wt.isPlainObject(p)?wt.merge(h,p):wt.isPlainObject(p)?wt.merge({},p):wt.isArray(p)?p.slice():p}function s(h){if(wt.isUndefined(r[h])){if(!wt.isUndefined(t[h]))return i(void 0,t[h])}else return i(t[h],r[h])}function a(h){if(!wt.isUndefined(r[h]))return i(void 0,r[h])}function u(h){if(wt.isUndefined(r[h])){if(!wt.isUndefined(t[h]))return i(void 0,t[h])}else return i(void 0,r[h])}function l(h){if(h in r)return i(t[h],r[h]);if(h in t)return i(void 0,t[h])}var o={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:l};return wt.forEach(Object.keys(t).concat(Object.keys(r)),function(p){var g=o[p]||s,_=g(p);wt.isUndefined(_)&&g!==l||(n[p]=_)}),n},Gp={version:"0.24.0"},D_=Gp.version,Su={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Su[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var Kp={};Su.transitional=function(t,r,n){function i(s,a){return"[Axios v"+D_+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,u){if(t===!1)throw new Error(i(a," has been removed"+(r?" in "+r:"")));return r&&!Kp[a]&&(Kp[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,a,u):!0}};function P_(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var s=n[i],a=t[s];if(a){var u=e[s],l=u===void 0||a(u,s,e);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+s)}}var x_={assertOptions:P_,validators:Su},$p=Rt,F_=Pp,Wp=QS,qp=I_,Na=Vp,Yp=x_,ei=Yp.validators;function Ji(e){this.defaults=e,this.interceptors={request:new Wp,response:new Wp}}Ji.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Na(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&Yp.assertOptions(r,{silentJSONParsing:ei.transitional(ei.boolean),forcedJSONParsing:ei.transitional(ei.boolean),clarifyTimeoutError:ei.transitional(ei.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(i=i&&g.synchronous,n.unshift(g.fulfilled,g.rejected))});var s=[];this.interceptors.response.forEach(function(g){s.push(g.fulfilled,g.rejected)});var a;if(!i){var u=[qp,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(s),a=Promise.resolve(t);u.length;)a=a.then(u.shift(),u.shift());return a}for(var l=t;n.length;){var o=n.shift(),h=n.shift();try{l=o(l)}catch(p){h(p);break}}try{a=qp(l)}catch(p){return Promise.reject(p)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Ji.prototype.getUri=function(t){return t=Na(this.defaults,t),F_(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};$p.forEach(["delete","get","head","options"],function(t){Ji.prototype[t]=function(r,n){return this.request(Na(n||{},{method:t,url:r,data:(n||{}).data}))}});$p.forEach(["post","put","patch"],function(t){Ji.prototype[t]=function(r,n,i){return this.request(Na(i||{},{method:t,url:r,data:n}))}});var M_=Ji,N_=Pa;function ti(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(a){r.subscribe(a),i=a}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},e(function(i){r.reason||(r.reason=new N_(i),t(r.reason))})}ti.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ti.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};ti.prototype.unsubscribe=function(t){if(!!this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};ti.source=function(){var t,r=new ti(function(i){t=i});return{token:r,cancel:t}};var B_=ti,U_=function(t){return function(n){return t.apply(null,n)}},j_=function(t){return typeof t=="object"&&t.isAxiosError===!0},zp=Rt,H_=wp,Ba=M_,V_=Vp,G_=Ma;function Xp(e){var t=new Ba(e),r=H_(Ba.prototype.request,t);return zp.extend(r,Ba.prototype,t),zp.extend(r,t),r.create=function(i){return Xp(V_(e,i))},r}var tr=Xp(G_);tr.Axios=Ba;tr.Cancel=Pa;tr.CancelToken=B_;tr.isCancel=jp;tr.VERSION=Gp.version;tr.all=function(t){return Promise.all(t)};tr.spread=U_;tr.isAxiosError=j_;du.exports=tr;du.exports.default=tr;var LL=du.exports;const K_={props:{sources:{type:Array,required:!0},img:{type:String}},data(){return{videoRatio:null}},mounted(){this.setImageUrl(),this.setContainerHeight(),this.videoCanPlay()&&(this.$refs.video.oncanplay=()=>{!this.$refs.video||(this.videoRatio=this.$refs.video.videoWidth/this.$refs.video.videoHeight,this.setVideoSize(),this.$refs.video.style.visibility="visible")}),window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)},methods:{resize(){this.setContainerHeight(),this.videoCanPlay()&&this.setVideoSize()},videoCanPlay(){return!!this.$refs.video.canPlayType},setImageUrl(){this.img&&(this.$el.style.backgroundImage=`url(${this.img})`)},setContainerHeight(){this.$el.style.height=`${window.innerHeight}px`},setVideoSize(){var e,t,r=this.$el.offsetWidth/this.$el.offsetHeight;r>this.videoRatio?e=this.$el.offsetWidth:t=this.$el.offsetHeight,this.$refs.video.style.width=e?`${e}px`:"auto",this.$refs.video.style.height=t?`${t}px`:"auto"},getMediaType(e){return"video/"+e.split(".").pop()}}},$_={class:"VideoBg"},W_={autoplay:"",loop:"",muted:"",preload:"auto",ref:"video"},q_=["src","type"],Y_={class:"VideoBg__content"};function z_(e,t,r,n,i,s){return _e(),we("section",$_,[le("video",W_,[(_e(!0),we(Fe,null,kn(r.sources,a=>(_e(),we("source",{src:a,type:s.getMediaType(a)},null,8,q_))),256))],512),le("div",Y_,[ef(e.$slots,"default")])])}var kL=xS(K_,[["render",z_]]),X_=Object.defineProperty,J_=Object.defineProperties,Q_=Object.getOwnPropertyDescriptors,Jp=Object.getOwnPropertySymbols,Z_=Object.prototype.hasOwnProperty,e1=Object.prototype.propertyIsEnumerable,Qp=(e,t,r)=>t in e?X_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_u=(e,t)=>{for(var r in t||(t={}))Z_.call(t,r)&&Qp(e,r,t[r]);if(Jp)for(var r of Jp(t))e1.call(t,r)&&Qp(e,r,t[r]);return e},Lu=(e,t)=>J_(e,Q_(t));function Zp(e,t,r,n){var i,s=!1,a=0;function u(){i&&clearTimeout(i)}function l(){for(var o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];var g=this,_=Date.now()-a;function A(){a=Date.now(),r.apply(g,h)}function b(){i=void 0}s||(n&&!i&&A(),u(),n===void 0&&_>e?A():t!==!0&&(i=setTimeout(n?b:A,n===void 0?e-_:e)))}return typeof t!="boolean"&&(n=r,r=t,t=void 0),l.cancel=function(){u(),s=!0},l}function eg(e,t,r){return r===void 0?Zp(e,t,!1):Zp(e,r,t!==!1)}function t1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tg={exports:{}};typeof window!="undefined"&&(tg.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(n,i,s){r.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:s})},r.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,i){if(1&i&&(n=r(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var a in n)r.d(s,a,function(u){return n[u]}.bind(null,a));return s},r.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(i,"a",i),i},r.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,r){var n=Object.prototype.hasOwnProperty,i="~";function s(){}function a(h,p,g){this.fn=h,this.context=p,this.once=g||!1}function u(h,p,g,_,A){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new a(g,_||h,A),c=i?i+p:p;return h._events[c]?h._events[c].fn?h._events[c]=[h._events[c],b]:h._events[c].push(b):(h._events[c]=b,h._eventsCount++),h}function l(h,p){--h._eventsCount==0?h._events=new s:delete h._events[p]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1)),o.prototype.eventNames=function(){var h,p,g=[];if(this._eventsCount===0)return g;for(p in h=this._events)n.call(h,p)&&g.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(h)):g},o.prototype.listeners=function(h){var p=i?i+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var _=0,A=g.length,b=new Array(A);_<A;_++)b[_]=g[_].fn;return b},o.prototype.listenerCount=function(h){var p=i?i+h:h,g=this._events[p];return g?g.fn?1:g.length:0},o.prototype.emit=function(h,p,g,_,A,b){var c=i?i+h:h;if(!this._events[c])return!1;var d,f,v=this._events[c],m=arguments.length;if(v.fn){switch(v.once&&this.removeListener(h,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,p),!0;case 3:return v.fn.call(v.context,p,g),!0;case 4:return v.fn.call(v.context,p,g,_),!0;case 5:return v.fn.call(v.context,p,g,_,A),!0;case 6:return v.fn.call(v.context,p,g,_,A,b),!0}for(f=1,d=new Array(m-1);f<m;f++)d[f-1]=arguments[f];v.fn.apply(v.context,d)}else{var y,T=v.length;for(f=0;f<T;f++)switch(v[f].once&&this.removeListener(h,v[f].fn,void 0,!0),m){case 1:v[f].fn.call(v[f].context);break;case 2:v[f].fn.call(v[f].context,p);break;case 3:v[f].fn.call(v[f].context,p,g);break;case 4:v[f].fn.call(v[f].context,p,g,_);break;default:if(!d)for(y=1,d=new Array(m-1);y<m;y++)d[y-1]=arguments[y];v[f].fn.apply(v[f].context,d)}}return!0},o.prototype.on=function(h,p,g){return u(this,h,p,g,!1)},o.prototype.once=function(h,p,g){return u(this,h,p,g,!0)},o.prototype.removeListener=function(h,p,g,_){var A=i?i+h:h;if(!this._events[A])return this;if(!p)return l(this,A),this;var b=this._events[A];if(b.fn)b.fn!==p||_&&!b.once||g&&b.context!==g||l(this,A);else{for(var c=0,d=[],f=b.length;c<f;c++)(b[c].fn!==p||_&&!b[c].once||g&&b[c].context!==g)&&d.push(b[c]);d.length?this._events[A]=d.length===1?d[0]:d:l(this,A)}return this},o.prototype.removeAllListeners=function(h){var p;return h?(p=i?i+h:h,this._events[p]&&l(this,p)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){var n,i,s,a,u;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,u={buildAbsoluteURL:function(l,o,h){if(h=h||{},l=l.trim(),!(o=o.trim())){if(!h.alwaysNormalize)return l;var p=u.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");return p.path=u.normalizePath(p.path),u.buildURLFromParts(p)}var g=u.parseURL(o);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=u.normalizePath(g.path),u.buildURLFromParts(g)):o;var _=u.parseURL(l);if(!_)throw new Error("Error trying to parse base URL.");if(!_.netLoc&&_.path&&_.path[0]!=="/"){var A=i.exec(_.path);_.netLoc=A[1],_.path=A[2]}_.netLoc&&!_.path&&(_.path="/");var b={scheme:_.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(b.netLoc=_.netLoc,g.path[0]!=="/"))if(g.path){var c=_.path,d=c.substring(0,c.lastIndexOf("/")+1)+g.path;b.path=u.normalizePath(d)}else b.path=_.path,g.params||(b.params=_.params,g.query||(b.query=_.query));return b.path===null&&(b.path=h.alwaysNormalize?u.normalizePath(g.path):g.path),u.buildURLFromParts(b)},parseURL:function(l){var o=n.exec(l);return o?{scheme:o[1]||"",netLoc:o[2]||"",path:o[3]||"",params:o[4]||"",query:o[5]||"",fragment:o[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}},e.exports=u},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(o){var h={};function p(_){if(h[_])return h[_].exports;var A=h[_]={i:_,l:!1,exports:{}};return o[_].call(A.exports,A,A.exports,p),A.l=!0,A.exports}p.m=o,p.c=h,p.i=function(_){return _},p.d=function(_,A,b){p.o(_,A)||Object.defineProperty(_,A,{configurable:!1,enumerable:!0,get:b})},p.r=function(_){Object.defineProperty(_,"__esModule",{value:!0})},p.n=function(_){var A=_&&_.__esModule?function(){return _.default}:function(){return _};return p.d(A,"a",A),A},p.o=function(_,A){return Object.prototype.hasOwnProperty.call(_,A)},p.p="/",p.oe=function(_){throw console.error(_),_};var g=p(p.s=ENTRY_MODULE);return g.default||g}var i="[\\.|\\-|\\+|\\w|/|@]+",s="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function a(o){return(o+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(o,h,p){var g={};g[p]=[];var _=h.toString(),A=_.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!A)return g;for(var b,c=A[1],d=new RegExp("(\\\\n|\\W)"+a(c)+s,"g");b=d.exec(_);)b[3]!=="dll-reference"&&g[p].push(b[3]);for(d=new RegExp("\\("+a(c)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+s,"g");b=d.exec(_);)o[b[2]]||(g[p].push(b[1]),o[b[2]]=r(b[1]).m),g[b[2]]=g[b[2]]||[],g[b[2]].push(b[4]);for(var f,v=Object.keys(g),m=0;m<v.length;m++)for(var y=0;y<g[v[m]].length;y++)f=g[v[m]][y],isNaN(1*f)||(g[v[m]][y]=1*g[v[m]][y]);return g}function l(o){return Object.keys(o).reduce(function(h,p){return h||o[p].length>0},!1)}e.exports=function(o,h){h=h||{};var p={main:r.m},g=h.all?{main:Object.keys(p.main)}:function(d,f){for(var v={main:[f]},m={main:[]},y={main:{}};l(v);)for(var T=Object.keys(v),L=0;L<T.length;L++){var C=T[L],R=v[C].pop();if(y[C]=y[C]||{},!y[C][R]&&d[C][R]){y[C][R]=!0,m[C]=m[C]||[],m[C].push(R);for(var E=u(d,d[C][R],C),S=Object.keys(E),k=0;k<S.length;k++)v[S[k]]=v[S[k]]||[],v[S[k]]=v[S[k]].concat(E[S[k]])}}return m}(p,o),_="";Object.keys(g).filter(function(d){return d!=="main"}).forEach(function(d){for(var f=0;g[d][f];)f++;g[d].push(f),p[d][f]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",_=_+"var "+d+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(f))+")({"+g[d].map(function(v){return JSON.stringify(v)+": "+p[d][v].toString()}).join(",")+`});
`}),_=_+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(o))+")({"+g.main.map(function(d){return JSON.stringify(d)+": "+p.main[d].toString()}).join(",")+"}))(self);";var A=new window.Blob([_],{type:"text/javascript"});if(h.bare)return A;var b=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(A),c=new window.Worker(b);return c.objectURL=b,c}},"./src/config.ts":function(e,t,r){r.r(t),r.d(t,"hlsDefaultConfig",function(){return T}),r.d(t,"mergeConfig",function(){return L}),r.d(t,"enableStreamingMode",function(){return C});var n=r("./src/controller/abr-controller.ts"),i=r("./src/controller/audio-stream-controller.ts"),s=r("./src/controller/audio-track-controller.ts"),a=r("./src/controller/subtitle-stream-controller.ts"),u=r("./src/controller/subtitle-track-controller.ts"),l=r("./src/controller/buffer-controller.ts"),o=r("./src/controller/timeline-controller.ts"),h=r("./src/controller/cap-level-controller.ts"),p=r("./src/controller/fps-controller.ts"),g=r("./src/controller/eme-controller.ts"),_=r("./src/utils/xhr-loader.ts"),A=r("./src/utils/fetch-loader.ts"),b=r("./src/utils/cues.ts"),c=r("./src/utils/mediakeys-helper.ts"),d=r("./src/utils/logger.ts");function f(){return(f=Object.assign||function(R){for(var E=1;E<arguments.length;E++){var S=arguments[E];for(var k in S)Object.prototype.hasOwnProperty.call(S,k)&&(R[k]=S[k])}return R}).apply(this,arguments)}function v(R,E){var S=Object.keys(R);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(R);E&&(k=k.filter(function(w){return Object.getOwnPropertyDescriptor(R,w).enumerable})),S.push.apply(S,k)}return S}function m(R){for(var E=1;E<arguments.length;E++){var S=arguments[E]!=null?arguments[E]:{};E%2?v(Object(S),!0).forEach(function(k){y(R,k,S[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(S)):v(Object(S)).forEach(function(k){Object.defineProperty(R,k,Object.getOwnPropertyDescriptor(S,k))})}return R}function y(R,E,S){return E in R?Object.defineProperty(R,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):R[E]=S,R}var T=m(m({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:_.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:n.default,bufferController:l.default,capLevelController:h.default,fpsController:p.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:c.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:b.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:a.SubtitleStreamController,subtitleTrackController:u.default,timelineController:o.TimelineController,audioStreamController:i.default,audioTrackController:s.default,emeController:g.default});function L(R,E){if((E.liveSyncDurationCount||E.liveMaxLatencyDurationCount)&&(E.liveSyncDuration||E.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(E.liveMaxLatencyDurationCount!==void 0&&(E.liveSyncDurationCount===void 0||E.liveMaxLatencyDurationCount<=E.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(E.liveMaxLatencyDuration!==void 0&&(E.liveSyncDuration===void 0||E.liveMaxLatencyDuration<=E.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return f({},R,E)}function C(R){var E=R.loader;E!==A.default&&E!==_.default?(d.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),R.progressive=!1):Object(A.fetchSupported)()&&(R.loader=A.default,R.progressive=!0,R.enableSoftwareAES=!0,d.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(e,t,r){r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/utils/ewma-bandwidth-estimator.ts"),s=r("./src/events.ts"),a=r("./src/utils/buffer-helper.ts"),u=r("./src/errors.ts"),l=r("./src/types/loader.ts"),o=r("./src/utils/logger.ts");function h(g,_){for(var A=0;A<_.length;A++){var b=_[A];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}var p=function(){function g(c){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=c;var d=c.config;this.bwEstimator=new i.default(d.abrEwmaSlowVoD,d.abrEwmaFastVoD,d.abrEwmaDefaultEstimate),this.registerListeners()}var _,A,b=g.prototype;return b.registerListeners=function(){var c=this.hls;c.on(s.Events.FRAG_LOADING,this.onFragLoading,this),c.on(s.Events.FRAG_LOADED,this.onFragLoaded,this),c.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),c.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(s.Events.ERROR,this.onError,this)},b.unregisterListeners=function(){var c=this.hls;c.off(s.Events.FRAG_LOADING,this.onFragLoading,this),c.off(s.Events.FRAG_LOADED,this.onFragLoaded,this),c.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),c.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(s.Events.ERROR,this.onError,this)},b.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},b.onFragLoading=function(c,d){var f,v=d.frag;v.type===l.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=v,this.partCurrent=(f=d.part)!=null?f:null,this.timer=self.setInterval(this.onCheck,100)))},b.onLevelLoaded=function(c,d){var f=this.hls.config;d.details.live?this.bwEstimator.update(f.abrEwmaSlowLive,f.abrEwmaFastLive):this.bwEstimator.update(f.abrEwmaSlowVoD,f.abrEwmaFastVoD)},b._abandonRulesCheck=function(){var c=this.fragCurrent,d=this.partCurrent,f=this.hls,v=f.autoLevelEnabled,m=f.config,y=f.media;if(c&&y){var T=d?d.stats:c.stats,L=d?d.duration:c.duration;if(T.aborted)return o.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(v&&!y.paused&&y.playbackRate&&y.readyState){var C=performance.now()-T.loading.start,R=Math.abs(y.playbackRate);if(!(C<=500*L/R)){var E=f.levels,S=f.minAutoLevel,k=E[c.level],w=T.total||Math.max(T.loaded,Math.round(L*k.maxBitrate/8)),O=Math.max(1,T.bwEstimate?T.bwEstimate/8:1e3*T.loaded/C),I=(w-T.loaded)/O,P=y.currentTime,D=(a.BufferHelper.bufferInfo(y,P,m.maxBufferHole).end-P)/R;if(!(D>=2*L/R||I<=D)){var x,M=Number.POSITIVE_INFINITY;for(x=c.level-1;x>S&&!((M=L*E[x].maxBitrate/(6.4*O))<D);x--);if(!(M>=I)){var B=this.bwEstimator.getEstimate();o.logger.warn("Fragment "+c.sn+(d?" part "+d.index:"")+" of level "+c.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+x+`
      Current BW estimate: `+(Object(n.isFiniteNumber)(B)?(B/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+I.toFixed(3)+` s
      Estimated load time for the next fragment: `+M.toFixed(3)+` s
      Time to underbuffer: `+D.toFixed(3)+" s"),f.nextLoadLevel=x,this.bwEstimator.sample(C,T.loaded),this.clearTimer(),c.loader&&(this.fragCurrent=this.partCurrent=null,c.loader.abort()),f.trigger(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:c,part:d,stats:T})}}}}}},b.onFragLoaded=function(c,d){var f=d.frag,v=d.part;if(f.type===l.PlaylistLevelType.MAIN&&Object(n.isFiniteNumber)(f.sn)){var m=v?v.stats:f.stats,y=v?v.duration:f.duration;if(this.clearTimer(),this.lastLoadedFragLevel=f.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var T=this.hls.levels[f.level],L=(T.loaded?T.loaded.bytes:0)+m.loaded,C=(T.loaded?T.loaded.duration:0)+y;T.loaded={bytes:L,duration:C},T.realBitrate=Math.round(8*L/C)}if(f.bitrateTest){var R={stats:m,frag:f,part:v,id:f.type};this.onFragBuffered(s.Events.FRAG_BUFFERED,R),f.bitrateTest=!1}}},b.onFragBuffered=function(c,d){var f=d.frag,v=d.part,m=v?v.stats:f.stats;if(!m.aborted&&f.type===l.PlaylistLevelType.MAIN&&f.sn!=="initSegment"){var y=m.parsing.end-m.loading.start;this.bwEstimator.sample(y,m.loaded),m.bwEstimate=this.bwEstimator.getEstimate(),f.bitrateTest?this.bitrateTestDelay=y/1e3:this.bitrateTestDelay=0}},b.onError=function(c,d){switch(d.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},b.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},b.getNextABRAutoLevel=function(){var c=this.fragCurrent,d=this.partCurrent,f=this.hls,v=f.maxAutoLevel,m=f.config,y=f.minAutoLevel,T=f.media,L=d?d.duration:c?c.duration:0,C=T?T.currentTime:0,R=T&&T.playbackRate!==0?Math.abs(T.playbackRate):1,E=this.bwEstimator?this.bwEstimator.getEstimate():m.abrEwmaDefaultEstimate,S=(a.BufferHelper.bufferInfo(T,C,m.maxBufferHole).end-C)/R,k=this.findBestLevel(E,y,v,S,m.abrBandWidthFactor,m.abrBandWidthUpFactor);if(k>=0)return k;o.logger.trace((S?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var w=L?Math.min(L,m.maxStarvationDelay):m.maxStarvationDelay,O=m.abrBandWidthFactor,I=m.abrBandWidthUpFactor;if(!S){var P=this.bitrateTestDelay;P&&(w=(L?Math.min(L,m.maxLoadingDelay):m.maxLoadingDelay)-P,o.logger.trace("bitrate test took "+Math.round(1e3*P)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*w)+" ms"),O=I=1)}return k=this.findBestLevel(E,y,v,S+w,O,I),Math.max(k,0)},b.findBestLevel=function(c,d,f,v,m,y){for(var T,L=this.fragCurrent,C=this.partCurrent,R=this.lastLoadedFragLevel,E=this.hls.levels,S=E[R],k=!(S==null||(T=S.details)===null||T===void 0||!T.live),w=S==null?void 0:S.codecSet,O=C?C.duration:L?L.duration:0,I=f;I>=d;I--){var P=E[I];if(P&&(!w||P.codecSet===w)){var D=P.details,x=(C?D==null?void 0:D.partTarget:D==null?void 0:D.averagetargetduration)||O,M=void 0;M=I<=R?m*c:y*c;var B=E[I].maxBitrate,H=B*x/M;if(o.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+I+"/"+Math.round(M)+"/"+B+"/"+x+"/"+v+"/"+H),M>B&&(!H||k&&!this.bitrateTestDelay||H<v))return I}}return-1},_=g,(A=[{key:"nextAutoLevel",get:function(){var c=this._nextAutoLevel,d=this.bwEstimator;if(!(c===-1||d&&d.canEstimate()))return c;var f=this.getNextABRAutoLevel();return c!==-1&&(f=Math.min(c,f)),f},set:function(c){this._nextAutoLevel=c}}])&&h(_.prototype,A),g}();t.default=p},"./src/controller/audio-stream-controller.ts":function(e,t,r){r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/controller/base-stream-controller.ts"),s=r("./src/events.ts"),a=r("./src/utils/buffer-helper.ts"),u=r("./src/controller/fragment-tracker.ts"),l=r("./src/types/level.ts"),o=r("./src/types/loader.ts"),h=r("./src/loader/fragment.ts"),p=r("./src/demux/chunk-cache.ts"),g=r("./src/demux/transmuxer-interface.ts"),_=r("./src/types/transmuxer.ts"),A=r("./src/controller/fragment-finders.ts"),b=r("./src/utils/discontinuities.ts"),c=r("./src/errors.ts"),d=r("./src/utils/logger.ts");function f(){return(f=Object.assign||function(y){for(var T=1;T<arguments.length;T++){var L=arguments[T];for(var C in L)Object.prototype.hasOwnProperty.call(L,C)&&(y[C]=L[C])}return y}).apply(this,arguments)}function v(y,T){return(v=Object.setPrototypeOf||function(L,C){return L.__proto__=C,L})(y,T)}var m=function(y){var T,L;function C(E,S){var k;return(k=y.call(this,E,S,"[audio-stream-controller]")||this).videoBuffer=null,k.videoTrackCC=-1,k.waitingVideoCC=-1,k.audioSwitch=!1,k.trackId=-1,k.waitingData=null,k.mainDetails=null,k.bufferFlushed=!1,k._registerListeners(),k}L=y,(T=C).prototype=Object.create(L.prototype),T.prototype.constructor=T,v(T,L);var R=C.prototype;return R.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},R._registerListeners=function(){var E=this.hls;E.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.on(s.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),E.on(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),E.on(s.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),E.on(s.Events.ERROR,this.onError,this),E.on(s.Events.BUFFER_RESET,this.onBufferReset,this),E.on(s.Events.BUFFER_CREATED,this.onBufferCreated,this),E.on(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),E.on(s.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),E.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},R._unregisterListeners=function(){var E=this.hls;E.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.off(s.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),E.off(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),E.off(s.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),E.off(s.Events.ERROR,this.onError,this),E.off(s.Events.BUFFER_RESET,this.onBufferReset,this),E.off(s.Events.BUFFER_CREATED,this.onBufferCreated,this),E.off(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),E.off(s.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),E.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},R.onInitPtsFound=function(E,S){var k=S.frag,w=S.id,O=S.initPTS;if(w==="main"){var I=k.cc;this.initPTS[k.cc]=O,this.log("InitPTS for cc: "+I+" found from main: "+O),this.videoTrackCC=I,this.state===i.State.WAITING_INIT_PTS&&this.tick()}},R.startLoad=function(E){if(!this.levels)return this.startPosition=E,void(this.state=i.State.STOPPED);var S=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,S>0&&E===-1?(this.log("Override startPosition with lastCurrentTime @"+S.toFixed(3)),this.state=i.State.IDLE):(this.loadedmetadata=!1,this.state=i.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=E,this.tick()},R.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_TRACK:var E,S=this.levels,k=this.trackId,w=S==null||(E=S[k])===null||E===void 0?void 0:E.details;if(w){if(this.waitForCdnTuneIn(w))break;this.state=i.State.WAITING_INIT_PTS}break;case i.State.FRAG_LOADING_WAITING_RETRY:var O,I=performance.now(),P=this.retryDate;(!P||I>=P||(O=this.media)!==null&&O!==void 0&&O.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=i.State.IDLE);break;case i.State.WAITING_INIT_PTS:var D=this.waitingData;if(D){var x=D.frag,M=D.part,B=D.cache,H=D.complete;if(this.initPTS[x.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.FRAG_LOADING;var $={frag:x,part:M,payload:B.flush(),networkDetails:null};this._handleFragmentLoadProgress($),H&&y.prototype._handleFragmentLoadComplete.call(this,$)}else if(this.videoTrackCC!==this.waitingVideoCC)d.logger.log("Waiting fragment cc ("+x.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var q=this.getLoadPosition(),te=a.BufferHelper.bufferInfo(this.mediaBuffer,q,this.config.maxBufferHole);Object(A.fragmentWithinToleranceTest)(te.end,this.config.maxFragLookUpTolerance,x)<0&&(d.logger.log("Waiting fragment cc ("+x.cc+") @ "+x.start+" cancelled because another fragment at "+te.end+" is needed"),this.clearWaitingFragment())}}else this.state=i.State.IDLE}this.onTickEnd()},R.clearWaitingFragment=function(){var E=this.waitingData;E&&(this.fragmentTracker.removeFragment(E.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.IDLE)},R.onTickEnd=function(){var E=this.media;if(E&&E.readyState){var S=(this.mediaBuffer?this.mediaBuffer:E).buffered;!this.loadedmetadata&&S.length&&(this.loadedmetadata=!0),this.lastCurrentTime=E.currentTime}},R.doTickIdle=function(){var E,S,k=this.hls,w=this.levels,O=this.media,I=this.trackId,P=k.config;if(w&&w[I]&&(O||!this.startFragRequested&&P.startFragPrefetch)){var D=w[I].details;if(!D||D.live&&this.levelLastLoaded!==I||this.waitForCdnTuneIn(D))this.state=i.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,h.ElementaryStreamTypes.AUDIO,o.PlaylistLevelType.AUDIO));var x=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,o.PlaylistLevelType.AUDIO);if(x!==null){var M=x.len,B=this.getMaxBufferLength(),H=this.audioSwitch;if(!(M>=B)||H){if(!H&&this._streamEnded(x,D))return k.trigger(s.Events.BUFFER_EOS,{type:"audio"}),void(this.state=i.State.ENDED);var $=D.fragments[0].start,q=x.end;if(H){var te=this.getLoadPosition();q=te,D.PTSKnown&&te<$&&(x.end>$||x.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),O.currentTime=$+.05)}var K=this.getNextFragment(q,D);K?((E=K.decryptdata)===null||E===void 0?void 0:E.keyFormat)!=="identity"||(S=K.decryptdata)!==null&&S!==void 0&&S.key?this.loadFragment(K,D,q):this.loadKey(K,D):this.bufferFlushed=!0}}}}},R.getMaxBufferLength=function(){var E=y.prototype.getMaxBufferLength.call(this),S=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,o.PlaylistLevelType.MAIN);return S===null?E:Math.max(E,S.len)},R.onMediaDetaching=function(){this.videoBuffer=null,y.prototype.onMediaDetaching.call(this)},R.onAudioTracksUpdated=function(E,S){var k=S.audioTracks;this.resetTransmuxer(),this.levels=k.map(function(w){return new l.Level(w)})},R.onAudioTrackSwitching=function(E,S){var k=!!S.url;this.trackId=S.id;var w=this.fragCurrent;w!=null&&w.loader&&w.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),k?this.setInterval(100):this.resetTransmuxer(),k?(this.audioSwitch=!0,this.state=i.State.IDLE):this.state=i.State.STOPPED,this.tick()},R.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},R.onLevelLoaded=function(E,S){this.mainDetails=S.details},R.onAudioTrackLoaded=function(E,S){var k,w=this.levels,O=S.details,I=S.id;if(w){this.log("Track "+I+" loaded ["+O.startSN+","+O.endSN+"],duration:"+O.totalduration);var P=w[I],D=0;if(O.live||(k=P.details)!==null&&k!==void 0&&k.live){var x=this.mainDetails;if(O.fragments[0]||(O.deltaUpdateFailed=!0),O.deltaUpdateFailed||!x)return;!P.details&&O.hasProgramDateTime&&x.hasProgramDateTime?(Object(b.alignPDT)(O,x),D=O.fragments[0].start):D=this.alignPlaylists(O,P.details)}P.details=O,this.levelLastLoaded=I,this.startFragRequested||!this.mainDetails&&O.live||this.setStartPosition(P.details,D),this.state!==i.State.WAITING_TRACK||this.waitForCdnTuneIn(O)||(this.state=i.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+I)},R._handleFragmentLoadProgress=function(E){var S,k=E.frag,w=E.part,O=E.payload,I=this.config,P=this.trackId,D=this.levels;if(D){var x=D[P];console.assert(x,"Audio track is defined on fragment load progress");var M=x.details;console.assert(M,"Audio track details are defined on fragment load progress");var B=I.defaultAudioCodec||x.audioCodec||"mp4a.40.2",H=this.transmuxer;H||(H=this.transmuxer=new g.default(this.hls,o.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var $=this.initPTS[k.cc],q=(S=k.initSegment)===null||S===void 0?void 0:S.data;if($!==void 0){var te=w?w.index:-1,K=te!==-1,X=new _.ChunkMetadata(k.level,k.sn,k.stats.chunkCount,O.byteLength,te,K);H.push(O,q,B,"",k,w,M.totalduration,!1,X,$)}else d.logger.log("Unknown video PTS for cc "+k.cc+", waiting for video PTS before demuxing audio frag "+k.sn+" of ["+M.startSN+" ,"+M.endSN+"],track "+P),(this.waitingData=this.waitingData||{frag:k,part:w,cache:new p.default,complete:!1}).cache.push(new Uint8Array(O)),this.waitingVideoCC=this.videoTrackCC,this.state=i.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+k.sn+" of level "+k.level+" will not be buffered")},R._handleFragmentLoadComplete=function(E){this.waitingData?this.waitingData.complete=!0:y.prototype._handleFragmentLoadComplete.call(this,E)},R.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},R.onBufferCreated=function(E,S){var k=S.tracks.audio;k&&(this.mediaBuffer=k.buffer),S.tracks.video&&(this.videoBuffer=S.tracks.video.buffer)},R.onFragBuffered=function(E,S){var k=S.frag,w=S.part;k.type===o.PlaylistLevelType.AUDIO&&(this.fragContextChanged(k)?this.warn("Fragment "+k.sn+(w?" p: "+w.index:"")+" of level "+k.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):(k.sn!=="initSegment"&&(this.fragPrevious=k,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(s.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(k,w)))},R.onError=function(E,S){switch(S.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(o.PlaylistLevelType.AUDIO,S);break;case c.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case c.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==i.State.ERROR&&this.state!==i.State.STOPPED&&(this.state=S.fatal?i.State.ERROR:i.State.IDLE,this.warn(S.details+" while loading frag, switching to "+this.state+" state"));break;case c.ErrorDetails.BUFFER_FULL_ERROR:if(S.parent==="audio"&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var k=!0,w=this.getFwdBufferInfo(this.mediaBuffer,o.PlaylistLevelType.AUDIO);w&&w.len>.5&&(k=!this.reduceMaxBufferLength(w.len)),k&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},R.onBufferFlushed=function(E,S){S.type===h.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},R._handleTransmuxComplete=function(E){var S,k="audio",w=this.hls,O=E.remuxResult,I=E.chunkMeta,P=this.getCurrentContext(I);if(!P)return this.warn("The loading context changed while buffering fragment "+I.sn+" of level "+I.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(I.level);var D=P.frag,x=P.part,M=O.audio,B=O.text,H=O.id3,$=O.initSegment;if(!this.fragContextChanged(D)){if(this.state=i.State.PARSING,this.audioSwitch&&M&&this.completeAudioSwitch(),$!=null&&$.tracks&&(this._bufferInitSegment($.tracks,D,I),w.trigger(s.Events.FRAG_PARSING_INIT_SEGMENT,{frag:D,id:k,tracks:$.tracks})),M){var q=M.startPTS,te=M.endPTS,K=M.startDTS,X=M.endDTS;x&&(x.elementaryStreams[h.ElementaryStreamTypes.AUDIO]={startPTS:q,endPTS:te,startDTS:K,endDTS:X}),D.setElementaryStreamInfo(h.ElementaryStreamTypes.AUDIO,q,te,K,X),this.bufferFragmentData(M,D,x,I)}if(H!=null&&(S=H.samples)!==null&&S!==void 0&&S.length){var z=f({frag:D,id:k},H);w.trigger(s.Events.FRAG_PARSING_METADATA,z)}if(B){var Z=f({frag:D,id:k},B);w.trigger(s.Events.FRAG_PARSING_USERDATA,Z)}}},R._bufferInitSegment=function(E,S,k){if(this.state===i.State.PARSING){E.video&&delete E.video;var w=E.audio;if(w){w.levelCodec=w.codec,w.id="audio",this.log("Init audio buffer, container:"+w.container+", codecs[parsed]=["+w.codec+"]"),this.hls.trigger(s.Events.BUFFER_CODECS,E);var O=w.initSegment;if(O!=null&&O.byteLength){var I={type:"audio",frag:S,part:null,chunkMeta:k,parent:S.type,data:O};this.hls.trigger(s.Events.BUFFER_APPENDING,I)}this.tick()}}},R.loadFragment=function(E,S,k){var w=this.fragmentTracker.getState(E);this.fragCurrent=E,(this.audioSwitch||w===u.FragmentState.NOT_LOADED||w===u.FragmentState.PARTIAL)&&(E.sn==="initSegment"?this._loadInitSegment(E):S.live&&!Object(n.isFiniteNumber)(this.initPTS[E.cc])?(this.log("Waiting for video PTS in continuity counter "+E.cc+" of live stream before loading audio fragment "+E.sn+" of level "+this.trackId),this.state=i.State.WAITING_INIT_PTS):(this.startFragRequested=!0,y.prototype.loadFragment.call(this,E,S,k)))},R.completeAudioSwitch=function(){var E=this.hls,S=this.media,k=this.trackId;S&&(this.log("Switching audio track : flushing all audio"),y.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,E.trigger(s.Events.AUDIO_TRACK_SWITCHED,{id:k})},C}(i.default);t.default=m},"./src/controller/audio-track-controller.ts":function(e,t,r){r.r(t);var n=r("./src/events.ts"),i=r("./src/errors.ts"),s=r("./src/controller/base-playlist-controller.ts"),a=r("./src/types/loader.ts");function u(h,p){for(var g=0;g<p.length;g++){var _=p[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,_.key,_)}}function l(h,p){return(l=Object.setPrototypeOf||function(g,_){return g.__proto__=_,g})(h,p)}var o=function(h){var p,g;function _(d){var f;return(f=h.call(this,d,"[audio-track-controller]")||this).tracks=[],f.groupId=null,f.tracksInGroup=[],f.trackId=-1,f.trackName="",f.selectDefaultTrack=!0,f.registerListeners(),f}g=h,(p=_).prototype=Object.create(g.prototype),p.prototype.constructor=p,l(p,g);var A,b,c=_.prototype;return c.registerListeners=function(){var d=this.hls;d.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),d.on(n.Events.LEVEL_LOADING,this.onLevelLoading,this),d.on(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),d.on(n.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),d.on(n.Events.ERROR,this.onError,this)},c.unregisterListeners=function(){var d=this.hls;d.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),d.off(n.Events.LEVEL_LOADING,this.onLevelLoading,this),d.off(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),d.off(n.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),d.off(n.Events.ERROR,this.onError,this)},c.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,h.prototype.destroy.call(this)},c.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},c.onManifestParsed=function(d,f){this.tracks=f.audioTracks||[]},c.onAudioTrackLoaded=function(d,f){var v=f.id,m=f.details,y=this.tracksInGroup[v];if(y){var T=y.details;y.details=f.details,this.log("audioTrack "+v+" loaded ["+m.startSN+"-"+m.endSN+"]"),v===this.trackId&&(this.retryCount=0,this.playlistLoaded(v,f,T))}else this.warn("Invalid audio track id "+v)},c.onLevelLoading=function(d,f){this.switchLevel(f.level)},c.onLevelSwitching=function(d,f){this.switchLevel(f.level)},c.switchLevel=function(d){var f=this.hls.levels[d];if(f!=null&&f.audioGroupIds){var v=f.audioGroupIds[f.urlId];if(this.groupId!==v){this.groupId=v;var m=this.tracks.filter(function(T){return!v||T.groupId===v});this.selectDefaultTrack&&!m.some(function(T){return T.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=m;var y={audioTracks:m};this.log("Updating audio tracks, "+m.length+' track(s) found in "'+v+'" group-id'),this.hls.trigger(n.Events.AUDIO_TRACKS_UPDATED,y),this.selectInitialTrack()}}},c.onError=function(d,f){h.prototype.onError.call(this,d,f),!f.fatal&&f.context&&f.context.type===a.PlaylistContextType.AUDIO_TRACK&&f.context.id===this.trackId&&f.context.groupId===this.groupId&&this.retryLoadingOrFail(f)},c.setAudioTrack=function(d){var f=this.tracksInGroup;if(d<0||d>=f.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var v=f[this.trackId];this.log("Now switching to audio-track index "+d);var m=f[d],y=m.id,T=m.groupId,L=T===void 0?"":T,C=m.name,R=m.type,E=m.url;if(this.trackId=d,this.trackName=C,this.selectDefaultTrack=!1,this.hls.trigger(n.Events.AUDIO_TRACK_SWITCHING,{id:y,groupId:L,name:C,type:R,url:E}),!m.details||m.details.live){var S=this.switchParams(m.url,v==null?void 0:v.details);this.loadPlaylist(S)}}},c.selectInitialTrack=function(){var d=this.tracksInGroup;console.assert(d.length,"Initial audio track should be selected when tracks are known");var f=this.trackName,v=this.findTrackId(f)||this.findTrackId();v!==-1?this.setAudioTrack(v):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},c.findTrackId=function(d){for(var f=this.tracksInGroup,v=0;v<f.length;v++){var m=f[v];if((!this.selectDefaultTrack||m.default)&&(!d||d===m.name))return m.id}return-1},c.loadPlaylist=function(d){var f=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(f)){var v=f.id,m=f.groupId,y=f.url;if(d)try{y=d.addDirectives(y)}catch(T){this.warn("Could not construct new URL with HLS Delivery Directives: "+T)}this.log("loading audio-track playlist for id: "+v),this.clearTimer(),this.hls.trigger(n.Events.AUDIO_TRACK_LOADING,{url:y,id:v,groupId:m,deliveryDirectives:d||null})}},A=_,(b=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(d){this.selectDefaultTrack=!1,this.setAudioTrack(d)}}])&&u(A.prototype,b),_}(s.default);t.default=o},"./src/controller/base-playlist-controller.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return l});var n=r("./src/polyfills/number.ts"),i=r("./src/types/level.ts"),s=r("./src/controller/level-helper.ts"),a=r("./src/utils/logger.ts"),u=r("./src/errors.ts"),l=function(){function o(p,g){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=a.logger.log.bind(a.logger,g+":"),this.warn=a.logger.warn.bind(a.logger,g+":"),this.hls=p}var h=o.prototype;return h.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},h.onError=function(p,g){g.fatal&&g.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},h.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},h.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},h.stopLoad=function(){this.canLoad=!1,this.clearTimer()},h.switchParams=function(p,g){var _=g==null?void 0:g.renditionReports;if(_)for(var A=0;A<_.length;A++){var b=_[A],c=""+b.URI;if(c===p.substr(-c.length)){var d=parseInt(b["LAST-MSN"]),f=parseInt(b["LAST-PART"]);if(g&&this.hls.config.lowLatencyMode){var v=Math.min(g.age-g.partTarget,g.targetduration);f!==void 0&&v>g.partTarget&&(f+=1)}if(Object(n.isFiniteNumber)(d))return new i.HlsUrlParameters(d,Object(n.isFiniteNumber)(f)?f:void 0,i.HlsSkip.No)}}},h.loadPlaylist=function(p){},h.shouldLoadTrack=function(p){return this.canLoad&&p&&!!p.url&&(!p.details||p.details.live)},h.playlistLoaded=function(p,g,_){var A=this,b=g.details,c=g.stats,d=c.loading.end?Math.max(0,self.performance.now()-c.loading.end):0;if(b.advancedDateTime=Date.now()-d,b.live||_!=null&&_.live){if(b.reloaded(_),_&&this.log("live playlist "+p+" "+(b.advanced?"REFRESHED "+b.lastPartSn+"-"+b.lastPartIndex:"MISSED")),_&&b.fragments.length>0&&Object(s.mergeDetails)(_,b),!this.canLoad||!b.live)return;var f,v=void 0,m=void 0;if(b.canBlockReload&&b.endSN&&b.advanced){var y=this.hls.config.lowLatencyMode,T=b.lastPartSn,L=b.endSN,C=b.lastPartIndex,R=T===L;C!==-1?(v=R?L+1:T,m=R?y?0:C:C+1):v=L+1;var E=b.age,S=E+b.ageHeader,k=Math.min(S-b.partTarget,1.5*b.targetduration);if(k>0){if(_&&k>_.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+_.tuneInGoal+" to: "+k+" with playlist age: "+b.age),k=0;else{var w=Math.floor(k/b.targetduration);v+=w,m!==void 0&&(m+=Math.round(k%b.targetduration/b.partTarget)),this.log("CDN Tune-in age: "+b.ageHeader+"s last advanced "+E.toFixed(2)+"s goal: "+k+" skip sn "+w+" to part "+m)}b.tuneInGoal=k}if(f=this.getDeliveryDirectives(b,g.deliveryDirectives,v,m),y||!R)return void this.loadPlaylist(f)}else f=this.getDeliveryDirectives(b,g.deliveryDirectives,v,m);var O=Object(s.computeReloadInterval)(b,c);v!==void 0&&b.canBlockReload&&(O-=b.partTarget||1),this.log("reload live playlist "+p+" in "+Math.round(O)+" ms"),this.timer=self.setTimeout(function(){return A.loadPlaylist(f)},O)}else this.clearTimer()},h.getDeliveryDirectives=function(p,g,_,A){var b=Object(i.getSkipValue)(p,_);return g!=null&&g.skip&&p.deltaUpdateFailed&&(_=g.msn,A=g.part,b=i.HlsSkip.No),new i.HlsUrlParameters(_,A,b)},h.retryLoadingOrFail=function(p){var g,_=this,A=this.hls.config,b=this.retryCount<A.levelLoadingMaxRetry;if(b)if(this.retryCount++,p.details.indexOf("LoadTimeOut")>-1&&(g=p.context)!==null&&g!==void 0&&g.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+p.details+'"'),this.loadPlaylist();else{var c=Math.min(Math.pow(2,this.retryCount)*A.levelLoadingRetryDelay,A.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return _.loadPlaylist()},c),this.warn("retry playlist loading #"+this.retryCount+" in "+c+' ms after "'+p.details+'"')}else this.warn('cannot recover from error "'+p.details+'"'),this.clearTimer(),p.fatal=!0;return b},o}()},"./src/controller/base-stream-controller.ts":function(e,t,r){r.r(t),r.d(t,"State",function(){return y}),r.d(t,"default",function(){return T});var n=r("./src/polyfills/number.ts"),i=r("./src/task-loop.ts"),s=r("./src/controller/fragment-tracker.ts"),a=r("./src/utils/buffer-helper.ts"),u=r("./src/utils/logger.ts"),l=r("./src/events.ts"),o=r("./src/errors.ts"),h=r("./src/types/transmuxer.ts"),p=r("./src/utils/mp4-tools.ts"),g=r("./src/utils/discontinuities.ts"),_=r("./src/controller/fragment-finders.ts"),A=r("./src/controller/level-helper.ts"),b=r("./src/loader/fragment-loader.ts"),c=r("./src/crypt/decrypter.ts"),d=r("./src/utils/time-ranges.ts"),f=r("./src/types/loader.ts");function v(L,C){for(var R=0;R<C.length;R++){var E=C[R];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(L,E.key,E)}}function m(L,C){return(m=Object.setPrototypeOf||function(R,E){return R.__proto__=E,R})(L,C)}var y={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},T=function(L){var C,R;function E(O,I,P){var D;return(D=L.call(this)||this).hls=void 0,D.fragPrevious=null,D.fragCurrent=null,D.fragmentTracker=void 0,D.transmuxer=null,D._state=y.STOPPED,D.media=void 0,D.mediaBuffer=void 0,D.config=void 0,D.bitrateTest=!1,D.lastCurrentTime=0,D.nextLoadPosition=0,D.startPosition=0,D.loadedmetadata=!1,D.fragLoadError=0,D.retryDate=0,D.levels=null,D.fragmentLoader=void 0,D.levelLastLoaded=null,D.startFragRequested=!1,D.decrypter=void 0,D.initPTS=[],D.onvseeking=null,D.onvended=null,D.logPrefix="",D.log=void 0,D.warn=void 0,D.logPrefix=P,D.log=u.logger.log.bind(u.logger,P+":"),D.warn=u.logger.warn.bind(u.logger,P+":"),D.hls=O,D.fragmentLoader=new b.default(O.config),D.fragmentTracker=I,D.config=O.config,D.decrypter=new c.default(O,O.config),O.on(l.Events.KEY_LOADED,D.onKeyLoaded,function(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(D)),D}R=L,(C=E).prototype=Object.create(R.prototype),C.prototype.constructor=C,m(C,R);var S,k,w=E.prototype;return w.doTick=function(){this.onTickEnd()},w.onTickEnd=function(){},w.startLoad=function(O){},w.stopLoad=function(){this.fragmentLoader.abort();var O=this.fragCurrent;O&&this.fragmentTracker.removeFragment(O),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=y.STOPPED},w._streamEnded=function(O,I){var P=this.fragCurrent,D=this.fragmentTracker;if(!I.live&&P&&P.sn===I.endSN&&!O.nextStart){var x=D.getState(P);return x===s.FragmentState.PARTIAL||x===s.FragmentState.OK}return!1},w.onMediaAttached=function(O,I){var P=this.media=this.mediaBuffer=I.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),P.addEventListener("seeking",this.onvseeking),P.addEventListener("ended",this.onvended);var D=this.config;this.levels&&D.autoStartLoad&&this.state===y.STOPPED&&this.startLoad(D.startPosition)},w.onMediaDetaching=function(){var O=this.media;O!=null&&O.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),O&&(O.removeEventListener("seeking",this.onvseeking),O.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},w.onMediaSeeking=function(){var O=this.config,I=this.fragCurrent,P=this.media,D=this.mediaBuffer,x=this.state,M=P?P.currentTime:0,B=a.BufferHelper.bufferInfo(D||P,M,O.maxBufferHole);if(this.log("media seeking to "+(Object(n.isFiniteNumber)(M)?M.toFixed(3):M)+", state: "+x),x===y.ENDED)this.resetLoadingState();else if(I&&!B.len){var H=O.maxFragLookUpTolerance,$=I.start-H,q=M>I.start+I.duration+H;(M<$||q)&&(q&&I.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),I.loader.abort()),this.resetLoadingState())}P&&(this.lastCurrentTime=M),this.loadedmetadata||B.len||(this.nextLoadPosition=this.startPosition=M),this.tickImmediate()},w.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},w.onKeyLoaded=function(O,I){if(this.state===y.KEY_LOADING&&I.frag===this.fragCurrent&&this.levels){this.state=y.IDLE;var P=this.levels[I.frag.level].details;P&&this.loadFragment(I.frag,P,I.frag.start)}},w.onHandlerDestroying=function(){this.stopLoad(),L.prototype.onHandlerDestroying.call(this)},w.onHandlerDestroyed=function(){this.state=y.STOPPED,this.hls.off(l.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,L.prototype.onHandlerDestroyed.call(this)},w.loadKey=function(O,I){this.log("Loading key for "+O.sn+" of ["+I.startSN+"-"+I.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+O.level),this.state=y.KEY_LOADING,this.fragCurrent=O,this.hls.trigger(l.Events.KEY_LOADING,{frag:O})},w.loadFragment=function(O,I,P){this._loadFragForPlayback(O,I,P)},w._loadFragForPlayback=function(O,I,P){var D=this;this._doFragLoad(O,I,P,function(x){if(D.fragContextChanged(O))return D.warn("Fragment "+O.sn+(x.part?" p: "+x.part.index:"")+" of level "+O.level+" was dropped during download."),void D.fragmentTracker.removeFragment(O);O.stats.chunkCount++,D._handleFragmentLoadProgress(x)}).then(function(x){if(x){D.fragLoadError=0;var M=D.state;if(!D.fragContextChanged(O))return"payload"in x&&(D.log("Loaded fragment "+O.sn+" of level "+O.level),D.hls.trigger(l.Events.FRAG_LOADED,x),D.state===y.BACKTRACKING)?(D.fragmentTracker.backtrack(O,x),void D.resetFragmentLoading(O)):void D._handleFragmentLoadComplete(x);(M===y.FRAG_LOADING||M===y.BACKTRACKING||!D.fragCurrent&&M===y.PARSING)&&(D.fragmentTracker.removeFragment(O),D.state=y.IDLE)}}).catch(function(x){D.warn(x),D.resetFragmentLoading(O)})},w.flushMainBuffer=function(O,I,P){if(P===void 0&&(P=null),O-I){var D={startOffset:O,endOffset:I,type:P};this.fragLoadError=0,this.hls.trigger(l.Events.BUFFER_FLUSHING,D)}},w._loadInitSegment=function(O){var I=this;this._doFragLoad(O).then(function(P){if(!P||I.fragContextChanged(O)||!I.levels)throw new Error("init load aborted");return P}).then(function(P){var D=I.hls,x=P.payload,M=O.decryptdata;if(x&&x.byteLength>0&&M&&M.key&&M.iv&&M.method==="AES-128"){var B=self.performance.now();return I.decrypter.webCryptoDecrypt(new Uint8Array(x),M.key.buffer,M.iv.buffer).then(function(H){var $=self.performance.now();return D.trigger(l.Events.FRAG_DECRYPTED,{frag:O,payload:H,stats:{tstart:B,tdecrypt:$}}),P.payload=H,P})}return P}).then(function(P){var D=I.fragCurrent,x=I.hls,M=I.levels;if(!M)throw new Error("init load aborted, missing levels");var B=M[O.level].details;console.assert(B,"Level details are defined when init segment is loaded");var H=O.stats;I.state=y.IDLE,I.fragLoadError=0,O.data=new Uint8Array(P.payload),H.parsing.start=H.buffering.start=self.performance.now(),H.parsing.end=H.buffering.end=self.performance.now(),P.frag===D&&x.trigger(l.Events.FRAG_BUFFERED,{stats:H,frag:D,part:null,id:O.type}),I.tick()}).catch(function(P){I.warn(P),I.resetFragmentLoading(O)})},w.fragContextChanged=function(O){var I=this.fragCurrent;return!O||!I||O.level!==I.level||O.sn!==I.sn||O.urlId!==I.urlId},w.fragBufferedComplete=function(O,I){var P=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+O.type+" sn: "+O.sn+(I?" part: "+I.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+O.level+" "+d.default.toString(a.BufferHelper.getBuffered(P))),this.state=y.IDLE,this.tick()},w._handleFragmentLoadComplete=function(O){var I=this.transmuxer;if(I){var P=O.frag,D=O.part,x=O.partsLoaded,M=!x||x.length===0||x.some(function(H){return!H}),B=new h.ChunkMetadata(P.level,P.sn,P.stats.chunkCount+1,0,D?D.index:-1,!M);I.flush(B)}},w._handleFragmentLoadProgress=function(O){},w._doFragLoad=function(O,I,P,D){var x=this;if(P===void 0&&(P=null),!this.levels)throw new Error("frag load aborted, missing levels");if(P=Math.max(O.start,P||0),this.config.lowLatencyMode&&I){var M=I.partList;if(M&&D){P>O.end&&I.fragmentHint&&(O=I.fragmentHint);var B=this.getNextPart(M,O,P);if(B>-1){var H=M[B];return this.log("Loading part sn: "+O.sn+" p: "+H.index+" cc: "+O.cc+" of playlist ["+I.startSN+"-"+I.endSN+"] parts [0-"+B+"-"+(M.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+O.level+", target: "+parseFloat(P.toFixed(3))),this.nextLoadPosition=H.start+H.duration,this.state=y.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:O,part:M[B],targetBufferTime:P}),this.doFragPartsLoad(O,M,B,D).catch(function($){return x.handleFragLoadError($)})}if(!O.url||this.loadedEndOfParts(M,P))return Promise.resolve(null)}}return this.log("Loading fragment "+O.sn+" cc: "+O.cc+" "+(I?"of ["+I.startSN+"-"+I.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+O.level+", target: "+parseFloat(P.toFixed(3))),Object(n.isFiniteNumber)(O.sn)&&!this.bitrateTest&&(this.nextLoadPosition=O.start+O.duration),this.state=y.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:O,targetBufferTime:P}),this.fragmentLoader.load(O,D).catch(function($){return x.handleFragLoadError($)})},w.doFragPartsLoad=function(O,I,P,D){var x=this;return new Promise(function(M,B){var H=[];(function $(q){var te=I[q];x.fragmentLoader.loadPart(O,te,D).then(function(K){H[te.index]=K;var X=K.part;x.hls.trigger(l.Events.FRAG_LOADED,K);var z=I[q+1];if(!z||z.fragment!==O)return M({frag:O,part:X,partsLoaded:H});$(q+1)}).catch(B)})(P)})},w.handleFragLoadError=function(O){var I=O.data;return I&&I.details===o.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(I.frag,I.part):this.hls.trigger(l.Events.ERROR,I),null},w._handleTransmuxerFlush=function(O){var I=this.getCurrentContext(O);if(I&&this.state===y.PARSING){var P=I.frag,D=I.part,x=I.level,M=self.performance.now();P.stats.parsing.end=M,D&&(D.stats.parsing.end=M),this.updateLevelTiming(P,D,x,O.partial)}else this.fragCurrent||(this.state=y.IDLE)},w.getCurrentContext=function(O){var I=this.levels,P=O.level,D=O.sn,x=O.part;if(!I||!I[P])return this.warn("Levels object was unset while buffering fragment "+D+" of level "+P+". The current chunk will not be buffered."),null;var M=I[P],B=x>-1?Object(A.getPartWith)(M,D,x):null,H=B?B.fragment:Object(A.getFragmentWithSN)(M,D,this.fragCurrent);return H?{frag:H,part:B,level:M}:null},w.bufferFragmentData=function(O,I,P,D){if(O&&this.state===y.PARSING){var x=O.data1,M=O.data2,B=x;if(x&&M&&(B=Object(p.appendUint8Array)(x,M)),B&&B.length){var H={type:O.type,frag:I,part:P,chunkMeta:D,parent:I.type,data:B};this.hls.trigger(l.Events.BUFFER_APPENDING,H),O.dropped&&O.independent&&!P&&this.flushBufferGap(I)}}},w.flushBufferGap=function(O){var I=this.media;if(I)if(a.BufferHelper.isBuffered(I,I.currentTime)){var P=I.currentTime,D=a.BufferHelper.bufferInfo(I,P,0),x=O.duration,M=Math.min(2*this.config.maxFragLookUpTolerance,.25*x),B=Math.max(Math.min(O.start-M,D.end-M),P+M);O.start-B>M&&this.flushMainBuffer(B,O.start)}else this.flushMainBuffer(0,O.start)},w.getFwdBufferInfo=function(O,I){var P=this.config,D=this.getLoadPosition();if(!Object(n.isFiniteNumber)(D))return null;var x=a.BufferHelper.bufferInfo(O,D,P.maxBufferHole);if(x.len===0&&x.nextStart!==void 0){var M=this.fragmentTracker.getBufferedFrag(D,I);if(M&&x.nextStart<M.end)return a.BufferHelper.bufferInfo(O,D,Math.max(x.nextStart,P.maxBufferHole))}return x},w.getMaxBufferLength=function(O){var I,P=this.config;return I=O?Math.max(8*P.maxBufferSize/O,P.maxBufferLength):P.maxBufferLength,Math.min(I,P.maxMaxBufferLength)},w.reduceMaxBufferLength=function(O){var I=this.config,P=O||I.maxBufferLength;return I.maxMaxBufferLength>=P&&(I.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+I.maxMaxBufferLength+"s"),!0)},w.getNextFragment=function(O,I){var P,D,x=I.fragments,M=x.length;if(!M)return null;var B,H=this.config,$=x[0].start;if(I.live){var q=H.initialLiveManifestSize;if(M<q)return this.warn("Not enough fragments to start playback (have: "+M+", need: "+q+")"),null;I.PTSKnown||this.startFragRequested||this.startPosition!==-1||(B=this.getInitialLiveFragment(I,x),this.startPosition=B?this.hls.liveSyncPosition||B.start:O)}else O<=$&&(B=x[0]);if(!B){var te=H.lowLatencyMode?I.partEnd:I.fragmentEnd;B=this.getFragmentAtPosition(O,te,I)}return(P=B)===null||P===void 0||!P.initSegment||(D=B)!==null&&D!==void 0&&D.initSegment.data||this.bitrateTest||(B=B.initSegment),B},w.getNextPart=function(O,I,P){for(var D=-1,x=!1,M=!0,B=0,H=O.length;B<H;B++){var $=O[B];if(M=M&&!$.independent,D>-1&&P<$.start)break;var q=$.loaded;!q&&(x||$.independent||M)&&$.fragment===I&&(D=B),x=q}return D},w.loadedEndOfParts=function(O,I){var P=O[O.length-1];return P&&I>P.start&&P.loaded},w.getInitialLiveFragment=function(O,I){var P=this.fragPrevious,D=null;if(P){if(O.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+P.programDateTime),D=Object(_.findFragmentByPDT)(I,P.endProgramDateTime,this.config.maxFragLookUpTolerance)),!D){var x=P.sn+1;if(x>=O.startSN&&x<=O.endSN){var M=I[x-O.startSN];P.cc===M.cc&&(D=M,this.log("Live playlist, switching playlist, load frag with next SN: "+D.sn))}D||(D=Object(_.findFragWithCC)(I,P.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+D.sn)}}else{var B=this.hls.liveSyncPosition;B!==null&&(D=this.getFragmentAtPosition(B,this.bitrateTest?O.fragmentEnd:O.edge,O))}return D},w.getFragmentAtPosition=function(O,I,P){var D,x=this.config,M=this.fragPrevious,B=P.fragments,H=P.endSN,$=P.fragmentHint,q=x.maxFragLookUpTolerance,te=!!(x.lowLatencyMode&&P.partList&&$);if(te&&$&&!this.bitrateTest&&(B=B.concat($),H=$.sn),O<I){var K=O>I-q?0:q;D=Object(_.findFragmentByPTS)(M,B,O,K)}else D=B[B.length-1];if(D){var X=D.sn-P.startSN,z=M&&D.level===M.level,Z=B[X+1];if(this.fragmentTracker.getState(D)===s.FragmentState.BACKTRACKED){D=null;for(var oe=X;B[oe]&&this.fragmentTracker.getState(B[oe])===s.FragmentState.BACKTRACKED;)D=M?B[oe--]:B[--oe];D||(D=Z)}else M&&D.sn===M.sn&&!te&&z&&(D.sn<H&&this.fragmentTracker.getState(Z)!==s.FragmentState.OK?(this.log("SN "+D.sn+" just loaded, load next one: "+Z.sn),D=Z):D=null)}return D},w.synchronizeToLiveEdge=function(O){var I=this.config,P=this.media;if(P){var D=this.hls.liveSyncPosition,x=P.currentTime,M=O.fragments[0].start,B=O.edge,H=x>=M-I.maxFragLookUpTolerance&&x<=B;if(D!==null&&P.duration>D&&(x<D||!H)){var $=I.liveMaxLatencyDuration!==void 0?I.liveMaxLatencyDuration:I.liveMaxLatencyDurationCount*O.targetduration;(!H&&P.readyState<4||x<B-$)&&(this.loadedmetadata||(this.nextLoadPosition=D),P.readyState&&(this.warn("Playback: "+x.toFixed(3)+" is located too far from the end of live sliding playlist: "+B+", reset currentTime to : "+D.toFixed(3)),P.currentTime=D))}}},w.alignPlaylists=function(O,I){var P=this.levels,D=this.levelLastLoaded,x=this.fragPrevious,M=D!==null?P[D]:null,B=O.fragments.length;if(!B)return this.warn("No fragments in live playlist"),0;var H=O.fragments[0].start,$=!I,q=O.alignedSliding&&Object(n.isFiniteNumber)(H);if($||!q&&!H){Object(g.alignStream)(x,M,O);var te=O.fragments[0].start;return this.log("Live playlist sliding: "+te.toFixed(2)+" start-sn: "+(I?I.startSN:"na")+"->"+O.startSN+" prev-sn: "+(x?x.sn:"na")+" fragments: "+B),te}return H},w.waitForCdnTuneIn=function(O){return O.live&&O.canBlockReload&&O.tuneInGoal>Math.max(O.partHoldBack,3*O.partTarget)},w.setStartPosition=function(O,I){var P=this.startPosition;if(P<I&&(P=-1),P===-1||this.lastCurrentTime===-1){var D=O.startTimeOffset;Object(n.isFiniteNumber)(D)?(P=I+D,D<0&&(P+=O.totalduration),P=Math.min(Math.max(I,P),I+O.totalduration),this.log("Start time offset "+D+" found in playlist, adjust startPosition to "+P),this.startPosition=P):O.live?P=this.hls.liveSyncPosition||I:this.startPosition=P=0,this.lastCurrentTime=P}this.nextLoadPosition=P},w.getLoadPosition=function(){var O=this.media,I=0;return this.loadedmetadata&&O?I=O.currentTime:this.nextLoadPosition&&(I=this.nextLoadPosition),I},w.handleFragLoadAborted=function(O,I){this.transmuxer&&O.sn!=="initSegment"&&O.stats.aborted&&(this.warn("Fragment "+O.sn+(I?" part"+I.index:"")+" of level "+O.level+" was aborted"),this.resetFragmentLoading(O))},w.resetFragmentLoading=function(O){this.fragCurrent&&this.fragContextChanged(O)||(this.state=y.IDLE)},w.onFragmentOrKeyLoadError=function(O,I){if(!I.fatal){var P=I.frag;if(P&&P.type===O){var D=this.fragCurrent;console.assert(D&&P.sn===D.sn&&P.level===D.level&&P.urlId===D.urlId,"Frag load error must match current frag to retry");var x=this.config;if(this.fragLoadError+1<=x.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(P.level))return;var M=Math.min(Math.pow(2,this.fragLoadError)*x.fragLoadingRetryDelay,x.fragLoadingMaxRetryTimeout);this.warn("Fragment "+P.sn+" of "+O+" "+P.level+" failed to load, retrying in "+M+"ms"),this.retryDate=self.performance.now()+M,this.fragLoadError++,this.state=y.FRAG_LOADING_WAITING_RETRY}else I.levelRetry?(O===f.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=y.IDLE):(u.logger.error(I.details+" reaches max retry, redispatch as fatal ..."),I.fatal=!0,this.hls.stopLoad(),this.state=y.ERROR)}}},w.afterBufferFlushed=function(O,I,P){if(O){var D=a.BufferHelper.getBuffered(O);this.fragmentTracker.detectEvictedFragments(I,D,P),this.state===y.ENDED&&this.resetLoadingState()}},w.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=y.IDLE},w.resetLiveStartWhenNotLoaded=function(O){if(!this.loadedmetadata){this.startFragRequested=!1;var I=this.levels?this.levels[O].details:null;if(I!=null&&I.live)return this.startPosition=-1,this.setStartPosition(I,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},w.updateLevelTiming=function(O,I,P,D){var x=this,M=P.details;console.assert(!!M,"level.details must be defined"),Object.keys(O.elementaryStreams).reduce(function(B,H){var $=O.elementaryStreams[H];if($){var q=$.endPTS-$.startPTS;if(q<=0)return x.warn("Could not parse fragment "+O.sn+" "+H+" duration reliably ("+q+") resetting transmuxer to fallback to playlist timing"),x.resetTransmuxer(),B||!1;var te=D?0:Object(A.updateFragPTSDTS)(M,O,$.startPTS,$.endPTS,$.startDTS,$.endDTS);return x.hls.trigger(l.Events.LEVEL_PTS_UPDATED,{details:M,level:P,drift:te,type:H,frag:O,start:$.startPTS,end:$.endPTS}),!0}return B},!1)?(this.state=y.PARSED,this.hls.trigger(l.Events.FRAG_PARSED,{frag:O,part:I})):this.resetLoadingState()},w.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},S=E,(k=[{key:"state",get:function(){return this._state},set:function(O){var I=this._state;I!==O&&(this._state=O,this.log(I+"->"+O))}}])&&v(S.prototype,k),E}(i.default)},"./src/controller/buffer-controller.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return _});var n=r("./src/polyfills/number.ts"),i=r("./src/events.ts"),s=r("./src/utils/logger.ts"),a=r("./src/errors.ts"),u=r("./src/utils/buffer-helper.ts"),l=r("./src/utils/mediasource-helper.ts"),o=r("./src/loader/fragment.ts"),h=r("./src/controller/buffer-operation-queue.ts"),p=Object(l.getMediaSource)(),g=/([ha]vc.)(?:\.[^.,]+)+/,_=function(){function A(c){var d=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var f=d.hls,v=d.media,m=d.mediaSource;s.logger.log("[buffer-controller]: Media source opened"),v&&(d.updateMediaElementDuration(),f.trigger(i.Events.MEDIA_ATTACHED,{media:v})),m&&m.removeEventListener("sourceopen",d._onMediaSourceOpen),d.checkPendingTracks()},this._onMediaSourceClose=function(){s.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){s.logger.log("[buffer-controller]: Media source ended")},this.hls=c,this._initSourceBuffer(),this.registerListeners()}var b=A.prototype;return b.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},b.destroy=function(){this.unregisterListeners(),this.details=null},b.registerListeners=function(){var c=this.hls;c.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),c.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.on(i.Events.BUFFER_RESET,this.onBufferReset,this),c.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),c.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),c.on(i.Events.BUFFER_EOS,this.onBufferEos,this),c.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),c.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),c.on(i.Events.FRAG_PARSED,this.onFragParsed,this),c.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},b.unregisterListeners=function(){var c=this.hls;c.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),c.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.off(i.Events.BUFFER_RESET,this.onBufferReset,this),c.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),c.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),c.off(i.Events.BUFFER_EOS,this.onBufferEos,this),c.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),c.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),c.off(i.Events.FRAG_PARSED,this.onFragParsed,this),c.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},b._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new h.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},b.onManifestParsed=function(c,d){var f=2;(d.audio&&!d.video||!d.altAudio)&&(f=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=f,this.details=null,s.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},b.onMediaAttaching=function(c,d){var f=this.media=d.media;if(f&&p){var v=this.mediaSource=new p;v.addEventListener("sourceopen",this._onMediaSourceOpen),v.addEventListener("sourceended",this._onMediaSourceEnded),v.addEventListener("sourceclose",this._onMediaSourceClose),f.src=self.URL.createObjectURL(v),this._objectUrl=f.src}},b.onMediaDetaching=function(){var c=this.media,d=this.mediaSource,f=this._objectUrl;if(d){if(s.logger.log("[buffer-controller]: media source detaching"),d.readyState==="open")try{d.endOfStream()}catch(v){s.logger.warn("[buffer-controller]: onMediaDetaching: "+v.message+" while calling endOfStream")}this.onBufferReset(),d.removeEventListener("sourceopen",this._onMediaSourceOpen),d.removeEventListener("sourceended",this._onMediaSourceEnded),d.removeEventListener("sourceclose",this._onMediaSourceClose),c&&(f&&self.URL.revokeObjectURL(f),c.src===f?(c.removeAttribute("src"),c.load()):s.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},b.onBufferReset=function(){var c=this;this.getSourceBufferTypes().forEach(function(d){var f=c.sourceBuffer[d];try{f&&(c.removeBufferListeners(d),c.mediaSource&&c.mediaSource.removeSourceBuffer(f),c.sourceBuffer[d]=void 0)}catch(v){s.logger.warn("[buffer-controller]: Failed to reset the "+d+" buffer",v)}}),this._initSourceBuffer()},b.onBufferCodecs=function(c,d){var f=this,v=this.getSourceBufferTypes().length;Object.keys(d).forEach(function(m){if(v){var y=f.tracks[m];if(y&&typeof y.buffer.changeType=="function"){var T=d[m],L=T.codec,C=T.levelCodec,R=T.container;if((y.levelCodec||y.codec).replace(g,"$1")!==(C||L).replace(g,"$1")){var E=R+";codecs="+(C||L);f.appendChangeType(m,E)}}}else f.pendingTracks[m]=d[m]}),v||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},b.appendChangeType=function(c,d){var f=this,v=this.operationQueue,m={execute:function(){var y=f.sourceBuffer[c];y&&(s.logger.log("[buffer-controller]: changing "+c+" sourceBuffer type to "+d),y.changeType(d)),v.shiftAndExecuteNext(c)},onStart:function(){},onComplete:function(){},onError:function(y){s.logger.warn("[buffer-controller]: Failed to change "+c+" SourceBuffer type",y)}};v.append(m,c)},b.onBufferAppending=function(c,d){var f=this,v=this.hls,m=this.operationQueue,y=this.tracks,T=d.data,L=d.type,C=d.frag,R=d.part,E=d.chunkMeta,S=E.buffering[L],k=self.performance.now();S.start=k;var w=C.stats.buffering,O=R?R.stats.buffering:null;w.start===0&&(w.start=k),O&&O.start===0&&(O.start=k);var I=y.audio,P=L==="audio"&&E.id===1&&(I==null?void 0:I.container)==="audio/mpeg",D={execute:function(){if(S.executeStart=self.performance.now(),P){var x=f.sourceBuffer[L];if(x){var M=C.start-x.timestampOffset;Math.abs(M)>=.1&&(s.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+C.start+" (delta: "+M+") sn: "+C.sn+")"),x.timestampOffset=C.start)}}f.appendExecutor(T,L)},onStart:function(){},onComplete:function(){var x=self.performance.now();S.executeEnd=S.end=x,w.first===0&&(w.first=x),O&&O.first===0&&(O.first=x);var M=f.sourceBuffer,B={};for(var H in M)B[H]=u.BufferHelper.getBuffered(M[H]);f.appendError=0,f.hls.trigger(i.Events.BUFFER_APPENDED,{type:L,frag:C,part:R,chunkMeta:E,parent:C.type,timeRanges:B})},onError:function(x){s.logger.error("[buffer-controller]: Error encountered while trying to append to the "+L+" SourceBuffer",x);var M={type:a.ErrorTypes.MEDIA_ERROR,parent:C.type,details:a.ErrorDetails.BUFFER_APPEND_ERROR,err:x,fatal:!1};x.code===DOMException.QUOTA_EXCEEDED_ERR?M.details=a.ErrorDetails.BUFFER_FULL_ERROR:(f.appendError++,M.details=a.ErrorDetails.BUFFER_APPEND_ERROR,f.appendError>v.config.appendErrorMaxRetry&&(s.logger.error("[buffer-controller]: Failed "+v.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),M.fatal=!0)),v.trigger(i.Events.ERROR,M)}};m.append(D,L)},b.onBufferFlushing=function(c,d){var f=this,v=this.operationQueue,m=function(y){return{execute:f.removeExecutor.bind(f,y,d.startOffset,d.endOffset),onStart:function(){},onComplete:function(){f.hls.trigger(i.Events.BUFFER_FLUSHED,{type:y})},onError:function(T){s.logger.warn("[buffer-controller]: Failed to remove from "+y+" SourceBuffer",T)}}};d.type?v.append(m(d.type),d.type):this.getSourceBufferTypes().forEach(function(y){v.append(m(y),y)})},b.onFragParsed=function(c,d){var f=this,v=d.frag,m=d.part,y=[],T=m?m.elementaryStreams:v.elementaryStreams;T[o.ElementaryStreamTypes.AUDIOVIDEO]?y.push("audiovideo"):(T[o.ElementaryStreamTypes.AUDIO]&&y.push("audio"),T[o.ElementaryStreamTypes.VIDEO]&&y.push("video")),y.length===0&&s.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+v.type+" level: "+v.level+" sn: "+v.sn),this.blockBuffers(function(){var L=self.performance.now();v.stats.buffering.end=L,m&&(m.stats.buffering.end=L);var C=m?m.stats:v.stats;f.hls.trigger(i.Events.FRAG_BUFFERED,{frag:v,part:m,stats:C,id:v.type})},y)},b.onFragChanged=function(c,d){this.flushBackBuffer()},b.onBufferEos=function(c,d){var f=this;this.getSourceBufferTypes().reduce(function(v,m){var y=f.sourceBuffer[m];return d.type&&d.type!==m||y&&!y.ended&&(y.ended=!0,s.logger.log("[buffer-controller]: "+m+" sourceBuffer now EOS")),v&&!(y&&!y.ended)},!0)&&this.blockBuffers(function(){var v=f.mediaSource;v&&v.readyState==="open"&&v.endOfStream()})},b.onLevelUpdated=function(c,d){var f=d.details;f.fragments.length&&(this.details=f,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},b.flushBackBuffer=function(){var c=this.hls,d=this.details,f=this.media,v=this.sourceBuffer;if(f&&d!==null){var m=this.getSourceBufferTypes();if(m.length){var y=d.live&&c.config.liveBackBufferLength!==null?c.config.liveBackBufferLength:c.config.backBufferLength;if(Object(n.isFiniteNumber)(y)&&!(y<0)){var T=f.currentTime,L=d.levelTargetDuration,C=Math.max(y,L),R=Math.floor(T/L)*L-C;m.forEach(function(E){var S=v[E];if(S){var k=u.BufferHelper.getBuffered(S);k.length>0&&R>k.start(0)&&(c.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:R}),d.live&&c.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:R}),c.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:R,type:E}))}})}}}},b.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&this.mediaSource.readyState==="open"){var c=this.details,d=this.hls,f=this.media,v=this.mediaSource,m=c.fragments[0].start+c.totalduration,y=f.duration,T=Object(n.isFiniteNumber)(v.duration)?v.duration:0;c.live&&d.config.liveDurationInfinity?(s.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),v.duration=1/0,this.updateSeekableRange(c)):(m>T&&m>y||!Object(n.isFiniteNumber)(y))&&(s.logger.log("[buffer-controller]: Updating Media Source duration to "+m.toFixed(3)),v.duration=m)}},b.updateSeekableRange=function(c){var d=this.mediaSource,f=c.fragments;if(f.length&&c.live&&d!=null&&d.setLiveSeekableRange){var v=Math.max(0,f[0].start),m=Math.max(v,v+c.totalduration);d.setLiveSeekableRange(v,m)}},b.checkPendingTracks=function(){var c=this.bufferCodecEventsExpected,d=this.operationQueue,f=this.pendingTracks,v=Object.keys(f).length;if(v&&!c||v===2){this.createSourceBuffers(f),this.pendingTracks={};var m=this.getSourceBufferTypes();if(m.length===0)return void this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});m.forEach(function(y){d.executeNext(y)})}},b.createSourceBuffers=function(c){var d=this.sourceBuffer,f=this.mediaSource;if(!f)throw Error("createSourceBuffers called when mediaSource was null");var v=0;for(var m in c)if(!d[m]){var y=c[m];if(!y)throw Error("source buffer exists for track "+m+", however track does not");var T=y.levelCodec||y.codec,L=y.container+";codecs="+T;s.logger.log("[buffer-controller]: creating sourceBuffer("+L+")");try{var C=d[m]=f.addSourceBuffer(L),R=m;this.addBufferListener(R,"updatestart",this._onSBUpdateStart),this.addBufferListener(R,"updateend",this._onSBUpdateEnd),this.addBufferListener(R,"error",this._onSBUpdateError),this.tracks[m]={buffer:C,codec:T,container:y.container,levelCodec:y.levelCodec,id:y.id},v++}catch(E){s.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+E.message),this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:E,mimeType:L})}}v&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},b._onSBUpdateStart=function(c){this.operationQueue.current(c).onStart()},b._onSBUpdateEnd=function(c){var d=this.operationQueue;d.current(c).onComplete(),d.shiftAndExecuteNext(c)},b._onSBUpdateError=function(c,d){s.logger.error("[buffer-controller]: "+c+" SourceBuffer error",d),this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var f=this.operationQueue.current(c);f&&f.onError(d)},b.removeExecutor=function(c,d,f){var v=this.media,m=this.mediaSource,y=this.operationQueue,T=this.sourceBuffer[c];if(!v||!m||!T)return s.logger.warn("[buffer-controller]: Attempting to remove from the "+c+" SourceBuffer, but it does not exist"),void y.shiftAndExecuteNext(c);var L=Object(n.isFiniteNumber)(v.duration)?v.duration:1/0,C=Object(n.isFiniteNumber)(m.duration)?m.duration:1/0,R=Math.max(0,d),E=Math.min(f,L,C);E>R?(s.logger.log("[buffer-controller]: Removing ["+R+","+E+"] from the "+c+" SourceBuffer"),console.assert(!T.updating,c+" sourceBuffer must not be updating"),T.remove(R,E)):y.shiftAndExecuteNext(c)},b.appendExecutor=function(c,d){var f=this.operationQueue,v=this.sourceBuffer[d];if(!v)return s.logger.warn("[buffer-controller]: Attempting to append to the "+d+" SourceBuffer, but it does not exist"),void f.shiftAndExecuteNext(d);v.ended=!1,console.assert(!v.updating,d+" sourceBuffer must not be updating"),v.appendBuffer(c)},b.blockBuffers=function(c,d){var f=this;if(d===void 0&&(d=this.getSourceBufferTypes()),!d.length)return s.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(c);var v=this.operationQueue,m=d.map(function(y){return v.appendBlocker(y)});Promise.all(m).then(function(){c(),d.forEach(function(y){var T=f.sourceBuffer[y];T&&T.updating||v.shiftAndExecuteNext(y)})})},b.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},b.addBufferListener=function(c,d,f){var v=this.sourceBuffer[c];if(v){var m=f.bind(this,c);this.listeners[c].push({event:d,listener:m}),v.addEventListener(d,m)}},b.removeBufferListeners=function(c){var d=this.sourceBuffer[c];d&&this.listeners[c].forEach(function(f){d.removeEventListener(f.event,f.listener)})},A}()},"./src/controller/buffer-operation-queue.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return i});var n=r("./src/utils/logger.ts"),i=function(){function s(u){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=u}var a=s.prototype;return a.append=function(u,l){var o=this.queues[l];o.push(u),o.length===1&&this.buffers[l]&&this.executeNext(l)},a.insertAbort=function(u,l){this.queues[l].unshift(u),this.executeNext(l)},a.appendBlocker=function(u){var l,o=new Promise(function(p){l=p}),h={execute:l,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(h,u),o},a.executeNext=function(u){var l=this.buffers,o=this.queues,h=l[u],p=o[u];if(p.length){var g=p[0];try{g.execute()}catch(_){n.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),g.onError(_),h&&h.updating||(p.shift(),this.executeNext(u))}}},a.shiftAndExecuteNext=function(u){this.queues[u].shift(),this.executeNext(u)},a.current=function(u){return this.queues[u][0]},s}()},"./src/controller/cap-level-controller.ts":function(e,t,r){r.r(t);var n=r("./src/events.ts");function i(a,u){for(var l=0;l<u.length;l++){var o=u[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}var s=function(){function a(p){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=p,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var u,l,o,h=a.prototype;return h.setStreamController=function(p){this.streamController=p},h.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},h.registerListeners=function(){var p=this.hls;p.on(n.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),p.on(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),p.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.on(n.Events.BUFFER_CODECS,this.onBufferCodecs,this),p.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},h.unregisterListener=function(){var p=this.hls;p.off(n.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),p.off(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),p.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),p.off(n.Events.BUFFER_CODECS,this.onBufferCodecs,this),p.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},h.onFpsDropLevelCapping=function(p,g){a.isLevelAllowed(g.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(g.droppedLevel)},h.onMediaAttaching=function(p,g){this.media=g.media instanceof HTMLVideoElement?g.media:null},h.onManifestParsed=function(p,g){var _=this.hls;this.restrictedLevels=[],this.firstLevel=g.firstLevel,_.config.capLevelToPlayerSize&&g.video&&this.startCapping()},h.onBufferCodecs=function(p,g){this.hls.config.capLevelToPlayerSize&&g.video&&this.startCapping()},h.onMediaDetaching=function(){this.stopCapping()},h.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var p=this.hls.levels;if(p.length){var g=this.hls;g.autoLevelCapping=this.getMaxLevel(p.length-1),g.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=g.autoLevelCapping}}},h.getMaxLevel=function(p){var g=this,_=this.hls.levels;if(!_.length)return-1;var A=_.filter(function(b,c){return a.isLevelAllowed(c,g.restrictedLevels)&&c<=p});return this.clientRect=null,a.getMaxLevelByMediaSize(A,this.mediaWidth,this.mediaHeight)},h.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},h.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},h.getDimensions=function(){if(this.clientRect)return this.clientRect;var p=this.media,g={width:0,height:0};if(p){var _=p.getBoundingClientRect();g.width=_.width,g.height=_.height,g.width||g.height||(g.width=_.right-_.left||p.width||0,g.height=_.bottom-_.top||p.height||0)}return this.clientRect=g,g},a.isLevelAllowed=function(p,g){return g===void 0&&(g=[]),g.indexOf(p)===-1},a.getMaxLevelByMediaSize=function(p,g,_){if(!p||!p.length)return-1;for(var A,b,c=p.length-1,d=0;d<p.length;d+=1){var f=p[d];if((f.width>=g||f.height>=_)&&(A=f,!(b=p[d+1])||A.width!==b.width||A.height!==b.height)){c=d;break}}return c},u=a,o=[{key:"contentScaleFactor",get:function(){var p=1;try{p=self.devicePixelRatio}catch{}return p}}],(l=[{key:"mediaWidth",get:function(){return this.getDimensions().width*a.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*a.contentScaleFactor}}])&&i(u.prototype,l),o&&i(u,o),a}();t.default=s},"./src/controller/eme-controller.ts":function(e,t,r){r.r(t);var n=r("./src/events.ts"),i=r("./src/errors.ts"),s=r("./src/utils/logger.ts"),a=r("./src/utils/mediakeys-helper.ts");function u(o,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}var l=function(){function o(_){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=_,this._config=_.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var h,p,g=o.prototype;return g.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},g._registerListeners=function(){this.hls.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this)},g._unregisterListeners=function(){this.hls.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(n.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this)},g.getLicenseServerUrl=function(_){switch(_){case a.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+_+'"')},g._attemptKeySystemAccess=function(_,A,b){var c=this,d=function(v,m,y,T){switch(v){case a.KeySystems.WIDEVINE:return function(L,C,R){var E={audioCapabilities:[],videoCapabilities:[]};return L.forEach(function(S){E.audioCapabilities.push({contentType:'audio/mp4; codecs="'+S+'"',robustness:R.audioRobustness||""})}),C.forEach(function(S){E.videoCapabilities.push({contentType:'video/mp4; codecs="'+S+'"',robustness:R.videoRobustness||""})}),[E]}(m,y,T);default:throw new Error("Unknown key-system: "+v)}}(_,A,b,this._drmSystemOptions);s.logger.log("Requesting encrypted media key-system access");var f=this.requestMediaKeySystemAccess(_,d);this.mediaKeysPromise=f.then(function(v){return c._onMediaKeySystemAccessObtained(_,v)}),f.catch(function(v){s.logger.error('Failed to obtain key-system "'+_+'" access:',v)})},g._onMediaKeySystemAccessObtained=function(_,A){var b=this;s.logger.log('Access for key-system "'+_+'" obtained');var c={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:A,mediaKeySystemDomain:_};this._mediaKeysList.push(c);var d=Promise.resolve().then(function(){return A.createMediaKeys()}).then(function(f){return c.mediaKeys=f,s.logger.log('Media-keys created for key-system "'+_+'"'),b._onMediaKeysCreated(),f});return d.catch(function(f){s.logger.error("Failed to create media-keys:",f)}),d},g._onMediaKeysCreated=function(){var _=this;this._mediaKeysList.forEach(function(A){A.mediaKeysSession||(A.mediaKeysSession=A.mediaKeys.createSession(),_._onNewMediaKeySession(A.mediaKeysSession))})},g._onNewMediaKeySession=function(_){var A=this;s.logger.log("New key-system session "+_.sessionId),_.addEventListener("message",function(b){A._onKeySessionMessage(_,b.message)},!1)},g._onKeySessionMessage=function(_,A){s.logger.log("Got EME message event, creating license request"),this._requestLicense(A,function(b){s.logger.log("Received license data (length: "+(b&&b.byteLength)+"), updating key-session"),_.update(b)})},g.onMediaEncrypted=function(_){var A=this;if(s.logger.log('Media is encrypted using "'+_.initDataType+'" init data type'),!this.mediaKeysPromise)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var b=function(c){A._media&&(A._attemptSetMediaKeys(c),A._generateRequestWithPreferredKeySession(_.initDataType,_.initData))};this.mediaKeysPromise.then(b).catch(b)},g._attemptSetMediaKeys=function(_){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var A=this._mediaKeysList[0];if(!A||!A.mediaKeys)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});s.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(A.mediaKeys),this._hasSetMediaKeys=!0}},g._generateRequestWithPreferredKeySession=function(_,A){var b=this,c=this._mediaKeysList[0];if(!c)return s.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(c.mediaKeysSessionInitialized)s.logger.warn("Key-Session already initialized but requested again");else{var d=c.mediaKeysSession;if(!d)return s.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!A)return s.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});s.logger.log('Generating key-session request for "'+_+'" init data type'),c.mediaKeysSessionInitialized=!0,d.generateRequest(_,A).then(function(){s.logger.debug("Key-session generation succeeded")}).catch(function(f){s.logger.error("Error generating key-session request:",f),b.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},g._createLicenseXhr=function(_,A,b){var c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,c,_,A,b);var d=this._licenseXhrSetup;if(d)try{d.call(this.hls,c,_),d=void 0}catch(f){s.logger.error(f)}try{c.readyState||c.open("POST",_,!0),d&&d.call(this.hls,c,_)}catch(f){throw new Error("issue setting up KeySystem license XHR "+f)}return c},g._onLicenseRequestReadyStageChange=function(_,A,b,c){switch(_.readyState){case 4:if(_.status===200){this._requestLicenseFailureCount=0,s.logger.log("License request succeeded");var d=_.response,f=this._licenseResponseCallback;if(f)try{d=f.call(this.hls,_,A)}catch(m){s.logger.error(m)}c(d)}else{if(s.logger.error("License Request XHR failed ("+A+"). Status: "+_.status+" ("+_.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var v=3-this._requestLicenseFailureCount+1;s.logger.warn("Retrying license request, "+v+" attempts left"),this._requestLicense(b,c)}}},g._generateLicenseRequestChallenge=function(_,A){switch(_.mediaKeySystemDomain){case a.KeySystems.WIDEVINE:return A}throw new Error("unsupported key-system: "+_.mediaKeySystemDomain)},g._requestLicense=function(_,A){s.logger.log("Requesting content license for key-system");var b=this._mediaKeysList[0];if(!b)return s.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var c=this.getLicenseServerUrl(b.mediaKeySystemDomain),d=this._createLicenseXhr(c,_,A);s.logger.log("Sending license request to URL: "+c);var f=this._generateLicenseRequestChallenge(b,_);d.send(f)}catch(v){s.logger.error("Failure requesting DRM license: "+v),this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},g.onMediaAttached=function(_,A){if(this._emeEnabled){var b=A.media;this._media=b,b.addEventListener("encrypted",this._onMediaEncrypted)}},g.onMediaDetached=function(){var _=this._media,A=this._mediaKeysList;_&&(_.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(A.map(function(b){if(b.mediaKeysSession)return b.mediaKeysSession.close().catch(function(){})})).then(function(){return _.setMediaKeys(null)}).catch(function(){}))},g.onManifestParsed=function(_,A){if(this._emeEnabled){var b=A.levels.map(function(d){return d.audioCodec}).filter(function(d){return!!d}),c=A.levels.map(function(d){return d.videoCodec}).filter(function(d){return!!d});this._attemptKeySystemAccess(a.KeySystems.WIDEVINE,b,c)}},h=o,(p=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&u(h.prototype,p),o}();t.default=l},"./src/controller/fps-controller.ts":function(e,t,r){r.r(t);var n=r("./src/events.ts"),i=r("./src/utils/logger.ts"),s=function(){function a(l){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=l,this.registerListeners()}var u=a.prototype;return u.setStreamController=function(l){this.streamController=l},u.registerListeners=function(){this.hls.on(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},u.unregisterListeners=function(){this.hls.off(n.Events.MEDIA_ATTACHING,this.onMediaAttaching)},u.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},u.onMediaAttaching=function(l,o){var h=this.hls.config;if(h.capLevelOnFPSDrop){var p=o.media instanceof self.HTMLVideoElement?o.media:null;this.media=p,p&&typeof p.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),h.fpsDroppedMonitoringPeriod)}},u.checkFPS=function(l,o,h){var p=performance.now();if(o){if(this.lastTime){var g=p-this.lastTime,_=h-this.lastDroppedFrames,A=o-this.lastDecodedFrames,b=1e3*_/g,c=this.hls;if(c.trigger(n.Events.FPS_DROP,{currentDropped:_,currentDecoded:A,totalDroppedFrames:h}),b>0&&_>c.config.fpsDroppedMonitoringThreshold*A){var d=c.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=d)&&(d-=1,c.trigger(n.Events.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=p,this.lastDroppedFrames=h,this.lastDecodedFrames=o}},u.checkFPSInterval=function(){var l=this.media;if(l)if(this.isVideoPlaybackQualityAvailable){var o=l.getVideoPlaybackQuality();this.checkFPS(l,o.totalVideoFrames,o.droppedVideoFrames)}else this.checkFPS(l,l.webkitDecodedFrameCount,l.webkitDroppedFrameCount)},a}();t.default=s},"./src/controller/fragment-finders.ts":function(e,t,r){r.r(t),r.d(t,"findFragmentByPDT",function(){return s}),r.d(t,"findFragmentByPTS",function(){return a}),r.d(t,"fragmentWithinToleranceTest",function(){return u}),r.d(t,"pdtWithinToleranceTest",function(){return l}),r.d(t,"findFragWithCC",function(){return o});var n=r("./src/polyfills/number.ts"),i=r("./src/utils/binary-search.ts");function s(h,p,g){if(p===null||!Array.isArray(h)||!h.length||!Object(n.isFiniteNumber)(p)||p<(h[0].programDateTime||0)||p>=(h[h.length-1].endProgramDateTime||0))return null;g=g||0;for(var _=0;_<h.length;++_){var A=h[_];if(l(p,g,A))return A}return null}function a(h,p,g,_){g===void 0&&(g=0),_===void 0&&(_=0);var A=null;if(h?A=p[h.sn-p[0].sn+1]||null:g===0&&p[0].start===0&&(A=p[0]),A&&u(g,_,A)===0)return A;var b=i.default.search(p,u.bind(null,g,_));return b||A}function u(h,p,g){h===void 0&&(h=0),p===void 0&&(p=0);var _=Math.min(p,g.duration+(g.deltaPTS?g.deltaPTS:0));return g.start+g.duration-_<=h?1:g.start-_>h&&g.start?-1:0}function l(h,p,g){var _=1e3*Math.min(p,g.duration+(g.deltaPTS?g.deltaPTS:0));return(g.endProgramDateTime||0)-_>h}function o(h,p){return i.default.search(h,function(g){return g.cc<p?1:g.cc>p?-1:0})}},"./src/controller/fragment-tracker.ts":function(e,t,r){r.r(t),r.d(t,"FragmentState",function(){return n}),r.d(t,"FragmentTracker",function(){return u});var n,i,s=r("./src/events.ts"),a=r("./src/types/loader.ts");(i=n||(n={})).NOT_LOADED="NOT_LOADED",i.BACKTRACKED="BACKTRACKED",i.APPENDING="APPENDING",i.PARTIAL="PARTIAL",i.OK="OK";var u=function(){function h(g){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=g,this._registerListeners()}var p=h.prototype;return p._registerListeners=function(){var g=this.hls;g.on(s.Events.BUFFER_APPENDED,this.onBufferAppended,this),g.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),g.on(s.Events.FRAG_LOADED,this.onFragLoaded,this)},p._unregisterListeners=function(){var g=this.hls;g.off(s.Events.BUFFER_APPENDED,this.onBufferAppended,this),g.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),g.off(s.Events.FRAG_LOADED,this.onFragLoaded,this)},p.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},p.getAppendedFrag=function(g,_){if(_===a.PlaylistLevelType.MAIN){var A=this.activeFragment,b=this.activeParts;if(!A)return null;if(b)for(var c=b.length;c--;){var d=b[c],f=d?d.end:A.appendedPTS;if(d.start<=g&&f!==void 0&&g<=f)return c>9&&(this.activeParts=b.slice(c-9)),d}else if(A.start<=g&&A.appendedPTS!==void 0&&g<=A.appendedPTS)return A}return this.getBufferedFrag(g,_)},p.getBufferedFrag=function(g,_){for(var A=this.fragments,b=Object.keys(A),c=b.length;c--;){var d=A[b[c]];if((d==null?void 0:d.body.type)===_&&d.buffered){var f=d.body;if(f.start<=g&&g<=f.end)return f}}return null},p.detectEvictedFragments=function(g,_,A){var b=this;Object.keys(this.fragments).forEach(function(c){var d=b.fragments[c];if(d)if(d.buffered){var f=d.range[g];f&&f.time.some(function(v){var m=!b.isTimeBuffered(v.startPTS,v.endPTS,_);return m&&b.removeFragment(d.body),m})}else d.body.type===A&&b.removeFragment(d.body)})},p.detectPartialFragments=function(g){var _=this,A=this.timeRanges,b=g.frag,c=g.part;if(A&&b.sn!=="initSegment"){var d=o(b),f=this.fragments[d];f&&(Object.keys(A).forEach(function(v){var m=b.elementaryStreams[v];if(m){var y=A[v],T=c!==null||m.partial===!0;f.range[v]=_.getBufferedTimes(b,c,T,y)}}),f.backtrack=f.loaded=null,Object.keys(f.range).length?f.buffered=!0:this.removeFragment(f.body))}},p.fragBuffered=function(g){var _=o(g),A=this.fragments[_];A&&(A.backtrack=A.loaded=null,A.buffered=!0)},p.getBufferedTimes=function(g,_,A,b){for(var c={time:[],partial:A},d=_?_.start:g.start,f=_?_.end:g.end,v=g.minEndPTS||f,m=g.maxStartPTS||d,y=0;y<b.length;y++){var T=b.start(y)-this.bufferPadding,L=b.end(y)+this.bufferPadding;if(m>=T&&v<=L){c.time.push({startPTS:Math.max(d,b.start(y)),endPTS:Math.min(f,b.end(y))});break}if(d<L&&f>T)c.partial=!0,c.time.push({startPTS:Math.max(d,b.start(y)),endPTS:Math.min(f,b.end(y))});else if(f<=T)break}return c},p.getPartialFragment=function(g){var _,A,b,c=null,d=0,f=this.bufferPadding,v=this.fragments;return Object.keys(v).forEach(function(m){var y=v[m];y&&l(y)&&(A=y.body.start-f,b=y.body.end+f,g>=A&&g<=b&&(_=Math.min(g-A,b-g),d<=_&&(c=y.body,d=_)))}),c},p.getState=function(g){var _=o(g),A=this.fragments[_];return A?A.buffered?l(A)?n.PARTIAL:n.OK:A.backtrack?n.BACKTRACKED:n.APPENDING:n.NOT_LOADED},p.backtrack=function(g,_){var A=o(g),b=this.fragments[A];if(!b||b.backtrack)return null;var c=b.backtrack=_||b.loaded;return b.loaded=null,c},p.getBacktrackData=function(g){var _=o(g),A=this.fragments[_];if(A){var b,c=A.backtrack;if(c!=null&&(b=c.payload)!==null&&b!==void 0&&b.byteLength)return c;this.removeFragment(g)}return null},p.isTimeBuffered=function(g,_,A){for(var b,c,d=0;d<A.length;d++){if(b=A.start(d)-this.bufferPadding,c=A.end(d)+this.bufferPadding,g>=b&&_<=c)return!0;if(_<=b)return!1}return!1},p.onFragLoaded=function(g,_){var A=_.frag,b=_.part;if(A.sn!=="initSegment"&&!A.bitrateTest&&!b){var c=o(A);this.fragments[c]={body:A,loaded:_,backtrack:null,buffered:!1,range:Object.create(null)}}},p.onBufferAppended=function(g,_){var A=this,b=_.frag,c=_.part,d=_.timeRanges;if(b.type===a.PlaylistLevelType.MAIN)if(this.activeFragment=b,c){var f=this.activeParts;f||(this.activeParts=f=[]),f.push(c)}else this.activeParts=null;this.timeRanges=d,Object.keys(d).forEach(function(v){var m=d[v];if(A.detectEvictedFragments(v,m),!c)for(var y=0;y<m.length;y++)b.appendedPTS=Math.max(m.end(y),b.appendedPTS||0)})},p.onFragBuffered=function(g,_){this.detectPartialFragments(_)},p.hasFragment=function(g){var _=o(g);return!!this.fragments[_]},p.removeFragmentsInRange=function(g,_,A){var b=this;Object.keys(this.fragments).forEach(function(c){var d=b.fragments[c];if(d&&d.buffered){var f=d.body;f.type===A&&f.start<_&&f.end>g&&b.removeFragment(f)}})},p.removeFragment=function(g){var _=o(g);g.stats.loaded=0,g.clearElementaryStreamInfo(),delete this.fragments[_]},p.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},h}();function l(h){var p,g;return h.buffered&&(((p=h.range.video)===null||p===void 0?void 0:p.partial)||((g=h.range.audio)===null||g===void 0?void 0:g.partial))}function o(h){return h.type+"_"+h.level+"_"+h.urlId+"_"+h.sn}},"./src/controller/gap-controller.ts":function(e,t,r){r.r(t),r.d(t,"STALL_MINIMUM_DURATION_MS",function(){return u}),r.d(t,"MAX_START_GAP_JUMP",function(){return l}),r.d(t,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return o}),r.d(t,"SKIP_BUFFER_RANGE_START",function(){return h}),r.d(t,"default",function(){return p});var n=r("./src/utils/buffer-helper.ts"),i=r("./src/errors.ts"),s=r("./src/events.ts"),a=r("./src/utils/logger.ts"),u=250,l=2,o=.1,h=.05,p=function(){function g(A,b,c,d){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=A,this.media=b,this.fragmentTracker=c,this.hls=d}var _=g.prototype;return _.destroy=function(){this.hls=this.fragmentTracker=this.media=null},_.poll=function(A){var b=this.config,c=this.media,d=this.stalled,f=c.currentTime,v=c.seeking,m=this.seeking&&!v,y=!this.seeking&&v;if(this.seeking=v,f===A){if((y||m)&&(this.stalled=null),!c.paused&&!c.ended&&c.playbackRate!==0&&n.BufferHelper.getBuffered(c).length){var T=n.BufferHelper.bufferInfo(c,f,0),L=T.len>0,C=T.nextStart||0;if(L||C){if(v){var R=T.len>l,E=!C||C-f>l&&!this.fragmentTracker.getPartialFragment(f);if(R||E)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var S,k=Math.max(C,T.start||0)-f,w=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,O=(w==null||(S=w.details)===null||S===void 0?void 0:S.live)?2*w.details.targetduration:l;if(k>0&&k<=O)return void this._trySkipBufferHole(null)}var I=self.performance.now();if(d!==null){var P=I-d;!v&&P>=u&&this._reportStall(T.len);var D=n.BufferHelper.bufferInfo(c,f,b.maxBufferHole);this._tryFixBufferStall(D,P)}else this.stalled=I}}}else if(this.moved=!0,d!==null){if(this.stallReported){var x=self.performance.now()-d;a.logger.warn("playback not stuck anymore @"+f+", after "+Math.round(x)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},_._tryFixBufferStall=function(A,b){var c=this.config,d=this.fragmentTracker,f=this.media.currentTime,v=d.getPartialFragment(f);v&&this._trySkipBufferHole(v)||A.len>c.maxBufferHole&&b>1e3*c.highBufferWatchdogPeriod&&(a.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},_._reportStall=function(A){var b=this.hls,c=this.media;this.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+c.currentTime+" due to low buffer (buffer="+A+")"),b.trigger(s.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:A}))},_._trySkipBufferHole=function(A){for(var b=this.config,c=this.hls,d=this.media,f=d.currentTime,v=0,m=n.BufferHelper.getBuffered(d),y=0;y<m.length;y++){var T=m.start(y);if(f+b.maxBufferHole>=v&&f<T){var L=Math.max(T+h,d.currentTime+o);return a.logger.warn("skipping hole, adjusting currentTime from "+f+" to "+L),this.moved=!0,this.stalled=null,d.currentTime=L,A&&c.trigger(s.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+f+" to "+L,frag:A}),L}v=m.end(y)}return 0},_._tryNudgeBuffer=function(){var A=this.config,b=this.hls,c=this.media,d=c.currentTime,f=(this.nudgeRetry||0)+1;if(this.nudgeRetry=f,f<A.nudgeMaxRetry){var v=d+f*A.nudgeOffset;a.logger.warn("Nudging 'currentTime' from "+d+" to "+v),c.currentTime=v,b.trigger(s.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("Playhead still not moving while enough data buffered @"+d+" after "+A.nudgeMaxRetry+" nudges"),b.trigger(s.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},g}()},"./src/controller/id3-track-controller.ts":function(e,t,r){r.r(t);var n=r("./src/events.ts"),i=r("./src/utils/texttrack-utils.ts"),s=r("./src/demux/id3.ts"),a=function(){function u(o){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=o,this._registerListeners()}var l=u.prototype;return l.destroy=function(){this._unregisterListeners()},l._registerListeners=function(){var o=this.hls;o.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),o.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),o.on(n.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),o.on(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},l._unregisterListeners=function(){var o=this.hls;o.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),o.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),o.off(n.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),o.off(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},l.onMediaAttached=function(o,h){this.media=h.media},l.onMediaDetaching=function(){this.id3Track&&(Object(i.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},l.getID3Track=function(o){if(this.media){for(var h=0;h<o.length;h++){var p=o[h];if(p.kind==="metadata"&&p.label==="id3")return Object(i.sendAddTrackEvent)(p,this.media),p}return this.media.addTextTrack("metadata","id3")}},l.onFragParsingMetadata=function(o,h){if(this.media){var p=h.frag,g=h.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var _=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,A=0;A<g.length;A++){var b=s.getID3Frames(g[A].data);if(b){var c=g[A].pts,d=A<g.length-1?g[A+1].pts:p.end;d-c<=0&&(d=c+.25);for(var f=0;f<b.length;f++){var v=b[f];if(!s.isTimeStampFrame(v)){var m=new _(c,d,"");m.value=v,this.id3Track.addCue(m)}}}}}},l.onBufferFlushing=function(o,h){var p=h.startOffset,g=h.endOffset,_=h.type;if(!_||_==="audio"){var A=this.id3Track;A&&Object(i.removeCuesInRange)(A,p,g)}},u}();t.default=a},"./src/controller/latency-controller.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return u});var n=r("./src/errors.ts"),i=r("./src/events.ts"),s=r("./src/utils/logger.ts");function a(l,o){for(var h=0;h<o.length;h++){var p=o[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}var u=function(){function l(g){var _=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return _.timeupdate()},this.hls=g,this.config=g.config,this.registerListeners()}var o,h,p=l.prototype;return p.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},p.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.Events.ERROR,this.onError,this)},p.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.Events.ERROR,this.onError)},p.onMediaAttached=function(g,_){this.media=_.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},p.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},p.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},p.onLevelUpdated=function(g,_){var A=_.details;this.levelDetails=A,A.advanced&&this.timeupdate(),!A.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},p.onError=function(g,_){_.details===n.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,s.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},p.timeupdate=function(){var g=this.media,_=this.levelDetails;if(g&&_){this.currentTime=g.currentTime;var A=this.computeLatency();if(A!==null){this._latency=A;var b=this.config,c=b.lowLatencyMode,d=b.maxLiveSyncPlaybackRate;if(c&&d!==1){var f=this.targetLatency;if(f!==null){var v=A-f,m=v<Math.min(this.maxLatency,f+_.targetduration);if(_.live&&m&&v>.05&&this.forwardBufferLength>1){var y=Math.min(2,Math.max(1,d)),T=Math.round(2/(1+Math.exp(-.75*v-this.edgeStalled))*20)/20;g.playbackRate=Math.min(y,Math.max(1,T))}else g.playbackRate!==1&&g.playbackRate!==0&&(g.playbackRate=1)}}}}},p.estimateLiveEdge=function(){var g=this.levelDetails;return g===null?null:g.edge+g.age},p.computeLatency=function(){var g=this.estimateLiveEdge();return g===null?null:g-this.currentTime},o=l,(h=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var g=this.config,_=this.levelDetails;return g.liveMaxLatencyDuration!==void 0?g.liveMaxLatencyDuration:_?g.liveMaxLatencyDurationCount*_.targetduration:0}},{key:"targetLatency",get:function(){var g=this.levelDetails;if(g===null)return null;var _=g.holdBack,A=g.partHoldBack,b=g.targetduration,c=this.config,d=c.liveSyncDuration,f=c.liveSyncDurationCount,v=c.lowLatencyMode,m=this.hls.userConfig,y=v&&A||_;(m.liveSyncDuration||m.liveSyncDurationCount||y===0)&&(y=d!==void 0?d:f*b);var T=b;return y+Math.min(1*this.stallCount,T)}},{key:"liveSyncPosition",get:function(){var g=this.estimateLiveEdge(),_=this.targetLatency,A=this.levelDetails;if(g===null||_===null||A===null)return null;var b=A.edge,c=g-_-this.edgeStalled,d=b-A.totalduration,f=b-(this.config.lowLatencyMode&&A.partTarget||A.targetduration);return Math.min(Math.max(d,c),f)}},{key:"drift",get:function(){var g=this.levelDetails;return g===null?1:g.drift}},{key:"edgeStalled",get:function(){var g=this.levelDetails;if(g===null)return 0;var _=3*(this.config.lowLatencyMode&&g.partTarget||g.targetduration);return Math.max(g.age-_,0)}},{key:"forwardBufferLength",get:function(){var g=this.media,_=this.levelDetails;if(!g||!_)return 0;var A=g.buffered.length;return A?g.buffered.end(A-1):_.edge-this.currentTime}}])&&a(o.prototype,h),l}()},"./src/controller/level-controller.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return A});var n=r("./src/types/level.ts"),i=r("./src/events.ts"),s=r("./src/errors.ts"),a=r("./src/utils/codecs.ts"),u=r("./src/controller/level-helper.ts"),l=r("./src/controller/base-playlist-controller.ts"),o=r("./src/types/loader.ts");function h(){return(h=Object.assign||function(b){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(b[f]=d[f])}return b}).apply(this,arguments)}function p(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}function g(b,c){return(g=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(b,c)}var _=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),A=function(b){var c,d;function f(T){var L;return(L=b.call(this,T,"[level-controller]")||this)._levels=[],L._firstLevel=-1,L._startLevel=void 0,L.currentLevelIndex=-1,L.manualLevelIndex=-1,L.onParsedComplete=void 0,L._registerListeners(),L}d=b,(c=f).prototype=Object.create(d.prototype),c.prototype.constructor=c,g(c,d);var v,m,y=f.prototype;return y._registerListeners=function(){var T=this.hls;T.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),T.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),T.on(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),T.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),T.on(i.Events.ERROR,this.onError,this)},y._unregisterListeners=function(){var T=this.hls;T.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),T.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),T.off(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),T.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),T.off(i.Events.ERROR,this.onError,this)},y.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,b.prototype.destroy.call(this)},y.startLoad=function(){this._levels.forEach(function(T){T.loadError=0}),b.prototype.startLoad.call(this)},y.onManifestLoaded=function(T,L){var C,R,E=[],S=[],k=[],w={},O=!1,I=!1,P=!1;if(L.levels.forEach(function(B){var H=B.attrs;O=O||!(!B.width||!B.height),I=I||!!B.videoCodec,P=P||!!B.audioCodec,_&&B.audioCodec&&B.audioCodec.indexOf("mp4a.40.34")!==-1&&(B.audioCodec=void 0);var $=B.bitrate+"-"+B.attrs.RESOLUTION+"-"+B.attrs.CODECS;(R=w[$])?R.url.push(B.url):(R=new n.Level(B),w[$]=R,E.push(R)),H&&(H.AUDIO&&Object(u.addGroupId)(R,"audio",H.AUDIO),H.SUBTITLES&&Object(u.addGroupId)(R,"text",H.SUBTITLES))}),(O||I)&&P&&(E=E.filter(function(B){var H=B.videoCodec,$=B.width,q=B.height;return!!H||!(!$||!q)})),E=E.filter(function(B){var H=B.audioCodec,$=B.videoCodec;return(!H||Object(a.isCodecSupportedInMp4)(H,"audio"))&&(!$||Object(a.isCodecSupportedInMp4)($,"video"))}),L.audioTracks&&(S=L.audioTracks.filter(function(B){return!B.audioCodec||Object(a.isCodecSupportedInMp4)(B.audioCodec,"audio")}),Object(u.assignTrackIdsByGroup)(S)),L.subtitles&&(k=L.subtitles,Object(u.assignTrackIdsByGroup)(k)),E.length>0){C=E[0].bitrate,E.sort(function(B,H){return B.bitrate-H.bitrate}),this._levels=E;for(var D=0;D<E.length;D++)if(E[D].bitrate===C){this._firstLevel=D,this.log("manifest loaded, "+E.length+" level(s) found, first bitrate: "+C);break}var x=P&&!I,M={levels:E,audioTracks:S,subtitleTracks:k,firstLevel:this._firstLevel,stats:L.stats,audio:P,video:I,altAudio:!x&&S.some(function(B){return!!B.url})};this.hls.trigger(i.Events.MANIFEST_PARSED,M),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:L.url,reason:"no level with compatible codecs found in manifest"})},y.onError=function(T,L){if(b.prototype.onError.call(this,T,L),!L.fatal){var C=L.context,R=this._levels[this.currentLevelIndex];if(C&&(C.type===o.PlaylistContextType.AUDIO_TRACK&&R.audioGroupIds&&C.groupId===R.audioGroupIds[R.urlId]||C.type===o.PlaylistContextType.SUBTITLE_TRACK&&R.textGroupIds&&C.groupId===R.textGroupIds[R.urlId]))this.redundantFailover(this.currentLevelIndex);else{var E,S=!1,k=!0;switch(L.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(L.frag){var w=this._levels[L.frag.level];w?(w.fragmentError++,w.fragmentError>this.hls.config.fragLoadingMaxRetry&&(E=L.frag.level)):E=L.frag.level}break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:C&&(C.deliveryDirectives&&(k=!1),E=C.level),S=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:E=L.level,S=!0}E!==void 0&&this.recoverLevel(L,E,S,k)}}},y.recoverLevel=function(T,L,C,R){var E=T.details,S=this._levels[L];if(S.loadError++,C){if(!this.retryLoadingOrFail(T))return void(this.currentLevelIndex=-1);T.levelRetry=!0}if(R){var k=S.url.length;if(k>1&&S.loadError<k)T.levelRetry=!0,this.redundantFailover(L);else if(this.manualLevelIndex===-1){var w=L===0?this._levels.length-1:L-1;this.currentLevelIndex!==w&&this._levels[w].loadError===0&&(this.warn(E+": switch to "+w),T.levelRetry=!0,this.hls.nextAutoLevel=w)}}},y.redundantFailover=function(T){var L=this._levels[T],C=L.url.length;if(C>1){var R=(L.urlId+1)%C;this.warn("Switching to redundant URL-id "+R),this._levels.forEach(function(E){E.urlId=R}),this.level=T}},y.onFragLoaded=function(T,L){var C=L.frag;if(C!==void 0&&C.type===o.PlaylistLevelType.MAIN){var R=this._levels[C.level];R!==void 0&&(R.fragmentError=0,R.loadError=0)}},y.onLevelLoaded=function(T,L){var C,R,E=L.level,S=L.details,k=this._levels[E];if(!k)return this.warn("Invalid level index "+E),void((R=L.deliveryDirectives)!==null&&R!==void 0&&R.skip&&(S.deltaUpdateFailed=!0));E===this.currentLevelIndex?(k.fragmentError===0&&(k.loadError=0,this.retryCount=0),this.playlistLoaded(E,L,k.details)):(C=L.deliveryDirectives)!==null&&C!==void 0&&C.skip&&(S.deltaUpdateFailed=!0)},y.onAudioTrackSwitched=function(T,L){var C=this.hls.levels[this.currentLevelIndex];if(C&&C.audioGroupIds){for(var R=-1,E=this.hls.audioTracks[L.id].groupId,S=0;S<C.audioGroupIds.length;S++)if(C.audioGroupIds[S]===E){R=S;break}R!==C.urlId&&(C.urlId=R,this.startLoad())}},y.loadPlaylist=function(T){var L=this.currentLevelIndex,C=this._levels[L];if(this.canLoad&&C&&C.url.length>0){var R=C.urlId,E=C.url[R];if(T)try{E=T.addDirectives(E)}catch(S){this.warn("Could not construct new URL with HLS Delivery Directives: "+S)}this.log("Attempt loading level index "+L+(T?" at sn "+T.msn+" part "+T.part:"")+" with URL-id "+R+" "+E),this.clearTimer(),this.hls.trigger(i.Events.LEVEL_LOADING,{url:E,level:L,id:R,deliveryDirectives:T||null})}},y.removeLevel=function(T,L){var C=function(E,S){return S!==L},R=this._levels.filter(function(E,S){return S!==T||E.url.length>1&&L!==void 0&&(E.url=E.url.filter(C),E.audioGroupIds&&(E.audioGroupIds=E.audioGroupIds.filter(C)),E.textGroupIds&&(E.textGroupIds=E.textGroupIds.filter(C)),E.urlId=0,!0)}).map(function(E,S){var k=E.details;return k!=null&&k.fragments&&k.fragments.forEach(function(w){w.level=S}),E});this._levels=R,this.hls.trigger(i.Events.LEVELS_UPDATED,{levels:R})},v=f,(m=[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(T){var L,C=this._levels;if(C.length!==0&&(this.currentLevelIndex!==T||(L=C[T])===null||L===void 0||!L.details)){if(T<0||T>=C.length){var R=T<0;if(this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:T,fatal:R,reason:"invalid level idx"}),R)return;T=Math.min(T,C.length-1)}this.clearTimer();var E=this.currentLevelIndex,S=C[E],k=C[T];this.log("switching to level "+T+" from "+E),this.currentLevelIndex=T;var w=h({},k,{level:T,maxBitrate:k.maxBitrate,uri:k.uri,urlId:k.urlId});delete w._urlId,this.hls.trigger(i.Events.LEVEL_SWITCHING,w);var O=k.details;if(!O||O.live){var I=this.switchParams(k.uri,S==null?void 0:S.details);this.loadPlaylist(I)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(T){this.manualLevelIndex=T,this._startLevel===void 0&&(this._startLevel=T),T!==-1&&(this.level=T)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(T){this._firstLevel=T}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var T=this.hls.config.startLevel;return T!==void 0?T:this._firstLevel}return this._startLevel},set:function(T){this._startLevel=T}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(T){this.level=T,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=T)}}])&&p(v.prototype,m),f}(l.default)},"./src/controller/level-helper.ts":function(e,t,r){r.r(t),r.d(t,"addGroupId",function(){return s}),r.d(t,"assignTrackIdsByGroup",function(){return a}),r.d(t,"updatePTS",function(){return u}),r.d(t,"updateFragPTSDTS",function(){return o}),r.d(t,"mergeDetails",function(){return h}),r.d(t,"mapPartIntersection",function(){return p}),r.d(t,"mapFragmentIntersection",function(){return g}),r.d(t,"adjustSliding",function(){return _}),r.d(t,"addSliding",function(){return A}),r.d(t,"computeReloadInterval",function(){return b}),r.d(t,"getFragmentWithSN",function(){return c}),r.d(t,"getPartWith",function(){return d});var n=r("./src/polyfills/number.ts"),i=r("./src/utils/logger.ts");function s(f,v,m){switch(v){case"audio":f.audioGroupIds||(f.audioGroupIds=[]),f.audioGroupIds.push(m);break;case"text":f.textGroupIds||(f.textGroupIds=[]),f.textGroupIds.push(m)}}function a(f){var v={};f.forEach(function(m){var y=m.groupId||"";m.id=v[y]=v[y]||0,v[y]++})}function u(f,v,m){l(f[v],f[m])}function l(f,v){var m=v.startPTS;if(Object(n.isFiniteNumber)(m)){var y,T=0;v.sn>f.sn?(T=m-f.start,y=f):(T=f.start-m,y=v),y.duration!==T&&(y.duration=T)}else v.sn>f.sn?f.cc===v.cc&&f.minEndPTS?v.start=f.start+(f.minEndPTS-f.start):v.start=f.start+f.duration:v.start=Math.max(f.start-v.duration,0)}function o(f,v,m,y,T,L){y-m<=0&&(i.logger.warn("Fragment should have a positive duration",v),y=m+v.duration,L=T+v.duration);var C=m,R=y,E=v.startPTS,S=v.endPTS;if(Object(n.isFiniteNumber)(E)){var k=Math.abs(E-m);Object(n.isFiniteNumber)(v.deltaPTS)?v.deltaPTS=Math.max(k,v.deltaPTS):v.deltaPTS=k,C=Math.max(m,E),m=Math.min(m,E),T=Math.min(T,v.startDTS),R=Math.min(y,S),y=Math.max(y,S),L=Math.max(L,v.endDTS)}v.duration=y-m;var w=m-v.start;v.appendedPTS=y,v.start=v.startPTS=m,v.maxStartPTS=C,v.startDTS=T,v.endPTS=y,v.minEndPTS=R,v.endDTS=L;var O,I=v.sn;if(!f||I<f.startSN||I>f.endSN)return 0;var P=I-f.startSN,D=f.fragments;for(D[P]=v,O=P;O>0;O--)l(D[O],D[O-1]);for(O=P;O<D.length-1;O++)l(D[O],D[O+1]);return f.fragmentHint&&l(D[D.length-1],f.fragmentHint),f.PTSKnown=f.alignedSliding=!0,w}function h(f,v){for(var m=null,y=f.fragments,T=y.length-1;T>=0;T--){var L=y[T].initSegment;if(L){m=L;break}}f.fragmentHint&&delete f.fragmentHint.endPTS;var C,R=0;if(g(f,v,function(I,P){var D;I.relurl&&(R=I.cc-P.cc),Object(n.isFiniteNumber)(I.startPTS)&&Object(n.isFiniteNumber)(I.endPTS)&&(P.start=P.startPTS=I.startPTS,P.startDTS=I.startDTS,P.appendedPTS=I.appendedPTS,P.maxStartPTS=I.maxStartPTS,P.endPTS=I.endPTS,P.endDTS=I.endDTS,P.minEndPTS=I.minEndPTS,P.duration=I.endPTS-I.startPTS,P.duration&&(C=P),v.PTSKnown=v.alignedSliding=!0),P.elementaryStreams=I.elementaryStreams,P.loader=I.loader,P.stats=I.stats,P.urlId=I.urlId,I.initSegment?(P.initSegment=I.initSegment,m=I.initSegment):P.initSegment&&P.initSegment.relurl!=((D=m)===null||D===void 0?void 0:D.relurl)||(P.initSegment=m)}),v.skippedSegments&&(v.deltaUpdateFailed=v.fragments.some(function(I){return!I}),v.deltaUpdateFailed)){i.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var E=v.skippedSegments;E--;)v.fragments.shift();v.startSN=v.fragments[0].sn,v.startCC=v.fragments[0].cc}var S=v.fragments;if(R){i.logger.warn("discontinuity sliding from playlist, take drift into account");for(var k=0;k<S.length;k++)S[k].cc+=R}v.skippedSegments&&(v.startCC=v.fragments[0].cc),p(f.partList,v.partList,function(I,P){P.elementaryStreams=I.elementaryStreams,P.stats=I.stats}),C?o(v,C,C.startPTS,C.endPTS,C.startDTS,C.endDTS):_(f,v),S.length&&(v.totalduration=v.edge-S[0].start),v.driftStartTime=f.driftStartTime,v.driftStart=f.driftStart;var w=v.advancedDateTime;if(v.advanced&&w){var O=v.edge;v.driftStart||(v.driftStartTime=w,v.driftStart=O),v.driftEndTime=w,v.driftEnd=O}else v.driftEndTime=f.driftEndTime,v.driftEnd=f.driftEnd,v.advancedDateTime=f.advancedDateTime}function p(f,v,m){if(f&&v)for(var y=0,T=0,L=f.length;T<=L;T++){var C=f[T],R=v[T+y];C&&R&&C.index===R.index&&C.fragment.sn===R.fragment.sn?m(C,R):y--}}function g(f,v,m){for(var y=v.skippedSegments,T=Math.max(f.startSN,v.startSN)-v.startSN,L=(f.fragmentHint?1:0)+(y?v.endSN:Math.min(f.endSN,v.endSN))-v.startSN,C=v.startSN-f.startSN,R=v.fragmentHint?v.fragments.concat(v.fragmentHint):v.fragments,E=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments,S=T;S<=L;S++){var k=E[C+S],w=R[S];y&&!w&&S<y&&(w=v.fragments[S]=k),k&&w&&m(k,w)}}function _(f,v){var m=v.startSN+v.skippedSegments-f.startSN,y=f.fragments;m<0||m>=y.length||A(v,y[m].start)}function A(f,v){if(v){for(var m=f.fragments,y=f.skippedSegments;y<m.length;y++)m[y].start+=v;f.fragmentHint&&(f.fragmentHint.start+=v)}}function b(f,v){var m,y=1e3*f.levelTargetDuration,T=y/2,L=f.age,C=L>0&&L<3*y,R=v.loading.end-v.loading.start,E=f.availabilityDelay;if(f.updated===!1)if(C){var S=333*f.misses;m=Math.max(Math.min(T,2*R),S),f.availabilityDelay=(f.availabilityDelay||0)+m}else m=T;else C?(E=Math.min(E||y/2,L),f.availabilityDelay=E,m=E+y-L):m=y-R;return Math.round(m)}function c(f,v,m){if(!f||!f.details)return null;var y=f.details,T=y.fragments[v-y.startSN];return T||((T=y.fragmentHint)&&T.sn===v?T:v<y.startSN&&m&&m.sn===v?m:null)}function d(f,v,m){if(!f||!f.details)return null;var y=f.details.partList;if(y)for(var T=y.length;T--;){var L=y[T];if(L.index===m&&L.fragment.sn===v)return L}return null}},"./src/controller/stream-controller.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return f});var n=r("./src/polyfills/number.ts"),i=r("./src/controller/base-stream-controller.ts"),s=r("./src/is-supported.ts"),a=r("./src/events.ts"),u=r("./src/utils/buffer-helper.ts"),l=r("./src/controller/fragment-tracker.ts"),o=r("./src/types/loader.ts"),h=r("./src/loader/fragment.ts"),p=r("./src/demux/transmuxer-interface.ts"),g=r("./src/types/transmuxer.ts"),_=r("./src/controller/gap-controller.ts"),A=r("./src/errors.ts"),b=r("./src/utils/logger.ts");function c(v,m){for(var y=0;y<m.length;y++){var T=m[y];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}function d(v,m){return(d=Object.setPrototypeOf||function(y,T){return y.__proto__=T,y})(v,m)}var f=function(v){var m,y;function T(E,S){var k;return(k=v.call(this,E,S,"[stream-controller]")||this).audioCodecSwap=!1,k.gapController=null,k.level=-1,k._forceStartLoad=!1,k.altAudio=!1,k.audioOnly=!1,k.fragPlaying=null,k.onvplaying=null,k.onvseeked=null,k.fragLastKbps=0,k.stalled=!1,k.couldBacktrack=!1,k.audioCodecSwitch=!1,k.videoBuffer=null,k._registerListeners(),k}y=v,(m=T).prototype=Object.create(y.prototype),m.prototype.constructor=m,d(m,y);var L,C,R=T.prototype;return R._registerListeners=function(){var E=this.hls;E.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),E.on(a.Events.LEVEL_LOADING,this.onLevelLoading,this),E.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.on(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),E.on(a.Events.ERROR,this.onError,this),E.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),E.on(a.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),E.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),E.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),E.on(a.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),E.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},R._unregisterListeners=function(){var E=this.hls;E.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),E.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),E.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),E.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),E.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.off(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),E.off(a.Events.ERROR,this.onError,this),E.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),E.off(a.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),E.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),E.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),E.off(a.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),E.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},R.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},R.startLoad=function(E){if(this.levels){var S=this.lastCurrentTime,k=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var w=k.startLevel;w===-1&&(k.config.testBandwidth?(w=0,this.bitrateTest=!0):w=k.nextAutoLevel),this.level=k.nextLoadLevel=w,this.loadedmetadata=!1}S>0&&E===-1&&(this.log("Override startPosition with lastCurrentTime @"+S.toFixed(3)),E=S),this.state=i.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=E,this.tick()}else this._forceStartLoad=!0,this.state=i.State.STOPPED},R.stopLoad=function(){this._forceStartLoad=!1,v.prototype.stopLoad.call(this)},R.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_LEVEL:var E,S=this.levels,k=this.level,w=S==null||(E=S[k])===null||E===void 0?void 0:E.details;if(w&&(!w.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(w))break;this.state=i.State.IDLE;break}break;case i.State.FRAG_LOADING_WAITING_RETRY:var O,I=self.performance.now(),P=this.retryDate;(!P||I>=P||(O=this.media)!==null&&O!==void 0&&O.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=i.State.IDLE)}this.onTickEnd()},R.onTickEnd=function(){v.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},R.doTickIdle=function(){var E,S,k=this.hls,w=this.levelLastLoaded,O=this.levels,I=this.media,P=k.config,D=k.nextLoadLevel;if(w!==null&&(I||!this.startFragRequested&&P.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&O&&O[D]){var x=O[D];this.level=k.nextLoadLevel=D;var M=x.details;if(!M||this.state===i.State.WAITING_LEVEL||M.live&&this.levelLastLoaded!==D)this.state=i.State.WAITING_LEVEL;else{var B=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:I,o.PlaylistLevelType.MAIN);if(B!==null&&!(B.len>=this.getMaxBufferLength(x.maxBitrate))){if(this._streamEnded(B,M)){var H={};return this.altAudio&&(H.type="video"),this.hls.trigger(a.Events.BUFFER_EOS,H),void(this.state=i.State.ENDED)}var $=B.end,q=this.getNextFragment($,M);if(this.couldBacktrack&&!this.fragPrevious&&q&&q.sn!=="initSegment"){var te=q.sn-M.startSN;te>1&&(q=M.fragments[te-1],this.fragmentTracker.removeFragment(q))}if(q&&this.fragmentTracker.getState(q)===l.FragmentState.OK&&this.nextLoadPosition>$){var K=this.audioOnly&&!this.altAudio?h.ElementaryStreamTypes.AUDIO:h.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(I,K,o.PlaylistLevelType.MAIN),q=this.getNextFragment(this.nextLoadPosition,M)}q&&(!q.initSegment||q.initSegment.data||this.bitrateTest||(q=q.initSegment),((E=q.decryptdata)===null||E===void 0?void 0:E.keyFormat)!=="identity"||(S=q.decryptdata)!==null&&S!==void 0&&S.key?this.loadFragment(q,M,$):this.loadKey(q,M))}}}},R.loadFragment=function(E,S,k){var w,O=this.fragmentTracker.getState(E);if(this.fragCurrent=E,O===l.FragmentState.BACKTRACKED){var I=this.fragmentTracker.getBacktrackData(E);if(I)return this._handleFragmentLoadProgress(I),void this._handleFragmentLoadComplete(I);O=l.FragmentState.NOT_LOADED}O===l.FragmentState.NOT_LOADED||O===l.FragmentState.PARTIAL?E.sn==="initSegment"?this._loadInitSegment(E):this.bitrateTest?(E.bitrateTest=!0,this.log("Fragment "+E.sn+" of level "+E.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(E)):(this.startFragRequested=!0,v.prototype.loadFragment.call(this,E,S,k)):O===l.FragmentState.APPENDING?this.reduceMaxBufferLength(E.duration)&&this.fragmentTracker.removeFragment(E):((w=this.media)===null||w===void 0?void 0:w.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},R.getAppendedFrag=function(E){var S=this.fragmentTracker.getAppendedFrag(E,o.PlaylistLevelType.MAIN);return S&&"fragment"in S?S.fragment:S},R.getBufferedFrag=function(E){return this.fragmentTracker.getBufferedFrag(E,o.PlaylistLevelType.MAIN)},R.followingBufferedFrag=function(E){return E?this.getBufferedFrag(E.end+.5):null},R.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},R.nextLevelSwitch=function(){var E=this.levels,S=this.media;if(S!=null&&S.readyState){var k,w=this.getAppendedFrag(S.currentTime);if(w&&w.start>1&&this.flushMainBuffer(0,w.start-1),!S.paused&&E){var O=E[this.hls.nextLoadLevel],I=this.fragLastKbps;k=I&&this.fragCurrent?this.fragCurrent.duration*O.maxBitrate/(1e3*I)+1:0}else k=0;var P=this.getBufferedFrag(S.currentTime+k);if(P){var D=this.followingBufferedFrag(P);if(D){this.abortCurrentFrag();var x=D.maxStartPTS?D.maxStartPTS:D.start,M=D.duration,B=Math.max(P.end,x+Math.min(Math.max(M-this.config.maxFragLookUpTolerance,.5*M),.75*M));this.flushMainBuffer(B,Number.POSITIVE_INFINITY)}}}},R.abortCurrentFrag=function(){var E=this.fragCurrent;this.fragCurrent=null,E!=null&&E.loader&&E.loader.abort(),this.state===i.State.KEY_LOADING&&(this.state=i.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},R.flushMainBuffer=function(E,S){v.prototype.flushMainBuffer.call(this,E,S,this.altAudio?"video":null)},R.onMediaAttached=function(E,S){v.prototype.onMediaAttached.call(this,E,S);var k=S.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),k.addEventListener("playing",this.onvplaying),k.addEventListener("seeked",this.onvseeked),this.gapController=new _.default(this.config,k,this.fragmentTracker,this.hls)},R.onMediaDetaching=function(){var E=this.media;E&&(E.removeEventListener("playing",this.onvplaying),E.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),v.prototype.onMediaDetaching.call(this)},R.onMediaPlaying=function(){this.tick()},R.onMediaSeeked=function(){var E=this.media,S=E?E.currentTime:null;Object(n.isFiniteNumber)(S)&&this.log("Media seeked to "+S.toFixed(3)),this.tick()},R.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(a.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},R.onManifestParsed=function(E,S){var k,w=!1,O=!1;S.levels.forEach(function(I){(k=I.audioCodec)&&(k.indexOf("mp4a.40.2")!==-1&&(w=!0),k.indexOf("mp4a.40.5")!==-1&&(O=!0))}),this.audioCodecSwitch=w&&O&&!Object(s.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=S.levels,this.startFragRequested=!1},R.onLevelLoading=function(E,S){var k=this.levels;if(k&&this.state===i.State.IDLE){var w=k[S.level];(!w.details||w.details.live&&this.levelLastLoaded!==S.level||this.waitForCdnTuneIn(w.details))&&(this.state=i.State.WAITING_LEVEL)}},R.onLevelLoaded=function(E,S){var k,w=this.levels,O=S.level,I=S.details,P=I.totalduration;if(w){this.log("Level "+O+" loaded ["+I.startSN+","+I.endSN+"], cc ["+I.startCC+", "+I.endCC+"] duration:"+P);var D=this.fragCurrent;!D||this.state!==i.State.FRAG_LOADING&&this.state!==i.State.FRAG_LOADING_WAITING_RETRY||D.level!==S.level&&D.loader&&(this.state=i.State.IDLE,D.loader.abort());var x=w[O],M=0;if(I.live||(k=x.details)!==null&&k!==void 0&&k.live){if(I.fragments[0]||(I.deltaUpdateFailed=!0),I.deltaUpdateFailed)return;M=this.alignPlaylists(I,x.details)}if(x.details=I,this.levelLastLoaded=O,this.hls.trigger(a.Events.LEVEL_UPDATED,{details:I,level:O}),this.state===i.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(I))return;this.state=i.State.IDLE}this.startFragRequested?I.live&&this.synchronizeToLiveEdge(I):this.setStartPosition(I,M),this.tick()}else this.warn("Levels were reset while loading level "+O)},R._handleFragmentLoadProgress=function(E){var S,k=E.frag,w=E.part,O=E.payload,I=this.levels;if(I){var P=I[k.level],D=P.details;if(D){var x=P.videoCodec,M=D.PTSKnown||!D.live,B=(S=k.initSegment)===null||S===void 0?void 0:S.data,H=this._getAudioCodec(P),$=this.transmuxer=this.transmuxer||new p.default(this.hls,o.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),q=w?w.index:-1,te=q!==-1,K=new g.ChunkMetadata(k.level,k.sn,k.stats.chunkCount,O.byteLength,q,te),X=this.initPTS[k.cc];$.push(O,B,H,x,k,w,D.totalduration,M,K,X)}else this.warn("Dropping fragment "+k.sn+" of level "+k.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+k.sn+" of level "+k.level+" will not be buffered")},R.onAudioTrackSwitching=function(E,S){var k=this.altAudio,w=!!S.url,O=S.id;if(!w){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var I=this.fragCurrent;I!=null&&I.loader&&(this.log("Switching to main audio track, cancel main fragment load"),I.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var P=this.hls;k&&P.trigger(a.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),P.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:O})}},R.onAudioTrackSwitched=function(E,S){var k=S.id,w=!!this.hls.audioTracks[k].url;if(w){var O=this.videoBuffer;O&&this.mediaBuffer!==O&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=O)}this.altAudio=w,this.tick()},R.onBufferCreated=function(E,S){var k,w,O=S.tracks,I=!1;for(var P in O){var D=O[P];if(D.id==="main"){if(w=P,k=D,P==="video"){var x=O[P];x&&(this.videoBuffer=x.buffer)}}else I=!0}I&&k?(this.log("Alternate track found, use "+w+".buffered to schedule main fragment loading"),this.mediaBuffer=k.buffer):this.mediaBuffer=this.media},R.onFragBuffered=function(E,S){var k=S.frag,w=S.part;if(!k||k.type===o.PlaylistLevelType.MAIN){if(this.fragContextChanged(k))return this.warn("Fragment "+k.sn+(w?" p: "+w.index:"")+" of level "+k.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===i.State.PARSED&&(this.state=i.State.IDLE));var O=w?w.stats:k.stats;this.fragLastKbps=Math.round(8*O.total/(O.buffering.end-O.loading.first)),k.sn!=="initSegment"&&(this.fragPrevious=k),this.fragBufferedComplete(k,w)}},R.onError=function(E,S){switch(S.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:case A.ErrorDetails.KEY_LOAD_ERROR:case A.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(o.PlaylistLevelType.MAIN,S);break;case A.ErrorDetails.LEVEL_LOAD_ERROR:case A.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==i.State.ERROR&&(S.fatal?(this.warn(""+S.details),this.state=i.State.ERROR):S.levelRetry||this.state!==i.State.WAITING_LEVEL||(this.state=i.State.IDLE));break;case A.ErrorDetails.BUFFER_FULL_ERROR:if(S.parent==="main"&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var k=!0,w=this.getFwdBufferInfo(this.media,o.PlaylistLevelType.MAIN);w&&w.len>.5&&(k=!this.reduceMaxBufferLength(w.len)),k&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},R.checkBuffer=function(){var E=this.media,S=this.gapController;if(E&&S&&E.readyState){var k=u.BufferHelper.getBuffered(E);!this.loadedmetadata&&k.length?(this.loadedmetadata=!0,this.seekToStartPos()):S.poll(this.lastCurrentTime),this.lastCurrentTime=E.currentTime}},R.onFragLoadEmergencyAborted=function(){this.state=i.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},R.onBufferFlushed=function(E,S){var k=S.type;if(k!==h.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var w=(k===h.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(w,k,o.PlaylistLevelType.MAIN)}},R.onLevelsUpdated=function(E,S){this.levels=S.levels},R.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},R.seekToStartPos=function(){var E=this.media,S=E.currentTime,k=this.startPosition;if(k>=0&&S<k){if(E.seeking)return void b.logger.log("could not seek to "+k+", already seeking at "+S);var w=u.BufferHelper.getBuffered(E),O=(w.length?w.start(0):0)-k;O>0&&O<this.config.maxBufferHole&&(b.logger.log("adjusting start position by "+O+" to match buffer start"),k+=O,this.startPosition=k),this.log("seek to target start position "+k+" from current time "+S),E.currentTime=k}},R._getAudioCodec=function(E){var S=this.config.defaultAudioCodec||E.audioCodec;return this.audioCodecSwap&&S&&(this.log("Swapping audio codec"),S=S.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),S},R._loadBitrateTestFrag=function(E){var S=this;this._doFragLoad(E).then(function(k){var w=S.hls;if(k&&!w.nextLoadLevel&&!S.fragContextChanged(E)){S.fragLoadError=0,S.state=i.State.IDLE,S.startFragRequested=!1,S.bitrateTest=!1;var O=E.stats;O.parsing.start=O.parsing.end=O.buffering.start=O.buffering.end=self.performance.now(),w.trigger(a.Events.FRAG_LOADED,k)}})},R._handleTransmuxComplete=function(E){var S,k="main",w=this.hls,O=E.remuxResult,I=E.chunkMeta,P=this.getCurrentContext(I);if(!P)return this.warn("The loading context changed while buffering fragment "+I.sn+" of level "+I.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(I.level);var D=P.frag,x=P.part,M=P.level,B=O.video,H=O.text,$=O.id3,q=O.initSegment,te=this.altAudio?void 0:O.audio;if(!this.fragContextChanged(D)){if(this.state=i.State.PARSING,q){q.tracks&&(this._bufferInitSegment(M,q.tracks,D,I),w.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:D,id:k,tracks:q.tracks}));var K=q.initPTS,X=q.timescale;Object(n.isFiniteNumber)(K)&&(this.initPTS[D.cc]=K,w.trigger(a.Events.INIT_PTS_FOUND,{frag:D,id:k,initPTS:K,timescale:X}))}if(B&&O.independent!==!1){if(M.details){var z=B.startPTS,Z=B.endPTS,oe=B.startDTS,fe=B.endDTS;if(x)x.elementaryStreams[B.type]={startPTS:z,endPTS:Z,startDTS:oe,endDTS:fe};else if(B.firstKeyFrame&&B.independent&&(this.couldBacktrack=!0),B.dropped&&B.independent){if(this.getLoadPosition()+this.config.maxBufferHole<z)return void this.backtrack(D);D.setElementaryStreamInfo(B.type,D.start,Z,D.start,fe,!0)}D.setElementaryStreamInfo(B.type,z,Z,oe,fe),this.bufferFragmentData(B,D,x,I)}}else if(O.independent===!1)return void this.backtrack(D);if(te){var U=te.startPTS,j=te.endPTS,F=te.startDTS,N=te.endDTS;x&&(x.elementaryStreams[h.ElementaryStreamTypes.AUDIO]={startPTS:U,endPTS:j,startDTS:F,endDTS:N}),D.setElementaryStreamInfo(h.ElementaryStreamTypes.AUDIO,U,j,F,N),this.bufferFragmentData(te,D,x,I)}if($!=null&&(S=$.samples)!==null&&S!==void 0&&S.length){var G={frag:D,id:k,samples:$.samples};w.trigger(a.Events.FRAG_PARSING_METADATA,G)}if(H){var W={frag:D,id:k,samples:H.samples};w.trigger(a.Events.FRAG_PARSING_USERDATA,W)}}},R._bufferInitSegment=function(E,S,k,w){var O=this;if(this.state===i.State.PARSING){this.audioOnly=!!S.audio&&!S.video,this.altAudio&&!this.audioOnly&&delete S.audio;var I=S.audio,P=S.video,D=S.audiovideo;if(I){var x=E.audioCodec,M=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(x&&(x=x.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),I.metadata.channelCount!==1&&M.indexOf("firefox")===-1&&(x="mp4a.40.5")),M.indexOf("android")!==-1&&I.container!=="audio/mpeg"&&(x="mp4a.40.2",this.log("Android: force audio codec to "+x)),E.audioCodec&&E.audioCodec!==x&&this.log('Swapping manifest audio codec "'+E.audioCodec+'" for "'+x+'"'),I.levelCodec=x,I.id="main",this.log("Init audio buffer, container:"+I.container+", codecs[selected/level/parsed]=["+(x||"")+"/"+(E.audioCodec||"")+"/"+I.codec+"]")}P&&(P.levelCodec=E.videoCodec,P.id="main",this.log("Init video buffer, container:"+P.container+", codecs[level/parsed]=["+(E.videoCodec||"")+"/"+P.codec+"]")),D&&this.log("Init audiovideo buffer, container:"+D.container+", codecs[level/parsed]=["+(E.attrs.CODECS||"")+"/"+D.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,S),Object.keys(S).forEach(function(B){var H=S[B].initSegment;H!=null&&H.byteLength&&O.hls.trigger(a.Events.BUFFER_APPENDING,{type:B,data:H,frag:k,part:null,chunkMeta:w,parent:k.type})}),this.tick()}},R.backtrack=function(E){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(E);var S=this.fragmentTracker.backtrack(E);this.fragPrevious=null,this.nextLoadPosition=E.start,S?this.resetFragmentLoading(E):this.state=i.State.BACKTRACKING},R.checkFragmentChanged=function(){var E=this.media,S=null;if(E&&E.readyState>1&&E.seeking===!1){var k=E.currentTime;if(u.BufferHelper.isBuffered(E,k)?S=this.getAppendedFrag(k):u.BufferHelper.isBuffered(E,k+.1)&&(S=this.getAppendedFrag(k+.1)),S){var w=this.fragPlaying,O=S.level;w&&S.sn===w.sn&&w.level===O&&S.urlId===w.urlId||(this.hls.trigger(a.Events.FRAG_CHANGED,{frag:S}),w&&w.level===O||this.hls.trigger(a.Events.LEVEL_SWITCHED,{level:O}),this.fragPlaying=S)}}},L=T,(C=[{key:"nextLevel",get:function(){var E=this.nextBufferedFrag;return E?E.level:-1}},{key:"currentLevel",get:function(){var E=this.media;if(E){var S=this.getAppendedFrag(E.currentTime);if(S)return S.level}return-1}},{key:"nextBufferedFrag",get:function(){var E=this.media;if(E){var S=this.getAppendedFrag(E.currentTime);return this.followingBufferedFrag(S)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&c(L.prototype,C),T}(i.default)},"./src/controller/subtitle-stream-controller.ts":function(e,t,r){r.r(t),r.d(t,"SubtitleStreamController",function(){return b});var n=r("./src/events.ts"),i=r("./src/utils/logger.ts"),s=r("./src/utils/buffer-helper.ts"),a=r("./src/controller/fragment-finders.ts"),u=r("./src/utils/discontinuities.ts"),l=r("./src/controller/level-helper.ts"),o=r("./src/controller/fragment-tracker.ts"),h=r("./src/controller/base-stream-controller.ts"),p=r("./src/types/loader.ts"),g=r("./src/types/level.ts");function _(c,d){for(var f=0;f<d.length;f++){var v=d[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function A(c,d){return(A=Object.setPrototypeOf||function(f,v){return f.__proto__=v,f})(c,d)}var b=function(c){var d,f;function v(L,C){var R;return(R=c.call(this,L,C,"[subtitle-stream-controller]")||this).levels=[],R.currentTrackId=-1,R.tracksBuffered=[],R.mainDetails=null,R._registerListeners(),R}f=c,(d=v).prototype=Object.create(f.prototype),d.prototype.constructor=d,A(d,f);var m,y,T=v.prototype;return T.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},T._registerListeners=function(){var L=this.hls;L.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),L.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),L.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),L.on(n.Events.LEVEL_LOADED,this.onLevelLoaded,this),L.on(n.Events.ERROR,this.onError,this),L.on(n.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),L.on(n.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),L.on(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),L.on(n.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),L.on(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},T._unregisterListeners=function(){var L=this.hls;L.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),L.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),L.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),L.off(n.Events.LEVEL_LOADED,this.onLevelLoaded,this),L.off(n.Events.ERROR,this.onError,this),L.off(n.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),L.off(n.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),L.off(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),L.off(n.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),L.off(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},T.startLoad=function(){this.stopLoad(),this.state=h.State.IDLE,this.setInterval(500),this.tick()},T.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},T.onLevelLoaded=function(L,C){this.mainDetails=C.details},T.onSubtitleFragProcessed=function(L,C){var R=C.frag,E=C.success;if(this.fragPrevious=R,this.state=h.State.IDLE,E){var S=this.tracksBuffered[this.currentTrackId];if(S){for(var k,w=R.start,O=0;O<S.length;O++)if(w>=S[O].start&&w<=S[O].end){k=S[O];break}var I=R.start+R.duration;k?k.end=I:(k={start:w,end:I},S.push(k)),this.fragmentTracker.fragBuffered(R)}}},T.onBufferFlushing=function(L,C){var R=C.startOffset,E=C.endOffset;if(R===0&&E!==Number.POSITIVE_INFINITY){var S=this.currentTrackId,k=this.levels;if(!k.length||!k[S]||!k[S].details)return;var w=E-k[S].details.targetduration;if(w<=0)return;C.endOffsetSubtitles=Math.max(0,w),this.tracksBuffered.forEach(function(O){for(var I=0;I<O.length;)if(O[I].end<=w)O.shift();else{if(!(O[I].start<w))break;O[I].start=w,I++}}),this.fragmentTracker.removeFragmentsInRange(R,w,p.PlaylistLevelType.SUBTITLE)}},T.onError=function(L,C){var R,E=C.frag;E&&E.type===p.PlaylistLevelType.SUBTITLE&&((R=this.fragCurrent)!==null&&R!==void 0&&R.loader&&this.fragCurrent.loader.abort(),this.state=h.State.IDLE)},T.onSubtitleTracksUpdated=function(L,C){var R=this,E=C.subtitleTracks;this.tracksBuffered=[],this.levels=E.map(function(S){return new g.Level(S)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(S){R.tracksBuffered[S.id]=[]}),this.mediaBuffer=null},T.onSubtitleTrackSwitch=function(L,C){if(this.currentTrackId=C.id,this.levels.length&&this.currentTrackId!==-1){var R=this.levels[this.currentTrackId];R!=null&&R.details?(this.mediaBuffer=this.mediaBufferTimeRanges,this.setInterval(500)):this.mediaBuffer=null}else this.clearInterval()},T.onSubtitleTrackLoaded=function(L,C){var R,E=C.details,S=C.id,k=this.currentTrackId,w=this.levels;if(w.length){var O=w[k];if(!(S>=w.length||S!==k)&&O){if(this.mediaBuffer=this.mediaBufferTimeRanges,E.live||(R=O.details)!==null&&R!==void 0&&R.live){var I=this.mainDetails;if(E.deltaUpdateFailed||!I)return;var P=I.fragments[0];O.details?this.alignPlaylists(E,O.details)===0&&P&&Object(l.addSliding)(E,P.start):E.hasProgramDateTime&&I.hasProgramDateTime?Object(u.alignPDT)(E,I):P&&Object(l.addSliding)(E,P.start)}O.details=E,this.levelLastLoaded=S,this.tick(),E.live&&!this.fragCurrent&&this.media&&this.state===h.State.IDLE&&(Object(a.findFragmentByPTS)(null,E.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),O.details=void 0))}}},T._handleFragmentLoadComplete=function(L){var C=L.frag,R=L.payload,E=C.decryptdata,S=this.hls;if(!this.fragContextChanged(C)&&R&&R.byteLength>0&&E&&E.key&&E.iv&&E.method==="AES-128"){var k=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(R),E.key.buffer,E.iv.buffer).then(function(w){var O=performance.now();S.trigger(n.Events.FRAG_DECRYPTED,{frag:C,payload:w,stats:{tstart:k,tdecrypt:O}})})}},T.doTick=function(){if(this.media){if(this.state===h.State.IDLE){var L,C=this.currentTrackId,R=this.levels;if(!R.length||!R[C]||!R[C].details)return;var E=R[C].details,S=E.targetduration,k=this.config,w=this.media,O=s.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,w.currentTime-S,k.maxBufferHole),I=O.end;if(O.len>this.getMaxBufferLength()+S)return;console.assert(E,"Subtitle track details are defined on idle subtitle stream controller tick");var P,D=E.fragments,x=D.length,M=E.edge,B=this.fragPrevious;if(I<M){var H=k.maxFragLookUpTolerance;B&&E.hasProgramDateTime&&(P=Object(a.findFragmentByPDT)(D,B.endProgramDateTime,H)),P||!(P=Object(a.findFragmentByPTS)(B,D,I,H))&&B&&B.start<D[0].start&&(P=D[0])}else P=D[x-1];(L=P)!==null&&L!==void 0&&L.encrypted?(i.logger.log("Loading key for "+P.sn),this.state=h.State.KEY_LOADING,this.hls.trigger(n.Events.KEY_LOADING,{frag:P})):P&&this.fragmentTracker.getState(P)===o.FragmentState.NOT_LOADED&&this.loadFragment(P,E,I)}}else this.state=h.State.IDLE},T.loadFragment=function(L,C,R){this.fragCurrent=L,c.prototype.loadFragment.call(this,L,C,R)},m=v,(y=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&_(m.prototype,y),v}(h.default)},"./src/controller/subtitle-track-controller.ts":function(e,t,r){r.r(t);var n=r("./src/events.ts"),i=r("./src/utils/texttrack-utils.ts"),s=r("./src/controller/base-playlist-controller.ts"),a=r("./src/types/loader.ts");function u(p,g){for(var _=0;_<g.length;_++){var A=g[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(p,A.key,A)}}function l(p,g){return(l=Object.setPrototypeOf||function(_,A){return _.__proto__=A,_})(p,g)}var o=function(p){var g,_;function A(f){var v;return(v=p.call(this,f,"[subtitle-track-controller]")||this).media=null,v.tracks=[],v.groupId=null,v.tracksInGroup=[],v.trackId=-1,v.selectDefaultTrack=!0,v.queuedDefaultTrack=-1,v.trackChangeListener=function(){return v.onTextTracksChanged()},v.asyncPollTrackChange=function(){return v.pollTrackChange(0)},v.useTextTrackPolling=!1,v.subtitlePollingInterval=-1,v.subtitleDisplay=!0,v.registerListeners(),v}_=p,(g=A).prototype=Object.create(_.prototype),g.prototype.constructor=g,l(g,_);var b,c,d=A.prototype;return d.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,p.prototype.destroy.call(this)},d.registerListeners=function(){var f=this.hls;f.on(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),f.on(n.Events.LEVEL_LOADING,this.onLevelLoading,this),f.on(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),f.on(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),f.on(n.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var f=this.hls;f.off(n.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.off(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),f.off(n.Events.LEVEL_LOADING,this.onLevelLoading,this),f.off(n.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),f.off(n.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),f.off(n.Events.ERROR,this.onError,this)},d.onMediaAttached=function(f,v){this.media=v.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},d.pollTrackChange=function(f){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,f)},d.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),h(this.media.textTracks).forEach(function(f){Object(i.clearCurrentCues)(f)}),this.subtitleTrack=-1,this.media=null)},d.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},d.onManifestParsed=function(f,v){this.tracks=v.subtitleTracks},d.onSubtitleTrackLoaded=function(f,v){var m=v.id,y=v.details,T=this.trackId,L=this.tracksInGroup[T];if(L){var C=L.details;L.details=v.details,this.log("subtitle track "+m+" loaded ["+y.startSN+"-"+y.endSN+"]"),m===this.trackId&&(this.retryCount=0,this.playlistLoaded(m,v,C))}else this.warn("Invalid subtitle track id "+m)},d.onLevelLoading=function(f,v){this.switchLevel(v.level)},d.onLevelSwitching=function(f,v){this.switchLevel(v.level)},d.switchLevel=function(f){var v=this.hls.levels[f];if(v!=null&&v.textGroupIds){var m=v.textGroupIds[v.urlId];if(this.groupId!==m){var y=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,T=this.tracks.filter(function(R){return!m||R.groupId===m});this.tracksInGroup=T;var L=this.findTrackId(y==null?void 0:y.name)||this.findTrackId();this.groupId=m;var C={subtitleTracks:T};this.log("Updating subtitle tracks, "+T.length+' track(s) found in "'+m+'" group-id'),this.hls.trigger(n.Events.SUBTITLE_TRACKS_UPDATED,C),L!==-1&&this.setSubtitleTrack(L,y)}}},d.findTrackId=function(f){for(var v=this.tracksInGroup,m=0;m<v.length;m++){var y=v[m];if((!this.selectDefaultTrack||y.default)&&(!f||f===y.name))return y.id}return-1},d.onError=function(f,v){p.prototype.onError.call(this,f,v),!v.fatal&&v.context&&v.context.type===a.PlaylistContextType.SUBTITLE_TRACK&&v.context.id===this.trackId&&v.context.groupId===this.groupId&&this.retryLoadingOrFail(v)},d.loadPlaylist=function(f){var v=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(v)){var m=v.id,y=v.groupId,T=v.url;if(f)try{T=f.addDirectives(T)}catch(L){this.warn("Could not construct new URL with HLS Delivery Directives: "+L)}this.log("Loading subtitle playlist for id "+m),this.hls.trigger(n.Events.SUBTITLE_TRACK_LOADING,{url:T,id:m,groupId:y,deliveryDirectives:f||null})}},d.toggleTrackModes=function(f){var v=this,m=this.media,y=this.subtitleDisplay,T=this.trackId;if(m){var L=h(m.textTracks),C=L.filter(function(S){return S.groupId===v.groupId});if(f===-1)[].slice.call(L).forEach(function(S){S.mode="disabled"});else{var R=C[T];R&&(R.mode="disabled")}var E=C[f];E&&(E.mode=y?"showing":"hidden")}},d.setSubtitleTrack=function(f,v){var m,y=this.tracksInGroup;if(this.media){if(this.trackId!==f&&this.toggleTrackModes(f),!(this.trackId===f&&(f===-1||(m=y[f])!==null&&m!==void 0&&m.details)||f<-1||f>=y.length)){this.clearTimer();var T=y[f];if(this.log("Switching to subtitle track "+f),this.trackId=f,T){var L=T.id,C=T.groupId,R=C===void 0?"":C,E=T.name,S=T.type,k=T.url;this.hls.trigger(n.Events.SUBTITLE_TRACK_SWITCH,{id:L,groupId:R,name:E,type:S,url:k});var w=this.switchParams(T.url,v==null?void 0:v.details);this.loadPlaylist(w)}else this.hls.trigger(n.Events.SUBTITLE_TRACK_SWITCH,{id:f})}}else this.queuedDefaultTrack=f},d.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var f=-1,v=h(this.media.textTracks),m=0;m<v.length;m++)if(v[m].mode==="hidden")f=m;else if(v[m].mode==="showing"){f=m;break}this.subtitleTrack!==f&&(this.subtitleTrack=f)}},b=A,(c=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(f){this.selectDefaultTrack=!1;var v=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(f,v)}}])&&u(b.prototype,c),A}(s.default);function h(p){for(var g=[],_=0;_<p.length;_++){var A=p[_];A.kind==="subtitles"&&A.label&&g.push(p[_])}return g}t.default=o},"./src/controller/timeline-controller.ts":function(e,t,r){r.r(t),r.d(t,"TimelineController",function(){return g});var n=r("./src/polyfills/number.ts"),i=r("./src/events.ts"),s=r("./src/utils/cea-608-parser.ts"),a=r("./src/utils/output-filter.ts"),u=r("./src/utils/webvtt-parser.ts"),l=r("./src/utils/texttrack-utils.ts"),o=r("./src/utils/imsc1-ttml-parser.ts"),h=r("./src/types/loader.ts"),p=r("./src/utils/logger.ts"),g=function(){function A(c){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=c,this.config=c.config,this.Cues=c.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var d=new a.default(this,"textTrack1"),f=new a.default(this,"textTrack2"),v=new a.default(this,"textTrack3"),m=new a.default(this,"textTrack4");this.cea608Parser1=new s.default(1,d,f),this.cea608Parser2=new s.default(3,v,m)}c.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),c.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),c.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.on(i.Events.FRAG_LOADING,this.onFragLoading,this),c.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),c.on(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),c.on(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),c.on(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),c.on(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),c.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var b=A.prototype;return b.destroy=function(){var c=this.hls;c.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),c.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),c.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.off(i.Events.FRAG_LOADING,this.onFragLoading,this),c.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),c.off(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),c.off(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),c.off(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),c.off(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),c.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},b.addCues=function(c,d,f,v,m){for(var y,T,L,C,R=!1,E=m.length;E--;){var S=m[E],k=(y=S[0],T=S[1],L=d,C=f,Math.min(T,C)-Math.max(y,L));if(k>=0&&(S[0]=Math.min(S[0],d),S[1]=Math.max(S[1],f),R=!0,k/(f-d)>.5))return}if(R||m.push([d,f]),this.config.renderTextTracksNatively){var w=this.captionsTracks[c];this.Cues.newCue(w,d,f,v)}else{var O=this.Cues.newCue(null,d,f,v);this.hls.trigger(i.Events.CUES_PARSED,{type:"captions",cues:O,track:c})}},b.onInitPtsFound=function(c,d){var f=this,v=d.frag,m=d.id,y=d.initPTS,T=d.timescale,L=this.unparsedVttFrags;m==="main"&&(this.initPTS[v.cc]=y,this.timescale[v.cc]=T),L.length&&(this.unparsedVttFrags=[],L.forEach(function(C){f.onFragLoaded(i.Events.FRAG_LOADED,C)}))},b.getExistingTrack=function(c){var d=this.media;if(d)for(var f=0;f<d.textTracks.length;f++){var v=d.textTracks[f];if(v[c])return v}return null},b.createCaptionsTrack=function(c){this.config.renderTextTracksNatively?this.createNativeTrack(c):this.createNonNativeTrack(c)},b.createNativeTrack=function(c){if(!this.captionsTracks[c]){var d=this.captionsProperties,f=this.captionsTracks,v=this.media,m=d[c],y=m.label,T=m.languageCode,L=this.getExistingTrack(c);if(L)f[c]=L,Object(l.clearCurrentCues)(f[c]),Object(l.sendAddTrackEvent)(f[c],v);else{var C=this.createTextTrack("captions",y,T);C&&(C[c]=!0,f[c]=C)}}},b.createNonNativeTrack=function(c){if(!this.nonNativeCaptionsTracks[c]){var d=this.captionsProperties[c];if(d){var f={_id:c,label:d.label,kind:"captions",default:!!d.media&&!!d.media.default,closedCaptions:d.media};this.nonNativeCaptionsTracks[c]=f,this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[f]})}}},b.createTextTrack=function(c,d,f){var v=this.media;if(v)return v.addTextTrack(c,d,f)},b.onMediaAttaching=function(c,d){this.media=d.media,this._cleanTracks()},b.onMediaDetaching=function(){var c=this.captionsTracks;Object.keys(c).forEach(function(d){Object(l.clearCurrentCues)(c[d]),delete c[d]}),this.nonNativeCaptionsTracks={}},b.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},b._cleanTracks=function(){var c=this.media;if(c){var d=c.textTracks;if(d)for(var f=0;f<d.length;f++)Object(l.clearCurrentCues)(d[f])}},b.onSubtitleTracksUpdated=function(c,d){var f=this;this.textTracks=[];var v=d.subtitleTracks||[],m=v.some(function(C){return C.textCodec===o.IMSC1_CODEC});if(this.config.enableWebVTT||m&&this.config.enableIMSC1){var y=this.tracks&&v&&this.tracks.length===v.length;if(this.tracks=v||[],this.config.renderTextTracksNatively){var T=this.media?this.media.textTracks:[];this.tracks.forEach(function(C,R){var E;if(R<T.length){for(var S=null,k=0;k<T.length;k++)if(_(T[k],C)){S=T[k];break}S&&(E=S)}E?Object(l.clearCurrentCues)(E):(E=f.createTextTrack("subtitles",C.name,C.lang))&&(E.mode="disabled"),E&&(E.groupId=C.groupId,f.textTracks.push(E))})}else if(!y&&this.tracks&&this.tracks.length){var L=this.tracks.map(function(C){return{label:C.name,kind:C.type.toLowerCase(),default:C.default,subtitleTrack:C}});this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:L})}}},b.onManifestLoaded=function(c,d){var f=this;this.config.enableCEA708Captions&&d.captions&&d.captions.forEach(function(v){var m=/(?:CC|SERVICE)([1-4])/.exec(v.instreamId);if(m){var y="textTrack"+m[1],T=f.captionsProperties[y];T&&(T.label=v.name,v.lang&&(T.languageCode=v.lang),T.media=v)}})},b.onFragLoading=function(c,d){var f=this.cea608Parser1,v=this.cea608Parser2,m=this.lastSn;if(this.enabled&&f&&v&&d.frag.type===h.PlaylistLevelType.MAIN){var y=d.frag.sn;y!==m+1&&(f.reset(),v.reset()),this.lastSn=y}},b.onFragLoaded=function(c,d){var f=d.frag,v=d.payload,m=this.initPTS,y=this.unparsedVttFrags;if(f.type===h.PlaylistLevelType.SUBTITLE)if(v.byteLength){if(!Object(n.isFiniteNumber)(m[f.cc]))return y.push(d),void(m.length&&this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f,error:new Error("Missing initial subtitle PTS")}));var T=f.decryptdata;if(T==null||T.key==null||T.method!=="AES-128"){var L=this.tracks[f.level],C=this.vttCCs;C[f.cc]||(C[f.cc]={start:f.start,prevCC:this.prevCC,new:!0},this.prevCC=f.cc),L&&L.textCodec===o.IMSC1_CODEC?this._parseIMSC1(f,v):this._parseVTTs(f,v,C)}}else this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f,error:new Error("Empty subtitle payload")})},b._parseIMSC1=function(c,d){var f=this,v=this.hls;Object(o.parseIMSC1)(d,this.initPTS[c.cc],this.timescale[c.cc],function(m){f._appendCues(m,c.level),v.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:c})},function(m){p.logger.log("Failed to parse IMSC1: "+m),v.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c,error:m})})},b._parseVTTs=function(c,d,f){var v=this,m=this.hls;Object(u.parseWebVTT)(d,this.initPTS[c.cc],this.timescale[c.cc],f,c.cc,c.start,function(y){v._appendCues(y,c.level),m.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:c})},function(y){v._fallbackToIMSC1(c,d),p.logger.log("Failed to parse VTT cue: "+y),m.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c,error:y})})},b._fallbackToIMSC1=function(c,d){var f=this,v=this.tracks[c.level];v.textCodec||Object(o.parseIMSC1)(d,this.initPTS[c.cc],this.timescale[c.cc],function(){v.textCodec=o.IMSC1_CODEC,f._parseIMSC1(c,d)},function(){v.textCodec="wvtt"})},b._appendCues=function(c,d){var f=this.hls;if(this.config.renderTextTracksNatively){var v=this.textTracks[d];if(v.mode==="disabled")return;c.forEach(function(y){return Object(l.addCueToTrack)(v,y)})}else{var m=this.tracks[d].default?"default":"subtitles"+d;f.trigger(i.Events.CUES_PARSED,{type:"subtitles",cues:c,track:m})}},b.onFragDecrypted=function(c,d){var f=d.frag;if(f.type===h.PlaylistLevelType.SUBTITLE){if(!Object(n.isFiniteNumber)(this.initPTS[f.cc]))return void this.unparsedVttFrags.push(d);this.onFragLoaded(i.Events.FRAG_LOADED,d)}},b.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},b.onFragParsingUserdata=function(c,d){var f=this.cea608Parser1,v=this.cea608Parser2;if(this.enabled&&f&&v)for(var m=0;m<d.samples.length;m++){var y=d.samples[m].bytes;if(y){var T=this.extractCea608Data(y);f.addData(d.samples[m].pts,T[0]),v.addData(d.samples[m].pts,T[1])}}},b.onBufferFlushing=function(c,d){var f=d.startOffset,v=d.endOffset,m=d.endOffsetSubtitles,y=d.type,T=this.media;if(T&&!(T.currentTime<v)){if(!y||y==="video"){var L=this.captionsTracks;Object.keys(L).forEach(function(R){return Object(l.removeCuesInRange)(L[R],f,v)})}if(this.config.renderTextTracksNatively&&f===0&&m!==void 0){var C=this.textTracks;Object.keys(C).forEach(function(R){return Object(l.removeCuesInRange)(C[R],f,m)})}}},b.extractCea608Data=function(c){for(var d=31&c[0],f=2,v=[[],[]],m=0;m<d;m++){var y=c[f++],T=127&c[f++],L=127&c[f++],C=3&y;T===0&&L===0||(4&y)!=0&&(C!==0&&C!==1||(v[C].push(T),v[C].push(L)))}return v},A}();function _(A,b){return A&&A.label===b.name&&!(A.textTrack1||A.textTrack2)}},"./src/crypt/aes-crypto.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return n});var n=function(){function i(s,a){this.subtle=void 0,this.aesIV=void 0,this.subtle=s,this.aesIV=a}return i.prototype.decrypt=function(s,a){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},a,s)},i}()},"./src/crypt/aes-decryptor.ts":function(e,t,r){r.r(t),r.d(t,"removePadding",function(){return i}),r.d(t,"default",function(){return s});var n=r("./src/utils/typed-array.ts");function i(a){var u=a.byteLength,l=u&&new DataView(a.buffer).getUint8(u-1);return l?Object(n.sliceUint8)(a,0,u-l):a}var s=function(){function a(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var u=a.prototype;return u.uint8ArrayToUint32Array_=function(l){for(var o=new DataView(l),h=new Uint32Array(4),p=0;p<4;p++)h[p]=o.getUint32(4*p);return h},u.initTable=function(){var l=this.sBox,o=this.invSBox,h=this.subMix,p=h[0],g=h[1],_=h[2],A=h[3],b=this.invSubMix,c=b[0],d=b[1],f=b[2],v=b[3],m=new Uint32Array(256),y=0,T=0,L=0;for(L=0;L<256;L++)m[L]=L<128?L<<1:L<<1^283;for(L=0;L<256;L++){var C=T^T<<1^T<<2^T<<3^T<<4;C=C>>>8^255&C^99,l[y]=C,o[C]=y;var R=m[y],E=m[R],S=m[E],k=257*m[C]^16843008*C;p[y]=k<<24|k>>>8,g[y]=k<<16|k>>>16,_[y]=k<<8|k>>>24,A[y]=k,k=16843009*S^65537*E^257*R^16843008*y,c[C]=k<<24|k>>>8,d[C]=k<<16|k>>>16,f[C]=k<<8|k>>>24,v[C]=k,y?(y=R^m[m[m[S^R]]],T^=m[m[T]]):y=T=1}},u.expandKey=function(l){for(var o=this.uint8ArrayToUint32Array_(l),h=!0,p=0;p<o.length&&h;)h=o[p]===this.key[p],p++;if(!h){this.key=o;var g=this.keySize=o.length;if(g!==4&&g!==6&&g!==8)throw new Error("Invalid aes key size="+g);var _,A,b,c,d=this.ksRows=4*(g+6+1),f=this.keySchedule=new Uint32Array(d),v=this.invKeySchedule=new Uint32Array(d),m=this.sBox,y=this.rcon,T=this.invSubMix,L=T[0],C=T[1],R=T[2],E=T[3];for(_=0;_<d;_++)_<g?b=f[_]=o[_]:(c=b,_%g==0?(c=m[(c=c<<8|c>>>24)>>>24]<<24|m[c>>>16&255]<<16|m[c>>>8&255]<<8|m[255&c],c^=y[_/g|0]<<24):g>6&&_%g==4&&(c=m[c>>>24]<<24|m[c>>>16&255]<<16|m[c>>>8&255]<<8|m[255&c]),f[_]=b=(f[_-g]^c)>>>0);for(A=0;A<d;A++)_=d-A,c=3&A?f[_]:f[_-4],v[A]=A<4||_<=4?c:L[m[c>>>24]]^C[m[c>>>16&255]]^R[m[c>>>8&255]]^E[m[255&c]],v[A]=v[A]>>>0}},u.networkToHostOrderSwap=function(l){return l<<24|(65280&l)<<8|(16711680&l)>>8|l>>>24},u.decrypt=function(l,o,h){for(var p,g,_,A,b,c,d,f,v,m,y,T,L,C,R=this.keySize+6,E=this.invKeySchedule,S=this.invSBox,k=this.invSubMix,w=k[0],O=k[1],I=k[2],P=k[3],D=this.uint8ArrayToUint32Array_(h),x=D[0],M=D[1],B=D[2],H=D[3],$=new Int32Array(l),q=new Int32Array($.length),te=this.networkToHostOrderSwap;o<$.length;){for(v=te($[o]),m=te($[o+1]),y=te($[o+2]),T=te($[o+3]),b=v^E[0],c=T^E[1],d=y^E[2],f=m^E[3],L=4,C=1;C<R;C++)p=w[b>>>24]^O[c>>16&255]^I[d>>8&255]^P[255&f]^E[L],g=w[c>>>24]^O[d>>16&255]^I[f>>8&255]^P[255&b]^E[L+1],_=w[d>>>24]^O[f>>16&255]^I[b>>8&255]^P[255&c]^E[L+2],A=w[f>>>24]^O[b>>16&255]^I[c>>8&255]^P[255&d]^E[L+3],b=p,c=g,d=_,f=A,L+=4;p=S[b>>>24]<<24^S[c>>16&255]<<16^S[d>>8&255]<<8^S[255&f]^E[L],g=S[c>>>24]<<24^S[d>>16&255]<<16^S[f>>8&255]<<8^S[255&b]^E[L+1],_=S[d>>>24]<<24^S[f>>16&255]<<16^S[b>>8&255]<<8^S[255&c]^E[L+2],A=S[f>>>24]<<24^S[b>>16&255]<<16^S[c>>8&255]<<8^S[255&d]^E[L+3],q[o]=te(p^x),q[o+1]=te(A^M),q[o+2]=te(_^B),q[o+3]=te(g^H),x=v,M=m,B=y,H=T,o+=4}return q.buffer},a}()},"./src/crypt/decrypter.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return o});var n=r("./src/crypt/aes-crypto.ts"),i=r("./src/crypt/fast-aes-key.ts"),s=r("./src/crypt/aes-decryptor.ts"),a=r("./src/utils/logger.ts"),u=r("./src/utils/mp4-tools.ts"),l=r("./src/utils/typed-array.ts"),o=function(){function h(g,_,A){var b=(A===void 0?{}:A).removePKCS7Padding,c=b===void 0||b;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=g,this.config=_,this.removePKCS7Padding=c,c)try{var d=self.crypto;d&&(this.subtle=d.subtle||d.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var p=h.prototype;return p.destroy=function(){this.observer=null},p.isSync=function(){return this.config.enableSoftwareAES},p.flush=function(){var g=this.currentResult;if(g){var _=new Uint8Array(g);return this.reset(),this.removePKCS7Padding?Object(s.removePadding)(_):_}this.reset()},p.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},p.decrypt=function(g,_,A,b){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(g),_,A);var c=this.flush();c&&b(c.buffer)}else this.webCryptoDecrypt(new Uint8Array(g),_,A).then(b)},p.softwareDecrypt=function(g,_,A){var b=this.currentIV,c=this.currentResult,d=this.remainderData;this.logOnce("JS AES decrypt"),d&&(g=Object(u.appendUint8Array)(d,g),this.remainderData=null);var f=this.getValidChunk(g);if(!f.length)return null;b&&(A=b);var v=this.softwareDecrypter;v||(v=this.softwareDecrypter=new s.default),v.expandKey(_);var m=c;return this.currentResult=v.decrypt(f.buffer,0,A),this.currentIV=Object(l.sliceUint8)(f,-16).buffer,m||null},p.webCryptoDecrypt=function(g,_,A){var b=this,c=this.subtle;return this.key===_&&this.fastAesKey||(this.key=_,this.fastAesKey=new i.default(c,_)),this.fastAesKey.expandKey().then(function(d){return c?new n.default(c,A).decrypt(g.buffer,d):Promise.reject(new Error("web crypto not initialized"))}).catch(function(d){return b.onWebCryptoError(d,g,_,A)})},p.onWebCryptoError=function(g,_,A,b){return a.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",g),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(_,A,b)},p.getValidChunk=function(g){var _=g,A=g.length-g.length%16;return A!==g.length&&(_=Object(l.sliceUint8)(g,0,A),this.remainderData=Object(l.sliceUint8)(g,A)),_},p.logOnce=function(g){this.logEnabled&&(a.logger.log("[decrypter.ts]: "+g),this.logEnabled=!1)},h}()},"./src/crypt/fast-aes-key.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return n});var n=function(){function i(s,a){this.subtle=void 0,this.key=void 0,this.subtle=s,this.key=a}return i.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},i}()},"./src/demux/aacdemuxer.ts":function(e,t,r){r.r(t);var n=r("./src/demux/base-audio-demuxer.ts"),i=r("./src/demux/adts.ts"),s=r("./src/utils/logger.ts"),a=r("./src/demux/id3.ts");function u(o,h){return(u=Object.setPrototypeOf||function(p,g){return p.__proto__=g,p})(o,h)}var l=function(o){var h,p;function g(A,b){var c;return(c=o.call(this)||this).observer=void 0,c.config=void 0,c.observer=A,c.config=b,c}p=o,(h=g).prototype=Object.create(p.prototype),h.prototype.constructor=h,u(h,p);var _=g.prototype;return _.resetInitSegment=function(A,b,c){o.prototype.resetInitSegment.call(this,A,b,c),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:A,duration:c,inputTimeScale:9e4,dropped:0}},g.probe=function(A){if(!A)return!1;for(var b=(a.getID3Data(A,0)||[]).length,c=A.length;b<c;b++)if(i.probe(A,b))return s.logger.log("ADTS sync word found !"),!0;return!1},_.canParse=function(A,b){return i.canParse(A,b)},_.appendFrame=function(A,b,c){i.initTrackConfig(A,this.observer,b,c,A.manifestCodec);var d=i.appendFrame(A,b,c,this.initPTS,this.frameIndex);if(d&&d.missing===0)return d},g}(n.default);l.minProbeByteLength=9,t.default=l},"./src/demux/adts.ts":function(e,t,r){r.r(t),r.d(t,"getAudioConfig",function(){return a}),r.d(t,"isHeaderPattern",function(){return u}),r.d(t,"getHeaderLength",function(){return l}),r.d(t,"getFullFrameLength",function(){return o}),r.d(t,"canGetFrameLength",function(){return h}),r.d(t,"isHeader",function(){return p}),r.d(t,"canParse",function(){return g}),r.d(t,"probe",function(){return _}),r.d(t,"initTrackConfig",function(){return A}),r.d(t,"getFrameDuration",function(){return b}),r.d(t,"parseFrameHeader",function(){return c}),r.d(t,"appendFrame",function(){return d});var n=r("./src/utils/logger.ts"),i=r("./src/errors.ts"),s=r("./src/events.ts");function a(f,v,m,y){var T,L,C,R,E=navigator.userAgent.toLowerCase(),S=y,k=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];T=1+((192&v[m+2])>>>6);var w=(60&v[m+2])>>>2;if(!(w>k.length-1))return C=(1&v[m+2])<<2,C|=(192&v[m+3])>>>6,n.logger.log("manifest codec:"+y+", ADTS type:"+T+", samplingIndex:"+w),/firefox/i.test(E)?w>=6?(T=5,R=new Array(4),L=w-3):(T=2,R=new Array(2),L=w):E.indexOf("android")!==-1?(T=2,R=new Array(2),L=w):(T=5,R=new Array(4),y&&(y.indexOf("mp4a.40.29")!==-1||y.indexOf("mp4a.40.5")!==-1)||!y&&w>=6?L=w-3:((y&&y.indexOf("mp4a.40.2")!==-1&&(w>=6&&C===1||/vivaldi/i.test(E))||!y&&C===1)&&(T=2,R=new Array(2)),L=w)),R[0]=T<<3,R[0]|=(14&w)>>1,R[1]|=(1&w)<<7,R[1]|=C<<3,T===5&&(R[1]|=(14&L)>>1,R[2]=(1&L)<<7,R[2]|=8,R[3]=0),{config:R,samplerate:k[w],channelCount:C,codec:"mp4a.40."+T,manifestCodec:S};f.trigger(s.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+w})}function u(f,v){return f[v]===255&&(246&f[v+1])==240}function l(f,v){return 1&f[v+1]?7:9}function o(f,v){return(3&f[v+3])<<11|f[v+4]<<3|(224&f[v+5])>>>5}function h(f,v){return v+5<f.length}function p(f,v){return v+1<f.length&&u(f,v)}function g(f,v){return h(f,v)&&u(f,v)&&o(f,v)<=f.length-v}function _(f,v){if(p(f,v)){var m=l(f,v);if(v+m>=f.length)return!1;var y=o(f,v);if(y<=m)return!1;var T=v+y;return T===f.length||p(f,T)}return!1}function A(f,v,m,y,T){if(!f.samplerate){var L=a(v,m,y,T);if(!L)return;f.config=L.config,f.samplerate=L.samplerate,f.channelCount=L.channelCount,f.codec=L.codec,f.manifestCodec=L.manifestCodec,n.logger.log("parsed codec:"+f.codec+", rate:"+L.samplerate+", channels:"+L.channelCount)}}function b(f){return 9216e4/f}function c(f,v,m,y,T){var L=l(f,v),C=o(f,v);if((C-=L)>0)return{headerLength:L,frameLength:C,stamp:m+y*T}}function d(f,v,m,y,T){var L=c(v,m,y,T,b(f.samplerate));if(L){var C,R=L.frameLength,E=L.headerLength,S=L.stamp,k=E+R,w=Math.max(0,m+k-v.length);w?(C=new Uint8Array(k-E)).set(v.subarray(m+E,v.length),0):C=v.subarray(m+E,m+k);var O={unit:C,pts:S};return w||f.samples.push(O),{sample:O,length:k,missing:w}}}},"./src/demux/base-audio-demuxer.ts":function(e,t,r){r.r(t),r.d(t,"initPTSFn",function(){return o});var n=r("./src/polyfills/number.ts"),i=r("./src/demux/id3.ts"),s=r("./src/demux/dummy-demuxed-track.ts"),a=r("./src/utils/mp4-tools.ts"),u=r("./src/utils/typed-array.ts"),l=function(){function h(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var p=h.prototype;return p.resetInitSegment=function(g,_,A){this._id3Track={type:"id3",id:0,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},p.resetTimeStamp=function(){},p.resetContiguity=function(){},p.canParse=function(g,_){return!1},p.appendFrame=function(g,_,A){},p.demux=function(g,_){this.cachedData&&(g=Object(a.appendUint8Array)(this.cachedData,g),this.cachedData=null);var A,b,c=i.getID3Data(g,0),d=c?c.length:0,f=this._audioTrack,v=this._id3Track,m=c?i.getTimeStamp(c):void 0,y=g.length;for(this.frameIndex!==0&&this.initPTS!==null||(this.initPTS=o(m,_)),c&&c.length>0&&v.samples.push({pts:this.initPTS,dts:this.initPTS,data:c}),b=this.initPTS;d<y;){if(this.canParse(g,d)){var T=this.appendFrame(f,g,d);T?(this.frameIndex++,b=T.sample.pts,A=d+=T.length):d=y}else i.canParse(g,d)?(c=i.getID3Data(g,d),v.samples.push({pts:b,dts:b,data:c}),A=d+=c.length):d++;if(d===y&&A!==y){var L=Object(u.sliceUint8)(g,A);this.cachedData?this.cachedData=Object(a.appendUint8Array)(this.cachedData,L):this.cachedData=L}}return{audioTrack:f,avcTrack:Object(s.dummyTrack)(),id3Track:v,textTrack:Object(s.dummyTrack)()}},p.demuxSampleAes=function(g,_,A){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},p.flush=function(g){var _=this.cachedData;return _&&(this.cachedData=null,this.demux(_,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(s.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(s.dummyTrack)()}},p.destroy=function(){},h}(),o=function(h,p){return Object(n.isFiniteNumber)(h)?90*h:9e4*p};t.default=l},"./src/demux/chunk-cache.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return n});var n=function(){function i(){this.chunks=[],this.dataLength=0}var s=i.prototype;return s.push=function(a){this.chunks.push(a),this.dataLength+=a.length},s.flush=function(){var a,u=this.chunks,l=this.dataLength;return u.length?(a=u.length===1?u[0]:function(o,h){for(var p=new Uint8Array(h),g=0,_=0;_<o.length;_++){var A=o[_];p.set(A,g),g+=A.length}return p}(u,l),this.reset(),a):new Uint8Array(0)},s.reset=function(){this.chunks.length=0,this.dataLength=0},i}()},"./src/demux/dummy-demuxed-track.ts":function(e,t,r){function n(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}r.r(t),r.d(t,"dummyTrack",function(){return n})},"./src/demux/exp-golomb.ts":function(e,t,r){r.r(t);var n=r("./src/utils/logger.ts"),i=function(){function s(u){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=u,this.bytesAvailable=u.byteLength,this.word=0,this.bitsAvailable=0}var a=s.prototype;return a.loadWord=function(){var u=this.data,l=this.bytesAvailable,o=u.byteLength-l,h=new Uint8Array(4),p=Math.min(4,l);if(p===0)throw new Error("no bytes available");h.set(u.subarray(o,o+p)),this.word=new DataView(h.buffer).getUint32(0),this.bitsAvailable=8*p,this.bytesAvailable-=p},a.skipBits=function(u){var l;this.bitsAvailable>u?(this.word<<=u,this.bitsAvailable-=u):(u-=this.bitsAvailable,u-=(l=u>>3)>>3,this.bytesAvailable-=l,this.loadWord(),this.word<<=u,this.bitsAvailable-=u)},a.readBits=function(u){var l=Math.min(this.bitsAvailable,u),o=this.word>>>32-l;return u>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=l,this.bitsAvailable>0?this.word<<=l:this.bytesAvailable>0&&this.loadWord(),(l=u-l)>0&&this.bitsAvailable?o<<l|this.readBits(l):o},a.skipLZ=function(){var u;for(u=0;u<this.bitsAvailable;++u)if((this.word&2147483648>>>u)!=0)return this.word<<=u,this.bitsAvailable-=u,u;return this.loadWord(),u+this.skipLZ()},a.skipUEG=function(){this.skipBits(1+this.skipLZ())},a.skipEG=function(){this.skipBits(1+this.skipLZ())},a.readUEG=function(){var u=this.skipLZ();return this.readBits(u+1)-1},a.readEG=function(){var u=this.readUEG();return 1&u?1+u>>>1:-1*(u>>>1)},a.readBoolean=function(){return this.readBits(1)===1},a.readUByte=function(){return this.readBits(8)},a.readUShort=function(){return this.readBits(16)},a.readUInt=function(){return this.readBits(32)},a.skipScalingList=function(u){for(var l=8,o=8,h=0;h<u;h++)o!==0&&(o=(l+this.readEG()+256)%256),l=o===0?l:o},a.readSPS=function(){var u,l,o,h=0,p=0,g=0,_=0,A=this.readUByte.bind(this),b=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),v=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);A();var T=A();if(b(5),f(3),A(),m(),T===100||T===110||T===122||T===244||T===44||T===83||T===86||T===118||T===128){var L=c();if(L===3&&f(1),m(),m(),f(1),d())for(l=L!==3?8:12,o=0;o<l;o++)d()&&y(o<6?16:64)}m();var C=c();if(C===0)c();else if(C===1)for(f(1),v(),v(),u=c(),o=0;o<u;o++)v();m(),f(1);var R=c(),E=c(),S=b(1);S===0&&f(1),f(1),d()&&(h=c(),p=c(),g=c(),_=c());var k=[1,1];if(d()&&d())switch(A()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[A()<<8|A(),A()<<8|A()]}return{width:Math.ceil(16*(R+1)-2*h-2*p),height:(2-S)*(E+1)*16-(S?2:4)*(g+_),pixelRatio:k}},a.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},s}();t.default=i},"./src/demux/id3.ts":function(e,t,r){r.r(t),r.d(t,"isHeader",function(){return i}),r.d(t,"isFooter",function(){return s}),r.d(t,"getID3Data",function(){return a}),r.d(t,"canParse",function(){return l}),r.d(t,"getTimeStamp",function(){return o}),r.d(t,"isTimeStampFrame",function(){return h}),r.d(t,"getID3Frames",function(){return g}),r.d(t,"decodeFrame",function(){return _}),r.d(t,"utf8ArrayToStr",function(){return f}),r.d(t,"testables",function(){return v});var n,i=function(m,y){return y+10<=m.length&&m[y]===73&&m[y+1]===68&&m[y+2]===51&&m[y+3]<255&&m[y+4]<255&&m[y+6]<128&&m[y+7]<128&&m[y+8]<128&&m[y+9]<128},s=function(m,y){return y+10<=m.length&&m[y]===51&&m[y+1]===68&&m[y+2]===73&&m[y+3]<255&&m[y+4]<255&&m[y+6]<128&&m[y+7]<128&&m[y+8]<128&&m[y+9]<128},a=function(m,y){for(var T=y,L=0;i(m,y);)L+=10,L+=u(m,y+6),s(m,y+10)&&(L+=10),y+=L;if(L>0)return m.subarray(T,T+L)},u=function(m,y){var T=0;return T=(127&m[y])<<21,T|=(127&m[y+1])<<14,T|=(127&m[y+2])<<7,T|=127&m[y+3]},l=function(m,y){return i(m,y)&&u(m,y+6)+10<=m.length-y},o=function(m){for(var y=g(m),T=0;T<y.length;T++){var L=y[T];if(h(L))return d(L)}},h=function(m){return m&&m.key==="PRIV"&&m.info==="com.apple.streaming.transportStreamTimestamp"},p=function(m){var y=String.fromCharCode(m[0],m[1],m[2],m[3]),T=u(m,4);return{type:y,size:T,data:m.subarray(10,10+T)}},g=function(m){for(var y=0,T=[];i(m,y);){for(var L=u(m,y+6),C=(y+=10)+L;y+8<C;){var R=p(m.subarray(y)),E=_(R);E&&T.push(E),y+=R.size+10}s(m,y)&&(y+=10)}return T},_=function(m){return m.type==="PRIV"?A(m):m.type[0]==="W"?c(m):b(m)},A=function(m){if(!(m.size<2)){var y=f(m.data,!0),T=new Uint8Array(m.data.subarray(y.length+1));return{key:m.type,info:y,data:T.buffer}}},b=function(m){if(!(m.size<2)){if(m.type==="TXXX"){var y=1,T=f(m.data.subarray(y),!0);y+=T.length+1;var L=f(m.data.subarray(y));return{key:m.type,info:T,data:L}}var C=f(m.data.subarray(1));return{key:m.type,data:C}}},c=function(m){if(m.type==="WXXX"){if(m.size<2)return;var y=1,T=f(m.data.subarray(y),!0);y+=T.length+1;var L=f(m.data.subarray(y));return{key:m.type,info:T,data:L}}var C=f(m.data);return{key:m.type,data:C}},d=function(m){if(m.data.byteLength===8){var y=new Uint8Array(m.data),T=1&y[3],L=(y[4]<<23)+(y[5]<<15)+(y[6]<<7)+y[7];return L/=45,T&&(L+=4772185884e-2),Math.round(L)}},f=function(m,y){y===void 0&&(y=!1);var T=(n||self.TextDecoder===void 0||(n=new self.TextDecoder("utf-8")),n);if(T){var L=T.decode(m);if(y){var C=L.indexOf("\0");return C!==-1?L.substring(0,C):L}return L.replace(/\0/g,"")}for(var R,E,S,k=m.length,w="",O=0;O<k;){if((R=m[O++])===0&&y)return w;if(R!==0&&R!==3)switch(R>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:w+=String.fromCharCode(R);break;case 12:case 13:E=m[O++],w+=String.fromCharCode((31&R)<<6|63&E);break;case 14:E=m[O++],S=m[O++],w+=String.fromCharCode((15&R)<<12|(63&E)<<6|(63&S)<<0)}}return w},v={decodeTextFrame:b}},"./src/demux/mp3demuxer.ts":function(e,t,r){r.r(t);var n=r("./src/demux/base-audio-demuxer.ts"),i=r("./src/demux/id3.ts"),s=r("./src/utils/logger.ts"),a=r("./src/demux/mpegaudio.ts");function u(o,h){return(u=Object.setPrototypeOf||function(p,g){return p.__proto__=g,p})(o,h)}var l=function(o){var h,p;function g(){return o.apply(this,arguments)||this}p=o,(h=g).prototype=Object.create(p.prototype),h.prototype.constructor=h,u(h,p);var _=g.prototype;return _.resetInitSegment=function(A,b,c){o.prototype.resetInitSegment.call(this,A,b,c),this._audioTrack={container:"audio/mpeg",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:A,duration:c,inputTimeScale:9e4,dropped:0}},g.probe=function(A){if(!A)return!1;for(var b=(i.getID3Data(A,0)||[]).length,c=A.length;b<c;b++)if(a.probe(A,b))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},_.canParse=function(A,b){return a.canParse(A,b)},_.appendFrame=function(A,b,c){if(this.initPTS!==null)return a.appendFrame(A,b,c,this.initPTS,this.frameIndex)},g}(n.default);l.minProbeByteLength=4,t.default=l},"./src/demux/mp4demuxer.ts":function(e,t,r){r.r(t);var n=r("./src/utils/mp4-tools.ts"),i=r("./src/demux/dummy-demuxed-track.ts"),s=function(){function a(l,o){this.remainderData=null,this.config=void 0,this.config=o}var u=a.prototype;return u.resetTimeStamp=function(){},u.resetInitSegment=function(){},u.resetContiguity=function(){},a.probe=function(l){return Object(n.findBox)({data:l,start:0,end:Math.min(l.length,16384)},["moof"]).length>0},u.demux=function(l){var o=l,h=Object(i.dummyTrack)();if(this.config.progressive){this.remainderData&&(o=Object(n.appendUint8Array)(this.remainderData,l));var p=Object(n.segmentValidRange)(o);this.remainderData=p.remainder,h.samples=p.valid||new Uint8Array}else h.samples=o;return{audioTrack:Object(i.dummyTrack)(),avcTrack:h,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},u.flush=function(){var l=Object(i.dummyTrack)();return l.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(i.dummyTrack)(),avcTrack:l,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},u.demuxSampleAes=function(l,o,h){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},u.destroy=function(){},a}();s.minProbeByteLength=1024,t.default=s},"./src/demux/mpegaudio.ts":function(e,t,r){r.r(t),r.d(t,"appendFrame",function(){return l}),r.d(t,"parseHeader",function(){return o}),r.d(t,"isHeaderPattern",function(){return h}),r.d(t,"isHeader",function(){return p}),r.d(t,"canParse",function(){return g}),r.d(t,"probe",function(){return _});var n=null,i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],a=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],u=[0,1,1,4];function l(A,b,c,d,f){if(!(c+24>b.length)){var v=o(b,c);if(v&&c+v.frameLength<=b.length){var m=d+f*(9e4*v.samplesPerFrame/v.sampleRate),y={unit:b.subarray(c,c+v.frameLength),pts:m,dts:m};return A.config=[],A.channelCount=v.channelCount,A.samplerate=v.sampleRate,A.samples.push(y),{sample:y,length:v.frameLength,missing:0}}}}function o(A,b){var c=A[b+1]>>3&3,d=A[b+1]>>1&3,f=A[b+2]>>4&15,v=A[b+2]>>2&3;if(c!==1&&f!==0&&f!==15&&v!==3){var m=A[b+2]>>1&1,y=A[b+3]>>6,T=1e3*i[14*(c===3?3-d:d===3?3:4)+f-1],L=s[3*(c===3?0:c===2?1:2)+v],C=y===3?1:2,R=a[c][d],E=u[d],S=8*R*E,k=Math.floor(R*T/L+m)*E;if(n===null){var w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);n=w?parseInt(w[1]):0}return!!n&&n<=87&&d===2&&T>=224e3&&y===0&&(A[b+3]=128|A[b+3]),{sampleRate:L,channelCount:C,frameLength:k,samplesPerFrame:S}}}function h(A,b){return A[b]===255&&(224&A[b+1])==224&&(6&A[b+1])!=0}function p(A,b){return b+1<A.length&&h(A,b)}function g(A,b){return h(A,b)&&4<=A.length-b}function _(A,b){if(b+1<A.length&&h(A,b)){var c=o(A,b),d=4;c!=null&&c.frameLength&&(d=c.frameLength);var f=b+d;return f===A.length||p(A,f)}return!1}},"./src/demux/sample-aes.ts":function(e,t,r){r.r(t);var n=r("./src/crypt/decrypter.ts"),i=r("./src/demux/tsdemuxer.ts"),s=function(){function a(l,o,h){this.keyData=void 0,this.decrypter=void 0,this.keyData=h,this.decrypter=new n.default(l,o,{removePKCS7Padding:!1})}var u=a.prototype;return u.decryptBuffer=function(l,o){this.decrypter.decrypt(l,this.keyData.key.buffer,this.keyData.iv.buffer,o)},u.decryptAacSample=function(l,o,h,p){var g=l[o].unit,_=g.subarray(16,g.length-g.length%16),A=_.buffer.slice(_.byteOffset,_.byteOffset+_.length),b=this;this.decryptBuffer(A,function(c){var d=new Uint8Array(c);g.set(d,16),p||b.decryptAacSamples(l,o+1,h)})},u.decryptAacSamples=function(l,o,h){for(;;o++){if(o>=l.length)return void h();if(!(l[o].unit.length<32)){var p=this.decrypter.isSync();if(this.decryptAacSample(l,o,h,p),!p)return}}},u.getAvcEncryptedData=function(l){for(var o=16*Math.floor((l.length-48)/160)+16,h=new Int8Array(o),p=0,g=32;g<=l.length-16;g+=160,p+=16)h.set(l.subarray(g,g+16),p);return h},u.getAvcDecryptedUnit=function(l,o){for(var h=new Uint8Array(o),p=0,g=32;g<=l.length-16;g+=160,p+=16)l.set(h.subarray(p,p+16),g);return l},u.decryptAvcSample=function(l,o,h,p,g,_){var A=Object(i.discardEPB)(g.data),b=this.getAvcEncryptedData(A),c=this;this.decryptBuffer(b.buffer,function(d){g.data=c.getAvcDecryptedUnit(A,d),_||c.decryptAvcSamples(l,o,h+1,p)})},u.decryptAvcSamples=function(l,o,h,p){if(l instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;o++,h=0){if(o>=l.length)return void p();for(var g=l[o].units;!(h>=g.length);h++){var _=g[h];if(!(_.data.length<=48||_.type!==1&&_.type!==5)){var A=this.decrypter.isSync();if(this.decryptAvcSample(l,o,h,p,_,A),!A)return}}}},a}();t.default=s},"./src/demux/transmuxer-interface.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return p});var n=r("./node_modules/webworkify-webpack/index.js"),i=r("./src/events.ts"),s=r("./src/demux/transmuxer.ts"),a=r("./src/utils/logger.ts"),u=r("./src/errors.ts"),l=r("./src/utils/mediasource-helper.ts"),o=r("./node_modules/eventemitter3/index.js"),h=Object(l.getMediaSource)()||{isTypeSupported:function(){return!1}},p=function(){function g(A,b,c,d){var f=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=A,this.id=b,this.onTransmuxComplete=c,this.onFlush=d;var v=A.config,m=function(C,R){(R=R||{}).frag=f.frag,R.id=f.id,A.trigger(C,R)};this.observer=new o.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,m),this.observer.on(i.Events.ERROR,m);var y={mp4:h.isTypeSupported("video/mp4"),mpeg:h.isTypeSupported("audio/mpeg"),mp3:h.isTypeSupported('audio/mp4; codecs="mp3"')},T=navigator.vendor;if(v.enableWorker&&typeof Worker!="undefined"){var L;a.logger.log("demuxing in webworker");try{L=this.worker=n("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),L.addEventListener("message",this.onwmsg),L.onerror=function(C){A.trigger(i.Events.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(C.message+"  ("+C.filename+":"+C.lineno+")")})},L.postMessage({cmd:"init",typeSupported:y,vendor:T,id:b,config:JSON.stringify(v)})}catch(C){a.logger.warn("Error in worker:",C),a.logger.error("Error while initializing DemuxerWorker, fallback to inline"),L&&self.URL.revokeObjectURL(L.objectURL),this.transmuxer=new s.default(this.observer,y,v,T,b),this.worker=null}}else this.transmuxer=new s.default(this.observer,y,v,T,b)}var _=g.prototype;return _.destroy=function(){var A=this.worker;if(A)A.removeEventListener("message",this.onwmsg),A.terminate(),this.worker=null;else{var b=this.transmuxer;b&&(b.destroy(),this.transmuxer=null)}var c=this.observer;c&&c.removeAllListeners(),this.observer=null},_.push=function(A,b,c,d,f,v,m,y,T,L){var C=this;T.transmuxing.start=self.performance.now();var R=this.transmuxer,E=this.worker,S=v?v.start:f.start,k=f.decryptdata,w=this.frag,O=!(w&&f.cc===w.cc),I=!(w&&T.level===w.level),P=w?T.sn-w.sn:-1,D=this.part?T.part-this.part.index:1,x=!I&&(P===1||P===0&&D===1),M=self.performance.now();(I||P||f.stats.parsing.start===0)&&(f.stats.parsing.start=M),!v||!D&&x||(v.stats.parsing.start=M);var B=new s.TransmuxState(O,x,y,I,S);if(!x||O){a.logger.log("[transmuxer-interface, "+f.type+"]: Starting new transmux session for sn: "+T.sn+" p: "+T.part+" level: "+T.level+" id: "+T.id+`
        discontinuity: `+O+`
        trackSwitch: `+I+`
        contiguous: `+x+`
        accurateTimeOffset: `+y+`
        timeOffset: `+S);var H=new s.TransmuxConfig(c,d,b,m,L);this.configureTransmuxer(H)}if(this.frag=f,this.part=v,E)E.postMessage({cmd:"demux",data:A,decryptdata:k,chunkMeta:T,state:B},A instanceof ArrayBuffer?[A]:[]);else if(R){var $=R.push(A,k,T,B);Object(s.isPromise)($)?$.then(function(q){C.handleTransmuxComplete(q)}):this.handleTransmuxComplete($)}},_.flush=function(A){var b=this;A.transmuxing.start=self.performance.now();var c=this.transmuxer,d=this.worker;if(d)d.postMessage({cmd:"flush",chunkMeta:A});else if(c){var f=c.flush(A);Object(s.isPromise)(f)?f.then(function(v){b.handleFlushResult(v,A)}):this.handleFlushResult(f,A)}},_.handleFlushResult=function(A,b){var c=this;A.forEach(function(d){c.handleTransmuxComplete(d)}),this.onFlush(b)},_.onWorkerMessage=function(A){var b=A.data,c=this.hls;switch(b.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(b.data);break;case"flush":this.onFlush(b.data);break;default:b.data=b.data||{},b.data.frag=this.frag,b.data.id=this.id,c.trigger(b.event,b.data)}},_.configureTransmuxer=function(A){var b=this.worker,c=this.transmuxer;b?b.postMessage({cmd:"configure",config:A}):c&&c.configure(A)},_.handleTransmuxComplete=function(A){A.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(A)},g}()},"./src/demux/transmuxer-worker.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return u});var n=r("./src/demux/transmuxer.ts"),i=r("./src/events.ts"),s=r("./src/utils/logger.ts"),a=r("./node_modules/eventemitter3/index.js");function u(p){var g=new a.EventEmitter,_=function(A,b){p.postMessage({event:A,data:b})};g.on(i.Events.FRAG_DECRYPTED,_),g.on(i.Events.ERROR,_),p.addEventListener("message",function(A){var b=A.data;switch(b.cmd){case"init":var c=JSON.parse(b.config);p.transmuxer=new n.default(g,b.typeSupported,c,b.vendor,b.id),Object(s.enableLogs)(c.debug),_("init",null);break;case"configure":p.transmuxer.configure(b.config);break;case"demux":var d=p.transmuxer.push(b.data,b.decryptdata,b.chunkMeta,b.state);Object(n.isPromise)(d)?d.then(function(m){l(p,m)}):l(p,d);break;case"flush":var f=b.chunkMeta,v=p.transmuxer.flush(f);Object(n.isPromise)(v)?v.then(function(m){h(p,m,f)}):h(p,v,f)}})}function l(p,g){if((_=g.remuxResult).audio||_.video||_.text||_.id3||_.initSegment){var _,A=[],b=g.remuxResult,c=b.audio,d=b.video;c&&o(A,c),d&&o(A,d),p.postMessage({event:"transmuxComplete",data:g},A)}}function o(p,g){g.data1&&p.push(g.data1.buffer),g.data2&&p.push(g.data2.buffer)}function h(p,g,_){g.forEach(function(A){l(p,A)}),p.postMessage({event:"flush",data:_})}},"./src/demux/transmuxer.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return f}),r.d(t,"isPromise",function(){return m}),r.d(t,"TransmuxConfig",function(){return y}),r.d(t,"TransmuxState",function(){return T});var n,i=r("./src/events.ts"),s=r("./src/errors.ts"),a=r("./src/crypt/decrypter.ts"),u=r("./src/demux/aacdemuxer.ts"),l=r("./src/demux/mp4demuxer.ts"),o=r("./src/demux/tsdemuxer.ts"),h=r("./src/demux/mp3demuxer.ts"),p=r("./src/remux/mp4-remuxer.ts"),g=r("./src/remux/passthrough-remuxer.ts"),_=r("./src/demux/chunk-cache.ts"),A=r("./src/utils/mp4-tools.ts"),b=r("./src/utils/logger.ts");try{n=self.performance.now.bind(self.performance)}catch{b.logger.debug("Unable to use Performance API on this environment"),n=self.Date.now}var c=[{demux:o.default,remux:p.default},{demux:l.default,remux:g.default},{demux:u.default,remux:p.default},{demux:h.default,remux:p.default}],d=1024;c.forEach(function(L){var C=L.demux;d=Math.max(d,C.minProbeByteLength)});var f=function(){function L(R,E,S,k,w){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new _.default,this.observer=R,this.typeSupported=E,this.config=S,this.vendor=k,this.id=w}var C=L.prototype;return C.configure=function(R){this.transmuxConfig=R,this.decrypter&&this.decrypter.reset()},C.push=function(R,E,S,k){var w=this,O=S.transmuxing;O.executeStart=n();var I=new Uint8Array(R),P=this.cache,D=this.config,x=this.currentTransmuxState,M=this.transmuxConfig;k&&(this.currentTransmuxState=k);var B=function(J,ee){var ae=null;return J.byteLength>0&&ee!=null&&ee.key!=null&&ee.iv!==null&&ee.method!=null&&(ae=ee),ae}(I,E);if(B&&B.method==="AES-128"){var H=this.getDecrypter();if(!D.enableSoftwareAES)return this.decryptionPromise=H.webCryptoDecrypt(I,B.key.buffer,B.iv.buffer).then(function(J){var ee=w.push(J,null,S);return w.decryptionPromise=null,ee}),this.decryptionPromise;var $=H.softwareDecrypt(I,B.key.buffer,B.iv.buffer);if(!$)return O.executeEnd=n(),v(S);I=new Uint8Array($)}var q=k||x,te=q.contiguous,K=q.discontinuity,X=q.trackSwitch,z=q.accurateTimeOffset,Z=q.timeOffset,oe=M.audioCodec,fe=M.videoCodec,U=M.defaultInitPts,j=M.duration,F=M.initSegmentData;if((K||X)&&this.resetInitSegment(F,oe,fe,j),K&&this.resetInitialTimestamp(U),te||this.resetContiguity(),this.needsProbing(I,K,X)){if(P.dataLength){var N=P.flush();I=Object(A.appendUint8Array)(N,I)}this.configureTransmuxer(I,M)}var G=this.transmux(I,B,Z,z,S),W=this.currentTransmuxState;return W.contiguous=!0,W.discontinuity=!1,W.trackSwitch=!1,O.executeEnd=n(),G},C.flush=function(R){var E=this,S=R.transmuxing;S.executeStart=n();var k=this.decrypter,w=this.cache,O=this.currentTransmuxState,I=this.decryptionPromise;if(I)return I.then(function(){return E.flush(R)});var P=[],D=O.timeOffset;if(k){var x=k.flush();x&&P.push(this.push(x,null,R))}var M=w.dataLength;w.reset();var B=this.demuxer,H=this.remuxer;if(!B||!H)return M>=d&&this.observer.emit(i.Events.ERROR,i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),S.executeEnd=n(),[v(R)];var $=B.flush(D);return m($)?$.then(function(q){return E.flushRemux(P,q,R),P}):(this.flushRemux(P,$,R),P)},C.flushRemux=function(R,E,S){var k=E.audioTrack,w=E.avcTrack,O=E.id3Track,I=E.textTrack,P=this.currentTransmuxState,D=P.accurateTimeOffset,x=P.timeOffset;b.logger.log("[transmuxer.ts]: Flushed fragment "+S.sn+(S.part>-1?" p: "+S.part:"")+" of level "+S.level);var M=this.remuxer.remux(k,w,O,I,x,D,!0,this.id);R.push({remuxResult:M,chunkMeta:S}),S.transmuxing.executeEnd=n()},C.resetInitialTimestamp=function(R){var E=this.demuxer,S=this.remuxer;E&&S&&(E.resetTimeStamp(R),S.resetTimeStamp(R))},C.resetContiguity=function(){var R=this.demuxer,E=this.remuxer;R&&E&&(R.resetContiguity(),E.resetNextTimestamp())},C.resetInitSegment=function(R,E,S,k){var w=this.demuxer,O=this.remuxer;w&&O&&(w.resetInitSegment(E,S,k),O.resetInitSegment(R,E,S))},C.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},C.transmux=function(R,E,S,k,w){return E&&E.method==="SAMPLE-AES"?this.transmuxSampleAes(R,E,S,k,w):this.transmuxUnencrypted(R,S,k,w)},C.transmuxUnencrypted=function(R,E,S,k){var w=this.demuxer.demux(R,E,!1,!this.config.progressive),O=w.audioTrack,I=w.avcTrack,P=w.id3Track,D=w.textTrack;return{remuxResult:this.remuxer.remux(O,I,P,D,E,S,!1,this.id),chunkMeta:k}},C.transmuxSampleAes=function(R,E,S,k,w){var O=this;return this.demuxer.demuxSampleAes(R,E,S).then(function(I){return{remuxResult:O.remuxer.remux(I.audioTrack,I.avcTrack,I.id3Track,I.textTrack,S,k,!1,O.id),chunkMeta:w}})},C.configureTransmuxer=function(R,E){for(var S,k=this.config,w=this.observer,O=this.typeSupported,I=this.vendor,P=E.audioCodec,D=E.defaultInitPts,x=E.duration,M=E.initSegmentData,B=E.videoCodec,H=0,$=c.length;H<$;H++)if(c[H].demux.probe(R)){S=c[H];break}S||(b.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),S={demux:l.default,remux:g.default});var q=this.demuxer,te=this.remuxer,K=S.remux,X=S.demux;te&&te instanceof K||(this.remuxer=new K(w,k,O,I)),q&&q instanceof X||(this.demuxer=new X(w,k,O),this.probe=X.probe),this.resetInitSegment(M,P,B,x),this.resetInitialTimestamp(D)},C.needsProbing=function(R,E,S){return!this.demuxer||!this.remuxer||E||S},C.getDecrypter=function(){var R=this.decrypter;return R||(R=this.decrypter=new a.default(this.observer,this.config)),R},L}(),v=function(L){return{remuxResult:{},chunkMeta:L}};function m(L){return"then"in L&&L.then instanceof Function}var y=function(L,C,R,E,S){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=L,this.videoCodec=C,this.initSegmentData=R,this.duration=E,this.defaultInitPts=S},T=function(L,C,R,E,S){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.discontinuity=L,this.contiguous=C,this.accurateTimeOffset=R,this.trackSwitch=E,this.timeOffset=S}},"./src/demux/tsdemuxer.ts":function(e,t,r){r.r(t),r.d(t,"discardEPB",function(){return m});var n=r("./src/demux/adts.ts"),i=r("./src/demux/mpegaudio.ts"),s=r("./src/demux/exp-golomb.ts"),a=r("./src/demux/id3.ts"),u=r("./src/demux/sample-aes.ts"),l=r("./src/events.ts"),o=r("./src/utils/mp4-tools.ts"),h=r("./src/utils/logger.ts"),p=r("./src/errors.ts"),g={video:1,audio:2,id3:3,text:4},_=function(){function y(L,C,R){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=L,this.config=C,this.typeSupported=R}y.probe=function(L){var C=y.syncOffset(L);return!(C<0||(C&&h.logger.warn("MPEG2-TS detected but first sync word found @ offset "+C+", junk ahead ?"),0))},y.syncOffset=function(L){for(var C=Math.min(1e3,L.length-564),R=0;R<C;){if(L[R]===71&&L[R+188]===71&&L[R+376]===71)return R;R++}return-1},y.createTrack=function(L,C){return{container:L==="video"||L==="audio"?"video/mp2t":void 0,type:L,id:g[L],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:L==="audio"?C:void 0}};var T=y.prototype;return T.resetInitSegment=function(L,C,R){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=y.createTrack("video",R),this._audioTrack=y.createTrack("audio",R),this._id3Track=y.createTrack("id3",R),this._txtTrack=y.createTrack("text",R),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=L,this.videoCodec=C,this._duration=R},T.resetTimeStamp=function(){},T.resetContiguity=function(){var L=this._audioTrack,C=this._avcTrack,R=this._id3Track;L&&(L.pesData=null),C&&(C.pesData=null),R&&(R.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},T.demux=function(L,C,R,E){var S;R===void 0&&(R=!1),E===void 0&&(E=!1),R||(this.sampleAes=null);var k=this._avcTrack,w=this._audioTrack,O=this._id3Track,I=k.pid,P=k.pesData,D=w.pid,x=O.pid,M=w.pesData,B=O.pesData,H=!1,$=this.pmtParsed,q=this._pmtId,te=L.length;if(this.remainderData&&(te=(L=Object(o.appendUint8Array)(this.remainderData,L)).length,this.remainderData=null),te<188&&!E)return this.remainderData=L,{audioTrack:w,avcTrack:k,id3Track:O,textTrack:this._txtTrack};var K=Math.max(0,y.syncOffset(L));(te-=(te+K)%188)<L.byteLength&&!E&&(this.remainderData=new Uint8Array(L.buffer,te,L.buffer.byteLength-te));for(var X=K;X<te;X+=188)if(L[X]===71){var z=!!(64&L[X+1]),Z=((31&L[X+1])<<8)+L[X+2],oe=void 0;if((48&L[X+3])>>4>1){if((oe=X+5+L[X+4])===X+188)continue}else oe=X+4;switch(Z){case I:z&&(P&&(S=d(P))&&this.parseAVCPES(S,!1),P={data:[],size:0}),P&&(P.data.push(L.subarray(oe,X+188)),P.size+=X+188-oe);break;case D:z&&(M&&(S=d(M))&&(w.isAAC?this.parseAACPES(S):this.parseMPEGPES(S)),M={data:[],size:0}),M&&(M.data.push(L.subarray(oe,X+188)),M.size+=X+188-oe);break;case x:z&&(B&&(S=d(B))&&this.parseID3PES(S),B={data:[],size:0}),B&&(B.data.push(L.subarray(oe,X+188)),B.size+=X+188-oe);break;case 0:z&&(oe+=L[oe]+1),q=this._pmtId=b(L,oe);break;case q:z&&(oe+=L[oe]+1);var fe=c(L,oe,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,R);(I=fe.avc)>0&&(k.pid=I),(D=fe.audio)>0&&(w.pid=D,w.isAAC=fe.isAAC),(x=fe.id3)>0&&(O.pid=x),H&&!$&&(h.logger.log("reparse from beginning"),H=!1,X=K-188),$=this.pmtParsed=!0;break;case 17:case 8191:break;default:H=!0}}else this.observer.emit(l.Events.ERROR,l.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k.pesData=P,w.pesData=M,O.pesData=B;var U={audioTrack:w,avcTrack:k,id3Track:O,textTrack:this._txtTrack};return E&&this.extractRemainingSamples(U),U},T.flush=function(){var L,C=this.remainderData;return this.remainderData=null,L=C?this.demux(C,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(L),this.sampleAes?this.decrypt(L,this.sampleAes):L},T.extractRemainingSamples=function(L){var C,R=L.audioTrack,E=L.avcTrack,S=L.id3Track,k=E.pesData,w=R.pesData,O=S.pesData;k&&(C=d(k))?(this.parseAVCPES(C,!0),E.pesData=null):E.pesData=k,w&&(C=d(w))?(R.isAAC?this.parseAACPES(C):this.parseMPEGPES(C),R.pesData=null):(w!=null&&w.size&&h.logger.log("last AAC PES packet truncated,might overlap between fragments"),R.pesData=w),O&&(C=d(O))?(this.parseID3PES(C),S.pesData=null):S.pesData=O},T.demuxSampleAes=function(L,C,R){var E=this.demux(L,R,!0,!this.config.progressive),S=this.sampleAes=new u.default(this.observer,this.config,C);return this.decrypt(E,S)},T.decrypt=function(L,C){return new Promise(function(R){var E=L.audioTrack,S=L.avcTrack;E.samples&&E.isAAC?C.decryptAacSamples(E.samples,0,function(){S.samples?C.decryptAvcSamples(S.samples,0,0,function(){R(L)}):R(L)}):S.samples&&C.decryptAvcSamples(S.samples,0,0,function(){R(L)})})},T.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},T.parseAVCPES=function(L,C){var R,E=this,S=this._avcTrack,k=this.parseAVCNALu(L.data),w=this.avcSample,O=!1;L.data=null,w&&k.length&&!S.audFound&&(f(w,S),w=this.avcSample=A(!1,L.pts,L.dts,"")),k.forEach(function(I){switch(I.type){case 1:R=!0,w||(w=E.avcSample=A(!0,L.pts,L.dts,"")),w.frame=!0;var P=I.data;if(O&&P.length>4){var D=new s.default(P).readSliceType();D!==2&&D!==4&&D!==7&&D!==9||(w.key=!0)}break;case 5:R=!0,w||(w=E.avcSample=A(!0,L.pts,L.dts,"")),w.key=!0,w.frame=!0;break;case 6:R=!0;var x=new s.default(m(I.data));x.readUByte();for(var M=0,B=0,H=!1,$=0;!H&&x.bytesAvailable>1;){M=0;do M+=$=x.readUByte();while($===255);B=0;do B+=$=x.readUByte();while($===255);if(M===4&&x.bytesAvailable!==0){if(H=!0,x.readUByte()===181&&x.readUShort()===49&&x.readUInt()===1195456820&&x.readUByte()===3){for(var q=x.readUByte(),te=31&q,K=[q,x.readUByte()],X=0;X<te;X++)K.push(x.readUByte()),K.push(x.readUByte()),K.push(x.readUByte());v(E._txtTrack.samples,{type:3,pts:L.pts,bytes:K})}}else if(M===5&&x.bytesAvailable!==0){if(H=!0,B>16){for(var z=[],Z=0;Z<16;Z++)z.push(x.readUByte().toString(16)),Z!==3&&Z!==5&&Z!==7&&Z!==9||z.push("-");for(var oe=B-16,fe=new Uint8Array(oe),U=0;U<oe;U++)fe[U]=x.readUByte();v(E._txtTrack.samples,{pts:L.pts,payloadType:M,uuid:z.join(""),userData:Object(a.utf8ArrayToStr)(fe),userDataBytes:fe})}}else if(B<x.bytesAvailable)for(var j=0;j<B;j++)x.readUByte()}break;case 7:if(R=!0,O=!0,!S.sps){var F=new s.default(I.data).readSPS();S.width=F.width,S.height=F.height,S.pixelRatio=F.pixelRatio,S.sps=[I.data],S.duration=E._duration;for(var N=I.data.subarray(1,4),G="avc1.",W=0;W<3;W++){var J=N[W].toString(16);J.length<2&&(J="0"+J),G+=J}S.codec=G}break;case 8:R=!0,S.pps||(S.pps=[I.data]);break;case 9:R=!1,S.audFound=!0,w&&f(w,S),w=E.avcSample=A(!1,L.pts,L.dts,"");break;case 12:R=!1;break;default:R=!1,w&&(w.debug+="unknown NAL "+I.type+" ")}w&&R&&w.units.push(I)}),C&&w&&(f(w,S),this.avcSample=null)},T.getLastNalUnit=function(){var L,C,R=this.avcSample;if(!R||R.units.length===0){var E=this._avcTrack.samples;R=E[E.length-1]}if((L=R)!==null&&L!==void 0&&L.units){var S=R.units;C=S[S.length-1]}return C},T.parseAVCNALu=function(L){var C,R,E=L.byteLength,S=this._avcTrack,k=S.naluState||0,w=k,O=[],I=0,P=-1,D=0;for(k===-1&&(P=0,D=31&L[0],k=0,I=1);I<E;)if(C=L[I++],k)if(k!==1)if(C)if(C===1){if(P>=0){var x={data:L.subarray(P,I-k-1),type:D};O.push(x)}else{var M=this.getLastNalUnit();if(M&&(w&&I<=4-w&&M.state&&(M.data=M.data.subarray(0,M.data.byteLength-w)),(R=I-k-1)>0)){var B=new Uint8Array(M.data.byteLength+R);B.set(M.data,0),B.set(L.subarray(0,R),M.data.byteLength),M.data=B}}I<E?(P=I,D=31&L[I],k=0):k=-1}else k=0;else k=3;else k=C?0:2;else k=C?0:1;if(P>=0&&k>=0){var H={data:L.subarray(P,E),type:D,state:k};O.push(H)}if(O.length===0){var $=this.getLastNalUnit();if($){var q=new Uint8Array($.data.byteLength+L.byteLength);q.set($.data,0),q.set(L,$.data.byteLength),$.data=q}}return S.naluState=k,O},T.parseAACPES=function(L){var C,R,E,S,k,w=0,O=this._audioTrack,I=this.aacOverFlow,P=L.data;if(I){this.aacOverFlow=null;var D=I.sample.unit.byteLength,x=Math.min(I.missing,D),M=D-x;I.sample.unit.set(P.subarray(0,x),M),O.samples.push(I.sample),w=I.missing}for(C=w,R=P.length;C<R-1&&!n.isHeader(P,C);C++);if(C===w||(C<R-1?(E="AAC PES did not start with ADTS header,offset:"+C,S=!1):(E="no ADTS header found in AAC PES",S=!0),h.logger.warn("parsing error:"+E),this.observer.emit(l.Events.ERROR,l.Events.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:S,reason:E}),!S)){if(n.initTrackConfig(O,this.observer,P,C,this.audioCodec),L.pts!==void 0)k=L.pts;else{if(!I)return void h.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var B=n.getFrameDuration(O.samplerate);k=I.sample.pts+B}for(var H=0;C<R;){if(n.isHeader(P,C)){if(C+5<R){var $=n.appendFrame(O,P,C,k,H);if($){if(!$.missing){C+=$.length,H++;continue}this.aacOverFlow=$}}break}C++}}},T.parseMPEGPES=function(L){var C=L.data,R=C.length,E=0,S=0,k=L.pts;if(k!==void 0)for(;S<R;)if(i.isHeader(C,S)){var w=i.appendFrame(this._audioTrack,C,S,k,E);if(!w)break;S+=w.length,E++}else S++;else h.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},T.parseID3PES=function(L){L.pts!==void 0?this._id3Track.samples.push(L):h.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},y}();function A(y,T,L,C){return{key:y,frame:!1,pts:T,dts:L,units:[],debug:C,length:0}}function b(y,T){return(31&y[T+10])<<8|y[T+11]}function c(y,T,L,C){var R={audio:-1,avc:-1,id3:-1,isAAC:!0},E=T+3+((15&y[T+1])<<8|y[T+2])-4;for(T+=12+((15&y[T+10])<<8|y[T+11]);T<E;){var S=(31&y[T+1])<<8|y[T+2];switch(y[T]){case 207:if(!C){h.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:R.audio===-1&&(R.audio=S);break;case 21:R.id3===-1&&(R.id3=S);break;case 219:if(!C){h.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:R.avc===-1&&(R.avc=S);break;case 3:case 4:L?R.audio===-1&&(R.audio=S,R.isAAC=!1):h.logger.log("MPEG audio found, not supported in this browser");break;case 36:h.logger.warn("Unsupported HEVC stream type found")}T+=5+((15&y[T+3])<<8|y[T+4])}return R}function d(y){var T,L,C,R,E,S=0,k=y.data;if(!y||y.size===0)return null;for(;k[0].length<19&&k.length>1;){var w=new Uint8Array(k[0].length+k[1].length);w.set(k[0]),w.set(k[1],k[0].length),k[0]=w,k.splice(1,1)}if(((T=k[0])[0]<<16)+(T[1]<<8)+T[2]===1){if((L=(T[4]<<8)+T[5])&&L>y.size-6)return null;var O=T[7];192&O&&(R=536870912*(14&T[9])+4194304*(255&T[10])+16384*(254&T[11])+128*(255&T[12])+(254&T[13])/2,64&O?R-(E=536870912*(14&T[14])+4194304*(255&T[15])+16384*(254&T[16])+128*(255&T[17])+(254&T[18])/2)>54e5&&(h.logger.warn(Math.round((R-E)/9e4)+"s delta between PTS and DTS, align them"),R=E):E=R);var I=(C=T[8])+9;if(y.size<=I)return null;y.size-=I;for(var P=new Uint8Array(y.size),D=0,x=k.length;D<x;D++){var M=(T=k[D]).byteLength;if(I){if(I>M){I-=M;continue}T=T.subarray(I),M-=I,I=0}P.set(T,S),S+=M}return L&&(L-=C+3),{data:P,pts:R,dts:E,len:L}}return null}function f(y,T){if(y.units.length&&y.frame){if(y.pts===void 0){var L=T.samples,C=L.length;if(!C)return void T.dropped++;var R=L[C-1];y.pts=R.pts,y.dts=R.dts}T.samples.push(y)}y.debug.length&&h.logger.log(y.pts+"/"+y.dts+":"+y.debug)}function v(y,T){var L=y.length;if(L>0){if(T.pts>=y[L-1].pts)y.push(T);else for(var C=L-1;C>=0;C--)if(T.pts<y[C].pts){y.splice(C,0,T);break}}else y.push(T)}function m(y){for(var T=y.byteLength,L=[],C=1;C<T-2;)y[C]===0&&y[C+1]===0&&y[C+2]===3?(L.push(C+2),C+=2):C++;if(L.length===0)return y;var R=T-L.length,E=new Uint8Array(R),S=0;for(C=0;C<R;S++,C++)S===L[0]&&(S++,L.shift()),E[C]=y[S];return E}_.minProbeByteLength=188,t.default=_},"./src/errors.ts":function(e,t,r){var n,i,s,a;r.r(t),r.d(t,"ErrorTypes",function(){return n}),r.d(t,"ErrorDetails",function(){return s}),(i=n||(n={})).NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",(a=s||(s={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",a.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",a.KEY_SYSTEM_NO_SESSION="keySystemNoSession",a.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",a.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",a.MANIFEST_LOAD_ERROR="manifestLoadError",a.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",a.MANIFEST_PARSING_ERROR="manifestParsingError",a.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",a.LEVEL_EMPTY_ERROR="levelEmptyError",a.LEVEL_LOAD_ERROR="levelLoadError",a.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",a.LEVEL_SWITCH_ERROR="levelSwitchError",a.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",a.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",a.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",a.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",a.FRAG_LOAD_ERROR="fragLoadError",a.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",a.FRAG_DECRYPT_ERROR="fragDecryptError",a.FRAG_PARSING_ERROR="fragParsingError",a.REMUX_ALLOC_ERROR="remuxAllocError",a.KEY_LOAD_ERROR="keyLoadError",a.KEY_LOAD_TIMEOUT="keyLoadTimeOut",a.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",a.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",a.BUFFER_APPEND_ERROR="bufferAppendError",a.BUFFER_APPENDING_ERROR="bufferAppendingError",a.BUFFER_STALLED_ERROR="bufferStalledError",a.BUFFER_FULL_ERROR="bufferFullError",a.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",a.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",a.INTERNAL_EXCEPTION="internalException",a.INTERNAL_ABORTED="aborted",a.UNKNOWN="unknown"},"./src/events.ts":function(e,t,r){var n,i;r.r(t),r.d(t,"Events",function(){return n}),(i=n||(n={})).MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached"},"./src/hls.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return f});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/playlist-loader.ts"),s=r("./src/loader/key-loader.ts"),a=r("./src/controller/id3-track-controller.ts"),u=r("./src/controller/latency-controller.ts"),l=r("./src/controller/level-controller.ts"),o=r("./src/controller/fragment-tracker.ts"),h=r("./src/controller/stream-controller.ts"),p=r("./src/is-supported.ts"),g=r("./src/utils/logger.ts"),_=r("./src/config.ts"),A=r("./node_modules/eventemitter3/index.js"),b=r("./src/events.ts"),c=r("./src/errors.ts");function d(v,m){for(var y=0;y<m.length;y++){var T=m[y];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var f=function(){function v(C){C===void 0&&(C={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new A.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._media=null,this.url=null;var R=this.config=Object(_.mergeConfig)(v.DefaultConfig,C);this.userConfig=C,Object(g.enableLogs)(R.debug),this._autoLevelCapping=-1,R.progressive&&Object(_.enableStreamingMode)(R);var E=R.abrController,S=R.bufferController,k=R.capLevelController,w=R.fpsController,O=this.abrController=new E(this),I=this.bufferController=new S(this),P=this.capLevelController=new k(this),D=new w(this),x=new i.default(this),M=new s.default(this),B=new a.default(this),H=this.levelController=new l.default(this),$=new o.FragmentTracker(this),q=this.streamController=new h.default(this,$);P.setStreamController(q),D.setStreamController(q);var te=[H,q];this.networkControllers=te;var K=[x,M,O,I,P,D,B,$];this.audioTrackController=this.createController(R.audioTrackController,null,te),this.createController(R.audioStreamController,$,te),this.subtitleTrackController=this.createController(R.subtitleTrackController,null,te),this.createController(R.subtitleStreamController,$,te),this.createController(R.timelineController,null,K),this.emeController=this.createController(R.emeController,null,K),this.latencyController=this.createController(u.default,null,K),this.coreComponents=K}v.isSupported=function(){return Object(p.isSupported)()};var m,y,T,L=v.prototype;return L.createController=function(C,R,E){if(C){var S=R?new C(this,R):new C(this);return E&&E.push(S),S}return null},L.on=function(C,R,E){E===void 0&&(E=this),this._emitter.on(C,R,E)},L.once=function(C,R,E){E===void 0&&(E=this),this._emitter.once(C,R,E)},L.removeAllListeners=function(C){this._emitter.removeAllListeners(C)},L.off=function(C,R,E,S){E===void 0&&(E=this),this._emitter.off(C,R,E,S)},L.listeners=function(C){return this._emitter.listeners(C)},L.emit=function(C,R,E){return this._emitter.emit(C,R,E)},L.trigger=function(C,R){if(this.config.debug)return this.emit(C,C,R);try{return this.emit(C,C,R)}catch(E){g.logger.error("An internal error happened while handling event "+C+'. Error message: "'+E.message+'". Here is a stacktrace:',E),this.trigger(b.Events.ERROR,{type:c.ErrorTypes.OTHER_ERROR,details:c.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:C,error:E})}return!1},L.listenerCount=function(C){return this._emitter.listenerCount(C)},L.destroy=function(){g.logger.log("destroy"),this.trigger(b.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(C){return C.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(C){return C.destroy()}),this.coreComponents.length=0},L.attachMedia=function(C){g.logger.log("attachMedia"),this._media=C,this.trigger(b.Events.MEDIA_ATTACHING,{media:C})},L.detachMedia=function(){g.logger.log("detachMedia"),this.trigger(b.Events.MEDIA_DETACHING,void 0),this._media=null},L.loadSource=function(C){this.stopLoad();var R=this.media,E=this.url,S=this.url=n.buildAbsoluteURL(self.location.href,C,{alwaysNormalize:!0});g.logger.log("loadSource:"+S),R&&E&&E!==S&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(R)),this.trigger(b.Events.MANIFEST_LOADING,{url:C})},L.startLoad=function(C){C===void 0&&(C=-1),g.logger.log("startLoad("+C+")"),this.networkControllers.forEach(function(R){R.startLoad(C)})},L.stopLoad=function(){g.logger.log("stopLoad"),this.networkControllers.forEach(function(C){C.stopLoad()})},L.swapAudioCodec=function(){g.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},L.recoverMediaError=function(){g.logger.log("recoverMediaError");var C=this._media;this.detachMedia(),C&&this.attachMedia(C)},L.removeLevel=function(C,R){R===void 0&&(R=0),this.levelController.removeLevel(C,R)},m=v,T=[{key:"version",get:function(){return"1.0.10"}},{key:"Events",get:function(){return b.Events}},{key:"ErrorTypes",get:function(){return c.ErrorTypes}},{key:"ErrorDetails",get:function(){return c.ErrorDetails}},{key:"DefaultConfig",get:function(){return v.defaultConfig?v.defaultConfig:_.hlsDefaultConfig},set:function(C){v.defaultConfig=C}}],(y=[{key:"levels",get:function(){var C=this.levelController.levels;return C||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(C){g.logger.log("set currentLevel:"+C),this.loadLevel=C,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(C){g.logger.log("set nextLevel:"+C),this.levelController.manualLevel=C,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(C){g.logger.log("set loadLevel:"+C),this.levelController.manualLevel=C}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(C){this.levelController.nextLoadLevel=C}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(C){g.logger.log("set firstLevel:"+C),this.levelController.firstLevel=C}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(C){g.logger.log("set startLevel:"+C),C!==-1&&(C=Math.max(C,this.minAutoLevel)),this.levelController.startLevel=C}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(C){var R=!!C;R!==this.config.capLevelToPlayerSize&&(R?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=R)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(C){this._autoLevelCapping!==C&&(g.logger.log("set autoLevelCapping:"+C),this._autoLevelCapping=C)}},{key:"bandwidthEstimate",get:function(){var C=this.abrController.bwEstimator;return C?C.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var C=this.levels,R=this.config.minAutoBitrate;if(!C)return 0;for(var E=C.length,S=0;S<E;S++)if(C[S].maxBitrate>R)return S;return 0}},{key:"maxAutoLevel",get:function(){var C=this.levels,R=this.autoLevelCapping;return R===-1&&C&&C.length?C.length-1:R}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(C){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,C)}},{key:"audioTracks",get:function(){var C=this.audioTrackController;return C?C.audioTracks:[]}},{key:"audioTrack",get:function(){var C=this.audioTrackController;return C?C.audioTrack:-1},set:function(C){var R=this.audioTrackController;R&&(R.audioTrack=C)}},{key:"subtitleTracks",get:function(){var C=this.subtitleTrackController;return C?C.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var C=this.subtitleTrackController;return C?C.subtitleTrack:-1},set:function(C){var R=this.subtitleTrackController;R&&(R.subtitleTrack=C)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var C=this.subtitleTrackController;return!!C&&C.subtitleDisplay},set:function(C){var R=this.subtitleTrackController;R&&(R.subtitleDisplay=C)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(C){this.config.lowLatencyMode=C}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&d(m.prototype,y),T&&d(m,T),v}();f.defaultConfig=void 0},"./src/is-supported.ts":function(e,t,r){r.r(t),r.d(t,"isSupported",function(){return s}),r.d(t,"changeTypeSupported",function(){return a});var n=r("./src/utils/mediasource-helper.ts");function i(){return self.SourceBuffer||self.WebKitSourceBuffer}function s(){var u=Object(n.getMediaSource)();if(!u)return!1;var l=i(),o=u&&typeof u.isTypeSupported=="function"&&u.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),h=!l||l.prototype&&typeof l.prototype.appendBuffer=="function"&&typeof l.prototype.remove=="function";return!!o&&!!h}function a(){var u,l=i();return typeof(l==null||(u=l.prototype)===null||u===void 0?void 0:u.changeType)=="function"}},"./src/loader/fragment-loader.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return p}),r.d(t,"LoadError",function(){return _});var n=r("./src/polyfills/number.ts"),i=r("./src/errors.ts");function s(A){var b=typeof Map=="function"?new Map:void 0;return(s=function(c){if(c===null||(d=c,Function.toString.call(d).indexOf("[native code]")===-1))return c;var d;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(b!==void 0){if(b.has(c))return b.get(c);b.set(c,f)}function f(){return a(c,arguments,o(this).constructor)}return f.prototype=Object.create(c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l(f,c)})(A)}function a(A,b,c){return(a=u()?Reflect.construct:function(d,f,v){var m=[null];m.push.apply(m,f);var y=new(Function.bind.apply(d,m));return v&&l(y,v.prototype),y}).apply(null,arguments)}function u(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(A,b){return(l=Object.setPrototypeOf||function(c,d){return c.__proto__=d,c})(A,b)}function o(A){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(A)}var h=Math.pow(2,17),p=function(){function A(c){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=c}var b=A.prototype;return b.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},b.abort=function(){this.loader&&this.loader.abort()},b.load=function(c,d){var f=this,v=c.url;if(!v)return Promise.reject(new _({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:c,networkDetails:null},"Fragment does not have a "+(v?"part list":"url")));this.abort();var m=this.config,y=m.fLoader,T=m.loader;return new Promise(function(L,C){f.loader&&f.loader.destroy();var R=f.loader=c.loader=y?new y(m):new T(m),E=g(c),S={timeout:m.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:m.fragLoadingMaxRetryTimeout,highWaterMark:h};c.stats=R.stats,R.load(E,S,{onSuccess:function(k,w,O,I){f.resetLoader(c,R),L({frag:c,part:null,payload:k.data,networkDetails:I})},onError:function(k,w,O){f.resetLoader(c,R),C(new _({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:c,response:k,networkDetails:O}))},onAbort:function(k,w,O){f.resetLoader(c,R),C(new _({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:c,networkDetails:O}))},onTimeout:function(k,w,O){f.resetLoader(c,R),C(new _({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:c,networkDetails:O}))},onProgress:function(k,w,O,I){d&&d({frag:c,part:null,payload:O,networkDetails:I})}})})},b.loadPart=function(c,d,f){var v=this;this.abort();var m=this.config,y=m.fLoader,T=m.loader;return new Promise(function(L,C){v.loader&&v.loader.destroy();var R=v.loader=c.loader=y?new y(m):new T(m),E=g(c,d),S={timeout:m.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:m.fragLoadingMaxRetryTimeout,highWaterMark:h};d.stats=R.stats,R.load(E,S,{onSuccess:function(k,w,O,I){v.resetLoader(c,R),v.updateStatsFromPart(c,d);var P={frag:c,part:d,payload:k.data,networkDetails:I};f(P),L(P)},onError:function(k,w,O){v.resetLoader(c,R),C(new _({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:c,part:d,response:k,networkDetails:O}))},onAbort:function(k,w,O){c.stats.aborted=d.stats.aborted,v.resetLoader(c,R),C(new _({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:c,part:d,networkDetails:O}))},onTimeout:function(k,w,O){v.resetLoader(c,R),C(new _({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:c,part:d,networkDetails:O}))}})})},b.updateStatsFromPart=function(c,d){var f=c.stats,v=d.stats,m=v.total;if(f.loaded+=v.loaded,m){var y=Math.round(c.duration/d.duration),T=Math.min(Math.round(f.loaded/m),y),L=(y-T)*Math.round(f.loaded/T);f.total=f.loaded+L}else f.total=Math.max(f.loaded,f.total);var C=f.loading,R=v.loading;C.start?C.first+=R.first-R.start:(C.start=R.start,C.first=R.first),C.end=R.end},b.resetLoader=function(c,d){c.loader=null,this.loader===d&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),d.destroy()},A}();function g(A,b){b===void 0&&(b=null);var c=b||A,d={frag:A,part:b,responseType:"arraybuffer",url:c.url,rangeStart:0,rangeEnd:0},f=c.byteRangeStartOffset,v=c.byteRangeEndOffset;return Object(n.isFiniteNumber)(f)&&Object(n.isFiniteNumber)(v)&&(d.rangeStart=f,d.rangeEnd=v),d}var _=function(A){var b,c;function d(f){for(var v,m=arguments.length,y=new Array(m>1?m-1:0),T=1;T<m;T++)y[T-1]=arguments[T];return(v=A.call.apply(A,[this].concat(y))||this).data=void 0,v.data=f,v}return c=A,(b=d).prototype=Object.create(c.prototype),b.prototype.constructor=b,l(b,c),d}(s(Error))},"./src/loader/fragment.ts":function(e,t,r){r.r(t),r.d(t,"ElementaryStreamTypes",function(){return n}),r.d(t,"BaseSegment",function(){return A}),r.d(t,"Fragment",function(){return b}),r.d(t,"Part",function(){return c});var n,i,s=r("./src/polyfills/number.ts"),a=r("./node_modules/url-toolkit/src/url-toolkit.js"),u=r("./src/utils/logger.ts"),l=r("./src/loader/level-key.ts"),o=r("./src/loader/load-stats.ts");function h(d,f){d.prototype=Object.create(f.prototype),d.prototype.constructor=d,p(d,f)}function p(d,f){return(p=Object.setPrototypeOf||function(v,m){return v.__proto__=m,v})(d,f)}function g(d,f){for(var v=0;v<f.length;v++){var m=f[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}function _(d,f,v){return f&&g(d.prototype,f),v&&g(d,v),d}(i=n||(n={})).AUDIO="audio",i.VIDEO="video",i.AUDIOVIDEO="audiovideo";var A=function(){function d(f){var v;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((v={})[n.AUDIO]=null,v[n.VIDEO]=null,v[n.AUDIOVIDEO]=null,v),this.baseurl=f}return d.prototype.setByteRange=function(f,v){var m=f.split("@",2),y=[];m.length===1?y[0]=v?v.byteRangeEndOffset:0:y[0]=parseInt(m[1]),y[1]=parseInt(m[0])+y[0],this._byteRange=y},_(d,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(f){this._url=f}}]),d}(),b=function(d){function f(m,y){var T;return(T=d.call(this,y)||this)._decryptdata=null,T.rawProgramDateTime=null,T.programDateTime=null,T.tagList=[],T.duration=0,T.sn=0,T.levelkey=void 0,T.type=void 0,T.loader=null,T.level=-1,T.cc=0,T.startPTS=void 0,T.endPTS=void 0,T.appendedPTS=void 0,T.startDTS=void 0,T.endDTS=void 0,T.start=0,T.deltaPTS=void 0,T.maxStartPTS=void 0,T.minEndPTS=void 0,T.stats=new o.LoadStats,T.urlId=0,T.data=void 0,T.bitrateTest=!1,T.title=null,T.initSegment=null,T.type=m,T}h(f,d);var v=f.prototype;return v.createInitializationVector=function(m){for(var y=new Uint8Array(16),T=12;T<16;T++)y[T]=m>>8*(15-T)&255;return y},v.setDecryptDataFromLevelKey=function(m,y){var T=m;return(m==null?void 0:m.method)==="AES-128"&&m.uri&&!m.iv&&((T=l.LevelKey.fromURI(m.uri)).method=m.method,T.iv=this.createInitializationVector(y),T.keyFormat="identity"),T},v.setElementaryStreamInfo=function(m,y,T,L,C,R){R===void 0&&(R=!1);var E=this.elementaryStreams,S=E[m];S?(S.startPTS=Math.min(S.startPTS,y),S.endPTS=Math.max(S.endPTS,T),S.startDTS=Math.min(S.startDTS,L),S.endDTS=Math.max(S.endDTS,C)):E[m]={startPTS:y,endPTS:T,startDTS:L,endDTS:C,partial:R}},v.clearElementaryStreamInfo=function(){var m=this.elementaryStreams;m[n.AUDIO]=null,m[n.VIDEO]=null,m[n.AUDIOVIDEO]=null},_(f,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var m=this.sn;typeof m!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&u.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),m=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,m)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(s.isFiniteNumber)(this.programDateTime))return null;var m=Object(s.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*m}},{key:"encrypted",get:function(){var m;return!((m=this.decryptdata)===null||m===void 0||!m.keyFormat||!this.decryptdata.uri)}}]),f}(A),c=function(d){function f(v,m,y,T,L){var C;(C=d.call(this,y)||this).fragOffset=0,C.duration=0,C.gap=!1,C.independent=!1,C.relurl=void 0,C.fragment=void 0,C.index=void 0,C.stats=new o.LoadStats,C.duration=v.decimalFloatingPoint("DURATION"),C.gap=v.bool("GAP"),C.independent=v.bool("INDEPENDENT"),C.relurl=v.enumeratedString("URI"),C.fragment=m,C.index=T;var R=v.enumeratedString("BYTERANGE");return R&&C.setByteRange(R,L),L&&(C.fragOffset=L.fragOffset+L.duration),C}return h(f,d),_(f,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var v=this.elementaryStreams;return!!(v.audio||v.video||v.audiovideo)}}]),f}(A)},"./src/loader/key-loader.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return a});var n=r("./src/events.ts"),i=r("./src/errors.ts"),s=r("./src/utils/logger.ts"),a=function(){function u(o){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=o,this._registerListeners()}var l=u.prototype;return l._registerListeners=function(){this.hls.on(n.Events.KEY_LOADING,this.onKeyLoading,this)},l._unregisterListeners=function(){this.hls.off(n.Events.KEY_LOADING,this.onKeyLoading)},l.destroy=function(){for(var o in this._unregisterListeners(),this.loaders){var h=this.loaders[o];h&&h.destroy()}this.loaders={}},l.onKeyLoading=function(o,h){var p=h.frag,g=p.type,_=this.loaders[g];if(p.decryptdata){var A=p.decryptdata.uri;if(A!==this.decrypturl||this.decryptkey===null){var b=this.hls.config;if(_&&(s.logger.warn("abort previous key loader for type:"+g),_.abort()),!A)return void s.logger.warn("key uri is falsy");var c=b.loader,d=p.loader=this.loaders[g]=new c(b);this.decrypturl=A,this.decryptkey=null;var f={url:A,frag:p,responseType:"arraybuffer"},v={timeout:b.fragLoadingTimeOut,maxRetry:0,retryDelay:b.fragLoadingRetryDelay,maxRetryDelay:b.fragLoadingMaxRetryTimeout,highWaterMark:0},m={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};d.load(f,v,m)}else this.decryptkey&&(p.decryptdata.key=this.decryptkey,this.hls.trigger(n.Events.KEY_LOADED,{frag:p}))}else s.logger.warn("Missing decryption data on fragment in onKeyLoading")},l.loadsuccess=function(o,h,p){var g=p.frag;g.decryptdata?(this.decryptkey=g.decryptdata.key=new Uint8Array(o.data),g.loader=null,delete this.loaders[g.type],this.hls.trigger(n.Events.KEY_LOADED,{frag:g})):s.logger.error("after key load, decryptdata unset")},l.loaderror=function(o,h){var p=h.frag,g=p.loader;g&&g.abort(),delete this.loaders[p.type],this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:p,response:o})},l.loadtimeout=function(o,h){var p=h.frag,g=p.loader;g&&g.abort(),delete this.loaders[p.type],this.hls.trigger(n.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:p})},u}()},"./src/loader/level-details.ts":function(e,t,r){r.r(t),r.d(t,"LevelDetails",function(){return s});var n=r("./src/polyfills/number.ts");function i(a,u){for(var l=0;l<u.length;l++){var o=u[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}var s=function(){function a(o){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=o}var u,l;return a.prototype.reloaded=function(o){if(!o)return this.advanced=!0,void(this.updated=!0);var h=this.lastPartSn-o.lastPartSn,p=this.lastPartIndex-o.lastPartIndex;this.updated=this.endSN!==o.endSN||!!p||!!h,this.advanced=this.endSN>o.endSN||h>0||h===0&&p>0,this.updated||this.advanced?this.misses=Math.floor(.6*o.misses):this.misses=o.misses+1,this.availabilityDelay=o.availabilityDelay},u=a,(l=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(n.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var o=this.driftEndTime-this.driftStartTime;return o>0?1e3*(this.driftEnd-this.driftStart)/o:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var o;return(o=this.partList)!==null&&o!==void 0&&o.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var o;return(o=this.fragments)!==null&&o!==void 0&&o.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var o;return(o=this.partList)!==null&&o!==void 0&&o.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var o;return(o=this.partList)!==null&&o!==void 0&&o.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&i(u.prototype,l),a}()},"./src/loader/level-key.ts":function(e,t,r){r.r(t),r.d(t,"LevelKey",function(){return s});var n=r("./node_modules/url-toolkit/src/url-toolkit.js");function i(a,u){for(var l=0;l<u.length;l++){var o=u[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}var s=function(){function a(o,h){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=h?Object(n.buildAbsoluteURL)(o,h,{alwaysNormalize:!0}):o}var u,l;return a.fromURL=function(o,h){return new a(o,h)},a.fromURI=function(o){return new a(o)},u=a,(l=[{key:"uri",get:function(){return this._uri}}])&&i(u.prototype,l),a}()},"./src/loader/load-stats.ts":function(e,t,r){r.r(t),r.d(t,"LoadStats",function(){return n});var n=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return c});var n=r("./src/polyfills/number.ts"),i=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/loader/fragment.ts"),a=r("./src/loader/level-details.ts"),u=r("./src/loader/level-key.ts"),l=r("./src/utils/attr-list.ts"),o=r("./src/utils/logger.ts"),h=r("./src/utils/codecs.ts"),p=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,g=/#EXT-X-MEDIA:(.*)/g,_=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),A=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),b=/\.(mp4|m4s|m4v|m4a)$/i,c=function(){function m(){}return m.findGroup=function(y,T){for(var L=0;L<y.length;L++){var C=y[L];if(C.id===T)return C}},m.convertAVC1ToAVCOTI=function(y){var T=y.split(".");if(T.length>2){var L=T.shift()+".";return L+=parseInt(T.shift()).toString(16),L+=("000"+parseInt(T.shift()).toString(16)).substr(-4)}return y},m.resolve=function(y,T){return i.buildAbsoluteURL(T,y,{alwaysNormalize:!0})},m.parseMasterPlaylist=function(y,T){var L,C=[],R={},E=!1;for(p.lastIndex=0;(L=p.exec(y))!=null;)if(L[1]){var S=new l.AttrList(L[1]),k={attrs:S,bitrate:S.decimalInteger("AVERAGE-BANDWIDTH")||S.decimalInteger("BANDWIDTH"),name:S.NAME,url:m.resolve(L[2],T)},w=S.decimalResolution("RESOLUTION");w&&(k.width=w.width,k.height=w.height),d((S.CODECS||"").split(/[ ,]+/).filter(function(I){return I}),k),k.videoCodec&&k.videoCodec.indexOf("avc1")!==-1&&(k.videoCodec=m.convertAVC1ToAVCOTI(k.videoCodec)),C.push(k)}else if(L[3]){var O=new l.AttrList(L[3]);O["DATA-ID"]&&(E=!0,R[O["DATA-ID"]]=O)}return{levels:C,sessionData:E?R:null}},m.parseMasterPlaylistMedia=function(y,T,L,C){var R;C===void 0&&(C=[]);var E=[],S=0;for(g.lastIndex=0;(R=g.exec(y))!==null;){var k=new l.AttrList(R[1]);if(k.TYPE===L){var w={attrs:k,bitrate:0,id:S++,groupId:k["GROUP-ID"],instreamId:k["INSTREAM-ID"],name:k.NAME||k.LANGUAGE||"",type:L,default:k.bool("DEFAULT"),autoselect:k.bool("AUTOSELECT"),forced:k.bool("FORCED"),lang:k.LANGUAGE,url:k.URI?m.resolve(k.URI,T):""};if(C.length){var O=m.findGroup(C,w.groupId)||C[0];f(w,O,"audioCodec"),f(w,O,"textCodec")}E.push(w)}}return E},m.parseLevelPlaylist=function(y,T,L,C,R){var E,S,k,w=new a.LevelDetails(T),O=w.fragments,I=null,P=0,D=0,x=0,M=0,B=null,H=new s.Fragment(C,T),$=-1,q=!1;for(_.lastIndex=0,w.m3u8=y;(E=_.exec(y))!==null;){q&&(q=!1,(H=new s.Fragment(C,T)).start=x,H.sn=P,H.cc=M,H.level=L,I&&(H.initSegment=I,H.rawProgramDateTime=I.rawProgramDateTime));var te=E[1];if(te){H.duration=parseFloat(te);var K=(" "+E[2]).slice(1);H.title=K||null,H.tagList.push(K?["INF",te,K]:["INF",te])}else if(E[3])Object(n.isFiniteNumber)(H.duration)&&(H.start=x,k&&(H.levelkey=k),H.sn=P,H.level=L,H.cc=M,H.urlId=R,O.push(H),H.relurl=(" "+E[3]).slice(1),v(H,B),B=H,x+=H.duration,P++,D=0,q=!0);else if(E[4]){var X=(" "+E[4]).slice(1);B?H.setByteRange(X,B):H.setByteRange(X)}else if(E[5])H.rawProgramDateTime=(" "+E[5]).slice(1),H.tagList.push(["PROGRAM-DATE-TIME",H.rawProgramDateTime]),$===-1&&($=O.length);else{if(!(E=E[0].match(A))){o.logger.warn("No matches on slow regex match for level playlist!");continue}for(S=1;S<E.length&&E[S]===void 0;S++);var z=(" "+E[S]).slice(1),Z=(" "+E[S+1]).slice(1),oe=E[S+2]?(" "+E[S+2]).slice(1):"";switch(z){case"PLAYLIST-TYPE":w.type=Z.toUpperCase();break;case"MEDIA-SEQUENCE":P=w.startSN=parseInt(Z);break;case"SKIP":var fe=new l.AttrList(Z),U=fe.decimalInteger("SKIPPED-SEGMENTS");if(Object(n.isFiniteNumber)(U)){w.skippedSegments=U;for(var j=U;j--;)O.unshift(null);P+=U}var F=fe.enumeratedString("RECENTLY-REMOVED-DATERANGES");F&&(w.recentlyRemovedDateranges=F.split("	"));break;case"TARGETDURATION":w.targetduration=parseFloat(Z);break;case"VERSION":w.version=parseInt(Z);break;case"EXTM3U":break;case"ENDLIST":w.live=!1;break;case"#":(Z||oe)&&H.tagList.push(oe?[Z,oe]:[Z]);break;case"DIS":M++;case"GAP":H.tagList.push([z]);break;case"BITRATE":H.tagList.push([z,Z]);break;case"DISCONTINUITY-SEQ":M=parseInt(Z);break;case"KEY":var N,G=new l.AttrList(Z),W=G.enumeratedString("METHOD"),J=G.URI,ee=G.hexadecimalInteger("IV"),ae=G.enumeratedString("KEYFORMATVERSIONS"),ne=G.enumeratedString("KEYID"),re=(N=G.enumeratedString("KEYFORMAT"))!=null?N:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(re)>-1){o.logger.warn("Keyformat "+re+" is not supported from the manifest");continue}if(re!=="identity")continue;W&&(k=u.LevelKey.fromURL(T,J),J&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(W)>=0&&(k.method=W,k.keyFormat=re,ne&&(k.keyID=ne),ae&&(k.keyFormatVersions=ae),k.iv=ee));break;case"START":var V=new l.AttrList(Z).decimalFloatingPoint("TIME-OFFSET");Object(n.isFiniteNumber)(V)&&(w.startTimeOffset=V);break;case"MAP":var Y=new l.AttrList(Z);H.relurl=Y.URI,Y.BYTERANGE&&H.setByteRange(Y.BYTERANGE),H.level=L,H.sn="initSegment",k&&(H.levelkey=k),H.initSegment=null,I=H,q=!0;break;case"SERVER-CONTROL":var ie=new l.AttrList(Z);w.canBlockReload=ie.bool("CAN-BLOCK-RELOAD"),w.canSkipUntil=ie.optionalFloat("CAN-SKIP-UNTIL",0),w.canSkipDateRanges=w.canSkipUntil>0&&ie.bool("CAN-SKIP-DATERANGES"),w.partHoldBack=ie.optionalFloat("PART-HOLD-BACK",0),w.holdBack=ie.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var ue=new l.AttrList(Z);w.partTarget=ue.decimalFloatingPoint("PART-TARGET");break;case"PART":var de=w.partList;de||(de=w.partList=[]);var pe=D>0?de[de.length-1]:void 0,be=D++,me=new s.Part(new l.AttrList(Z),H,T,be,pe);de.push(me),H.duration+=me.duration;break;case"PRELOAD-HINT":var Te=new l.AttrList(Z);w.preloadHint=Te;break;case"RENDITION-REPORT":var je=new l.AttrList(Z);w.renditionReports=w.renditionReports||[],w.renditionReports.push(je);break;default:o.logger.warn("line parsed but not handled: "+E)}}}B&&!B.relurl?(O.pop(),x-=B.duration,w.partList&&(w.fragmentHint=B)):w.partList&&(v(H,B),H.cc=M,w.fragmentHint=H);var pt=O.length,It=O[0],Ft=O[pt-1];if((x+=w.skippedSegments*w.targetduration)>0&&pt&&Ft){w.averagetargetduration=x/pt;var rr=Ft.sn;w.endSN=rr!=="initSegment"?rr:0,It&&(w.startCC=It.cc,It.initSegment||w.fragments.every(function(Me){return Me.relurl&&(He=Me.relurl,b.test((Kt=($t=i.parseURL(He))===null||$t===void 0?void 0:$t.path)!=null?Kt:""));var He,Kt,$t})&&(o.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(H=new s.Fragment(C,T)).relurl=Ft.relurl,H.level=L,H.sn="initSegment",It.initSegment=H,w.needSidxRanges=!0))}else w.endSN=0,w.startCC=0;return w.fragmentHint&&(x+=w.fragmentHint.duration),w.totalduration=x,w.endCC=M,$>0&&function(Me,He){for(var Kt=Me[He],$t=He;$t--;){var jr=Me[$t];if(!jr)return;jr.programDateTime=Kt.programDateTime-1e3*jr.duration,Kt=jr}}(O,$),w},m}();function d(m,y){["video","audio","text"].forEach(function(T){var L=m.filter(function(R){return Object(h.isCodecType)(R,T)});if(L.length){var C=L.filter(function(R){return R.lastIndexOf("avc1",0)===0||R.lastIndexOf("mp4a",0)===0});y[T+"Codec"]=C.length>0?C[0]:L[0],m=m.filter(function(R){return L.indexOf(R)===-1})}}),y.unknownCodecs=m}function f(m,y,T){var L=y[T];L&&(m[T]=L)}function v(m,y){m.rawProgramDateTime?m.programDateTime=Date.parse(m.rawProgramDateTime):y!=null&&y.programDateTime&&(m.programDateTime=y.endProgramDateTime),Object(n.isFiniteNumber)(m.programDateTime)||(m.programDateTime=null,m.rawProgramDateTime=null)}},"./src/loader/playlist-loader.ts":function(e,t,r){r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/events.ts"),s=r("./src/errors.ts"),a=r("./src/utils/logger.ts"),u=r("./src/utils/mp4-tools.ts"),l=r("./src/loader/m3u8-parser.ts"),o=r("./src/types/loader.ts"),h=r("./src/utils/attr-list.ts");function p(_,A){var b=_.url;return b!==void 0&&b.indexOf("data:")!==0||(b=A.url),b}var g=function(){function _(b){this.hls=void 0,this.loaders=Object.create(null),this.hls=b,this.registerListeners()}var A=_.prototype;return A.registerListeners=function(){var b=this.hls;b.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),b.on(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),b.on(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},A.unregisterListeners=function(){var b=this.hls;b.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),b.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),b.off(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),b.off(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},A.createInternalLoader=function(b){var c=this.hls.config,d=c.pLoader,f=c.loader,v=new(d||f)(c);return b.loader=v,this.loaders[b.type]=v,v},A.getInternalLoader=function(b){return this.loaders[b.type]},A.resetInternalLoader=function(b){this.loaders[b]&&delete this.loaders[b]},A.destroyInternalLoaders=function(){for(var b in this.loaders){var c=this.loaders[b];c&&c.destroy(),this.resetInternalLoader(b)}},A.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},A.onManifestLoading=function(b,c){var d=c.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:o.PlaylistContextType.MANIFEST,url:d,deliveryDirectives:null})},A.onLevelLoading=function(b,c){var d=c.id,f=c.level,v=c.url,m=c.deliveryDirectives;this.load({id:d,groupId:null,level:f,responseType:"text",type:o.PlaylistContextType.LEVEL,url:v,deliveryDirectives:m})},A.onAudioTrackLoading=function(b,c){var d=c.id,f=c.groupId,v=c.url,m=c.deliveryDirectives;this.load({id:d,groupId:f,level:null,responseType:"text",type:o.PlaylistContextType.AUDIO_TRACK,url:v,deliveryDirectives:m})},A.onSubtitleTrackLoading=function(b,c){var d=c.id,f=c.groupId,v=c.url,m=c.deliveryDirectives;this.load({id:d,groupId:f,level:null,responseType:"text",type:o.PlaylistContextType.SUBTITLE_TRACK,url:v,deliveryDirectives:m})},A.load=function(b){var c,d,f,v,m,y,T=this.hls.config,L=this.getInternalLoader(b);if(L){var C=L.context;if(C&&C.url===b.url)return void a.logger.trace("[playlist-loader]: playlist request ongoing");a.logger.log("[playlist-loader]: aborting previous loader for type: "+b.type),L.abort()}switch(b.type){case o.PlaylistContextType.MANIFEST:d=T.manifestLoadingMaxRetry,f=T.manifestLoadingTimeOut,v=T.manifestLoadingRetryDelay,m=T.manifestLoadingMaxRetryTimeout;break;case o.PlaylistContextType.LEVEL:case o.PlaylistContextType.AUDIO_TRACK:case o.PlaylistContextType.SUBTITLE_TRACK:d=0,f=T.levelLoadingTimeOut;break;default:d=T.levelLoadingMaxRetry,f=T.levelLoadingTimeOut,v=T.levelLoadingRetryDelay,m=T.levelLoadingMaxRetryTimeout}if(L=this.createInternalLoader(b),(c=b.deliveryDirectives)!==null&&c!==void 0&&c.part&&(b.type===o.PlaylistContextType.LEVEL&&b.level!==null?y=this.hls.levels[b.level].details:b.type===o.PlaylistContextType.AUDIO_TRACK&&b.id!==null?y=this.hls.audioTracks[b.id].details:b.type===o.PlaylistContextType.SUBTITLE_TRACK&&b.id!==null&&(y=this.hls.subtitleTracks[b.id].details),y)){var R=y.partTarget,E=y.targetduration;R&&E&&(f=Math.min(1e3*Math.max(3*R,.8*E),f))}var S={timeout:f,maxRetry:d,retryDelay:v,maxRetryDelay:m,highWaterMark:0},k={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};L.load(b,S,k)},A.loadsuccess=function(b,c,d,f){if(f===void 0&&(f=null),d.isSidxRequest)return this.handleSidxRequest(b,d),void this.handlePlaylistLoaded(b,c,d,f);this.resetInternalLoader(d.type);var v=b.data;v.indexOf("#EXTM3U")===0?(c.parsing.start=performance.now(),v.indexOf("#EXTINF:")>0||v.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(b,c,d,f):this.handleMasterPlaylist(b,c,d,f)):this.handleManifestParsingError(b,d,"no EXTM3U delimiter",f)},A.loaderror=function(b,c,d){d===void 0&&(d=null),this.handleNetworkError(c,d,!1,b)},A.loadtimeout=function(b,c,d){d===void 0&&(d=null),this.handleNetworkError(c,d,!0)},A.handleMasterPlaylist=function(b,c,d,f){var v=this.hls,m=b.data,y=p(b,d),T=l.default.parseMasterPlaylist(m,y),L=T.levels,C=T.sessionData;if(L.length){var R=L.map(function(O){return{id:O.attrs.AUDIO,audioCodec:O.audioCodec}}),E=L.map(function(O){return{id:O.attrs.SUBTITLES,textCodec:O.textCodec}}),S=l.default.parseMasterPlaylistMedia(m,y,"AUDIO",R),k=l.default.parseMasterPlaylistMedia(m,y,"SUBTITLES",E),w=l.default.parseMasterPlaylistMedia(m,y,"CLOSED-CAPTIONS");S.length&&(S.some(function(O){return!O.url})||!L[0].audioCodec||L[0].attrs.AUDIO||(a.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),S.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new h.AttrList({}),bitrate:0,url:""}))),v.trigger(i.Events.MANIFEST_LOADED,{levels:L,audioTracks:S,subtitles:k,captions:w,url:y,stats:c,networkDetails:f,sessionData:C})}else this.handleManifestParsingError(b,d,"no level found in manifest",f)},A.handleTrackOrLevelPlaylist=function(b,c,d,f){var v=this.hls,m=d.id,y=d.level,T=d.type,L=p(b,d),C=Object(n.isFiniteNumber)(m)?m:0,R=Object(n.isFiniteNumber)(y)?y:C,E=function(I){switch(I.type){case o.PlaylistContextType.AUDIO_TRACK:return o.PlaylistLevelType.AUDIO;case o.PlaylistContextType.SUBTITLE_TRACK:return o.PlaylistLevelType.SUBTITLE;default:return o.PlaylistLevelType.MAIN}}(d),S=l.default.parseLevelPlaylist(b.data,L,R,E,C);if(S.fragments.length){if(T===o.PlaylistContextType.MANIFEST){var k={attrs:new h.AttrList({}),bitrate:0,details:S,name:"",url:L};v.trigger(i.Events.MANIFEST_LOADED,{levels:[k],audioTracks:[],url:L,stats:c,networkDetails:f,sessionData:null})}if(c.parsing.end=performance.now(),S.needSidxRanges){var w,O=(w=S.fragments[0].initSegment)===null||w===void 0?void 0:w.url;this.load({url:O,isSidxRequest:!0,type:T,level:y,levelDetails:S,id:m,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else d.levelDetails=S,this.handlePlaylistLoaded(b,c,d,f)}else v.trigger(i.Events.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:L,reason:"no fragments found in level",level:typeof d.level=="number"?d.level:void 0})},A.handleSidxRequest=function(b,c){var d=Object(u.parseSegmentIndex)(new Uint8Array(b.data));if(d){var f=d.references,v=c.levelDetails;f.forEach(function(m,y){var T=m.info,L=v.fragments[y];L.byteRange.length===0&&L.setByteRange(String(1+T.end-T.start)+"@"+String(T.start)),L.initSegment&&L.initSegment.setByteRange(String(d.moovEndOffset)+"@0")})}},A.handleManifestParsingError=function(b,c,d,f){this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:c.type===o.PlaylistContextType.MANIFEST,url:b.url,reason:d,response:b,context:c,networkDetails:f})},A.handleNetworkError=function(b,c,d,f){d===void 0&&(d=!1),a.logger.warn("[playlist-loader]: A network "+(d?"timeout":"error")+" occurred while loading "+b.type+" level: "+b.level+" id: "+b.id+' group-id: "'+b.groupId+'"');var v=s.ErrorDetails.UNKNOWN,m=!1,y=this.getInternalLoader(b);switch(b.type){case o.PlaylistContextType.MANIFEST:v=d?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,m=!0;break;case o.PlaylistContextType.LEVEL:v=d?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,m=!1;break;case o.PlaylistContextType.AUDIO_TRACK:v=d?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,m=!1;break;case o.PlaylistContextType.SUBTITLE_TRACK:v=d?s.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:s.ErrorDetails.SUBTITLE_LOAD_ERROR,m=!1}y&&this.resetInternalLoader(b.type);var T={type:s.ErrorTypes.NETWORK_ERROR,details:v,fatal:m,url:b.url,loader:y,context:b,networkDetails:c};f&&(T.response=f),this.hls.trigger(i.Events.ERROR,T)},A.handlePlaylistLoaded=function(b,c,d,f){var v=d.type,m=d.level,y=d.id,T=d.groupId,L=d.loader,C=d.levelDetails,R=d.deliveryDirectives;if(C!=null&&C.targetduration){if(L)switch(C.live&&(L.getCacheAge&&(C.ageHeader=L.getCacheAge()||0),L.getCacheAge&&!isNaN(C.ageHeader)||(C.ageHeader=0)),v){case o.PlaylistContextType.MANIFEST:case o.PlaylistContextType.LEVEL:this.hls.trigger(i.Events.LEVEL_LOADED,{details:C,level:m||0,id:y||0,stats:c,networkDetails:f,deliveryDirectives:R});break;case o.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(i.Events.AUDIO_TRACK_LOADED,{details:C,id:y||0,groupId:T||"",stats:c,networkDetails:f,deliveryDirectives:R});break;case o.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADED,{details:C,id:y||0,groupId:T||"",stats:c,networkDetails:f,deliveryDirectives:R})}}else this.handleManifestParsingError(b,d,"invalid target duration",f)},_}();t.default=g},"./src/polyfills/number.ts":function(e,t,r){r.r(t),r.d(t,"isFiniteNumber",function(){return n}),r.d(t,"MAX_SAFE_INTEGER",function(){return i});var n=Number.isFinite||function(s){return typeof s=="number"&&isFinite(s)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(e,t,r){r.r(t);var n=function(){function i(){}return i.getSilentFrame=function(s,a){switch(s){case"mp4a.40.2":if(a===1)return new Uint8Array([0,200,0,128,35,128]);if(a===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(a===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(a===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(a===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(a===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(a===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(a===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(a===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},i}();t.default=n},"./src/remux/mp4-generator.ts":function(e,t,r){r.r(t);var n=Math.pow(2,32)-1,i=function(){function s(){}return s.init=function(){var a;for(a in s.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},s.types)s.types.hasOwnProperty(a)&&(s.types[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);var u=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),l=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);s.HDLR_TYPES={video:u,audio:l};var o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new Uint8Array([0,0,0,0,0,0,0,0]);s.STTS=s.STSC=s.STCO=h,s.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),s.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),s.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),s.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var p=new Uint8Array([105,115,111,109]),g=new Uint8Array([97,118,99,49]),_=new Uint8Array([0,0,0,1]);s.FTYP=s.box(s.types.ftyp,p,_,p,g),s.DINF=s.box(s.types.dinf,s.box(s.types.dref,o))},s.box=function(a){for(var u=8,l=arguments.length,o=new Array(l>1?l-1:0),h=1;h<l;h++)o[h-1]=arguments[h];for(var p=o.length,g=p;p--;)u+=o[p].byteLength;var _=new Uint8Array(u);for(_[0]=u>>24&255,_[1]=u>>16&255,_[2]=u>>8&255,_[3]=255&u,_.set(a,4),p=0,u=8;p<g;p++)_.set(o[p],u),u+=o[p].byteLength;return _},s.hdlr=function(a){return s.box(s.types.hdlr,s.HDLR_TYPES[a])},s.mdat=function(a){return s.box(s.types.mdat,a)},s.mdhd=function(a,u){u*=a;var l=Math.floor(u/(n+1)),o=Math.floor(u%(n+1));return s.box(s.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,a>>24&255,a>>16&255,a>>8&255,255&a,l>>24,l>>16&255,l>>8&255,255&l,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},s.mdia=function(a){return s.box(s.types.mdia,s.mdhd(a.timescale,a.duration),s.hdlr(a.type),s.minf(a))},s.mfhd=function(a){return s.box(s.types.mfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a]))},s.minf=function(a){return a.type==="audio"?s.box(s.types.minf,s.box(s.types.smhd,s.SMHD),s.DINF,s.stbl(a)):s.box(s.types.minf,s.box(s.types.vmhd,s.VMHD),s.DINF,s.stbl(a))},s.moof=function(a,u,l){return s.box(s.types.moof,s.mfhd(a),s.traf(l,u))},s.moov=function(a){for(var u=a.length,l=[];u--;)l[u]=s.trak(a[u]);return s.box.apply(null,[s.types.moov,s.mvhd(a[0].timescale,a[0].duration)].concat(l).concat(s.mvex(a)))},s.mvex=function(a){for(var u=a.length,l=[];u--;)l[u]=s.trex(a[u]);return s.box.apply(null,[s.types.mvex].concat(l))},s.mvhd=function(a,u){u*=a;var l=Math.floor(u/(n+1)),o=Math.floor(u%(n+1)),h=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,a>>24&255,a>>16&255,a>>8&255,255&a,l>>24,l>>16&255,l>>8&255,255&l,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s.box(s.types.mvhd,h)},s.sdtp=function(a){var u,l,o=a.samples||[],h=new Uint8Array(4+o.length);for(u=0;u<o.length;u++)l=o[u].flags,h[u+4]=l.dependsOn<<4|l.isDependedOn<<2|l.hasRedundancy;return s.box(s.types.sdtp,h)},s.stbl=function(a){return s.box(s.types.stbl,s.stsd(a),s.box(s.types.stts,s.STTS),s.box(s.types.stsc,s.STSC),s.box(s.types.stsz,s.STSZ),s.box(s.types.stco,s.STCO))},s.avc1=function(a){var u,l,o,h=[],p=[];for(u=0;u<a.sps.length;u++)o=(l=a.sps[u]).byteLength,h.push(o>>>8&255),h.push(255&o),h=h.concat(Array.prototype.slice.call(l));for(u=0;u<a.pps.length;u++)o=(l=a.pps[u]).byteLength,p.push(o>>>8&255),p.push(255&o),p=p.concat(Array.prototype.slice.call(l));var g=s.box(s.types.avcC,new Uint8Array([1,h[3],h[4],h[5],255,224|a.sps.length].concat(h).concat([a.pps.length]).concat(p))),_=a.width,A=a.height,b=a.pixelRatio[0],c=a.pixelRatio[1];return s.box(s.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,_>>8&255,255&_,A>>8&255,255&A,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),g,s.box(s.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),s.box(s.types.pasp,new Uint8Array([b>>24,b>>16&255,b>>8&255,255&b,c>>24,c>>16&255,c>>8&255,255&c])))},s.esds=function(a){var u=a.config.length;return new Uint8Array([0,0,0,0,3,23+u,0,1,0,4,15+u,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([u]).concat(a.config).concat([6,1,2]))},s.mp4a=function(a){var u=a.samplerate;return s.box(s.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a.channelCount,0,16,0,0,0,0,u>>8&255,255&u,0,0]),s.box(s.types.esds,s.esds(a)))},s.mp3=function(a){var u=a.samplerate;return s.box(s.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a.channelCount,0,16,0,0,0,0,u>>8&255,255&u,0,0]))},s.stsd=function(a){return a.type==="audio"?a.isAAC||a.codec!=="mp3"?s.box(s.types.stsd,s.STSD,s.mp4a(a)):s.box(s.types.stsd,s.STSD,s.mp3(a)):s.box(s.types.stsd,s.STSD,s.avc1(a))},s.tkhd=function(a){var u=a.id,l=a.duration*a.timescale,o=a.width,h=a.height,p=Math.floor(l/(n+1)),g=Math.floor(l%(n+1));return s.box(s.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,u>>24&255,u>>16&255,u>>8&255,255&u,0,0,0,0,p>>24,p>>16&255,p>>8&255,255&p,g>>24,g>>16&255,g>>8&255,255&g,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,h>>8&255,255&h,0,0]))},s.traf=function(a,u){var l=s.sdtp(a),o=a.id,h=Math.floor(u/(n+1)),p=Math.floor(u%(n+1));return s.box(s.types.traf,s.box(s.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),s.box(s.types.tfdt,new Uint8Array([1,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,p>>24,p>>16&255,p>>8&255,255&p])),s.trun(a,l.length+16+20+8+16+8+8),l)},s.trak=function(a){return a.duration=a.duration||4294967295,s.box(s.types.trak,s.tkhd(a),s.mdia(a))},s.trex=function(a){var u=a.id;return s.box(s.types.trex,new Uint8Array([0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},s.trun=function(a,u){var l,o,h,p,g,_,A=a.samples||[],b=A.length,c=12+16*b,d=new Uint8Array(c);for(u+=8+c,d.set([0,0,15,1,b>>>24&255,b>>>16&255,b>>>8&255,255&b,u>>>24&255,u>>>16&255,u>>>8&255,255&u],0),l=0;l<b;l++)h=(o=A[l]).duration,p=o.size,g=o.flags,_=o.cts,d.set([h>>>24&255,h>>>16&255,h>>>8&255,255&h,p>>>24&255,p>>>16&255,p>>>8&255,255&p,g.isLeading<<2|g.dependsOn,g.isDependedOn<<6|g.hasRedundancy<<4|g.paddingValue<<1|g.isNonSync,61440&g.degradPrio,15&g.degradPrio,_>>>24&255,_>>>16&255,_>>>8&255,255&_],12+16*l);return s.box(s.types.trun,d)},s.initSegment=function(a){s.types||s.init();var u=s.moov(a),l=new Uint8Array(s.FTYP.byteLength+u.byteLength);return l.set(s.FTYP),l.set(u,s.FTYP.byteLength),l},s}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,t.default=i},"./src/remux/mp4-remuxer.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return b}),r.d(t,"normalizePts",function(){return c});var n=r("./src/polyfills/number.ts"),i=r("./src/remux/aac-helper.ts"),s=r("./src/remux/mp4-generator.ts"),a=r("./src/events.ts"),u=r("./src/errors.ts"),l=r("./src/utils/logger.ts"),o=r("./src/types/loader.ts"),h=r("./src/utils/timescale-conversion.ts");function p(){return(p=Object.assign||function(v){for(var m=1;m<arguments.length;m++){var y=arguments[m];for(var T in y)Object.prototype.hasOwnProperty.call(y,T)&&(v[T]=y[T])}return v}).apply(this,arguments)}var g=null,_=null,A=!1,b=function(){function v(y,T,L,C){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=y,this.config=T,this.typeSupported=L,this.ISGenerated=!1,g===null){var R=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);g=R?parseInt(R[1]):0}if(_===null){var E=navigator.userAgent.match(/Safari\/(\d+)/i);_=E?parseInt(E[1]):0}A=!!g&&g<75||!!_&&_<600}var m=v.prototype;return m.destroy=function(){},m.resetTimeStamp=function(y){l.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=y},m.resetNextTimestamp=function(){l.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},m.resetInitSegment=function(){l.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},m.getVideoStartPts=function(y){var T=!1,L=y.reduce(function(C,R){var E=R.pts-C;return E<-4294967296?(T=!0,c(C,R.pts)):E>0?C:R.pts},y[0].pts);return T&&l.logger.debug("PTS rollover detected"),L},m.remux=function(y,T,L,C,R,E,S,k){var w,O,I,P,D,x,M=R,B=R,H=y.pid>-1,$=T.pid>-1,q=T.samples.length,te=y.samples.length>0,K=q>1;if((!H||te)&&(!$||K)||this.ISGenerated||S){this.ISGenerated||(I=this.generateIS(y,T,R));var X=this.isVideoContiguous,z=-1;if(K&&(z=function(j){for(var F=0;F<j.length;F++)if(j[F].key)return F;return-1}(T.samples),!X&&this.config.forceKeyFrameOnDiscontinuity))if(x=!0,z>0){l.logger.warn("[mp4-remuxer]: Dropped "+z+" out of "+q+" video samples due to a missing keyframe");var Z=this.getVideoStartPts(T.samples);T.samples=T.samples.slice(z),T.dropped+=z,B+=(T.samples[0].pts-Z)/(T.timescale||9e4)}else z===-1&&(l.logger.warn("[mp4-remuxer]: No keyframe found out of "+q+" video samples"),x=!1);if(this.ISGenerated){if(te&&K){var oe=this.getVideoStartPts(T.samples),fe=(c(y.samples[0].pts,oe)-oe)/T.inputTimeScale;M+=Math.max(0,fe),B+=Math.max(0,-fe)}if(te){if(y.samplerate||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),I=this.generateIS(y,T,R)),O=this.remuxAudio(y,M,this.isAudioContiguous,E,$||K||k===o.PlaylistLevelType.AUDIO?B:void 0),K){var U=O?O.endPTS-O.startPTS:0;T.inputTimeScale||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),I=this.generateIS(y,T,R)),w=this.remuxVideo(T,B,X,U)}}else K&&(w=this.remuxVideo(T,B,X,0));w&&(w.firstKeyFrame=z,w.independent=z!==-1)}}return this.ISGenerated&&(L.samples.length&&(D=this.remuxID3(L,R)),C.samples.length&&(P=this.remuxText(C,R))),{audio:O,video:w,initSegment:I,independent:x,text:P,id3:D}},m.generateIS=function(y,T,L){var C,R,E,S=y.samples,k=T.samples,w=this.typeSupported,O={},I=!Object(n.isFiniteNumber)(this._initPTS),P="audio/mp4";if(I&&(C=R=1/0),y.config&&S.length&&(y.timescale=y.samplerate,y.isAAC||(w.mpeg?(P="audio/mpeg",y.codec=""):w.mp3&&(y.codec="mp3")),O.audio={id:"audio",container:P,codec:y.codec,initSegment:!y.isAAC&&w.mpeg?new Uint8Array(0):s.default.initSegment([y]),metadata:{channelCount:y.channelCount}},I&&(E=y.inputTimeScale,C=R=S[0].pts-Math.round(E*L))),T.sps&&T.pps&&k.length&&(T.timescale=T.inputTimeScale,O.video={id:"main",container:"video/mp4",codec:T.codec,initSegment:s.default.initSegment([T]),metadata:{width:T.width,height:T.height}},I)){E=T.inputTimeScale;var D=this.getVideoStartPts(k),x=Math.round(E*L);R=Math.min(R,c(k[0].dts,D)-x),C=Math.min(C,D-x)}if(Object.keys(O).length)return this.ISGenerated=!0,I&&(this._initPTS=C,this._initDTS=R),{tracks:O,initPTS:C,timescale:E}},m.remuxVideo=function(y,T,L,C){var R,E,S,k=y.inputTimeScale,w=y.samples,O=[],I=w.length,P=this._initPTS,D=this.nextAvcDts,x=8,M=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,H=0,$=!1;L&&D!==null||(D=T*k-(w[0].pts-c(w[0].dts,w[0].pts)));for(var q=0;q<I;q++){var te=w[q];te.pts=c(te.pts-P,D),te.dts=c(te.dts-P,D),te.dts>te.pts&&(H=Math.max(Math.min(H,te.pts-te.dts),-18e3)),te.dts<w[q>0?q-1:q].dts&&($=!0)}$&&w.sort(function($t,jr){var ag=$t.dts-jr.dts,og=$t.pts-jr.pts;return ag||og}),E=w[0].dts,S=w[w.length-1].dts;var K=Math.round((S-E)/(I-1));if(H<0){if(H<-2*K){l.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(h.toMsFromMpegTsClock)(-K,!0)+" ms");for(var X=H,z=0;z<I;z++)w[z].dts=X=Math.max(X,w[z].pts-K),w[z].pts=Math.max(X,w[z].pts)}else{l.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(h.toMsFromMpegTsClock)(H,!0)+" ms to overcome this issue");for(var Z=0;Z<I;Z++)w[Z].dts=w[Z].dts+H}E=w[0].dts}if(L){var oe=E-D,fe=oe>K;if(fe||oe<-1){fe?l.logger.warn("AVC: "+Object(h.toMsFromMpegTsClock)(oe,!0)+" ms ("+oe+"dts) hole between fragments detected, filling it"):l.logger.warn("AVC: "+Object(h.toMsFromMpegTsClock)(-oe,!0)+" ms ("+oe+"dts) overlapping between fragments detected"),E=D;var U=w[0].pts-oe;w[0].dts=E,w[0].pts=U,l.logger.log("Video: First PTS/DTS adjusted: "+Object(h.toMsFromMpegTsClock)(U,!0)+"/"+Object(h.toMsFromMpegTsClock)(E,!0)+", delta: "+Object(h.toMsFromMpegTsClock)(oe,!0)+" ms")}}A&&(E=Math.max(0,E));for(var j=0,F=0,N=0;N<I;N++){for(var G=w[N],W=G.units,J=W.length,ee=0,ae=0;ae<J;ae++)ee+=W[ae].data.length;F+=ee,j+=J,G.length=ee,G.dts=Math.max(G.dts,E),G.pts=Math.max(G.pts,G.dts,0),M=Math.min(G.pts,M),B=Math.max(G.pts,B)}S=w[I-1].dts;var ne,re=F+4*j+8;try{ne=new Uint8Array(re)}catch{return void this.observer.emit(a.Events.ERROR,a.Events.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:re,reason:"fail allocating video mdat "+re})}var V=new DataView(ne.buffer);V.setUint32(0,re),ne.set(s.default.types.mdat,4);for(var Y=0;Y<I;Y++){for(var ie=w[Y],ue=ie.units,de=0,pe=0,be=ue.length;pe<be;pe++){var me=ue[pe],Te=me.data,je=me.data.byteLength;V.setUint32(x,je),x+=4,ne.set(Te,x),x+=je,de+=4+je}if(Y<I-1)R=w[Y+1].dts-ie.dts;else{var pt=this.config,It=ie.dts-w[Y>0?Y-1:Y].dts;if(pt.stretchShortVideoTrack&&this.nextAudioPts!==null){var Ft=Math.floor(pt.maxBufferHole*k),rr=(C?M+C*k:this.nextAudioPts)-ie.pts;rr>Ft?((R=rr-It)<0&&(R=It),l.logger.log("[mp4-remuxer]: It is approximately "+rr/90+" ms to the next segment; using duration "+R/90+" ms for the last video frame.")):R=It}else R=It}var Me=Math.round(ie.pts-ie.dts);O.push(new d(ie.key,R,de,Me))}if(O.length&&g&&g<70){var He=O[0].flags;He.dependsOn=2,He.isNonSync=0}console.assert(R!==void 0,"mp4SampleDuration must be computed"),this.nextAvcDts=D=S+R,this.isVideoContiguous=!0;var Kt={data1:s.default.moof(y.sequenceNumber++,E,p({},y,{samples:O})),data2:ne,startPTS:M/k,endPTS:(B+R)/k,startDTS:E/k,endDTS:D/k,type:"video",hasAudio:!1,hasVideo:!0,nb:O.length,dropped:y.dropped};return y.samples=[],y.dropped=0,console.assert(ne.length,"MDAT length must not be zero"),Kt},m.remuxAudio=function(y,T,L,C,R){var E=y.inputTimeScale,S=E/(y.samplerate?y.samplerate:E),k=y.isAAC?1024:1152,w=k*S,O=this._initPTS,I=!y.isAAC&&this.typeSupported.mpeg,P=[],D=y.samples,x=I?0:8,M=this.nextAudioPts||-1,B=T*E;if(this.isAudioContiguous=L=L||D.length&&M>0&&(C&&Math.abs(B-M)<9e3||Math.abs(c(D[0].pts-O,B)-M)<20*w),D.forEach(function(Te){Te.pts=c(Te.pts-O,B)}),!L||M<0){if(!(D=D.filter(function(Te){return Te.pts>=0})).length)return;M=R===0?0:C?Math.max(0,B):D[0].pts}if(y.isAAC)for(var H=R!==void 0,$=this.config.maxAudioFramesDrift,q=0,te=M;q<D.length;q++){var K=D[q],X=K.pts,z=X-te,Z=Math.abs(1e3*z/E);if(z<=-$*w&&H)q===0&&(l.logger.warn("Audio frame @ "+(X/E).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*z/E)+" ms."),this.nextAudioPts=M=te=X);else if(z>=$*w&&Z<1e4&&H){var oe=Math.round(z/w);(te=X-oe*w)<0&&(oe--,te+=w),q===0&&(this.nextAudioPts=M=te),l.logger.warn("[mp4-remuxer]: Injecting "+oe+" audio frame @ "+(te/E).toFixed(3)+"s due to "+Math.round(1e3*z/E)+" ms gap.");for(var fe=0;fe<oe;fe++){var U=Math.max(te,0),j=i.default.getSilentFrame(y.manifestCodec||y.codec,y.channelCount);j||(l.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),j=K.unit.subarray()),D.splice(q,0,{unit:j,pts:U}),te+=w,q++}}K.pts=te,te+=w}for(var F,N=null,G=null,W=0,J=D.length;J--;)W+=D[J].unit.byteLength;for(var ee=0,ae=D.length;ee<ae;ee++){var ne=D[ee],re=ne.unit,V=ne.pts;if(G!==null)P[ee-1].duration=Math.round((V-G)/S);else{if(L&&y.isAAC&&(V=M),N=V,!(W>0))return;W+=x;try{F=new Uint8Array(W)}catch{return void this.observer.emit(a.Events.ERROR,a.Events.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:W,reason:"fail allocating audio mdat "+W})}I||(new DataView(F.buffer).setUint32(0,W),F.set(s.default.types.mdat,4))}F.set(re,x);var Y=re.byteLength;x+=Y,P.push(new d(!0,k,Y,0)),G=V}var ie=P.length;if(ie){var ue=P[P.length-1];this.nextAudioPts=M=G+S*ue.duration;var de=I?new Uint8Array(0):s.default.moof(y.sequenceNumber++,N/S,p({},y,{samples:P}));y.samples=[];var pe=N/E,be=M/E,me={data1:de,data2:F,startPTS:pe,endPTS:be,startDTS:pe,endDTS:be,type:"audio",hasAudio:!0,hasVideo:!1,nb:ie};return this.isAudioContiguous=!0,console.assert(F.length,"MDAT length must not be zero"),me}},m.remuxEmptyAudio=function(y,T,L,C){var R=y.inputTimeScale,E=R/(y.samplerate?y.samplerate:R),S=this.nextAudioPts,k=(S!==null?S:C.startDTS*R)+this._initDTS,w=C.endDTS*R+this._initDTS,O=1024*E,I=Math.ceil((w-k)/O),P=i.default.getSilentFrame(y.manifestCodec||y.codec,y.channelCount);if(l.logger.warn("[mp4-remuxer]: remux empty Audio"),P){for(var D=[],x=0;x<I;x++){var M=k+x*O;D.push({unit:P,pts:M,dts:M})}return y.samples=D,this.remuxAudio(y,T,L,!1)}l.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},m.remuxID3=function(y,T){var L=y.samples.length;if(L){for(var C=y.inputTimeScale,R=this._initPTS,E=this._initDTS,S=0;S<L;S++){var k=y.samples[S];k.pts=c(k.pts-R,T*C)/C,k.dts=c(k.dts-E,T*C)/C}var w=y.samples;return y.samples=[],{samples:w}}},m.remuxText=function(y,T){var L=y.samples.length;if(L){for(var C=y.inputTimeScale,R=this._initPTS,E=0;E<L;E++){var S=y.samples[E];S.pts=c(S.pts-R,T*C)/C}y.samples.sort(function(w,O){return w.pts-O.pts});var k=y.samples;return y.samples=[],{samples:k}}},v}();function c(v,m){var y;if(m===null)return v;for(y=m<v?-8589934592:8589934592;Math.abs(v-m)>4294967296;)v+=y;return v}var d=function(v,m,y,T){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=m,this.size=y,this.cts=T,this.flags=new f(v)},f=function(v){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=v?2:1,this.isNonSync=v?0:1}},"./src/remux/passthrough-remuxer.ts":function(e,t,r){r.r(t);var n=r("./src/polyfills/number.ts"),i=r("./src/utils/mp4-tools.ts"),s=r("./src/loader/fragment.ts"),a=r("./src/utils/logger.ts"),u=function(){function h(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var p=h.prototype;return p.destroy=function(){},p.resetTimeStamp=function(g){this.initPTS=g,this.lastEndDTS=null},p.resetNextTimestamp=function(){this.lastEndDTS=null},p.resetInitSegment=function(g,_,A){this.audioCodec=_,this.videoCodec=A,this.generateInitSegment(g),this.emitInitSegment=!0},p.generateInitSegment=function(g){var _=this.audioCodec,A=this.videoCodec;if(!g||!g.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var b=this.initData=Object(i.parseInitSegment)(g);_||(_=o(b.audio,s.ElementaryStreamTypes.AUDIO)),A||(A=o(b.video,s.ElementaryStreamTypes.VIDEO));var c={};b.audio&&b.video?c.audiovideo={container:"video/mp4",codec:_+","+A,initSegment:g,id:"main"}:b.audio?c.audio={container:"audio/mp4",codec:_,initSegment:g,id:"audio"}:b.video?c.video={container:"video/mp4",codec:A,initSegment:g,id:"main"}:a.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=c},p.remux=function(g,_,A,b,c){var d=this.initPTS,f=this.lastEndDTS,v={audio:void 0,video:void 0,text:b,id3:A,initSegment:void 0};Object(n.isFiniteNumber)(f)||(f=this.lastEndDTS=c||0);var m=_.samples;if(!m||!m.length)return v;var y={initPTS:void 0,timescale:1},T=this.initData;if(T&&T.length||(this.generateInitSegment(m),T=this.initData),!T||!T.length)return a.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),v;this.emitInitSegment&&(y.tracks=this.initTracks,this.emitInitSegment=!1),Object(n.isFiniteNumber)(d)||(this.initPTS=y.initPTS=d=l(T,m,f));var L=Object(i.getDuration)(m,T),C=f,R=L+C;Object(i.offsetStartDTS)(T,m,d),L>0?this.lastEndDTS=R:(a.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var E=!!T.audio,S=!!T.video,k="";E&&(k+="audio"),S&&(k+="video");var w={data1:m,startPTS:C,startDTS:C,endPTS:R,endDTS:R,type:k,hasAudio:E,hasVideo:S,nb:1,dropped:0};return v.audio=w.type==="audio"?w:void 0,v.video=w.type!=="audio"?w:void 0,v.text=b,v.id3=A,v.initSegment=y,v},h}(),l=function(h,p,g){return Object(i.getStartDTS)(h,p)-g};function o(h,p){var g=h==null?void 0:h.codec;return g&&g.length>4?g:g==="hvc1"?"hvc1.1.c.L120.90":g==="av01"?"av01.0.04M.08":g==="avc1"||p===s.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}t.default=u},"./src/task-loop.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return n});var n=function(){function i(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var s=i.prototype;return s.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},s.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},s.onHandlerDestroyed=function(){},s.hasInterval=function(){return!!this._tickInterval},s.hasNextTick=function(){return!!this._tickTimer},s.setInterval=function(a){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,a),!0)},s.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},s.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},s.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},s.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},s.doTick=function(){},i}()},"./src/types/level.ts":function(e,t,r){function n(o,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}var i,s;function a(o,h){var p=o.canSkipUntil,g=o.canSkipDateRanges,_=o.endSN;return p&&(h!==void 0?h-_:0)<p?g?i.v2:i.Yes:i.No}r.r(t),r.d(t,"HlsSkip",function(){return i}),r.d(t,"getSkipValue",function(){return a}),r.d(t,"HlsUrlParameters",function(){return u}),r.d(t,"Level",function(){return l}),(s=i||(i={})).No="",s.Yes="YES",s.v2="v2";var u=function(){function o(h,p,g){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=h,this.part=p,this.skip=g}return o.prototype.addDirectives=function(h){var p=new self.URL(h);return this.msn!==void 0&&p.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&p.searchParams.set("_HLS_part",this.part.toString()),this.skip&&p.searchParams.set("_HLS_skip",this.skip),p.toString()},o}(),l=function(){function o(g){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[g.url],this.attrs=g.attrs,this.bitrate=g.bitrate,g.details&&(this.details=g.details),this.id=g.id||0,this.name=g.name,this.width=g.width||0,this.height=g.height||0,this.audioCodec=g.audioCodec,this.videoCodec=g.videoCodec,this.unknownCodecs=g.unknownCodecs,this.codecSet=[g.videoCodec,g.audioCodec].filter(function(_){return _}).join(",").replace(/\.[^.,]+/g,"")}var h,p;return h=o,(p=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(g){var _=g%this.url.length;this._urlId!==_&&(this.details=void 0,this._urlId=_)}}])&&n(h.prototype,p),o}()},"./src/types/loader.ts":function(e,t,r){var n,i,s,a;r.r(t),r.d(t,"PlaylistContextType",function(){return n}),r.d(t,"PlaylistLevelType",function(){return s}),(i=n||(n={})).MANIFEST="manifest",i.LEVEL="level",i.AUDIO_TRACK="audioTrack",i.SUBTITLE_TRACK="subtitleTrack",(a=s||(s={})).MAIN="main",a.AUDIO="audio",a.SUBTITLE="subtitle"},"./src/types/transmuxer.ts":function(e,t,r){r.r(t),r.d(t,"ChunkMetadata",function(){return n});var n=function(i,s,a,u,l,o){u===void 0&&(u=0),l===void 0&&(l=-1),o===void 0&&(o=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=i,this.sn=s,this.id=a,this.size=u,this.part=l,this.partial=o}},"./src/utils/attr-list.ts":function(e,t,r){r.r(t),r.d(t,"AttrList",function(){return s});var n=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function a(l){for(var o in typeof l=="string"&&(l=a.parseAttrList(l)),l)l.hasOwnProperty(o)&&(this[o]=l[o])}var u=a.prototype;return u.decimalInteger=function(l){var o=parseInt(this[l],10);return o>Number.MAX_SAFE_INTEGER?1/0:o},u.hexadecimalInteger=function(l){if(this[l]){var o=(this[l]||"0x").slice(2);o=(1&o.length?"0":"")+o;for(var h=new Uint8Array(o.length/2),p=0;p<o.length/2;p++)h[p]=parseInt(o.slice(2*p,2*p+2),16);return h}return null},u.hexadecimalIntegerAsNumber=function(l){var o=parseInt(this[l],16);return o>Number.MAX_SAFE_INTEGER?1/0:o},u.decimalFloatingPoint=function(l){return parseFloat(this[l])},u.optionalFloat=function(l,o){var h=this[l];return h?parseFloat(h):o},u.enumeratedString=function(l){return this[l]},u.bool=function(l){return this[l]==="YES"},u.decimalResolution=function(l){var o=n.exec(this[l]);if(o!==null)return{width:parseInt(o[1],10),height:parseInt(o[2],10)}},a.parseAttrList=function(l){var o,h={};for(i.lastIndex=0;(o=i.exec(l))!==null;){var p=o[2];p.indexOf('"')===0&&p.lastIndexOf('"')===p.length-1&&(p=p.slice(1,-1)),h[o[1]]=p}return h},a}()},"./src/utils/binary-search.ts":function(e,t,r){r.r(t),t.default={search:function(n,i){for(var s=0,a=n.length-1,u=null,l=null;s<=a;){var o=i(l=n[u=(s+a)/2|0]);if(o>0)s=u+1;else{if(!(o<0))return l;a=u-1}}return null}}},"./src/utils/buffer-helper.ts":function(e,t,r){r.r(t),r.d(t,"BufferHelper",function(){return s});var n=r("./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},s=function(){function a(){}return a.isBuffered=function(u,l){try{if(u){for(var o=a.getBuffered(u),h=0;h<o.length;h++)if(l>=o.start(h)&&l<=o.end(h))return!0}}catch{}return!1},a.bufferInfo=function(u,l,o){try{if(u){var h,p=a.getBuffered(u),g=[];for(h=0;h<p.length;h++)g.push({start:p.start(h),end:p.end(h)});return this.bufferedInfo(g,l,o)}}catch{}return{len:0,start:l,end:l,nextStart:void 0}},a.bufferedInfo=function(u,l,o){l=Math.max(0,l),u.sort(function(y,T){var L=y.start-T.start;return L||T.end-y.end});var h=[];if(o)for(var p=0;p<u.length;p++){var g=h.length;if(g){var _=h[g-1].end;u[p].start-_<o?u[p].end>_&&(h[g-1].end=u[p].end):h.push(u[p])}else h.push(u[p])}else h=u;for(var A,b=0,c=l,d=l,f=0;f<h.length;f++){var v=h[f].start,m=h[f].end;if(l+o>=v&&l<m)c=v,b=(d=m)-l;else if(l+o<v){A=v;break}}return{len:b,start:c||0,end:d||0,nextStart:A}},a.getBuffered=function(u){try{return u.buffered}catch(l){return n.logger.log("failed to get media.buffered",l),i}},a}()},"./src/utils/cea-608-parser.ts":function(e,t,r){r.r(t),r.d(t,"Row",function(){return v}),r.d(t,"CaptionScreen",function(){return m});var n,i,s=r("./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},u=function(R){var E=R;return a.hasOwnProperty(R)&&(E=a[R]),String.fromCharCode(E)},l=15,o=100,h={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},p={17:2,18:4,21:6,22:8,23:10,19:13,20:15},g={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},_={25:2,26:4,29:6,30:8,31:10,27:13,28:15},A=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(i=n||(n={}))[i.ERROR=0]="ERROR",i[i.TEXT=1]="TEXT",i[i.WARNING=2]="WARNING",i[i.INFO=2]="INFO",i[i.DEBUG=3]="DEBUG",i[i.DATA=3]="DATA";var b=function(){function R(){this.time=null,this.verboseLevel=n.ERROR}return R.prototype.log=function(E,S){this.verboseLevel>=E&&s.logger.log(this.time+" ["+E+"] "+S)},R}(),c=function(R){for(var E=[],S=0;S<R.length;S++)E.push(R[S].toString(16));return E},d=function(){function R(S,k,w,O,I){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=S||"white",this.underline=k||!1,this.italics=w||!1,this.background=O||"black",this.flash=I||!1}var E=R.prototype;return E.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},E.setStyles=function(S){for(var k=["foreground","underline","italics","background","flash"],w=0;w<k.length;w++){var O=k[w];S.hasOwnProperty(O)&&(this[O]=S[O])}},E.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},E.equals=function(S){return this.foreground===S.foreground&&this.underline===S.underline&&this.italics===S.italics&&this.background===S.background&&this.flash===S.flash},E.copy=function(S){this.foreground=S.foreground,this.underline=S.underline,this.italics=S.italics,this.background=S.background,this.flash=S.flash},E.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},R}(),f=function(){function R(S,k,w,O,I,P){this.uchar=void 0,this.penState=void 0,this.uchar=S||" ",this.penState=new d(k,w,O,I,P)}var E=R.prototype;return E.reset=function(){this.uchar=" ",this.penState.reset()},E.setChar=function(S,k){this.uchar=S,this.penState.copy(k)},E.setPenState=function(S){this.penState.copy(S)},E.equals=function(S){return this.uchar===S.uchar&&this.penState.equals(S.penState)},E.copy=function(S){this.uchar=S.uchar,this.penState.copy(S.penState)},E.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},R}(),v=function(){function R(S){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var k=0;k<o;k++)this.chars.push(new f);this.logger=S,this.pos=0,this.currPenState=new d}var E=R.prototype;return E.equals=function(S){for(var k=!0,w=0;w<o;w++)if(!this.chars[w].equals(S.chars[w])){k=!1;break}return k},E.copy=function(S){for(var k=0;k<o;k++)this.chars[k].copy(S.chars[k])},E.isEmpty=function(){for(var S=!0,k=0;k<o;k++)if(!this.chars[k].isEmpty()){S=!1;break}return S},E.setCursor=function(S){this.pos!==S&&(this.pos=S),this.pos<0?(this.logger.log(n.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>o&&(this.logger.log(n.DEBUG,"Too large cursor position "+this.pos),this.pos=o)},E.moveCursor=function(S){var k=this.pos+S;if(S>1)for(var w=this.pos+1;w<k+1;w++)this.chars[w].setPenState(this.currPenState);this.setCursor(k)},E.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},E.insertChar=function(S){S>=144&&this.backSpace();var k=u(S);this.pos>=o?this.logger.log(n.ERROR,"Cannot insert "+S.toString(16)+" ("+k+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(k,this.currPenState),this.moveCursor(1))},E.clearFromPos=function(S){var k;for(k=S;k<o;k++)this.chars[k].reset()},E.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},E.clearToEndOfRow=function(){this.clearFromPos(this.pos)},E.getTextString=function(){for(var S=[],k=!0,w=0;w<o;w++){var O=this.chars[w].uchar;O!==" "&&(k=!1),S.push(O)}return k?"":S.join("")},E.setPenStyles=function(S){this.currPenState.setStyles(S),this.chars[this.pos].setPenState(this.currPenState)},R}(),m=function(){function R(S){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var k=0;k<l;k++)this.rows.push(new v(S));this.logger=S,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var E=R.prototype;return E.reset=function(){for(var S=0;S<l;S++)this.rows[S].clear();this.currRow=14},E.equals=function(S){for(var k=!0,w=0;w<l;w++)if(!this.rows[w].equals(S.rows[w])){k=!1;break}return k},E.copy=function(S){for(var k=0;k<l;k++)this.rows[k].copy(S.rows[k])},E.isEmpty=function(){for(var S=!0,k=0;k<l;k++)if(!this.rows[k].isEmpty()){S=!1;break}return S},E.backSpace=function(){this.rows[this.currRow].backSpace()},E.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},E.insertChar=function(S){this.rows[this.currRow].insertChar(S)},E.setPen=function(S){this.rows[this.currRow].setPenStyles(S)},E.moveCursor=function(S){this.rows[this.currRow].moveCursor(S)},E.setCursor=function(S){this.logger.log(n.INFO,"setCursor: "+S),this.rows[this.currRow].setCursor(S)},E.setPAC=function(S){this.logger.log(n.INFO,"pacData = "+JSON.stringify(S));var k=S.row-1;if(this.nrRollUpRows&&k<this.nrRollUpRows-1&&(k=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==k){for(var w=0;w<l;w++)this.rows[w].clear();var O=this.currRow+1-this.nrRollUpRows,I=this.lastOutputScreen;if(I){var P=I.rows[O].cueStartTime,D=this.logger.time;if(P&&D!==null&&P<D)for(var x=0;x<this.nrRollUpRows;x++)this.rows[k-this.nrRollUpRows+x+1].copy(I.rows[O+x])}}this.currRow=k;var M=this.rows[this.currRow];if(S.indent!==null){var B=S.indent,H=Math.max(B-1,0);M.setCursor(S.indent),S.color=M.chars[H].penState.foreground}var $={foreground:S.color,underline:S.underline,italics:S.italics,background:"black",flash:!1};this.setPen($)},E.setBkgData=function(S){this.logger.log(n.INFO,"bkgData = "+JSON.stringify(S)),this.backSpace(),this.setPen(S),this.insertChar(32)},E.setRollUpRows=function(S){this.nrRollUpRows=S},E.rollUp=function(){if(this.nrRollUpRows!==null){this.logger.log(n.TEXT,this.getDisplayText());var S=this.currRow+1-this.nrRollUpRows,k=this.rows.splice(S,1)[0];k.clear(),this.rows.splice(this.currRow,0,k),this.logger.log(n.INFO,"Rolling up")}else this.logger.log(n.DEBUG,"roll_up but nrRollUpRows not set yet")},E.getDisplayText=function(S){S=S||!1;for(var k=[],w="",O=-1,I=0;I<l;I++){var P=this.rows[I].getTextString();P&&(O=I+1,S?k.push("Row "+O+": '"+P+"'"):k.push(P.trim()))}return k.length>0&&(w=S?"["+k.join(" | ")+"]":k.join(`
`)),w},E.getTextAndFormat=function(){return this.rows},R}(),y=function(){function R(S,k,w){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=S,this.outputFilter=k,this.mode=null,this.verbose=0,this.displayedMemory=new m(w),this.nonDisplayedMemory=new m(w),this.lastOutputScreen=new m(w),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=w}var E=R.prototype;return E.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},E.getHandler=function(){return this.outputFilter},E.setHandler=function(S){this.outputFilter=S},E.setPAC=function(S){this.writeScreen.setPAC(S)},E.setBkgData=function(S){this.writeScreen.setBkgData(S)},E.setMode=function(S){S!==this.mode&&(this.mode=S,this.logger.log(n.INFO,"MODE="+S),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=S)},E.insertChars=function(S){for(var k=0;k<S.length;k++)this.writeScreen.insertChar(S[k]);var w=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(n.INFO,w+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(n.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},E.ccRCL=function(){this.logger.log(n.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},E.ccBS=function(){this.logger.log(n.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},E.ccAOF=function(){},E.ccAON=function(){},E.ccDER=function(){this.logger.log(n.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},E.ccRU=function(S){this.logger.log(n.INFO,"RU("+S+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(S)},E.ccFON=function(){this.logger.log(n.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},E.ccRDC=function(){this.logger.log(n.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},E.ccTR=function(){this.logger.log(n.INFO,"TR"),this.setMode("MODE_TEXT")},E.ccRTD=function(){this.logger.log(n.INFO,"RTD"),this.setMode("MODE_TEXT")},E.ccEDM=function(){this.logger.log(n.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},E.ccCR=function(){this.logger.log(n.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},E.ccENM=function(){this.logger.log(n.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},E.ccEOC=function(){if(this.logger.log(n.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var S=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=S,this.writeScreen=this.nonDisplayedMemory,this.logger.log(n.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},E.ccTO=function(S){this.logger.log(n.INFO,"TO("+S+") - Tab Offset"),this.writeScreen.moveCursor(S)},E.ccMIDROW=function(S){var k={flash:!1};if(k.underline=S%2==1,k.italics=S>=46,k.italics)k.foreground="white";else{var w=Math.floor(S/2)-16;k.foreground=["white","green","blue","cyan","red","yellow","magenta"][w]}this.logger.log(n.INFO,"MIDROW: "+JSON.stringify(k)),this.writeScreen.setPen(k)},E.outputDataUpdate=function(S){S===void 0&&(S=!1);var k=this.logger.time;k!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,k,this.lastOutputScreen),S&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:k):this.cueStartTime=k,this.lastOutputScreen.copy(this.displayedMemory))},E.cueSplitAtTime=function(S){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,S,this.displayedMemory),this.cueStartTime=S))},R}(),T=function(){function R(S,k,w){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var O=new b;this.channels=[null,new y(S,k,O),new y(S+1,w,O)],this.cmdHistory={a:null,b:null},this.logger=O}var E=R.prototype;return E.getHandler=function(S){return this.channels[S].getHandler()},E.setHandler=function(S,k){this.channels[S].setHandler(k)},E.addData=function(S,k){var w,O,I,P=!1;this.logger.time=S;for(var D=0;D<k.length;D+=2)if(O=127&k[D],I=127&k[D+1],O!==0||I!==0){if(this.logger.log(n.DATA,"["+c([k[D],k[D+1]])+"] -> ("+c([O,I])+")"),(w=this.parseCmd(O,I))||(w=this.parseMidrow(O,I)),w||(w=this.parsePAC(O,I)),w||(w=this.parseBackgroundAttributes(O,I)),!w&&(P=this.parseChars(O,I))){var x=this.currentChannel;x&&x>0?this.channels[x].insertChars(P):this.logger.log(n.WARNING,"No channel found yet. TEXT-MODE?")}w||P||this.logger.log(n.WARNING,"Couldn't parse cleaned data "+c([O,I])+" orig: "+c([k[D],k[D+1]]))}},E.parseCmd=function(S,k){var w=this.cmdHistory;if(!((S===20||S===28||S===21||S===29)&&k>=32&&k<=47||(S===23||S===31)&&k>=33&&k<=35))return!1;if(C(S,k,w))return L(null,null,w),this.logger.log(n.DEBUG,"Repeated command ("+c([S,k])+") is dropped"),!0;var O=S===20||S===21||S===23?1:2,I=this.channels[O];return S===20||S===21||S===28||S===29?k===32?I.ccRCL():k===33?I.ccBS():k===34?I.ccAOF():k===35?I.ccAON():k===36?I.ccDER():k===37?I.ccRU(2):k===38?I.ccRU(3):k===39?I.ccRU(4):k===40?I.ccFON():k===41?I.ccRDC():k===42?I.ccTR():k===43?I.ccRTD():k===44?I.ccEDM():k===45?I.ccCR():k===46?I.ccENM():k===47&&I.ccEOC():I.ccTO(k-32),L(S,k,w),this.currentChannel=O,!0},E.parseMidrow=function(S,k){var w=0;if((S===17||S===25)&&k>=32&&k<=47){if((w=S===17?1:2)!==this.currentChannel)return this.logger.log(n.ERROR,"Mismatch channel in midrow parsing"),!1;var O=this.channels[w];return!!O&&(O.ccMIDROW(k),this.logger.log(n.DEBUG,"MIDROW ("+c([S,k])+")"),!0)}return!1},E.parsePAC=function(S,k){var w,O=this.cmdHistory;if(!((S>=17&&S<=23||S>=25&&S<=31)&&k>=64&&k<=127||(S===16||S===24)&&k>=64&&k<=95))return!1;if(C(S,k,O))return L(null,null,O),!0;var I=S<=23?1:2;w=k>=64&&k<=95?I===1?h[S]:g[S]:I===1?p[S]:_[S];var P=this.channels[I];return!!P&&(P.setPAC(this.interpretPAC(w,k)),L(S,k,O),this.currentChannel=I,!0)},E.interpretPAC=function(S,k){var w,O={color:null,italics:!1,indent:null,underline:!1,row:S};return w=k>95?k-96:k-64,O.underline=(1&w)==1,w<=13?O.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(w/2)]:w<=15?(O.italics=!0,O.color="white"):O.indent=4*Math.floor((w-16)/2),O},E.parseChars=function(S,k){var w,O,I=null,P=null;if(S>=25?(w=2,P=S-8):(w=1,P=S),P>=17&&P<=19?(O=P===17?k+80:P===18?k+112:k+144,this.logger.log(n.INFO,"Special char '"+u(O)+"' in channel "+w),I=[O]):S>=32&&S<=127&&(I=k===0?[S]:[S,k]),I){var D=c(I);this.logger.log(n.DEBUG,"Char codes =  "+D.join(",")),L(S,k,this.cmdHistory)}return I},E.parseBackgroundAttributes=function(S,k){var w;if(!((S===16||S===24)&&k>=32&&k<=47||(S===23||S===31)&&k>=45&&k<=47))return!1;var O={};S===16||S===24?(w=Math.floor((k-32)/2),O.background=A[w],k%2==1&&(O.background=O.background+"_semi")):k===45?O.background="transparent":(O.foreground="black",k===47&&(O.underline=!0));var I=S<=23?1:2;return this.channels[I].setBkgData(O),L(S,k,this.cmdHistory),!0},E.reset=function(){for(var S=0;S<Object.keys(this.channels).length;S++){var k=this.channels[S];k&&k.reset()}this.cmdHistory={a:null,b:null}},E.cueSplitAtTime=function(S){for(var k=0;k<this.channels.length;k++){var w=this.channels[k];w&&w.cueSplitAtTime(S)}},R}();function L(R,E,S){S.a=R,S.b=E}function C(R,E,S){return S.a===R&&S.b===E}t.default=T},"./src/utils/codecs.ts":function(e,t,r){r.r(t),r.d(t,"isCodecType",function(){return i}),r.d(t,"isCodecSupportedInMp4",function(){return s});var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function i(a,u){var l=n[u];return!!l&&l[a.slice(0,4)]===!0}function s(a,u){return MediaSource.isTypeSupported((u||"video")+'/mp4;codecs="'+a+'"')}},"./src/utils/cues.ts":function(e,t,r){r.r(t);var n=r("./src/utils/vttparser.ts"),i=r("./src/utils/webvtt-parser.ts"),s=r("./src/utils/texttrack-utils.ts"),a=/\s/,u={newCue:function(l,o,h,p){for(var g,_,A,b,c,d=[],f=self.VTTCue||self.TextTrackCue,v=0;v<p.rows.length;v++)if(A=!0,b=0,c="",!(g=p.rows[v]).isEmpty()){for(var m=0;m<g.chars.length;m++)a.test(g.chars[m].uchar)&&A?b++:(c+=g.chars[m].uchar,A=!1);g.cueStartTime=o,o===h&&(h+=1e-4),b>=16?b--:b++;var y=Object(n.fixLineBreaks)(c.trim()),T=Object(i.generateCueId)(o,h,y);l&&l.cues&&l.cues.getCueById(T)||((_=new f(o,h,y)).id=T,_.line=v+1,_.align="left",_.position=10+Math.min(80,10*Math.floor(8*b/32)),d.push(_))}return l&&d.length&&(d.sort(function(L,C){return L.line==="auto"||C.line==="auto"?0:L.line>8&&C.line>8?C.line-L.line:L.line-C.line}),d.forEach(function(L){return Object(s.addCueToTrack)(l,L)})),d}};t.default=u},"./src/utils/discontinuities.ts":function(e,t,r){r.r(t),r.d(t,"findFirstFragWithCC",function(){return a}),r.d(t,"shouldAlignOnDiscontinuities",function(){return u}),r.d(t,"findDiscontinuousReferenceFrag",function(){return l}),r.d(t,"adjustSlidingStart",function(){return h}),r.d(t,"alignStream",function(){return p}),r.d(t,"alignPDT",function(){return g});var n=r("./src/polyfills/number.ts"),i=r("./src/utils/logger.ts"),s=r("./src/controller/level-helper.ts");function a(_,A){for(var b=null,c=0,d=_.length;c<d;c++){var f=_[c];if(f&&f.cc===A){b=f;break}}return b}function u(_,A,b){return!(!A.details||!(b.endCC>b.startCC||_&&_.cc<b.startCC))}function l(_,A){var b=_.fragments,c=A.fragments;if(c.length&&b.length){var d=a(b,c[0].cc);if(d&&(!d||d.startPTS))return d;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function o(_,A){if(_){var b=_.start+A;_.start=_.startPTS=b,_.endPTS=b+_.duration}}function h(_,A){for(var b=A.fragments,c=0,d=b.length;c<d;c++)o(b[c],_);A.fragmentHint&&o(A.fragmentHint,_),A.alignedSliding=!0}function p(_,A,b){A&&(function(c,d,f){if(u(c,f,d)){var v=l(f.details,d);v&&Object(n.isFiniteNumber)(v.start)&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level "+d.url),h(v.start,d))}}(_,b,A),!b.alignedSliding&&A.details&&g(b,A.details),b.alignedSliding||!A.details||b.skippedSegments||Object(s.adjustSliding)(A.details,b))}function g(_,A){if(A.fragments.length&&_.hasProgramDateTime&&A.hasProgramDateTime){var b=A.fragments[0].programDateTime,c=_.fragments[0].programDateTime,d=(c-b)/1e3+A.fragments[0].start;d&&Object(n.isFiniteNumber)(d)&&(i.logger.log("Adjusting PTS using programDateTime delta "+(c-b)+"ms, sliding:"+d.toFixed(3)+" "+_.url+" "),h(d,_))}}},"./src/utils/ewma-bandwidth-estimator.ts":function(e,t,r){r.r(t);var n=r("./src/utils/ewma.ts"),i=function(){function s(u,l,o){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(u),this.fast_=new n.default(l)}var a=s.prototype;return a.update=function(u,l){var o=this.slow_,h=this.fast_;this.slow_.halfLife!==u&&(this.slow_=new n.default(u,o.getEstimate(),o.getTotalWeight())),this.fast_.halfLife!==l&&(this.fast_=new n.default(l,h.getEstimate(),h.getTotalWeight()))},a.sample=function(u,l){var o=(u=Math.max(u,this.minDelayMs_))/1e3,h=8*l/o;this.fast_.sample(o,h),this.slow_.sample(o,h)},a.canEstimate=function(){var u=this.fast_;return u&&u.getTotalWeight()>=this.minWeight_},a.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},a.destroy=function(){},s}();t.default=i},"./src/utils/ewma.ts":function(e,t,r){r.r(t);var n=function(){function i(a,u,l){u===void 0&&(u=0),l===void 0&&(l=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=a,this.alpha_=a?Math.exp(Math.log(.5)/a):0,this.estimate_=u,this.totalWeight_=l}var s=i.prototype;return s.sample=function(a,u){var l=Math.pow(this.alpha_,a);this.estimate_=u*(1-l)+l*this.estimate_,this.totalWeight_+=a},s.getTotalWeight=function(){return this.totalWeight_},s.getEstimate=function(){if(this.alpha_){var a=1-Math.pow(this.alpha_,this.totalWeight_);if(a)return this.estimate_/a}return this.estimate_},i}();t.default=n},"./src/utils/fetch-loader.ts":function(e,t,r){r.r(t),r.d(t,"fetchSupported",function(){return p});var n=r("./src/polyfills/number.ts"),i=r("./src/loader/load-stats.ts"),s=r("./src/demux/chunk-cache.ts");function a(b){var c=typeof Map=="function"?new Map:void 0;return(a=function(d){if(d===null||(f=d,Function.toString.call(f).indexOf("[native code]")===-1))return d;var f;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(c!==void 0){if(c.has(d))return c.get(d);c.set(d,v)}function v(){return u(d,arguments,h(this).constructor)}return v.prototype=Object.create(d.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),o(v,d)})(b)}function u(b,c,d){return(u=l()?Reflect.construct:function(f,v,m){var y=[null];y.push.apply(y,v);var T=new(Function.bind.apply(f,y));return m&&o(T,m.prototype),T}).apply(null,arguments)}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function o(b,c){return(o=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d})(b,c)}function h(b){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(b)}function p(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var g=function(){function b(d){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=d.fetchSetup||_,this.controller=new self.AbortController,this.stats=new i.LoadStats}var c=b.prototype;return c.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},c.abortInternal=function(){var d=this.response;d&&d.ok||(this.stats.aborted=!0,this.controller.abort())},c.abort=function(){var d;this.abortInternal(),(d=this.callbacks)!==null&&d!==void 0&&d.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},c.load=function(d,f,v){var m=this,y=this.stats;if(y.loading.start)throw new Error("Loader can only be used once.");y.loading.start=self.performance.now();var T=function(E,S){var k={method:"GET",mode:"cors",credentials:"same-origin",signal:S};return E.rangeEnd&&(k.headers=new self.Headers({Range:"bytes="+E.rangeStart+"-"+String(E.rangeEnd-1)})),k}(d,this.controller.signal),L=v.onProgress,C=d.responseType==="arraybuffer",R=C?"byteLength":"length";this.context=d,this.config=f,this.callbacks=v,this.request=this.fetchSetup(d,T),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){m.abortInternal(),v.onTimeout(y,d,m.response)},f.timeout),self.fetch(this.request).then(function(E){if(m.response=m.loader=E,!E.ok){var S=E.status,k=E.statusText;throw new A(k||"fetch, bad network response",S,E)}return y.loading.first=Math.max(self.performance.now(),y.loading.start),y.total=parseInt(E.headers.get("Content-Length")||"0"),L&&Object(n.isFiniteNumber)(f.highWaterMark)?m.loadProgressively(E,y,d,f.highWaterMark,L):C?E.arrayBuffer():E.text()}).then(function(E){var S=m.response;self.clearTimeout(m.requestTimeout),y.loading.end=Math.max(self.performance.now(),y.loading.first),y.loaded=y.total=E[R];var k={url:S.url,data:E};L&&!Object(n.isFiniteNumber)(f.highWaterMark)&&L(y,d,E,S),v.onSuccess(k,y,d,S)}).catch(function(E){if(self.clearTimeout(m.requestTimeout),!y.aborted){var S=E.code||0;v.onError({code:S,text:E.message},d,E.details)}})},c.getCacheAge=function(){var d=null;if(this.response){var f=this.response.headers.get("age");d=f?parseFloat(f):null}return d},c.loadProgressively=function(d,f,v,m,y){m===void 0&&(m=0);var T=new s.default,L=d.body.getReader();return function C(){return L.read().then(function(R){if(R.done)return T.dataLength&&y(f,v,T.flush(),d),Promise.resolve(new ArrayBuffer(0));var E=R.value,S=E.length;return f.loaded+=S,S<m||T.dataLength?(T.push(E),T.dataLength>=m&&y(f,v,T.flush(),d)):y(f,v,E,d),C()}).catch(function(){return Promise.reject()})}()},b}();function _(b,c){return new self.Request(b.url,c)}var A=function(b){var c,d;function f(v,m,y){var T;return(T=b.call(this,v)||this).code=void 0,T.details=void 0,T.code=m,T.details=y,T}return d=b,(c=f).prototype=Object.create(d.prototype),c.prototype.constructor=c,o(c,d),f}(a(Error));t.default=g},"./src/utils/imsc1-ttml-parser.ts":function(e,t,r){r.r(t),r.d(t,"IMSC1_CODEC",function(){return h}),r.d(t,"parseIMSC1",function(){return A});var n=r("./src/utils/mp4-tools.ts"),i=r("./src/utils/vttparser.ts"),s=r("./src/utils/vttcue.ts"),a=r("./src/demux/id3.ts"),u=r("./src/utils/timescale-conversion.ts"),l=r("./src/utils/webvtt-parser.ts");function o(){return(o=Object.assign||function(y){for(var T=1;T<arguments.length;T++){var L=arguments[T];for(var C in L)Object.prototype.hasOwnProperty.call(L,C)&&(y[C]=L[C])}return y}).apply(this,arguments)}var h="stpp.ttml.im1t",p=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,g=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,_={left:"start",center:"center",right:"end",start:"start",end:"end"};function A(y,T,L,C,R){var E=Object(n.findBox)(new Uint8Array(y),["mdat"]);if(E.length!==0){var S=E[0],k=Object(a.utf8ArrayToStr)(new Uint8Array(y,S.start,S.end-S.start)),w=Object(u.toTimescaleFromScale)(T,1,L);try{C(function(O,I){var P=new DOMParser().parseFromString(O,"text/xml").getElementsByTagName("tt")[0];if(!P)throw new Error("Invalid ttml");var D={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},x=Object.keys(D).reduce(function(q,te){return q[te]=P.getAttribute("ttp:"+te)||D[te],q},{}),M=P.getAttribute("xml:space")!=="preserve",B=c(b(P,"styling","style")),H=c(b(P,"layout","region")),$=b(P,"body","[begin]");return[].map.call($,function(q){var te=d(q,M);if(!te||!q.hasAttribute("begin"))return null;var K=m(q.getAttribute("begin"),x),X=m(q.getAttribute("dur"),x),z=m(q.getAttribute("end"),x);if(K===null)throw v(q);if(z===null){if(X===null)throw v(q);z=K+X}var Z=new s.default(K-I,z-I,te);Z.id=Object(l.generateCueId)(Z.startTime,Z.endTime,Z.text);var oe=H[q.getAttribute("region")],fe=B[q.getAttribute("style")];Z.position=10,Z.size=80;var U=function(N,G){var W="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(J,ee){var ae=f(G,W,ee)||f(N,W,ee);return ae&&(J[ee]=ae),J},{})}(oe,fe),j=U.textAlign;if(j){var F=_[j];F&&(Z.lineAlign=F),Z.align=j}return o(Z,U),Z}).filter(function(q){return q!==null})}(k,w))}catch(O){R(O)}}else R(new Error("Could not parse IMSC1 mdat"))}function b(y,T,L){var C=y.getElementsByTagName(T)[0];return C?[].slice.call(C.querySelectorAll(L)):[]}function c(y){return y.reduce(function(T,L){var C=L.getAttribute("xml:id");return C&&(T[C]=L),T},{})}function d(y,T){return[].slice.call(y.childNodes).reduce(function(L,C,R){var E;return C.nodeName==="br"&&R?L+`
`:(E=C.childNodes)!==null&&E!==void 0&&E.length?d(C,T):T?L+C.textContent.trim().replace(/\s+/g," "):L+C.textContent},"")}function f(y,T,L){return y.hasAttributeNS(T,L)?y.getAttributeNS(T,L):null}function v(y){return new Error("Could not parse ttml timestamp "+y)}function m(y,T){if(!y)return null;var L=Object(i.parseTimeStamp)(y);return L===null&&(p.test(y)?L=function(C,R){var E=p.exec(C),S=(0|E[4])+(0|E[5])/R.subFrameRate;return 3600*(0|E[1])+60*(0|E[2])+(0|E[3])+S/R.frameRate}(y,T):g.test(y)&&(L=function(C,R){var E=g.exec(C),S=Number(E[1]);switch(E[2]){case"h":return 3600*S;case"m":return 60*S;case"ms":return 1e3*S;case"f":return S/R.frameRate;case"t":return S/R.tickRate}return S}(y,T))),L}},"./src/utils/logger.ts":function(e,t,r){r.r(t),r.d(t,"enableLogs",function(){return u}),r.d(t,"logger",function(){return l});var n=function(){},i={trace:n,debug:n,log:n,warn:n,info:n,error:n},s=i;function a(o){var h=self.console[o];return h?h.bind(self.console,"["+o+"] >"):n}function u(o){if(self.console&&o===!0||typeof o=="object"){(function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),_=1;_<p;_++)g[_-1]=arguments[_];g.forEach(function(A){s[A]=h[A]?h[A].bind(h):a(A)})})(o,"debug","log","info","warn","error");try{s.log()}catch{s=i}}else s=i}var l=i},"./src/utils/mediakeys-helper.ts":function(e,t,r){var n,i;r.r(t),r.d(t,"KeySystems",function(){return n}),r.d(t,"requestMediaKeySystemAccess",function(){return s}),(i=n||(n={})).WIDEVINE="com.widevine.alpha",i.PLAYREADY="com.microsoft.playready";var s=typeof self!="undefined"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(e,t,r){function n(){return self.MediaSource||self.WebKitMediaSource}r.r(t),r.d(t,"getMediaSource",function(){return n})},"./src/utils/mp4-tools.ts":function(e,t,r){r.r(t),r.d(t,"bin2str",function(){return u}),r.d(t,"readUint16",function(){return l}),r.d(t,"readUint32",function(){return o}),r.d(t,"writeUint32",function(){return h}),r.d(t,"findBox",function(){return p}),r.d(t,"parseSegmentIndex",function(){return g}),r.d(t,"parseInitSegment",function(){return _}),r.d(t,"getStartDTS",function(){return A}),r.d(t,"getDuration",function(){return b}),r.d(t,"computeRawDurationFromSamples",function(){return c}),r.d(t,"offsetStartDTS",function(){return d}),r.d(t,"segmentValidRange",function(){return f}),r.d(t,"appendUint8Array",function(){return v});var n=r("./src/utils/typed-array.ts"),i=r("./src/loader/fragment.ts"),s=Math.pow(2,32)-1,a=[].push;function u(m){return String.fromCharCode.apply(null,m)}function l(m,y){"data"in m&&(y+=m.start,m=m.data);var T=m[y]<<8|m[y+1];return T<0?65536+T:T}function o(m,y){"data"in m&&(y+=m.start,m=m.data);var T=m[y]<<24|m[y+1]<<16|m[y+2]<<8|m[y+3];return T<0?4294967296+T:T}function h(m,y,T){"data"in m&&(y+=m.start,m=m.data),m[y]=T>>24,m[y+1]=T>>16&255,m[y+2]=T>>8&255,m[y+3]=255&T}function p(m,y){var T,L,C,R=[];if(!y.length)return R;"data"in m?(T=m.data,L=m.start,C=m.end):(L=0,C=(T=m).byteLength);for(var E=L;E<C;){var S=o(T,E),k=S>1?E+S:C;if(u(T.subarray(E+4,E+8))===y[0])if(y.length===1)R.push({data:T,start:E+8,end:k});else{var w=p({data:T,start:E+8,end:k},y.slice(1));w.length&&a.apply(R,w)}E=k}return R}function g(m){var y=p(m,["moov"])[0],T=y?y.end:null,L=p(m,["sidx"]);if(!L||!L[0])return null;var C=[],R=L[0],E=R.data[0],S=E===0?8:16,k=o(R,S);S+=4,S+=E===0?8:16,S+=2;var w=R.end+0,O=l(R,S);S+=2;for(var I=0;I<O;I++){var P=S,D=o(R,P);P+=4;var x=2147483647&D;if((2147483648&D)>>>31==1)return console.warn("SIDX has hierarchical references (not supported)"),null;var M=o(R,P);P+=4,C.push({referenceSize:x,subsegmentDuration:M,info:{duration:M/k,start:w,end:w+x-1}}),w+=x,S=P+=4}return{earliestPresentationTime:0,timescale:k,version:E,referencesCount:O,references:C,moovEndOffset:T}}function _(m){for(var y=[],T=p(m,["moov","trak"]),L=0;L<T.length;L++){var C=T[L],R=p(C,["tkhd"])[0];if(R){var E=R.data[R.start],S=E===0?12:20,k=o(R,S),w=p(C,["mdia","mdhd"])[0];if(w){var O=o(w,S=(E=w.data[w.start])===0?12:20),I=p(C,["mdia","hdlr"])[0];if(I){var P=u(I.data.subarray(I.start+8,I.start+12)),D={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[P];if(D){var x=p(C,["mdia","minf","stbl","stsd"])[0],M=void 0;x&&(M=u(x.data.subarray(x.start+12,x.start+16))),y[k]={timescale:O,type:D},y[D]={timescale:O,id:k,codec:M}}}}}}return p(m,["moov","mvex","trex"]).forEach(function(B){var H=o(B,4),$=y[H];$&&($.default={duration:o(B,12),flags:o(B,20)})}),y}function A(m,y){return p(y,["moof","traf"]).reduce(function(T,L){var C=p(L,["tfdt"])[0],R=C.data[C.start],E=p(L,["tfhd"]).reduce(function(S,k){var w=o(k,4),O=m[w];if(O){var I=o(C,4);R===1&&(I*=Math.pow(2,32),I+=o(C,8));var P=I/(O.timescale||9e4);if(isFinite(P)&&(S===null||P<S))return P}return S},null);return E!==null&&isFinite(E)&&(T===null||E<T)?E:T},null)||0}function b(m,y){for(var T=0,L=0,C=0,R=p(m,["moof","traf"]),E=0;E<R.length;E++){var S=R[E],k=p(S,["tfhd"])[0],w=y[o(k,4)];if(w){var O=w.default,I=o(k,0)|(O==null?void 0:O.flags),P=O==null?void 0:O.duration;8&I&&(P=o(k,2&I?12:8));for(var D=w.timescale||9e4,x=p(S,["trun"]),M=0;M<x.length;M++)T=P?P*o(x[M],4):c(x[M]),w.type===i.ElementaryStreamTypes.VIDEO?L+=T/D:w.type===i.ElementaryStreamTypes.AUDIO&&(C+=T/D)}}if(L===0&&C===0){var B=g(m);if(B!=null&&B.references)return B.references.reduce(function(H,$){return H+$.info.duration||0},0)}return L||C}function c(m){var y=o(m,0),T=8;1&y&&(T+=4),4&y&&(T+=4);for(var L=0,C=o(m,4),R=0;R<C;R++)256&y&&(L+=o(m,T),T+=4),512&y&&(T+=4),1024&y&&(T+=4),2048&y&&(T+=4);return L}function d(m,y,T){p(y,["moof","traf"]).forEach(function(L){p(L,["tfhd"]).forEach(function(C){var R=o(C,4),E=m[R];if(E){var S=E.timescale||9e4;p(L,["tfdt"]).forEach(function(k){var w=k.data[k.start],O=o(k,4);if(w===0)h(k,4,O-T*S);else{O*=Math.pow(2,32),O+=o(k,8),O-=T*S,O=Math.max(O,0);var I=Math.floor(O/(s+1)),P=Math.floor(O%(s+1));h(k,4,I),h(k,8,P)}})}})})}function f(m){var y={valid:null,remainder:null},T=p(m,["moof"]);if(!T)return y;if(T.length<2)return y.remainder=m,y;var L=T[T.length-1];return y.valid=Object(n.sliceUint8)(m,0,L.start-8),y.remainder=Object(n.sliceUint8)(m,L.start-8),y}function v(m,y){var T=new Uint8Array(m.length+y.length);return T.set(m),T.set(y,m.length),T}},"./src/utils/output-filter.ts":function(e,t,r){r.r(t),r.d(t,"default",function(){return n});var n=function(){function i(a,u){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=a,this.trackName=u}var s=i.prototype;return s.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},s.newCue=function(a,u,l){(this.startTime===null||this.startTime>a)&&(this.startTime=a),this.endTime=u,this.screen=l,this.timelineController.createCaptionsTrack(this.trackName)},s.reset=function(){this.cueRanges=[]},i}()},"./src/utils/texttrack-utils.ts":function(e,t,r){r.r(t),r.d(t,"sendAddTrackEvent",function(){return i}),r.d(t,"addCueToTrack",function(){return s}),r.d(t,"clearCurrentCues",function(){return a}),r.d(t,"removeCuesInRange",function(){return u}),r.d(t,"getCuesInRange",function(){return l});var n=r("./src/utils/logger.ts");function i(o,h){var p;try{p=new Event("addtrack")}catch{(p=document.createEvent("Event")).initEvent("addtrack",!1,!1)}p.track=o,h.dispatchEvent(p)}function s(o,h){var p=o.mode;if(p==="disabled"&&(o.mode="hidden"),o.cues&&!o.cues.getCueById(h.id))try{if(o.addCue(h),!o.cues.getCueById(h.id))throw new Error("addCue is failed for: "+h)}catch(_){n.logger.debug("[texttrack-utils]: "+_);var g=new self.TextTrackCue(h.startTime,h.endTime,h.text);g.id=h.id,o.addCue(g)}p==="disabled"&&(o.mode=p)}function a(o){var h=o.mode;if(h==="disabled"&&(o.mode="hidden"),o.cues)for(var p=o.cues.length;p--;)o.removeCue(o.cues[p]);h==="disabled"&&(o.mode=h)}function u(o,h,p){var g=o.mode;if(g==="disabled"&&(o.mode="hidden"),o.cues&&o.cues.length>0)for(var _=l(o.cues,h,p),A=0;A<_.length;A++)o.removeCue(_[A]);g==="disabled"&&(o.mode=g)}function l(o,h,p){var g=[],_=function(d,f){if(f<d[0].startTime)return 0;var v=d.length-1;if(f>d[v].endTime)return-1;for(var m=0,y=v;m<=y;){var T=Math.floor((y+m)/2);if(f<d[T].startTime)y=T-1;else{if(!(f>d[T].startTime&&m<v))return T;m=T+1}}return d[m].startTime-f<f-d[y].startTime?m:y}(o,h);if(_>-1)for(var A=_,b=o.length;A<b;A++){var c=o[A];if(c.startTime>=h&&c.endTime<=p)g.push(c);else if(c.startTime>p)return g}return g}},"./src/utils/time-ranges.ts":function(e,t,r){r.r(t),t.default={toString:function(n){for(var i="",s=n.length,a=0;a<s;a++)i+="["+n.start(a).toFixed(3)+","+n.end(a).toFixed(3)+"]";return i}}},"./src/utils/timescale-conversion.ts":function(e,t,r){function n(u,l,o,h){o===void 0&&(o=1),h===void 0&&(h=!1);var p=u*l*o;return h?Math.round(p):p}function i(u,l,o,h){return o===void 0&&(o=1),h===void 0&&(h=!1),n(u,l,1/o,h)}function s(u,l){return l===void 0&&(l=!1),n(u,1e3,1/9e4,l)}function a(u,l){return l===void 0&&(l=1),n(u,9e4,1/l)}r.r(t),r.d(t,"toTimescaleFromBase",function(){return n}),r.d(t,"toTimescaleFromScale",function(){return i}),r.d(t,"toMsFromMpegTsClock",function(){return s}),r.d(t,"toMpegTsClockFromTimescale",function(){return a})},"./src/utils/typed-array.ts":function(e,t,r){function n(i,s,a){return Uint8Array.prototype.slice?i.slice(s,a):new Uint8Array(Array.prototype.slice.call(i,s,a))}r.r(t),r.d(t,"sliceUint8",function(){return n})},"./src/utils/vttcue.ts":function(e,t,r){r.r(t),t.default=function(){if(typeof self!="undefined"&&self.VTTCue)return self.VTTCue;var n=["","lr","rl"],i=["start","middle","end","left","right"];function s(o,h){if(typeof h!="string"||!Array.isArray(o))return!1;var p=h.toLowerCase();return!!~o.indexOf(p)&&p}function a(o){return s(i,o)}function u(o){for(var h=arguments.length,p=new Array(h>1?h-1:0),g=1;g<h;g++)p[g-1]=arguments[g];for(var _=1;_<arguments.length;_++){var A=arguments[_];for(var b in A)o[b]=A[b]}return o}function l(o,h,p){var g=this,_={enumerable:!0};g.hasBeenReset=!1;var A="",b=!1,c=o,d=h,f=p,v=null,m="",y=!0,T="auto",L="start",C=50,R="middle",E=50,S="middle";Object.defineProperty(g,"id",u({},_,{get:function(){return A},set:function(k){A=""+k}})),Object.defineProperty(g,"pauseOnExit",u({},_,{get:function(){return b},set:function(k){b=!!k}})),Object.defineProperty(g,"startTime",u({},_,{get:function(){return c},set:function(k){if(typeof k!="number")throw new TypeError("Start time must be set to a number.");c=k,this.hasBeenReset=!0}})),Object.defineProperty(g,"endTime",u({},_,{get:function(){return d},set:function(k){if(typeof k!="number")throw new TypeError("End time must be set to a number.");d=k,this.hasBeenReset=!0}})),Object.defineProperty(g,"text",u({},_,{get:function(){return f},set:function(k){f=""+k,this.hasBeenReset=!0}})),Object.defineProperty(g,"region",u({},_,{get:function(){return v},set:function(k){v=k,this.hasBeenReset=!0}})),Object.defineProperty(g,"vertical",u({},_,{get:function(){return m},set:function(k){var w=function(O){return s(n,O)}(k);if(w===!1)throw new SyntaxError("An invalid or illegal string was specified.");m=w,this.hasBeenReset=!0}})),Object.defineProperty(g,"snapToLines",u({},_,{get:function(){return y},set:function(k){y=!!k,this.hasBeenReset=!0}})),Object.defineProperty(g,"line",u({},_,{get:function(){return T},set:function(k){if(typeof k!="number"&&k!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=k,this.hasBeenReset=!0}})),Object.defineProperty(g,"lineAlign",u({},_,{get:function(){return L},set:function(k){var w=a(k);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");L=w,this.hasBeenReset=!0}})),Object.defineProperty(g,"position",u({},_,{get:function(){return C},set:function(k){if(k<0||k>100)throw new Error("Position must be between 0 and 100.");C=k,this.hasBeenReset=!0}})),Object.defineProperty(g,"positionAlign",u({},_,{get:function(){return R},set:function(k){var w=a(k);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");R=w,this.hasBeenReset=!0}})),Object.defineProperty(g,"size",u({},_,{get:function(){return E},set:function(k){if(k<0||k>100)throw new Error("Size must be between 0 and 100.");E=k,this.hasBeenReset=!0}})),Object.defineProperty(g,"align",u({},_,{get:function(){return S},set:function(k){var w=a(k);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");S=w,this.hasBeenReset=!0}})),g.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l}()},"./src/utils/vttparser.ts":function(e,t,r){r.r(t),r.d(t,"parseTimeStamp",function(){return s}),r.d(t,"fixLineBreaks",function(){return p}),r.d(t,"VTTParser",function(){return g});var n=r("./src/utils/vttcue.ts"),i=function(){function _(){}return _.prototype.decode=function(A,b){if(!A)return"";if(typeof A!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(A))},_}();function s(_){function A(c,d,f,v){return 3600*(0|c)+60*(0|d)+(0|f)+parseFloat(v||0)}var b=_.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return b?parseFloat(b[2])>59?A(b[2],b[3],0,b[4]):A(b[1],b[2],b[3],b[4]):null}var a=function(){function _(){this.values=Object.create(null)}var A=_.prototype;return A.set=function(b,c){this.get(b)||c===""||(this.values[b]=c)},A.get=function(b,c,d){return d?this.has(b)?this.values[b]:c[d]:this.has(b)?this.values[b]:c},A.has=function(b){return b in this.values},A.alt=function(b,c,d){for(var f=0;f<d.length;++f)if(c===d[f]){this.set(b,c);break}},A.integer=function(b,c){/^-?\d+$/.test(c)&&this.set(b,parseInt(c,10))},A.percent=function(b,c){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(c)){var d=parseFloat(c);if(d>=0&&d<=100)return this.set(b,d),!0}return!1},_}();function u(_,A,b,c){var d=c?_.split(c):[_];for(var f in d)if(typeof d[f]=="string"){var v=d[f].split(b);v.length===2&&A(v[0],v[1])}}var l=new n.default(0,0,""),o=l.align==="middle"?"middle":"center";function h(_,A,b){var c=_;function d(){var v=s(_);if(v===null)throw new Error("Malformed timestamp: "+c);return _=_.replace(/^[^\sa-zA-Z-]+/,""),v}function f(){_=_.replace(/^\s+/,"")}if(f(),A.startTime=d(),f(),_.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+c);_=_.substr(3),f(),A.endTime=d(),f(),function(v,m){var y=new a;u(v,function(C,R){var E;switch(C){case"region":for(var S=b.length-1;S>=0;S--)if(b[S].id===R){y.set(C,b[S].region);break}break;case"vertical":y.alt(C,R,["rl","lr"]);break;case"line":E=R.split(","),y.integer(C,E[0]),y.percent(C,E[0])&&y.set("snapToLines",!1),y.alt(C,E[0],["auto"]),E.length===2&&y.alt("lineAlign",E[1],["start",o,"end"]);break;case"position":E=R.split(","),y.percent(C,E[0]),E.length===2&&y.alt("positionAlign",E[1],["start",o,"end","line-left","line-right","auto"]);break;case"size":y.percent(C,R);break;case"align":y.alt(C,R,["start",o,"end","left","right"])}},/:/,/\s/),m.region=y.get("region",null),m.vertical=y.get("vertical","");var T=y.get("line","auto");T==="auto"&&l.line===-1&&(T=-1),m.line=T,m.lineAlign=y.get("lineAlign","start"),m.snapToLines=y.get("snapToLines",!0),m.size=y.get("size",100),m.align=y.get("align",o);var L=y.get("position","auto");L==="auto"&&l.position===50&&(L=m.align==="start"||m.align==="left"?0:m.align==="end"||m.align==="right"?100:50),m.position=L}(_,A)}function p(_){return _.replace(/<br(?: \/)?>/gi,`
`)}var g=function(){function _(){this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var A=_.prototype;return A.parse=function(b){var c=this;function d(){var T=c.buffer,L=0;for(T=p(T);L<T.length&&T[L]!=="\r"&&T[L]!==`
`;)++L;var C=T.substr(0,L);return T[L]==="\r"&&++L,T[L]===`
`&&++L,c.buffer=T.substr(L),C}b&&(c.buffer+=c.decoder.decode(b,{stream:!0}));try{var f="";if(c.state==="INITIAL"){if(!/\r\n|\n/.test(c.buffer))return this;var v=(f=d()).match(/^()?WEBVTT([ \t].*)?$/);if(!v||!v[0])throw new Error("Malformed WebVTT signature.");c.state="HEADER"}for(var m=!1;c.buffer;){if(!/\r\n|\n/.test(c.buffer))return this;switch(m?m=!1:f=d(),c.state){case"HEADER":/:/.test(f)?u(f,function(T,L){},/:/):f||(c.state="ID");continue;case"NOTE":f||(c.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(f)){c.state="NOTE";break}if(!f)continue;if(c.cue=new n.default(0,0,""),c.state="CUE",f.indexOf("-->")===-1){c.cue.id=f;continue}case"CUE":if(!c.cue){c.state="BADCUE";continue}try{h(f,c.cue,c.regionList)}catch{c.cue=null,c.state="BADCUE";continue}c.state="CUETEXT";continue;case"CUETEXT":var y=f.indexOf("-->")!==-1;if(!f||y&&(m=!0)){c.oncue&&c.cue&&c.oncue(c.cue),c.cue=null,c.state="ID";continue}if(c.cue===null)continue;c.cue.text&&(c.cue.text+=`
`),c.cue.text+=f;continue;case"BADCUE":f||(c.state="ID")}}}catch{c.state==="CUETEXT"&&c.cue&&c.oncue&&c.oncue(c.cue),c.cue=null,c.state=c.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},A.flush=function(){var b=this;try{if((b.cue||b.state==="HEADER")&&(b.buffer+=`

`,b.parse()),b.state==="INITIAL"||b.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(c){b.onparsingerror&&b.onparsingerror(c)}return b.onflush&&b.onflush(),this},_}()},"./src/utils/webvtt-parser.ts":function(e,t,r){r.r(t),r.d(t,"generateCueId",function(){return p}),r.d(t,"parseWebVTT",function(){return g});var n=r("./src/polyfills/number.ts"),i=r("./src/utils/vttparser.ts"),s=r("./src/demux/id3.ts"),a=r("./src/utils/timescale-conversion.ts"),u=r("./src/remux/mp4-remuxer.ts"),l=/\r\n|\n\r|\n|\r/g,o=function(_,A,b){return b===void 0&&(b=0),_.substr(b,A.length)===A},h=function(_){for(var A=5381,b=_.length;b;)A=33*A^_.charCodeAt(--b);return(A>>>0).toString()};function p(_,A,b){return h(_.toString())+h(A.toString())+h(b)}function g(_,A,b,c,d,f,v,m){var y,T=new i.VTTParser,L=Object(s.utf8ArrayToStr)(new Uint8Array(_)).trim().replace(l,`
`).split(`
`),C=[],R=Object(a.toMpegTsClockFromTimescale)(A,b),E="00:00.000",S=0,k=0,w=!0,O=!1;T.oncue=function(I){var P=c[d],D=c.ccOffset,x=(S-R)/9e4;if(P!=null&&P.new&&(k!==void 0?D=c.ccOffset=P.start:function($,q,te){var K=$[q],X=$[K.prevCC];if(!X||!X.new&&K.new)return $.ccOffset=$.presentationOffset=K.start,void(K.new=!1);for(;(z=X)!==null&&z!==void 0&&z.new;){var z;$.ccOffset+=K.start-X.start,K.new=!1,X=$[(K=X).prevCC]}$.presentationOffset=te}(c,d,x)),x&&(D=x-c.presentationOffset),O){var M=I.endTime-I.startTime,B=Object(u.normalizePts)(9e4*(I.startTime+D-k),9e4*f)/9e4;I.startTime=B,I.endTime=B+M}var H=I.text.trim();I.text=decodeURIComponent(encodeURIComponent(H)),I.id||(I.id=p(I.startTime,I.endTime,H)),I.endTime>0&&C.push(I)},T.onparsingerror=function(I){y=I},T.onflush=function(){y?m(y):v(C)},L.forEach(function(I){if(w){if(o(I,"X-TIMESTAMP-MAP=")){w=!1,O=!0,I.substr(16).split(",").forEach(function(P){o(P,"LOCAL:")?E=P.substr(6):o(P,"MPEGTS:")&&(S=parseInt(P.substr(7)))});try{k=function(P){var D=parseInt(P.substr(-3)),x=parseInt(P.substr(-6,2)),M=parseInt(P.substr(-9,2)),B=P.length>9?parseInt(P.substr(0,P.indexOf(":"))):0;if(!(Object(n.isFiniteNumber)(D)&&Object(n.isFiniteNumber)(x)&&Object(n.isFiniteNumber)(M)&&Object(n.isFiniteNumber)(B)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+P);return D+=1e3*x,(D+=6e4*M)+36e5*B}(E)/1e3}catch(P){O=!1,y=P}return}I===""&&(w=!1)}T.parse(I+`
`)}),T.flush()}},"./src/utils/xhr-loader.ts":function(e,t,r){r.r(t);var n=r("./src/utils/logger.ts"),i=r("./src/loader/load-stats.ts"),s=/^age:\s*[\d.]+\s*$/m,a=function(){function u(o){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=o?o.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var l=u.prototype;return l.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},l.abortInternal=function(){var o=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),o&&(o.onreadystatechange=null,o.onprogress=null,o.readyState!==4&&(this.stats.aborted=!0,o.abort()))},l.abort=function(){var o;this.abortInternal(),(o=this.callbacks)!==null&&o!==void 0&&o.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},l.load=function(o,h,p){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=o,this.config=h,this.callbacks=p,this.retryDelay=h.retryDelay,this.loadInternal()},l.loadInternal=function(){var o=this.config,h=this.context;if(o){var p=this.loader=new self.XMLHttpRequest,g=this.stats;g.loading.first=0,g.loaded=0;var _=this.xhrSetup;try{if(_)try{_(p,h.url)}catch{p.open("GET",h.url,!0),_(p,h.url)}p.readyState||p.open("GET",h.url,!0)}catch(A){return void this.callbacks.onError({code:p.status,text:A.message},h,p)}h.rangeEnd&&p.setRequestHeader("Range","bytes="+h.rangeStart+"-"+(h.rangeEnd-1)),p.onreadystatechange=this.readystatechange.bind(this),p.onprogress=this.loadprogress.bind(this),p.responseType=h.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.timeout),p.send()}},l.readystatechange=function(){var o=this.context,h=this.loader,p=this.stats;if(o&&h){var g=h.readyState,_=this.config;if(!p.aborted&&g>=2)if(self.clearTimeout(this.requestTimeout),p.loading.first===0&&(p.loading.first=Math.max(self.performance.now(),p.loading.start)),g===4){h.onreadystatechange=null,h.onprogress=null;var A=h.status;if(A>=200&&A<300){var b,c;if(p.loading.end=Math.max(self.performance.now(),p.loading.first),c=o.responseType==="arraybuffer"?(b=h.response).byteLength:(b=h.responseText).length,p.loaded=p.total=c,!this.callbacks)return;var d=this.callbacks.onProgress;if(d&&d(p,o,b,h),!this.callbacks)return;var f={url:h.responseURL,data:b};this.callbacks.onSuccess(f,p,o,h)}else p.retry>=_.maxRetry||A>=400&&A<499?(n.logger.error(A+" while loading "+o.url),this.callbacks.onError({code:A,text:h.statusText},o,h)):(n.logger.warn(A+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,_.maxRetryDelay),p.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),_.timeout)}},l.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url);var o=this.callbacks;o&&(this.abortInternal(),o.onTimeout(this.stats,this.context,this.loader))},l.loadprogress=function(o){var h=this.stats;h.loaded=o.loaded,o.lengthComputable&&(h.total=o.total)},l.getCacheAge=function(){var o=null;if(this.loader&&s.test(this.loader.getAllResponseHeaders())){var h=this.loader.getResponseHeader("age");o=h?parseFloat(h):null}return o},u}();t.default=a}}).default);var ku=t1(tg.exports);const r1={name:"d-icon"},Gt=Object.assign(r1,{props:{icon:String,size:[Number,String]},setup:function(e){const t=e,r=We(()=>({fontSize:/^\d+$/.test(t.size)?t.size+"px":t.size}));return(n,i)=>(_e(),we("i",{class:mt(["d-icon iconfont",e.icon]),style:gt(se(r))},null,6))}});Gt.__scopeId="data-v-0c690e66";Tr("data-v-4cb76d59");const n1={class:"d-player-top"},i1={class:"top-title"},s1={class:"top-title"};Sr();const a1={props:{title:{default:""}},setup(e){Date.prototype.format=function(n){let i={"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds()};for(var s in i)new RegExp("("+s+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[s]:("00"+i[s]).substr((""+i[s]).length)));return n};let t=Et("00:00:00");t.value=new Date().format("hh:mm:ss");let r=null;return r=setInterval(()=>{t.value=new Date().format("hh:mm:ss")},1e3),Sn(()=>{clearInterval(r)}),(n,i)=>(_e(),we("div",n1,[le("p",i1,Ne(e.title||""),1),le("p",s1,Ne(se(t)),1)]))},__scopeId:"data-v-4cb76d59"};Tr("data-v-ac2469ec");const o1={class:"d-status"},l1={class:"d-flex-center"},u1={class:"d-flex-center"},c1=St("5X\u901F\u64AD\u653E\u4E2D ");Sr();var rg=Nt({props:["state"],setup:e=>(t,r)=>ot((_e(),we("div",o1,[ot(le("li",l1,[he(Gt,{size:"18",class:"d-status-icon",icon:"icon-volume-"+(e.state.volume==0?"mute":e.state.volume>.5?"up":"down")},null,8,["icon"]),St(" "+Ne(~~(100*e.state.volume))+"% ",1)],512),[[it,e.state.handleType=="volume"]]),ot(le("li",u1,[he(Gt,{size:"12",icon:"icon-play"}),he(Gt,{size:"12",icon:"icon-play",style:{"margin-right":"5px"}}),c1],512),[[it,e.state.handleType=="playbackRate"||e.state.isMultiplesPlay]])],512)),[[it,e.state.handleType||e.state.isMultiplesPlay]])});rg.__scopeId="data-v-ac2469ec",Tr("data-v-385f7870");const f1=["checked","true-value","false-value"],d1=le("span",{class:"d-switch_action"},null,-1);Sr();var Ua=Nt({props:{modelValue:{type:[Number,String,Boolean]},width:{type:String,default:"40px"},trueValue:{type:[Number,String,Boolean],default:!0},falseValue:{type:[Number,String,Boolean],default:!0},activeColor:{type:[String],default:"#409EFF"}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=e;Ns(a=>({"014e5dc0":e.width,e4e32852:e.activeColor}));const n=Et(null),i=We(()=>r.modelValue===r.trueValue),s=()=>{Rn(()=>{const a=n.value.checked;t("update:modelValue",a),t("change",a)})};return(a,u)=>(_e(),we("div",{class:mt(["d-switch",{"is-checked":se(i)}])},[le("input",{class:"d-switch__input",ref:n,type:"checkbox",checked:se(i),onChange:s,"true-value":e.trueValue,"false-value":e.falseValue},null,40,f1),d1],2))}});Ua.__scopeId="data-v-385f7870",Tr("data-v-b2384226");const h1={key:0},p1=le("i",{class:"rotating iconfont icon-loading f50"},null,-1),g1=[le("i",{class:"rotating iconfont icon-loading f50"},null,-1),le("p",null,"\u6B63\u5728\u7F13\u51B2...",-1)],m1=[le("i",{class:"iconfont icon-replay f24 mr5"},null,-1),St("\u91CD\u65B0\u64AD\u653E ")],v1=[le("i",{class:"iconfont icon-replay f24 mr5"},null,-1),St("\u8BF7\u6C42\u9519\u8BEF ")];Sr();var ng=Nt({props:{loadType:String,text:{type:String,default:""}},setup(e){const t=e,{proxy:r}=or(),n=["loadstart","waiting","ended","error","stalled"],i=()=>{r.$parent.play()},s=We(()=>{let a="background: rgba(0, 0, 0, .1);z-index:1";return t.loadType=="loadstart"&&(a="background: rgba(0, 0, 0, 1);;z-index:3"),a});return(a,u)=>ot((_e(),we("div",{class:"d-loading",style:gt(se(s))},[le("div",null,[e.loadType=="loadstart"?(_e(),we("span",h1,[p1,le("p",null,Ne(e.text),1)])):Je("",!0),ot(le("span",null,g1,512),[[it,e.loadType=="waiting"]]),ot(le("span",null,[le("p",{onClick:i,class:"d-flex-x d-pointer"},m1)],512),[[it,e.loadType=="ended"]]),ot(le("span",null,[le("p",{onClick:i,class:"d-flex-x d-pointer"},v1)],512),[[it,e.loadType=="error"||e.loadType=="stalled"]])])],4)),[[it,n.includes(e.loadType)]])}});ng.__scopeId="data-v-b2384226";const gn=function(e,t,r,n=!1){e&&t&&r&&e.addEventListener(t,r,n)},Ot=function(e,t,r,n=!1){e&&t&&r&&e.removeEventListener(t,r,n)};Tr("data-v-5a794390");const y1=["onMousedown"];Sr();var ri=Nt(Lu(_u({},{name:"DSlider"}),{props:{modelValue:{required:!0,type:Number,default:0},disabled:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},hover:{type:Boolean,default:!0},hoverText:{type:String,default:""},preload:{type:Number,default:0},size:{type:String,default:"10px"}},emits:["update:modelValue","change","onMousemove"],setup:function(e,{emit:t}){const r=e;Ns(c=>({"5242b67b":e.size}));const n=Et(null),i=Et(null),s=Mt({dragging:!1,hoverPosition:0,hoverTipsLeft:"50%"}),a=We(()=>{let c=r.modelValue<0?0:r.modelValue>1?1:r.modelValue;return r.vertical?`height:${100*c}%`:`width:${100*c}%`}),u=We(()=>{let c=r.preload<0?0:r.preload>1?1:r.preload;return r.vertical?`height:${100*c}%`:`width:${100*c}%`}),l=We(()=>{let c=s.hoverPosition<0?0:s.hoverPosition>1?1:s.hoverPosition;return r.vertical?`bottom:${100*c}%`:`left:${100*c}%`}),o=c=>{c.preventDefault()},h=c=>{r.disabled||(c.preventDefault(),s.dragging=!0,g(c),gn(window,"mousemove",A),gn(window,"touchmove",A),gn(window,"mouseup",b),gn(window,"touchend",b))},p=c=>{if(!r.hover)return;let d=_(c);if(t("onMousemove",c,d),s.hoverPosition=d,r.vertical)return;let f=n.value,v=i.value.clientWidth/2,m=c.clientX-f.getBoundingClientRect().left;m<v?s.hoverTipsLeft=v-m+"px":f.clientWidth-m<v?s.hoverTipsLeft=f.clientWidth-m-v+"px":s.hoverTipsLeft="50%"},g=c=>{let d=_(c);t("update:modelValue",d),t("change",c,d)},_=c=>{let d=n.value,f=0;if(r.vertical){let v=d.clientHeight;f=(d.getBoundingClientRect().bottom-c.clientY)/v}else f=(c.clientX-d.getBoundingClientRect().left)/d.clientWidth;return f<0?0:f>1?1:f},A=c=>{g(c)},b=c=>{s.dragging&&(Ot(window,"mousemove",A),Ot(window,"touchmove",A),Ot(window,"mouseup",b),Ot(window,"touchend",b),Ot(window,"contextmenu",b),setTimeout(()=>{s.dragging=!1},0))};return(c,d)=>(_e(),we("div",{ref:n,class:mt(["d-slider",{"is-vertical":r.vertical}]),onMousedown:Yf(h,["stop"]),onContextmenu:o},[le("div",{class:"d-slider__runway",onMousemove:p},[ot(le("div",{class:"d-slider__cursor",style:gt(se(l))},[ot(le("div",{class:"d-slider__tips",ref:i,style:gt({left:se(s).hoverTipsLeft})},Ne(r.hoverText),5),[[it,r.hoverText]])],4),[[it,r.hover]]),le("div",{class:"d-slider__preload",style:gt(se(u))},null,4),le("div",{class:"d-slider__bar",style:gt(se(a))},null,4)],32)],42,y1))}}));ri.__scopeId="data-v-5a794390";Tr("data-v-570fa0d1");const E1={key:0,class:"d-player-dialog"},b1={class:"d-player-dialog-body"},T1={class:"d-player-dialog-title"},S1={class:"d-player-hotkey-panel"},_1={class:"d-player-filter-panel"},L1={class:"d-player-filter-panel-item"},k1=le("span",null,"\u9971\u548C\u5EA6",-1),A1={class:"d-player-filter-panel-item"},C1=le("span",null,"\u4EAE\u5EA6",-1),R1={class:"d-player-filter-panel-item"},w1=le("span",null,"\u5BF9\u6BD4\u5EA6",-1),O1={key:0,class:"d-player-contextmenu"},I1=["dplayerKeyCode"],D1=le("input",{class:"d-player-copyText"},null,-1);Sr();var ig=Nt({setup(e){const t=Mt({show:!1,dialogType:"",dialogTitle:"",version:"1.3.1-beta.6",mouseX:0,mouseY:0}),r=[{label:"\u89C6\u9891\u8272\u5F69\u8C03\u6574",key:"filter"},{label:"\u5FEB\u6377\u952E\u8BF4\u660E",key:"hotkey"},{label:"\u590D\u5236\u89C6\u9891\u7F51\u5740",key:"copy"},{label:"\u7248\u672C\uFF1A1.3.1-beta.6",key:"version"}],n=[{key:"Space",label:"\u64AD\u653E/\u6682\u505C"},{key:"\u2192",label:"\u5355\u6B21\u5FEB\u8FDB10s\uFF0C\u957F\u63095\u500D\u901F\u64AD\u653E"},{key:"\u2190",label:"\u5FEB\u90005s"},{key:"\u2191",label:"\u97F3\u91CF\u589E\u52A010%"},{key:"\u2193",label:"\u97F3\u91CF\u589E\u52A0\u964D\u4F4E10%"},{key:"Esc",label:"\u9000\u51FA\u5168\u5C4F/\u9000\u51FA\u7F51\u9875\u5168\u5C4F"},{key:"F",label:"\u5168\u5C4F/\u9000\u51FA\u5168\u5C4F"}],i=Mt({saturate:.392,brightness:.392,contrast:.392}),s=We(()=>({left:t.mouseX+"px",top:t.mouseY+"px"}));Jt(i,h=>{let p=document.querySelector("#dPlayerVideo"),g=(2.55*h.saturate).toFixed(2),_=(2.55*h.brightness).toFixed(2),A=(2.55*h.contrast).toFixed(2);p.style.filter=`saturate(${g}) brightness(${_}) contrast(${A})`});const a=()=>{i.saturate=.392,i.brightness=.392,i.contrast=.392},u=h=>{h.key=="Escape"&&o(0)},l=h=>{h.preventDefault(),gn(window,"keydown",u),gn(window,"click",o);let p=document.querySelector("#refPlayerWrap"),g=p.clientWidth;p.clientHeight,t.mouseX=h.clientX-p.getBoundingClientRect().left,g-t.mouseX<130&&(t.mouseX=t.mouseX+(g-t.mouseX-130)),t.mouseY=h.clientY-p.getBoundingClientRect().top,t.show=!0},o=h=>{let p=h.path[0].tagName=="LI",g=h.path[0].attributes.dplayerKeyCode&&h.path[0].attributes.dplayerKeyCode.value,_=r.map(A=>A.key);if(p&&_.includes(g))if(t.dialogTitle=h.path[0].innerText,t.dialogType=g,g=="copy"){let A=document.querySelector(".d-player-copyText");A.value=window.location.href,A.select(),document.execCommand("copy"),t.dialogType=""}else g=="version"&&(t.dialogType="");t.show=!1,Ot(window,"keydown",u),Ot(window,"click",o)};return Jr(()=>{let h=document.querySelector("#refPlayerWrap");Ot(window,"keydown",u),Ot(window,"click",o),Ot(h,"contextmenu",l),gn(h,"contextmenu",l)}),Sn(()=>{let h=document.querySelector("#refPlayerWrap");Ot(window,"keydown",u),Ot(window,"click",o),Ot(h,"contextmenu",l)}),(h,p)=>(_e(),we("div",null,[he(On,{name:"d-fade-in"},{default:En(()=>[se(t).dialogType?(_e(),we("div",E1,[le("div",b1,[le("h5",T1,[St(Ne(se(t).dialogTitle)+" ",1),le("i",{onClick:p[0]||(p[0]=g=>se(t).dialogType=!1),class:"icon icon-close"},"X")]),ot(le("ul",S1,[(_e(),we(Fe,null,kn(n,g=>le("li",{class:"d-player-hotkey-panel-item",key:g.key},[le("span",null,Ne(g.key),1),le("span",null,Ne(g.label),1)])),64))],512),[[it,se(t).dialogType=="hotkey"]]),ot(le("ul",_1,[le("li",L1,[k1,he(ri,{class:"filter-panel-slider",size:"5px",modelValue:se(i).saturate,"onUpdate:modelValue":p[1]||(p[1]=g=>se(i).saturate=g)},null,8,["modelValue"]),le("span",null,Ne(Math.round(255*se(i).saturate)),1)]),le("li",A1,[C1,he(ri,{class:"filter-panel-slider",size:"5px",modelValue:se(i).brightness,"onUpdate:modelValue":p[2]||(p[2]=g=>se(i).brightness=g)},null,8,["modelValue"]),le("span",null,Ne(Math.round(255*se(i).brightness)),1)]),le("li",R1,[w1,he(ri,{class:"filter-panel-slider",size:"5px",modelValue:se(i).contrast,"onUpdate:modelValue":p[3]||(p[3]=g=>se(i).contrast=g)},null,8,["modelValue"]),le("span",null,Ne(Math.round(255*se(i).contrast)),1)]),le("span",{onClick:a,title:"\u91CD\u7F6E","aria-label":"\u91CD\u7F6E",class:"d-player-filter-reset"},"\u91CD\u7F6E")],512),[[it,se(t).dialogType=="filter"]])])])):Je("",!0)]),_:1}),se(t).show?(_e(),we("div",O1,[le("ul",{class:"d-player-contextmenu-body",style:gt(se(s))},[(_e(),we(Fe,null,kn(r,g=>le("li",{dplayerKeyCode:g.key,key:g.key},Ne(g.label),9,I1)),64))],4),D1])):Je("",!0)]))}});ig.__scopeId="data-v-570fa0d1";const Au=e=>{let t=~~(e/3600),r=~~(e%3600/60),n=~~(e%60);return t=t<10?"0"+t:t,r=r<10?"0"+r:r,n=n<10?"0"+n:n,`${t}:${r}:${n}`},Qi="ontouchstart"in window,sg=["loadstart","play","pause","playing","seeking","seeked","waiting","durationchange","progress","canplay","timeupdate","ended","error","stalled"],P1={width:{type:String,default:"800px"},height:{type:String,default:"450px"},color:{type:String,default:"#409eff"},src:{required:!0,type:String,default:""},title:{type:String,default:""},type:{type:String,default:"video/mp4"},poster:{type:String,default:""},webFullScreen:{type:Boolean,default:!1},speed:{type:Boolean,default:!0},currentTime:{type:Number,default:0},playsinline:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},speedRate:{type:Array,default:()=>["2.0","1.5","1.25","1.0","0.75","0.5"]},autoPlay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},mirror:{type:Boolean,default:!1},ligthOff:{type:Boolean,default:!1},volume:{type:[String,Number],default:.3},control:{type:Boolean,default:!0},controlBtns:{type:Array,default:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]},preload:{type:String,default:"auto"}};Tr("data-v-01791e9e");const x1={class:"d-player-video",id:"dPlayerVideo"},F1=["controls","webkit-playsinline","playsinline","volume","muted","loop","preload","src","poster"],M1={class:"d-player-lightoff"},N1={key:1,class:"d-player-state"},B1={class:"d-play-btn"},U1=["onKeyup","onKeydown"],j1={class:"d-control-progress"},H1={class:"d-tool-bar"},V1={key:0,class:"d-tool-item d-tool-time audioTrack-btn"},G1=le("span",{style:{margin:"0 3px"}},"/",-1),K1={class:"total-time"},$1={class:"d-tool-bar"},W1={key:0,class:"d-tool-item quality-btn"},q1={class:"d-tool-item-main"},Y1={class:"speed-main",style:{"text-align":"center"}},z1=["onClick"],X1={key:1,class:"d-tool-item speedRate-btn"},J1={class:"d-tool-item-main"},Q1={class:"speed-main"},Z1=["onClick"],eL={key:2,class:"d-tool-item volume-btn"},tL={class:"d-tool-item-main volume-box",style:{width:"52px"}},rL={class:"volume-text-size"},nL={key:3,class:"d-tool-item setting-btn"},iL={class:"d-tool-item-main"},sL={class:"speed-main"},aL=St(" \u955C\u50CF\u753B\u9762 "),oL=St(" \u5FAA\u73AF\u64AD\u653E "),lL=St(" \u5173\u706F\u6A21\u5F0F "),uL=le("div",{class:"d-tool-item-main"},"\u753B\u4E2D\u753B",-1),cL=le("div",{class:"d-tool-item-main"},"\u7F51\u9875\u5168\u5C4F",-1),fL=le("div",{class:"d-tool-item-main"},"\u5168\u5C4F",-1);Sr();var ja=Nt(Lu(_u({},{name:"vue3VideoPlay",inheritAttrs:!1}),{props:P1,emits:[...sg,"mirrorChange","loopChange","lightOffChange"],setup:function(e,{expose:t,emit:r}){const n=e;Ns(D=>({"51d4439c":se(_),"77e758a6":D.width,b8a1afc0:D.height}));const i=new ku({fragLoadingTimeOut:2e3}),s=Et(null),a=Et(null),u=Et(null),l=Et(null),o=Mt(Lu(_u({dVideo:null},n),{muted:n.muted,playBtnState:n.autoPlay?"pause":"play",loadStateType:"loadstart",fullScreen:!1,handleType:"",currentTime:"00:00:00",preloadBar:0,totalTime:"00:00:00",isVideoHovering:!0,speedActive:"1.0",playProgress:0,isMultiplesPlay:!1,longPressTimeout:null,progressCursorTime:"00:00:00",qualityLevels:[],currentLevel:0})),h=(...D)=>x=>D.reverse().reduce((M,B)=>B(M),x),p=sg.reduce((D,x)=>{var M;return D[`on${M=x,M.charAt(0).toUpperCase()+M.slice(1)}`]=B=>{o.loadStateType=x,r(x,B)},D},{});p.onCanplay=h(p.onCanplay,()=>{o.playBtnState!="play"&&o.dVideo.play(),o.autoPlay&&(o.dVideo.play(),o.playBtnState="pause")}),p.onEnded=h(p.onEnded,()=>{o.playBtnState="replay"}),p.onDurationchange=D=>{r("durationchange",D),n.currentTime!=0&&(o.dVideo.currentTime=n.currentTime),p.onTimeupdate(D)},p.onProgress=D=>{console.log("\u7F13\u51B2\u4E2D..."),r("progress",D);let x=D.target.duration,M=D.target.buffered,B=D.target.buffered.length&&D.target.buffered.end(M-1);o.preloadBar=B/x},p.onTimeupdate=D=>{r("timeupdate",D);let x=D.duration||D.target.duration||0,M=D.currentTime||D.target.currentTime;o.playProgress=M/x,o.currentTime=Au(M),o.totalTime=Au(x)},p.onError=h(p.onError,()=>{o.playBtnState="replay"});let g=yf();for(let D in g)p[D]=g[D];const _=(A=o.color,`${parseInt("0x"+A.slice(1,3))},${parseInt("0x"+A.slice(3,5))},${parseInt("0x"+A.slice(5,7))}`);var A;const b=eg(500,()=>{o.handleType=""}),c=D=>{D.preventDefault(),D.code=="ArrowUp"?o.volume=o.volume+.1>1?1:o.volume+.1:o.volume=o.volume-.1<0?0:o.volume-.1,o.muted=!1,o.handleType="volume",b()},d=D=>{n.speed&&(o.dVideo.currentTime=o.dVideo.currentTime<10?.1:o.dVideo.currentTime-10,p.onTimeupdate(o.dVideo),m())},f=D=>{D.preventDefault();let x=D.type;if(D.key=="ArrowRight"){if(m(),x=="keyup"){if(clearTimeout(o.longPressTimeout),!n.speed&&!o.longPressTimeout)return;o.isMultiplesPlay?(o.dVideo.playbackRate=o.speedActive,o.isMultiplesPlay=!1):(o.dVideo.currentTime=o.dVideo.currentTime+10,p.onTimeupdate(o.dVideo))}else if(x=="keydown"){if(!n.speed)return;o.isMultiplesPlay&&clearTimeout(o.longPressTimeout),o.longPressTimeout=setTimeout(()=>{o.isMultiplesPlay=!0,o.dVideo.playbackRate=5,o.handleType="playbackRate",b()},500)}}},v=()=>{Qi||l.value.focus()},m=()=>{o.loadStateType="play",o.dVideo.play().catch(()=>{setTimeout(()=>{o.playBtnState="replay",o.loadStateType="error"},500)}),o.playBtnState="pause"},y=()=>{o.dVideo.pause(),o.playBtnState="play"},T=D=>{D&&D.preventDefault(),o.playBtnState=="play"||o.playBtnState=="replay"?m():o.playBtnState=="pause"&&y()},L=()=>{o.muted=!o.muted,o.volume==0&&(o.volume=.05)},C=(D,x)=>{let M=o.dVideo.duration||o.dVideo.target.duration;o.dVideo.currentTime=M*x,o.playBtnState=="play"&&(o.dVideo.play(),o.playBtnState="pause")},R=(D,x)=>{o.progressCursorTime=Au(o.dVideo.duration*x)},E=eg(2500,()=>{o.isVideoHovering=!1}),S=D=>{o.isVideoHovering=!0,E()},k=D=>{r("mirrorChange",D,o.dVideo)},w=D=>{r("loopChange",D,o.dVideo)},O=D=>{r("lightOffChange",D,o.dVideo)},I=()=>{var D;D=o.dVideo,document.pictureInPictureElement?document.exitPictureInPicture().catch(x=>{console.log(x,"Video failed to leave Picture-in-Picture mode.")}):D.requestPictureInPicture().catch(x=>{console.log(x,"Video failed to enter Picture-in-Picture mode.")})},P=()=>{o.fullScreen=(D=>{let x=document,M=x.webkitIsFullScreen||x.fullscreen;return M?(document.exitFullscreen||x.webkitExitFullScreen).call(x):(D.requestFullscreen||D.webkitRequestFullScreen).call(D),!M})(s.value)};return Jt(()=>n.src,()=>{Rn(()=>{o.dVideo.canPlayType(n.type)||o.dVideo.canPlayType("application/vnd.apple.mpegurl")?o.muted=n.autoPlay:ku.isSupported()&&(i.detachMedia(),i.attachMedia(o.dVideo),i.on(ku.Events.MEDIA_ATTACHED,()=>{i.loadSource(n.src),i.on("hlsManifestParsed",(D,x)=>{console.log(x),o.currentLevel=x.level,o.qualityLevels=x.levels||[]})}),i.on("hlsLevelSwitching",(D,x)=>{console.log(x),console.log("LEVEL_SWITCHING")}),i.on("hlsLevelSwitched",(D,x)=>{o.currentLevel=x.level,console.log("LEVEL_SWITCHED")}))})},{immediate:!0}),Jr(()=>{o.dVideo=a,v()}),t({play:m,pause:y,togglePlay:T}),(D,x)=>(_e(),we("div",{ref:s,id:"refPlayerWrap",class:mt(["d-player-wrap",{"web-full-screen":se(o).webFullScreen,"is-lightoff":se(o).lightOff,"d-player-wrap-hover":se(o).playBtnState=="play"||se(o).isVideoHovering}]),onMousemove:S},[le("div",x1,[le("video",Oo({ref:a,class:["d-player-video-main",{"video-mirror":se(o).mirror}],id:"dPlayerVideoMain",controls:!(!se(Qi)||!se(o).speed),"webkit-playsinline":n.playsinline,playsinline:n.playsinline},se(p),{volume:se(o).volume,muted:se(o).muted,loop:se(o).loop,preload:D.preload,width:"100%",height:"100%",src:n.src,poster:n.poster}),"\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301Video\u6807\u7B7E\u3002",16,F1)]),he(On,{name:"d-fade-in"},{default:En(()=>[ot(le("div",M1,null,512),[[it,se(o).lightOff]])]),_:1}),se(o).fullScreen?(_e(),As(a1,{key:0,title:n.title},null,8,["title"])):Je("",!0),se(Qi)?Je("",!0):(_e(),we("div",N1,[he(On,{name:"d-scale-out"},{default:En(()=>[ot(le("div",B1,[he(Gt,{icon:"icon-play",size:40})],512),[[it,se(o).playBtnState=="play"]])]),_:1}),he(rg,{state:se(o)},null,8,["state"])])),se(Qi)?Je("",!0):(_e(),we("input",{key:2,type:"input",readonly:"readonly",ref:l,onDblclick:P,onKeyup:[Dn(P,["f"]),x[0]||(x[0]=Dn(M=>se(o).webFullScreen=!1,["esc"])),f],onClick:T,onKeydown:[Dn(T,["space"]),Dn(d,["arrow-left"]),Dn(c,["arrow-up","arrow-down"]),f],class:"d-player-input",maxlength:"0"},null,40,U1)),he(ng,{loadType:se(o).loadStateType},null,8,["loadType"]),he(ig),!se(Qi)&&se(o).control?(_e(),we("div",{key:3,class:"d-player-control",ref:u},[le("div",j1,[he(ri,{class:"d-progress-bar",onOnMousemove:R,onChange:C,disabled:!se(o).speed,hoverText:se(o).progressCursorTime,modelValue:se(o).playProgress,"onUpdate:modelValue":x[1]||(x[1]=M=>se(o).playProgress=M),preload:se(o).preloadBar},null,8,["disabled","hoverText","modelValue","preload"])]),le("div",{class:"d-control-tool",onClick:v},[le("div",H1,[le("div",{class:"d-tool-item",onClick:T},[he(Gt,{size:"24",icon:`icon-${se(o).playBtnState}`},null,8,["icon"])]),n.controlBtns.includes("audioTrack")?(_e(),we("div",V1,[le("span",null,Ne(se(o).currentTime),1),G1,le("span",K1,Ne(se(o).totalTime),1)])):Je("",!0)]),le("div",$1,[se(o).qualityLevels.length&&n.controlBtns.includes("quality")?(_e(),we("div",W1,[St(Ne(se(o).qualityLevels.length&&(se(o).qualityLevels[se(o).currentLevel]||{}).height)+"P ",1),le("div",q1,[le("ul",Y1,[(_e(!0),we(Fe,null,kn(se(o).qualityLevels,(M,B)=>(_e(),we("li",{class:mt({"speed-active":se(o).currentLevel==B}),onClick:H=>(($,q)=>{i.currentLevel=q,o.currentLevel=q})(0,B),key:M},Ne(M.height)+"P",11,z1))),128))])])])):Je("",!0),n.controlBtns.includes("speedRate")?(_e(),we("div",X1,[St(Ne(se(o).speedActive=="1.0"?"\u500D\u901F":se(o).speedActive+"x")+" ",1),le("div",J1,[le("ul",Q1,[(_e(!0),we(Fe,null,kn(se(o).speedRate,M=>(_e(),we("li",{class:mt({"speed-active":se(o).speedActive==M}),onClick:B=>(H=>{o.speedActive=H,o.dVideo.playbackRate=H})(M),key:M},Ne(M)+"x",11,Z1))),128))])])])):Je("",!0),n.controlBtns.includes("volume")?(_e(),we("div",eL,[le("div",tL,[le("div",{class:mt(["volume-main",{"is-muted":se(o).muted}])},[le("span",rL,Ne(se(o).muted?0:~~(100*se(o).volume))+"%",1),he(ri,{onChange:x[2]||(x[2]=M=>se(o).muted=!1),hover:!1,size:"5px",vertical:!0,modelValue:se(o).volume,"onUpdate:modelValue":x[3]||(x[3]=M=>se(o).volume=M)},null,8,["modelValue"])],2)]),le("span",{onClick:L,style:{display:"flex"}},[he(Gt,{size:"20",icon:"icon-volume-"+(se(o).volume==0||se(o).muted?"mute":se(o).volume>.5?"up":"down")},null,8,["icon"])])])):Je("",!0),n.controlBtns.includes("setting")?(_e(),we("div",nL,[he(Gt,{size:"20",class:"rotateHover",icon:"icon-settings"}),le("div",iL,[le("ul",sL,[le("li",null,[aL,he(Ua,{onChange:k,modelValue:se(o).mirror,"onUpdate:modelValue":x[4]||(x[4]=M=>se(o).mirror=M)},null,8,["modelValue"])]),le("li",null,[oL,he(Ua,{onChange:w,modelValue:se(o).loop,"onUpdate:modelValue":x[5]||(x[5]=M=>se(o).loop=M)},null,8,["modelValue"])]),le("li",null,[lL,he(Ua,{onChange:O,modelValue:se(o).lightOff,"onUpdate:modelValue":x[6]||(x[6]=M=>se(o).lightOff=M)},null,8,["modelValue"])])])])])):Je("",!0),n.controlBtns.includes("pip")?(_e(),we("div",{key:4,class:"d-tool-item pip-btn",onClick:I},[he(Gt,{size:"20",icon:"icon-pip"}),uL])):Je("",!0),n.controlBtns.includes("pageFullScreen")?(_e(),we("div",{key:5,class:"d-tool-item pip-btn",onClick:x[7]||(x[7]=M=>se(o).webFullScreen=!se(o).webFullScreen)},[he(Gt,{size:"20",icon:"icon-web-screen"}),cL])):Je("",!0),n.controlBtns.includes("fullScreen")?(_e(),we("div",{key:6,class:"d-tool-item fullScreen-btn",onClick:P},[fL,he(Gt,{size:"20",icon:"icon-screen"})])):Je("",!0)])])],512)):Je("",!0)],34))}}));function dL(e){e.component(ja.name,ja)}ja.__scopeId="data-v-01791e9e",ja.install=dL;var Cu,hL=["scroll","wheel","touchstart","touchmove","touchenter","touchend","touchleave","mouseout","mouseleave","mouseup","mousedown","mousemove","mouseenter","mousewheel","mouseover"];if(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}()){var pL=EventTarget.prototype.addEventListener;Cu=pL,EventTarget.prototype.addEventListener=function(e,t,r){var n,i=typeof r=="object"&&r!==null,s=i?r.capture:r;(r=i?function(a){var u=Object.getOwnPropertyDescriptor(a,"passive");return u&&u.writable!==!0&&u.set===void 0?Object.assign({},a):a}(r):{}).passive=(n=r.passive)!==void 0?n:hL.indexOf(e)!==-1&&!0,r.capture=s!==void 0&&s,Cu.call(this,e,t,r)},EventTarget.prototype.addEventListener._original=Cu}export{Jt as A,ot as B,it as C,ze as D,he as E,Fe as F,LL as G,Sn as H,kn as I,or as J,Bm as K,cv as L,yL as M,Bs as N,Dy as O,ja as P,xs as Q,bs as R,Rn as S,Ts as T,kc as U,kL as V,Yf as W,_L as X,qo as Y,xS as _,EL as a,mL as b,vL as c,Nt as d,We as e,sv as f,_e as g,As as h,av as i,Je as j,se as k,we as l,St as m,le as n,Jr as o,TL as p,bL as q,Et as r,Mt as s,Ne as t,SL as u,gt as v,En as w,Tr as x,Sr as y,mt as z};
