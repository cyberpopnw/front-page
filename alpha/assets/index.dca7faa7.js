import{s as i,W as u,_ as rs}from"./index.31c475c4.js";import{_ as W,d as Z,a as q,e as b,r as a,o as J,g as f,l as A,n as s,t,z as L,k as C,x as V,y as ss,F as as,I as us,j as U,B as Ss,C as Ts,u as ys,A as es,f as vs,E as _s,m as z,v as bs,h as ts,H as ws}from"./vendor.f2cbf1b6.js";const is=l=>(V("data-v-1c82c255"),l=l(),ss(),l),As={class:"container flex_center"},Fs=is(()=>s("div",{class:"cover"},null,-1)),Ns=is(()=>s("div",{class:"coverborder"},null,-1)),Is={class:"content"},Rs={class:"title"},Bs={class:"text"},xs={class:"reward_chunks flex_centent_center"},Ds={key:0,class:"item selected"},Os=is(()=>s("div",{class:"chunk"},[s("img",{src:"https://d2cimmz3cflrbm.cloudfront.net/nwStaking/CYTIcon.png",alt:""})],-1)),zs=is(()=>s("p",null,"COIN",-1)),Hs=[Os,zs],Ps={key:1,class:"item selected"},Es=is(()=>s("div",{class:"chunk"},[s("img",{src:"https://cyberpop.mypinata.cloud/ipfs/QmRVeBntXA1wgakGCSD6BpyGyXjTsShqUyb6dNooHXwDEr",alt:""})],-1)),Ms=is(()=>s("p",null,"NFT",-1)),Ys=[Es,Ms],Gs={class:"btn"},Xs={class:"btn-wrap"},Ls=Z({props:{isShowTips:Boolean,amount:Number,isCoin:{type:Boolean,default:!1}},emits:["closeFinshed"],setup(l,{expose:_,emit:S}){const v=l,{t:$}=q(),{staking:w,CYTStakingRewards:c}=u.contracts;_({fn:()=>{}});const N=b(()=>{var o;return(o=i.state.myAssets)==null?void 0:o.readyAssets}),h=b(()=>{var o;return(o=i.state.staking)==null?void 0:o.readyAssetsCoin}),I=b(()=>{var o,T;return(T=(o=i)==null?void 0:o.state.user)==null?void 0:T.xplanAni}),k=a(1),g=()=>{i.dispatch("user/xplanChangeAni",!1),setTimeout(()=>{S("closeFinshed")},300)},m=async()=>{if(k.value==0){console.log(c.abi,c.address);let o=await u.getReward(c.abi,c.address);if(console.log(o),o==0){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.assets.pop.tran_stop")}});return}i.dispatch("user/showDialog",{show:!0,info:{state:1,txt:$("message.assets.pop.tran_succ")}}),i.dispatch("staking/readyAssetsCoin",h.value+1),g()}else{console.log(w.abi,w.address,v.amount);let o=await u.getNFT(w.abi,w.address,v.amount);if(console.log(o),o==0){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.assets.pop.tran_stop")}});return}i.dispatch("user/showDialog",{show:!0,info:{state:1,txt:$("message.assets.pop.tran_succ")}}),i.dispatch("myAssets/dataSumSearch",{flag:N.value+1}),g()}};return J(async()=>{console.log(v);let o=await u.rewards(c.abi,c.address);console.log(o),v.isCoin?k.value=0:k.value=1}),(o,T)=>(f(),A("div",As,[s("div",{class:L(["mask",l.isShowTips&&(C(I)?"bounceShow":"bounceHide")])},[Fs,Ns,s("img",{class:"close",src:rs,alt:"",onClick:g}),s("div",Is,[s("div",Rs,t(o.$t("message.mining.finish.finished")),1),s("div",Bs,t(o.$t("message.mining.finish.text")),1),s("div",xs,[l.isCoin?(f(),A("div",Ds,Hs)):(f(),A("div",Ps,Ys))]),s("div",Gs,[s("div",Xs,[s("div",{class:"CONFIRM",onClick:m},t(o.$t("message.mining.finish.btn")),1)])])])],2)]))}});var Ks=W(Ls,[["__scopeId","data-v-1c82c255"]]);const ms=l=>(V("data-v-e57edcbc"),l=l(),ss(),l),js={class:"container flex_center"},Qs=ms(()=>s("div",{class:"cover"},null,-1)),Ws=ms(()=>s("div",{class:"coverborder"},null,-1)),Zs={class:"content"},Us={class:"title"},qs={class:"thead"},Js={class:"name"},Vs={class:"id"},se={class:"HashRate"},ee={class:"Operate"},te={key:0,class:"tbody"},ne=ms(()=>s("div",{class:"name flex_align_center"},[s("img",{src:"https://cyberpop.mypinata.cloud/ipfs/QmPx82XhgdmkgEy1C8t2zivFZfySn7krCv3wSdfLeKwZfS",alt:""}),s("span",null,"Kakulupia")],-1)),ae={class:"id"},ie=ms(()=>s("div",{class:"HashRate"},"HashRate",-1)),oe={class:"Operate"},le={class:"stak"},ce=Z({props:{isShowTips:Boolean},emits:["closeFinshed"],setup(l,{expose:_,emit:S}){const v=l;q(),_({fn:()=>{}}),b(()=>{var y;return(y=i.state.myAssets)==null?void 0:y.readyAssets});const w=b(()=>{var y,N;return(N=(y=i)==null?void 0:y.state.user)==null?void 0:N.xplanAni});a(0);const c=()=>{i.dispatch("user/xplanChangeAni",!1),setTimeout(()=>{S("closeFinshed")},300)};return J(()=>{console.log(v)}),(y,N)=>(f(),A("div",js,[s("div",{class:L(["mask",l.isShowTips&&(C(w)?"bounceShow":"bounceHide")])},[Qs,Ws,s("img",{class:"close",src:rs,alt:"",onClick:c}),s("div",Zs,[s("div",Us,t(y.$t("message.mining.selectNFT.title")),1),s("table",null,[s("thead",null,[s("div",qs,[s("div",Js,t(y.$t("message.mining.selectNFT.name")),1),s("div",Vs,t(y.$t("message.mining.selectNFT.id")),1),s("div",se,t(y.$t("message.mining.selectNFT.hashRate")),1),s("div",ee,t(y.$t("message.mining.selectNFT.operate")),1)])]),(f(),A("div",te,[(f(),A(as,null,us(6,h=>s("div",{class:"item flex_align_center",key:h},[ne,s("div",ae,t(h),1),ie,s("div",oe,[s("div",le,t(y.$t("message.mining.STAKE")),1)])])),64))]))])])],2)]))}});var de=W(ce,[["__scopeId","data-v-e57edcbc"]]);const hs=l=>(V("data-v-41fd0cab"),l=l(),ss(),l),re={class:"container flex_center"},ue=hs(()=>s("div",{class:"cover"},null,-1)),ve=hs(()=>s("div",{class:"coverborder"},null,-1)),_e={class:"content"},me={class:"title"},he={class:"chunks"},ge={class:"withdraw_wrap"},pe=["value"],fe={class:"right"},$e={class:"balance"},ye={class:"icon"},be=hs(()=>s("div",{class:"bull flex_align_center"},[s("div"),s("div")],-1)),we={key:0,class:"errmsg"},ke={class:"tips flex_align_center"},Ce=hs(()=>s("img",{src:"https://d2cimmz3cflrbm.cloudfront.net/nwStaking/stakin13.png",alt:""},null,-1)),Se={class:"text"},Te={class:"btn"},Ae={class:"btn-wrap"},Fe=Z({props:{isShowTips:Boolean,isCoin:{type:Boolean,default:!1}},emits:["closeFinshed"],setup(l,{expose:_,emit:S}){const v=l;q();const{staking:$,CYTStakingRewards:w}=u.contracts,c=a(0);_({fn:()=>{}});const N=b(()=>{var r;return(r=i.state.myAssets)==null?void 0:r.readyAssets}),h=b(()=>{var r;return(r=i.state.staking)==null?void 0:r.readyAssetsCoin}),I=b(()=>{var r,B;return(B=(r=i)==null?void 0:r.state.user)==null?void 0:B.xplanAni}),k=a(0),g=()=>{i.dispatch("user/xplanChangeAni",!1),setTimeout(()=>{S("closeFinshed")},300)};let m=a(1);const o=a(""),T=r=>{console.log(r.target.value,c.value);let B=/^[0-9]+$/;m.value=r.target.value,!r.target.value||!B.test(m.value)||Number(m.value)>Number(c.value)?o.value="error":o.value=""},F=()=>{Number(c.value)?m.value=c.value:m.value=0,o.value=""},H=async()=>{if(console.log(c.value,"myStakCyt.vlaue"),!(o.value=="error"||!Number(c.value))){if(v.isCoin){let r=await u.withdraw(w.abi,w.address,m.value);i.dispatch("staking/readyAssetsCoin",h.value+1),console.log(r)}else{let r=await u.withdraw($.abi,$.address,m.value);i.dispatch("myAssets/dataSumSearch",{flag:N.value+1}),console.log(r)}g()}},P=async()=>{if(v.isCoin){c.value=await u.getBalanceOf(w.abi,w.address),Number(c.value)||(m.value=0),console.log(c.value,"myStakCyt.value");return}c.value=await u.getBalanceOf($.abi,$.address),console.log(c.value,"myStakCyt.value"),Number(c.value)||(m.value=0)};return J(()=>{P(),console.log(v)}),(r,B)=>(f(),A("div",re,[s("div",{class:L(["mask",l.isShowTips&&(C(I)?"bounceShow":"bounceHide")])},[ue,ve,s("img",{class:"close",src:rs,alt:"",onClick:g}),s("div",_e,[s("div",me,t(r.$t("message.mining.cancel.unstake")),1),s("div",he,[s("div",ge,[s("div",{class:L(["withdraw flex_between_center",{select:k.value==0}]),onClick:B[1]||(B[1]=d=>k.value=0)},[s("div",{class:L(["left",o.value=="error"?"error":""])},[s("p",null,t(r.$t("message.mining.cancel.will_withdraw")),1),s("input",{id:"inputNum",type:"text",onInput:B[0]||(B[0]=d=>T(d)),value:C(m)},null,40,pe)],2),s("div",fe,[s("div",$e,t(r.$t("message.mining.cancel.balance"))+":"+t(c.value),1),s("div",ye,[s("div",{class:"max",onClick:F},t(r.$t("message.mining.cancel.max")),1),be])])],2),Number(c.value)?U("",!0):(f(),A("div",we,t(r.$t("message.mining.cancel.tips")),1)),Ss(s("div",{class:"errmsg"},t(r.$t("message.assets.pop.tips_err")),513),[[Ts,Number(c.value)&&o.value=="error"]])]),s("div",ke,[Ce,s("div",Se,t(r.$t("message.mining.cancel.warn_tips")),1)])]),s("div",Te,[s("div",Ae,[s("div",{class:"CONFIRM",onClick:H},t(r.$t("message.mining.cancel.btn")),1)])])])],2)]))}});var Ne=W(Fe,[["__scopeId","data-v-41fd0cab"]]);const O=l=>(V("data-v-546e09f3"),l=l(),ss(),l),Ie={class:"mining"},Re={class:"banner"},Be={class:"titles"},xe={class:"title"},De={class:"subtitle"},Oe={class:"total"},ze=O(()=>s("div",{class:"progressBall"},[s("img",{class:"ballBorder",src:"https://d2cimmz3cflrbm.cloudfront.net/nwmining/ballBorder.svg",alt:""}),s("div",{class:"ball-inner"})],-1)),He={class:"right"},Pe={class:"right_content"},Ee={class:"total-title"},Me=O(()=>s("div",{class:"price"},"-- --",-1)),Ye={class:"myAssets"},Ge={class:"item1"},Xe={class:"left"},Le={class:"right button getcytbtn"},Ke=O(()=>s("div",{class:"line"},null,-1)),je={class:"item2"},Qe={class:"left"},We=O(()=>s("div",{class:"right coin_logo"},[s("img",{src:"https://d2cimmz3cflrbm.cloudfront.net/nwStaking/stakin9.png",alt:""})],-1)),Ze={class:"Operation"},Ue={class:"owrap"},qe={class:"txt"},Je={class:"number"},Ve={class:"txt"},st={class:"number"},et={class:"txt"},tt={class:"number"},nt=O(()=>s("div",{class:"bg"},null,-1)),at={class:"button"},it=O(()=>s("div",{class:"bg"},null,-1)),ot={class:"button"},lt=O(()=>s("div",{class:"more"},[s("img",{src:"https://d2cimmz3cflrbm.cloudfront.net/nwStaking/stakin2.png",alt:""})],-1)),ct={class:"days"},dt={class:"progress"},rt={class:"cwrap"},ut={class:"content"},vt={class:"date"},_t={class:"total_day"},mt={class:"white"},ht={class:"total_day"},gt={class:"farms"},pt={class:"background"},ft={class:"elements"},$t={class:"left"},yt=O(()=>s("div",{class:"img_title"},null,-1)),bt={class:"texts"},wt={class:"title"},kt={class:"price"},Ct={class:"right"},St={class:"content"},Tt={class:"top"},At=O(()=>s("div",{class:"top_element1"},null,-1)),Ft=O(()=>s("div",{class:"top_element2"},null,-1)),Nt={class:"table"},It={class:"title"},Rt={class:"desc"},Bt={class:"table"},xt={class:"title"},Dt={class:"desc"},Ot=O(()=>s("span",{class:"tag"},"COIN",-1)),zt={class:"table"},Ht={class:"title"},Pt={class:"desc"},Et=O(()=>s("span",null,"/s",-1)),Mt=O(()=>s("div",{class:"bg"},null,-1)),Yt={class:"bottom"},Gt={class:"table"},Xt={class:"title"},Lt={class:"desc"},Kt=O(()=>s("div",{class:"bg"},null,-1)),jt={class:"stake"},Qt={class:"staked"},Wt={class:"title"},Zt={class:"desc"},Ut=Z({setup(l){const{staking:_,cytV2:S,CYTStakingRewards:v}=u.contracts,{t:$,locale:w}=q();ys();const c=b(()=>{var e,n;return(n=(e=i)==null?void 0:e.state.wallet)==null?void 0:n.realId}),y=b(()=>{var e;return(e=i.state.user)==null?void 0:e.chainId}),N=b(()=>{var e;return(e=i.state.myAssets)==null?void 0:e.readyAssets}),h=b(()=>{var e;return(e=i.state.staking)==null?void 0:e.readyAssetsCoin}),I=a(!1);es(N,(e,n)=>{console.log(e,n,"readyAssets"),!(e<=0||n==-1)&&(j(),console.log("her3"))},{immediate:!0,deep:!0}),es(h,(e,n)=>{console.log(e,n,"readyAssetsCoin"),!(e<=0||n==-1)&&(Q(),console.log("her3"))},{immediate:!0,deep:!0}),es(y,(e,n)=>{if(console.log(e,n,"chainId"),e!=43113){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.mining.chainId_msg")}});return}!I.value||(j(),Q())},{immediate:!0,deep:!0}),es(c,(e,n)=>{console.log(e,n,"realId"),!(!n||n==-1)&&(j(),Q(),console.log("her3"))},{immediate:!0,deep:!0});const k=a(null),g=a(!1);console.log(k.value,"Finished");const m=a(null),o=a(!1),T=a(!1),F=a(0),H=a(0),P=a(0),r=a(0);a("https://d2cimmz3cflrbm.cloudfront.net/nwmining/whiteImg.png"),a("https://d2cimmz3cflrbm.cloudfront.net/nwmining/whiteImg.png"),a("https://d2cimmz3cflrbm.cloudfront.net/nwmining/locked.svg"),a("https://d2cimmz3cflrbm.cloudfront.net/nwmining/pledge-border1.svg"),a("https://d2cimmz3cflrbm.cloudfront.net/nwmining/pledge-border2.svg"),a("https://d2cimmz3cflrbm.cloudfront.net/nwmining/pledge-border3.svg"),a(0);const B=a(0),d=a(0),x=a(0),E=a(0),ls=a(0),M=a(0),K=a(0),Y=a(0),G=a(0);a(0),a(0);const gs=()=>{if(D.value=!1,G.value>0||F.value<100){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.mining.getMsg")}});return}i.dispatch("user/xplanChangeAni",!0),g.value=!0},ps=async()=>{if(console.log(F.value,"progress.value"),console.log(G.value,"myTime"),D.value=!1,G.value>0||F.value<100){i.dispatch("staking/stakingState",{show:!0,info:{state:1,haveCTY:M.value}}),i.dispatch("user/xplanChangeAni",!0);return}i.dispatch("user/xplanChangeAni",!0),g.value=!0},cs=async e=>{if(D.value=!0,e==1){i.dispatch("staking/stakingState",{show:!0,info:{state:2,haveCTY:M.value}}),i.dispatch("user/xplanChangeAni",!0);return}!Number(d.value)||(i.dispatch("user/xplanChangeAni",!0),g.value=!0)},D=a(!1),ds=e=>{e===2?D.value=!0:D.value=!1,i.dispatch("user/xplanChangeAni",!0),T.value=!0},j=async()=>{P.value=await u.getTotalSupply(_.abi,_.address),M.value=await u.ERC20balanceOf(S.abi,S.address),console.log(M.value,"mycoin"),K.value=await u.getBalanceOf(_.abi,_.address),console.log(K.value,"myStakCyt.value");let e=await u.DaysRemaining(_.abi,_.address,3);B.value=e.earned,x.value=Number(e.rewardPerToken),G.value=e.result.toFixed(2),console.log(e,"DaysResult"),console.log(G.value,"myTime.value");let n=await u.progress(_.abi,_.address);F.value=n.progressVal,H.value=n.finishGetNFT,console.log(F.value,H.value,"progress.value,finishGetNFT.value"),ns(K.value/P.value*100,2)},Q=async()=>{r.value=await u.getTotalSupply(v.abi,v.address),Y.value=await u.getBalanceOf(v.abi,v.address),console.log(Y.value,"myStakCytCoin.value");let e=await u.DaysRemainingCoin(v.abi,v.address);d.value=e.earned,E.value=Number(e.rewardPerToken),console.log(e,"DaysResultCoin")},ns=(e,n)=>!e||!n?0:(Math.floor(e*Math.pow(10,n))/100).toFixed(n);return J(async()=>{setTimeout(()=>{if(y.value!=43113){I.value=!0;return}j(),Q()},1e3),window.scrollTo(0,0)}),(e,n)=>{const fs=vs("header-a"),$s=vs("footer-a");return f(),A(as,null,[_s(fs,{path:"/mining",type:1}),s("div",Ie,[s("div",Re,[s("div",Be,[s("div",xe,t(e.$t("message.mining.title")),1),s("div",De,t(e.$t("message.mining.subtitle")),1)]),s("div",Oe,[ze,s("div",He,[s("div",Pe,[s("div",Ee,t(e.$t("message.mining.pool_amount")),1),Me])])])]),s("div",Ye,[s("div",Ge,[s("div",Xe,[z(t(e.$t("message.mining.mycyt"))+" ",1),s("span",null,t(ls.value),1)]),s("div",Le,t(e.$t("message.mining.getcyt")),1)]),Ke,s("div",je,[s("div",Qe,[z(t(e.$t("message.mining.mycoin"))+" ",1),s("span",null,t(M.value),1)]),We])]),s("div",Ze,[s("div",Ue,[s("ul",null,[s("li",null,[s("div",qe,t(e.$t("message.mining.total_staked")),1),s("div",Je,t(P.value),1)]),s("li",null,[s("div",Ve,t(e.$t("message.mining.percyt_earn")),1),s("div",st,t(x.value.toFixed(6))+"/s",1)]),s("li",null,[s("div",et,t(e.$t("message.mining.your_staked")),1),s("div",tt,t(K.value),1)])]),s("div",{class:"btns btnfont stake",onClick:ps},t(e.$t("message.mining.Stake_btn")),1),s("div",{class:"btns btnfont",onClick:n[0]||(n[0]=p=>ds(1))},[nt,s("div",at,t(e.$t("message.mining.Cancel")),1)]),s("div",{class:"btns btnfont",onClick:gs},[it,s("div",ot,t(e.$t("message.mining.Harvest_btn")),1)])])]),lt,s("div",ct,[s("div",dt,[s("div",rt,[s("div",ut,[s("div",{style:bs({width:C(F)+"%"})},null,4)]),s("div",vt,[s("div",_t,[z(t(e.$t("message.mining.current_pro"))+"\uFF1A",1),s("span",mt,t(ns(C(F),2))+"%",1)]),s("div",ht,[z(t(e.$t("message.mining.cycle_days"))+": ",1),s("span",null,"30"+t(e.$t("message.mining.day")),1)])])])])]),s("div",gt,[s("div",pt,[s("div",ft,[s("div",$t,[yt,s("div",bt,[s("p",wt,t(e.$t("message.mining.total_lp")),1),s("p",kt,t(r.value),1)])]),s("div",Ct,[s("div",null,[s("div",null,[s("p",null,t(e.$t("message.mining.farms")),1),s("p",null,t(e.$t("message.mining.farms_subtitle")),1)])])])])]),s("div",St,[(f(),A(as,null,us(1,p=>s("div",{class:"item",key:p},[s("div",Tt,[At,Ft,s("div",Nt,[s("div",It,t(e.$t("message.mining.APR")),1),s("div",Rt,t(ns(Y.value/r.value*100,2))+"%",1)]),s("div",Bt,[s("div",xt,t(e.$t("message.mining.your_staked")),1),s("div",Dt,[z(t(Y.value)+" ",1),Ot])]),s("div",zt,[s("div",Ht,t(e.$t("message.mining.rewards_in")),1),s("div",Pt,[s("p",null,[z(t(E.value.toFixed(6))+" COIN ",1),Et])])]),s("div",{class:"table cancelStake btnfont",onClick:n[1]||(n[1]=R=>ds(2))},[Mt,s("div",null,t(e.$t("message.mining.Cancel")),1)])]),s("div",Yt,[s("div",Gt,[s("div",Xt,t(e.$t("message.mining.Earned")),1),s("div",Lt,"\u2248 "+t(d.value),1)]),s("div",{class:"Harvest harvestbtn btnfont",onClick:n[2]||(n[2]=R=>cs(2))},[Kt,s("div",null,t(e.$t("message.mining.Harvest_btn")),1)]),s("div",jt,[s("div",Qt,[s("p",Wt,t(e.$t("message.mining.Staked_cyt")),1),s("div",Zt,t(Y.value),1)]),s("div",{class:"button stakebtn btnfont",onClick:n[3]||(n[3]=R=>cs(1))},t(e.$t("message.mining.Stake_btn")),1)])])])),64))])])]),_s($s),g.value?(f(),ts(Ks,{key:0,ref:(p,R)=>{R.Finished=p,k.value=p},isShowTips:g.value,isCoin:C(D),amount:C(H),onCloseFinshed:n[4]||(n[4]=p=>g.value=!1)},null,8,["isShowTips","isCoin","amount"])):U("",!0),C(T)?(f(),ts(Ne,{key:1,ref:(p,R)=>{R.SelectNFT=p,m.value=p},isShowTips:C(T),isCoin:C(D),onCloseFinshed:n[5]||(n[5]=p=>T.value=!1)},null,8,["isShowTips","isCoin"])):U("",!0),o.value?(f(),ts(de,{key:2,ref:(p,R)=>{R.SelectNFT=p,m.value=p},isShowTips:o.value,onCloseFinshed:n[6]||(n[6]=p=>o.value=!1)},null,8,["isShowTips"])):U("",!0)],64)}}});var qt=W(Ut,[["__scopeId","data-v-546e09f3"]]);const os=l=>(V("data-v-2b1a2420"),l=l(),ss(),l),Jt={class:"container flex_center"},Vt=os(()=>s("div",{class:"cover"},null,-1)),sn=os(()=>s("div",{class:"coverborder"},null,-1)),en={class:"content"},tn={class:"title"},nn={class:"text"},an={class:"reward_chunks flex_centent_center"},on={key:0,class:"item selected"},ln=os(()=>s("div",{class:"chunk"},[s("img",{src:"https://d2cimmz3cflrbm.cloudfront.net/nwStaking/CYTIcon.png",alt:""})],-1)),cn=os(()=>s("p",null,"COIN",-1)),dn=[ln,cn],rn={key:1,class:"item selected"},un=os(()=>s("div",{class:"chunk"},[s("img",{src:"https://cyberpop.mypinata.cloud/ipfs/QmRVeBntXA1wgakGCSD6BpyGyXjTsShqUyb6dNooHXwDEr",alt:""})],-1)),vn=os(()=>s("p",null,"NFT",-1)),_n=[un,vn],mn={class:"btn"},hn={class:"btn-wrap"},gn=Z({props:{isShowTips:Boolean,amount:Number,isCoin:{type:Boolean,default:!1}},emits:["closeFinshed"],setup(l,{expose:_,emit:S}){const v=l,{t:$}=q(),{staking:w,CYTStakingRewards:c}=u.contracts;_({fn:()=>{}});const N=b(()=>{var o;return(o=i.state.myAssets)==null?void 0:o.readyAssets}),h=b(()=>{var o;return(o=i.state.staking)==null?void 0:o.readyAssetsCoin}),I=b(()=>{var o,T;return(T=(o=i)==null?void 0:o.state.user)==null?void 0:T.xplanAni}),k=a(0),g=()=>{i.dispatch("user/xplanChangeAni",!1),setTimeout(()=>{S("closeFinshed")},300)},m=async()=>{if(k.value==0){let o=await u.getReward(c.abi,c.address);if(console.log(o),o==0){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.assets.pop.tran_stop")}});return}i.dispatch("user/showDialog",{show:!0,info:{state:1,txt:$("message.assets.pop.tran_succ")}}),i.dispatch("staking/readyAssetsCoin",h.value+1),g()}else{let o=await u.getNFT(w.abi,w.address,v.amount);if(console.log(o),o==0){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.assets.pop.tran_stop")}});return}i.dispatch("user/showDialog",{show:!0,info:{state:1,txt:$("message.assets.pop.tran_succ")}}),i.dispatch("myAssets/dataSumSearch",{flag:N.value+1}),g()}};return J(()=>{console.log(v)}),(o,T)=>(f(),A("div",Jt,[s("div",{class:L(["mask",l.isShowTips&&(C(I)?"bounceShow":"bounceHide")])},[Vt,sn,s("img",{class:"close",src:rs,alt:"",onClick:g}),s("div",en,[s("div",tn,t(o.$t("message.mining.finish.finished")),1),s("div",nn,t(o.$t("message.mining.finish.text")),1),s("div",an,[l.isCoin?(f(),A("div",on,dn)):(f(),A("div",rn,_n))]),s("div",mn,[s("div",hn,[s("div",{class:"CONFIRM",onClick:m},t(o.$t("message.mining.finish.btn")),1)])])])],2)]))}});var pn=W(gn,[["__scopeId","data-v-2b1a2420"]]);const ks=l=>(V("data-v-13bb2de4"),l=l(),ss(),l),fn={class:"title"},$n={key:0},yn={class:"thead"},bn={class:"name"},wn={class:"id"},kn={class:"HashRate"},Cn={class:"Operate"},Sn={class:"tbody"},Tn=ks(()=>s("div",{class:"name flex_align_center"},[s("img",{src:"https://cyberpop.mypinata.cloud/ipfs/QmPx82XhgdmkgEy1C8t2zivFZfySn7krCv3wSdfLeKwZfS",alt:""}),s("span",null,"Kakulupia")],-1)),An={class:"id"},Fn=ks(()=>s("div",{class:"HashRate"},"HashRate",-1)),Nn={class:"Operate"},In={class:"stak"},Rn=Z({props:{isShowTips:Boolean},emits:["closeFinshed"],setup(l,{expose:_,emit:S}){const v=l;q(),_({fn:()=>{}}),b(()=>{var h;return(h=i.state.myAssets)==null?void 0:h.readyAssets});const w=b(()=>{var h,I;return(I=(h=i)==null?void 0:h.state.user)==null?void 0:I.xplanAni});a(0);const c=()=>{i.dispatch("user/xplanChangeAni",!1),setTimeout(()=>{S("closeFinshed")},300)},y=a(null),N=h=>{y.value.contains(h.target)||c()};return ws(()=>{window.removeEventListener("click",N,!0)}),J(()=>{window.addEventListener("click",N,!0),console.log(v)}),(h,I)=>(f(),A("div",{class:L(["container",l.isShowTips&&(C(w)?"bounceShow":"bounceHide")])},[s("div",{class:"content",ref:(k,g)=>{g.cursor=k,y.value=k}},[s("div",fn,t(h.$t("message.mining.selectNFT.title")),1),(f(),A("table",$n,[s("thead",null,[s("div",yn,[s("div",bn,t(h.$t("message.mining.selectNFT.name")),1),s("div",wn,t(h.$t("message.mining.selectNFT.id")),1),s("div",kn,t(h.$t("message.mining.selectNFT.hashRate")),1),s("div",Cn,t(h.$t("message.mining.selectNFT.operate")),1)])]),s("div",Sn,[(f(),A(as,null,us(6,k=>s("div",{class:"item flex_align_center",key:k},[Tn,s("div",An,t(k),1),Fn,s("div",Nn,[s("div",In,t(h.$t("message.mining.STAKE")),1)])])),64))])]))],512)],2))}});var Bn=W(Rn,[["__scopeId","data-v-13bb2de4"]]);const Cs=l=>(V("data-v-1b5764d0"),l=l(),ss(),l),xn={class:"title"},Dn={class:"chunks"},On={class:"withdraw_wrap"},zn=["value"],Hn={class:"right"},Pn={class:"balance"},En={class:"icon"},Mn=Cs(()=>s("div",{class:"bull flex_align_center"},[s("div"),s("div")],-1)),Yn={key:0,class:"errmsg"},Gn={key:1,class:"errmsg"},Xn={class:"tips flex_align_center"},Ln=Cs(()=>s("img",{src:"https://d2cimmz3cflrbm.cloudfront.net/nwStaking/stakin13.png",alt:""},null,-1)),Kn={class:"texts"},jn={class:"btn"},Qn={class:"btn-wrap"},Wn=Z({props:{isShowTips:Boolean,isCoin:{type:Boolean,default:!1}},emits:["closeFinshed"],setup(l,{expose:_,emit:S}){const v=l;q();const{staking:$,CYTStakingRewards:w}=u.contracts,c=a(0);_({fn:()=>{}});const N=b(()=>{var d;return(d=i.state.myAssets)==null?void 0:d.readyAssets}),h=b(()=>{var d;return(d=i.state.staking)==null?void 0:d.readyAssetsCoin}),I=b(()=>{var d,x;return(x=(d=i)==null?void 0:d.state.user)==null?void 0:x.xplanAni}),k=a(0),g=()=>{i.dispatch("user/xplanChangeAni",!1),setTimeout(()=>{S("closeFinshed")},300)};let m=a(1);const o=a(""),T=d=>{console.log(d.target.value,c.value);let x=/^[0-9]+$/;m.value=d.target.value,!d.target.value||!x.test(m.value)||Number(m.value)>Number(c.value)?o.value="error":o.value=""},F=()=>{Number(c.value)?m.value=c.value:m.value=0,o.value=""},H=async()=>{if(console.log(c.value,"myStakCyt.vlaue"),!(o.value=="error"||!Number(c.value))){if(v.isCoin){let d=await u.withdraw(w.abi,w.address,m.value);i.dispatch("staking/readyAssetsCoin",h.value+1),console.log(d)}else{let d=await u.withdraw($.abi,$.address,m.value);i.dispatch("myAssets/dataSumSearch",{flag:N.value+1}),console.log(d)}g()}},P=async()=>{if(v.isCoin){c.value=await u.getBalanceOf(w.abi,w.address),Number(c.value)||(m.value=0),console.log(c.value,"myStakCyt.value");return}c.value=await u.getBalanceOf($.abi,$.address),console.log(c.value,"myStakCyt.value"),Number(c.value)||(m.value=0)},r=a(null),B=d=>{r.value.contains(d.target)||g()};return ws(()=>{window.removeEventListener("click",B,!0)}),J(()=>{window.addEventListener("click",B,!0),P()}),(d,x)=>(f(),A("div",null,[s("div",{class:L(["popup",l.isShowTips&&(C(I)?"bounceShow":"bounceHide")])},[s("div",{class:"content",ref:(E,ls)=>{ls.cursor=E,r.value=E}},[s("div",xn,t(d.$t("message.mining.cancel.unstake")),1),s("div",Dn,[s("div",On,[s("div",{class:L(["withdraw flex_between_center",{select:k.value==0}]),onClick:x[1]||(x[1]=E=>k.value=0)},[s("div",{class:L(["left",o.value=="error"?"error":""])},[s("p",null,t(d.$t("message.mining.cancel.will_withdraw")),1),s("input",{id:"inputNum",type:"text",onInput:x[0]||(x[0]=E=>T(E)),value:C(m)},null,40,zn)],2),s("div",Hn,[s("div",Pn,t(d.$t("message.mining.cancel.balance"))+":"+t(c.value),1),s("div",En,[s("div",{class:"max",onClick:F},t(d.$t("message.mining.cancel.max")),1),Mn])])],2),Number(c.value)?U("",!0):(f(),A("div",Yn,t(d.$t("message.mining.cancel.tips")),1)),Number(c.value)&&o.value=="error"?(f(),A("div",Gn,t(d.$t("message.assets.pop.tips_err")),1)):U("",!0)]),s("div",Xn,[Ln,s("div",Kn,t(d.$t("message.mining.cancel.warn_tips")),1)])]),s("div",jn,[s("div",Qn,[s("div",{class:"CONFIRM",onClick:H},t(d.$t("message.mining.cancel.btn")),1)])])],512)],2)]))}});var Zn=W(Wn,[["__scopeId","data-v-1b5764d0"]]);const X=l=>(V("data-v-9b71fbd6"),l=l(),ss(),l),Un={class:"mining"},qn={class:"banner"},Jn={class:"titles"},Vn={class:"title"},sa={class:"subtitle"},ea={class:"total"},ta=X(()=>s("div",{class:"progressBall"},[s("img",{class:"ballBorder",src:"https://d2cimmz3cflrbm.cloudfront.net/nwminingPhone/ballBorder.svg",alt:""}),s("div",{class:"ball-inner"})],-1)),na={class:"right"},aa={class:"right_content"},ia={class:"total-title"},oa=X(()=>s("div",{class:"price"},"-- --",-1)),la={class:"myAssets"},ca={class:"myAssets-wrap"},da={class:"item1"},ra={class:"left"},ua=X(()=>s("br",null,null,-1)),va={class:"button"},_a=X(()=>s("div",{class:"line"},null,-1)),ma={class:"item2"},ha={class:"left"},ga=X(()=>s("br",null,null,-1)),pa={class:"Operation"},fa={class:"owrap"},$a={class:"txt"},ya={class:"number"},ba={class:"txt"},wa={class:"number"},ka={class:"txt"},Ca={class:"number"},Sa=X(()=>s("div",{class:"more"},[s("img",{src:"https://d2cimmz3cflrbm.cloudfront.net/nwStaking/stakin2.png",alt:""})],-1)),Ta={class:"days"},Aa={class:"title"},Fa={class:"total_day"},Na={class:"content flex_align_center"},Ia={class:"total_day"},Ra={class:"white"},Ba={class:"farms"},xa={class:"background"},Da={class:"title"},Oa={class:"texts flex_align_center"},za=X(()=>s("div",{class:"texts-img"},null,-1)),Ha={class:"texts-info"},Pa={class:"content"},Ea=X(()=>s("div",{class:"top flex_align_center"},[s("div",{class:"top_element1"}),s("div",{class:"top_element2"}),s("div",{class:"title"},"COIN")],-1)),Ma={class:"middle"},Ya={class:"table"},Ga={class:"title"},Xa={class:"desc"},La={class:"table top_element5"},Ka={class:"title"},ja={class:"desc"},Qa=X(()=>s("span",null,"/s",-1)),Wa={class:"table"},Za={class:"title"},Ua={class:"desc"},qa=X(()=>s("span",{class:"tag"},"COIN",-1)),Ja={class:"bottom"},Va={class:"bottom-item flex_between_center"},si={class:"table bottom_element2"},ei={class:"title"},ti={class:"desc"},ni=X(()=>s("div",{class:"line"},null,-1)),ai={class:"bottom-item flex_between_center"},ii={class:"table staked"},oi={class:"title"},li={class:"desc"},ci=Z({setup(l){const{staking:_,cytV2:S,CYTStakingRewards:v}=u.contracts,{t:$,locale:w}=q();ys();const c=b(()=>{var e,n;return(n=(e=i)==null?void 0:e.state.wallet)==null?void 0:n.realId}),y=b(()=>{var e;return(e=i.state.user)==null?void 0:e.chainId}),N=b(()=>{var e;return(e=i.state.myAssets)==null?void 0:e.readyAssets}),h=b(()=>{var e;return(e=i.state.staking)==null?void 0:e.readyAssetsCoin});es(N,(e,n)=>{console.log(e,n,"readyAssetsF"),!(e<=0||n==-1)&&(j(),console.log("her1"))},{immediate:!0,deep:!0});const I=a(!1);es(h,(e,n)=>{console.log(e,n,"readyAssetsCoin"),!!I.value&&(Q(),console.log("her3"))},{immediate:!0,deep:!0}),es(y,(e,n)=>{if(console.log(e,n,"newVal"),console.log(!n),e!=43113){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.mining.chainId_msg")}});return}!I.value||(j(),Q(),console.log("her2"))},{immediate:!0,deep:!0}),es(c,(e,n)=>{console.log(e,n,"realId"),!(!n||n==-1)&&(j(),Q(),console.log("her3"))},{immediate:!0,deep:!0});const k=a(null),g=a(!1);console.log(k,"Finished");const m=a(null),o=a(!1),T=a(!1),F=a(0),H=a(0),P=a(0),r=a(0);a("https://d2cimmz3cflrbm.cloudfront.net/nwminingPhone/whiteImg.png"),a("https://d2cimmz3cflrbm.cloudfront.net/nwminingPhone/whiteImg.png"),a("https://d2cimmz3cflrbm.cloudfront.net/nwminingPhone/locked.svg"),a("https://d2cimmz3cflrbm.cloudfront.net/nwminingPhone/pledge-border1.svg"),a("https://d2cimmz3cflrbm.cloudfront.net/nwminingPhone/pledge-border2.svg"),a("https://d2cimmz3cflrbm.cloudfront.net/nwminingPhone/pledge-border3.svg"),a(0);const B=a(0),d=a(0),x=a(0),E=a(0),ls=a(0),M=a(0),K=a(0),Y=a(0),G=a(0);a(0),a(0);const gs=()=>{if(D.value=!1,G.value>0||F.value<100){i.dispatch("user/showDialog",{show:!0,info:{state:0,txt:$("message.mining.getMsg")}});return}i.dispatch("user/xplanChangeAni",!0),g.value=!0},ps=async()=>{if(console.log(F.value,"progress.value"),console.log(G.value,"myTime"),D.value=!1,G.value>0||F.value<100){i.dispatch("staking/stakingState",{show:!0,info:{state:1,haveCTY:M.value}}),i.dispatch("user/xplanChangeAni",!0);return}i.dispatch("user/xplanChangeAni",!0),g.value=!0},cs=async e=>{if(D.value=!0,e==1){i.dispatch("staking/stakingState",{show:!0,info:{state:2,haveCTY:M.value}}),i.dispatch("user/xplanChangeAni",!0);return}!Number(d.value)||(i.dispatch("user/xplanChangeAni",!0),g.value=!0)},D=a(!1),ds=e=>{e===2?D.value=!0:D.value=!1,i.dispatch("user/xplanChangeAni",!0),T.value=!0},j=async()=>{P.value=await u.getTotalSupply(_.abi,_.address),M.value=await u.ERC20balanceOf(S.abi,S.address),console.log(M,"mycoin"),K.value=await u.getBalanceOf(_.abi,_.address),console.log(K.value,"myStakCyt.value");let e=await u.DaysRemaining(_.abi,_.address,3);console.log(e,"DaysResult"),B.value=e.earned,x.value=Number(e.rewardPerToken),G.value=e.result.toFixed(2),console.log(G.value,"myTime.value");let n=await u.progress(_.abi,_.address);F.value=n.progressVal,H.value=n.finishGetNFT,console.log(F.value,H.value,"progress.value,finishGetNFT.value"),ns(K.value/P.value*100,2)},Q=async()=>{r.value=await u.getTotalSupply(v.abi,v.address),Y.value=await u.getBalanceOf(v.abi,v.address),console.log(Y.value,"myStakCytCoin.value");let e=await u.DaysRemainingCoin(v.abi,v.address);console.log(e,"DaysResult"),d.value=e.earned,E.value=Number(e.rewardPerToken),console.log(e,"DaysRemainingCoin")},ns=(e,n)=>!e||!n?0:(Math.floor(e*Math.pow(10,n))/100).toFixed(n);return J(async()=>{setTimeout(()=>{if(y.value!=43113){I.value=!0;return}j(),Q()},1e3),window.scrollTo(0,0),i.dispatch("user/showDialog",{show:!1,info:{}})}),(e,n)=>{const fs=vs("header-b"),$s=vs("footer-b");return f(),A(as,null,[_s(fs,{path:"/mining",type:1}),s("div",Un,[s("div",qn,[s("div",Jn,[s("div",Vn,t(e.$t("message.mining.title")),1),s("div",sa,t(e.$t("message.mining.subtitle")),1)])]),s("div",ea,[ta,s("div",na,[s("div",aa,[s("div",ia,t(e.$t("message.mining.pool_amount")),1),oa])])]),s("div",la,[s("div",ca,[s("div",da,[s("div",ra,[z(t(e.$t("message.mining.mycyt"))+" ",1),ua,s("span",null,t(ls.value),1)]),s("div",va,t(e.$t("message.mining.getcyt")),1)]),_a,s("div",ma,[s("div",ha,[z(t(e.$t("message.mining.mycoin"))+" ",1),ga,s("span",null,t(M.value),1)])])])]),s("div",pa,[s("div",fa,[s("ul",null,[s("li",null,[s("div",$a,t(e.$t("message.mining.total_staked")),1),s("div",ya,t(P.value),1)]),s("li",null,[s("div",ba,t(e.$t("message.mining.percyt_earn")),1),s("div",wa,t(x.value.toFixed(6))+"/s",1)]),s("li",null,[s("div",ka,t(e.$t("message.mining.your_staked")),1),s("div",Ca,t(K.value),1)])]),s("div",{class:"btns btnfont stake",onClick:ps},t(e.$t("message.mining.Stake_btn")),1),s("div",{class:"btns btnfont",onClick:n[0]||(n[0]=p=>ds(1))},t(e.$t("message.mining.Cancel")),1),s("div",{class:"btns btnfont",onClick:gs},t(e.$t("message.mining.Harvest_btn")),1)])]),Sa,s("div",Ta,[s("div",Aa,t(e.$t("message.mining.Days")),1),s("div",Fa,[z(t(e.$t("message.mining.cycle_days"))+": ",1),s("span",null,"30"+t(e.$t("message.mining.day")),1)]),s("div",Na,[s("div",{style:bs({width:C(F)+"%"})},null,4)]),s("div",Ia,[z(t(e.$t("message.mining.current_pro"))+"\uFF1A",1),s("span",Ra,t(ns(C(F),2))+"%",1)])]),s("div",Ba,[s("div",xa,[s("div",Da,[s("p",null,t(e.$t("message.mining.farms")),1),s("p",null,t(e.$t("message.mining.farms_subtitle")),1)]),s("div",Oa,[za,s("div",Ha,[s("p",null,t(e.$t("message.mining.total_lp")),1),s("p",null,t(r.value),1)])])]),s("div",Pa,[(f(),A(as,null,us(1,p=>s("div",{class:"item",key:p},[Ea,s("div",Ma,[s("div",Ya,[s("div",Ga,t(e.$t("message.mining.APR")),1),s("div",Xa,t(ns(Y.value/r.value*100,2))+"%",1)]),s("div",La,[s("div",Ka,t(e.$t("message.mining.rewards_in")),1),s("div",ja,[s("p",null,[z(t(E.value.toFixed(6))+" COIN ",1),Qa])])]),s("div",Wa,[s("div",Za,t(e.$t("message.mining.your_staked")),1),s("div",Ua,[z(t(Y.value)+" ",1),qa])]),s("div",{class:"table cancelStake btnfont",onClick:n[1]||(n[1]=R=>ds(2))},t(e.$t("message.mining.Cancel")),1)]),s("div",Ja,[s("div",Va,[s("div",si,[s("div",ei,t(e.$t("message.mining.Harvest_cyt"))+" \u2248 $0",1),s("div",ti,t(d.value),1)]),s("div",{class:"harvest btnfont",onClick:n[2]||(n[2]=R=>cs(2))},t(e.$t("message.mining.Harvest_btn")),1)]),ni,s("div",ai,[s("div",ii,[s("p",oi,t(e.$t("message.mining.Staked_cyt")),1),s("div",li,t(Y.value),1)]),s("div",{class:"stake btnfont",onClick:n[3]||(n[3]=R=>cs(1))},t(e.$t("message.mining.Stake_btn")),1)])])])),64))])])]),_s($s),g.value?(f(),ts(pn,{key:0,ref:(p,R)=>{R.Finished=p,k.value=p},isShowTips:g.value,isCoin:C(D),amount:C(H),onCloseFinshed:n[4]||(n[4]=p=>g.value=!1)},null,8,["isShowTips","isCoin","amount"])):U("",!0),C(T)?(f(),ts(Zn,{key:1,ref:(p,R)=>{R.SelectNFT=p,m.value=p},isShowTips:C(T),isCoin:C(D),onCloseFinshed:n[5]||(n[5]=p=>T.value=!1)},null,8,["isShowTips","isCoin"])):U("",!0),o.value?(f(),ts(Bn,{key:2,ref:(p,R)=>{R.SelectNFT=p,m.value=p},isShowTips:o.value,onCloseFinshed:n[6]||(n[6]=p=>o.value=!1)},null,8,["isShowTips"])):U("",!0)],64)}}});var di=W(ci,[["__scopeId","data-v-9b71fbd6"]]);const ri=Z({setup(l){const _=b(()=>{var S;return((S=i.state.sys)==null?void 0:S.innerWidth)||0});return(S,v)=>C(_)>1025?(f(),ts(qt,{key:0})):(f(),ts(di,{key:1}))}});var _i=W(ri,[["__scopeId","data-v-4b9dd146"]]);export{_i as default};
